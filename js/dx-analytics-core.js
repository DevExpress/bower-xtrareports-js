/**
* DevExpress HTML/JS Analytics Core (dx-analytics-core.js)
* Version: 18.2.9
* Build date: 2019-06-04
* Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED
* License: https://www.devexpress.com/Support/EULAs/NetComponents.xml
*/

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function _defineProperty(legacyObject, realObject, propertyName) {
                delete legacyObject[propertyName];
                Object.defineProperty(legacyObject, propertyName, {
                    get: function () { return realObject[propertyName]; },
                    set: function (newVal) { realObject[propertyName] = newVal; },
                    configurable: true
                });
            }
            Internal._defineProperty = _defineProperty;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var Disposable = (function () {
                function Disposable() {
                    this._disposables = [];
                    this.isDisposing = false;
                }
                Disposable.prototype.disposeObservableArray = function (array) {
                    if (array) {
                        array().forEach(function (item) { item.dispose && item.dispose(); });
                    }
                };
                Disposable.prototype.resetObservableArray = function (array) {
                    if (array)
                        array([]);
                };
                Disposable.prototype.disposeArray = function (array) {
                    if (array) {
                        array.forEach(function (item) { item.dispose && item.dispose(); });
                        array.splice(0, array.length);
                    }
                };
                Disposable.prototype.dispose = function () {
                    if (!this.isDisposing) {
                        this.isDisposing = true;
                        this._disposables.reverse().forEach(function (x) { return x && x.dispose && x.dispose(); });
                        this._disposables = [];
                    }
                };
                Disposable.prototype.removeProperties = function () {
                    var _this = this;
                    Object.keys(this).forEach(function (propertyName) {
                        delete _this[propertyName];
                    });
                };
                return Disposable;
            }());
            Utils.Disposable = Disposable;
            function deserializeArray(model, creator) {
                var result = [];
                getPropertyValues(model).forEach(function (item) {
                    var createdItem = creator(item);
                    result.push(createdItem);
                });
                return ko.observableArray(result);
            }
            Utils.deserializeArray = deserializeArray;
            function toStringWithDelimiter(values, delimiter) {
                return (values || []).map(function (value) {
                    var str = value !== undefined && value !== null ? value.toString() : "00";
                    if (str.length === 1) {
                        str = "0" + str;
                    }
                    return str;
                }).join(delimiter);
            }
            function serializeDate(date) {
                var datePart = [date.getMonth() + 1, date.getDate(), date.getFullYear()];
                var timePart = toStringWithDelimiter([date.getHours(), date.getMinutes(), date.getSeconds()], ":");
                return timePart === "00:00:00" ? toStringWithDelimiter([datePart[2], datePart[0], datePart[1]], "-")
                    : toStringWithDelimiter(datePart, "/") + " " + timePart;
            }
            Utils.serializeDate = serializeDate;
            function knockoutArrayWrapper(items) {
                var onChange = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    onChange[_i - 1] = arguments[_i];
                }
                var array = ko.observableArray(items);
                var notifySubscribers = array.notifySubscribers;
                array.notifySubscribers = function (valueToNotify, event) {
                    if (onChange) {
                        for (var i = 0, len = onChange.length; i < len; i++) {
                            onChange[i](valueToNotify, event);
                        }
                    }
                    return notifySubscribers.call(array, valueToNotify, event);
                };
                return array;
            }
            Utils.knockoutArrayWrapper = knockoutArrayWrapper;
            function isWindow(obj) {
                return obj != null && obj === obj.window;
            }
            var class2type = {};
            var hasOwn = class2type.hasOwnProperty;
            ["Boolean", "Number", "String", "Function", "Array", "Date", "RegExp", "Object", "Error"].forEach(function (name) { return class2type["[object " + name + "]"] = name.toLowerCase(); });
            function type(obj) {
                if (obj == null) {
                    return obj + "";
                }
                return typeof obj === "object" || typeof obj === "function" ?
                    class2type[class2type.toString.call(obj)] || "object" :
                    typeof obj;
            }
            function isNumeric(obj) {
                return !Array.isArray(obj) && (obj - parseFloat(obj) + 1) >= 0;
            }
            function isPlainObject(obj) {
                if (type(obj) !== "object" || obj.nodeType || isWindow(obj)) {
                    return false;
                }
                return !(obj.constructor && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf"));
            }
            Utils.isPlainObject = isPlainObject;
            function isEmptyObject(obj) {
                if ((typeof obj) === "string") {
                    return false;
                }
                for (var name in obj) {
                    return false;
                }
                return true;
            }
            Utils.isEmptyObject = isEmptyObject;
            function isFunction(obj) {
                return type(obj) === "function";
            }
            function extend(target, object1) {
                var objectN = [];
                for (var _i = 2; _i < arguments.length; _i++) {
                    objectN[_i - 2] = arguments[_i];
                }
                var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;
                if (typeof target === "boolean") {
                    deep = target;
                    target = arguments[i] || {};
                    i++;
                }
                if (typeof target !== "object" && !isFunction(target)) {
                    target = {};
                }
                if (i === length) {
                    target = this;
                    i--;
                }
                for (; i < length; i++) {
                    if ((options = arguments[i]) != null) {
                        for (name in options) {
                            src = target[name];
                            copy = options[name];
                            if (target === copy) {
                                continue;
                            }
                            if (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {
                                if (copyIsArray) {
                                    copyIsArray = false;
                                    clone = src && Array.isArray(src) ? src : [];
                                }
                                else {
                                    clone = src && isPlainObject(src) ? src : {};
                                }
                                target[name] = extend(deep, clone, copy);
                            }
                            else if (copy !== undefined) {
                                target[name] = copy;
                            }
                        }
                    }
                }
                return target;
            }
            Utils.extend = extend;
            ;
            function getPropertyValues(target) {
                if (target === void 0) { target = {}; }
                var result = [];
                for (var propertyName in target) {
                    result.push(target[propertyName]);
                }
                return result;
            }
            Utils.getPropertyValues = getPropertyValues;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var ModelSerializer = (function () {
                function ModelSerializer(options) {
                    this._refTable = {};
                    this._linkTable = {};
                    this._options = Utils.extend({
                        useRefs: true,
                        serializeDate: Utils.serializeDate
                    }, options);
                }
                ModelSerializer.prototype.linkObjects = function () {
                    for (var index in this._linkTable) {
                        var val = this._refTable[index];
                        if (val) {
                            var properties = this._linkTable[index];
                            properties.forEach(function (property) { return property(val); });
                        }
                    }
                    ;
                };
                ModelSerializer.prototype.deserializeProperty = function (modelPropertyInfo, model) {
                    var _this = this;
                    var modelValue = modelPropertyInfo.defaultVal, propertyName = modelPropertyInfo.propertyName, propName = modelPropertyInfo.modelName;
                    if (!propName) {
                        return;
                    }
                    if (model[propName] !== undefined) {
                        modelValue = model[propName];
                    }
                    if (typeof modelPropertyInfo === "string") {
                        return ko.observable(modelValue);
                    }
                    else if (modelPropertyInfo.link) {
                        var value = ko.observable(null);
                        if (modelValue) {
                            var refVal = modelValue && modelValue.slice("#Ref-".length);
                            this._linkTable[refVal] = this._linkTable[refVal] || [];
                            this._linkTable[refVal].push(value);
                        }
                        return value;
                    }
                    else if (modelPropertyInfo.array) {
                        if (modelPropertyInfo.from) {
                            return modelPropertyInfo.from(modelValue, this);
                        }
                        else if (modelPropertyInfo.info) {
                            var result = [];
                            Utils.getPropertyValues(modelValue).forEach(function (item) {
                                var object = { getInfo: function () { return modelPropertyInfo.info; } };
                                _this.deserialize(object, item || {});
                                result.push(object);
                            });
                            return ko.observableArray(result);
                        }
                    }
                    else if (modelPropertyInfo.from) {
                        return modelPropertyInfo.from(modelValue, this);
                    }
                    else if (modelPropertyInfo.type) {
                        var ctorResult = new modelPropertyInfo.type(modelValue, this, modelPropertyInfo.info);
                        if (!ctorResult._model) {
                            this.deserialize(ctorResult, modelValue || {}, modelPropertyInfo.info);
                        }
                        return ctorResult;
                    }
                    else if (modelPropertyInfo.info) {
                        var object = { getInfo: function () { return modelPropertyInfo.info; } };
                        this.deserialize(object, modelValue || {});
                        return object;
                    }
                    else if (modelPropertyInfo.modelName) {
                        return ko.observable(modelValue);
                    }
                    else {
                        throw new Error("Invalid info '" + JSON.stringify(modelPropertyInfo) + "'");
                    }
                };
                ModelSerializer.prototype.deserialize = function (viewModel, model, serializationsInfo) {
                    var _this = this;
                    if (serializationsInfo === void 0) { serializationsInfo = null; }
                    if (!model) {
                        return;
                    }
                    viewModel._model = Utils.extend({}, model);
                    var serializationsInfo = viewModel.getInfo ? viewModel.getInfo() : serializationsInfo;
                    var refValue = model["@Ref"];
                    if (refValue) {
                        this._refTable[refValue] = viewModel;
                    }
                    serializationsInfo.forEach(function (modelPropertyInfo) {
                        var propertyName = modelPropertyInfo.propertyName, propName = modelPropertyInfo.modelName;
                        if (model[propName] !== undefined) {
                            delete viewModel._model[propName];
                        }
                        var property = _this.deserializeProperty(modelPropertyInfo, model);
                        if (property !== undefined)
                            viewModel[propertyName] = property;
                    });
                    this.linkObjects();
                };
                ModelSerializer.prototype.serialize = function (viewModel, serializationsInfo, refs) {
                    if (refs === void 0) { refs = null; }
                    if (!serializationsInfo && !refs) {
                        return this._serialize(viewModel, null, null);
                    }
                    return this._serialize(viewModel, serializationsInfo, refs);
                };
                ModelSerializer.prototype._isSerializableValue = function (resultValue) {
                    return (Utils.isPlainObject(resultValue) && !Utils.isEmptyObject(resultValue)) || (Array.isArray(resultValue) && resultValue["length"] > 0) || (!Array.isArray(resultValue) && !Utils.isPlainObject(resultValue));
                };
                ModelSerializer.prototype._serialize = function (viewModel, serializationsInfo, refs) {
                    var _this = this;
                    var result = Utils.extend({}, viewModel._model), isInitial = refs === null;
                    refs = refs || { linkObjTable: [], objects: [] };
                    serializationsInfo = viewModel.getInfo ? viewModel.getInfo() : serializationsInfo;
                    delete result["@Ref"];
                    if (viewModel["isEmpty"] && viewModel["isEmpty"]())
                        return {};
                    serializationsInfo.forEach(function (modelPropertyInfo) {
                        var propertyName = modelPropertyInfo.propertyName, value = ko.unwrap(viewModel["_" + propertyName] || viewModel[propertyName]), defaultVal = modelPropertyInfo.defaultVal;
                        if (modelPropertyInfo.beforeSerialize)
                            value = modelPropertyInfo.beforeSerialize(value);
                        if (!!modelPropertyInfo.from) {
                            defaultVal = ko.unwrap(modelPropertyInfo.from(defaultVal, _this));
                        }
                        var resultValue = {};
                        if (!modelPropertyInfo.modelName) {
                            return;
                        }
                        if (modelPropertyInfo.alwaysSerialize || ((value !== undefined && value !== null) && ((Utils.isPlainObject(value) || !Utils.isEmptyObject(value)) || (Array.isArray(value) && value.length > 0) || (!Array.isArray(value) && !Utils.isPlainObject(value))) && (value !== defaultVal))) {
                            if (modelPropertyInfo.link) {
                                refs.linkObjTable.push({
                                    obj: value,
                                    setRef: function (index) {
                                        if (index < 0) {
                                            delete result[modelPropertyInfo.modelName];
                                        }
                                        else {
                                            result[modelPropertyInfo.modelName] = "#Ref-" + index;
                                        }
                                    }
                                });
                                resultValue = undefined;
                            }
                            else if (modelPropertyInfo.array) {
                                resultValue = {};
                                var index = 1;
                                value.forEach(function (item) {
                                    var info = modelPropertyInfo.info || null;
                                    var item_ = _this._serialize(item, info, refs);
                                    if (_this._isSerializableValue(item_)) {
                                        resultValue["Item" + index] = item_;
                                        if (_this._options.useRefs) {
                                            item_["@Ref"] = (refs.objects.push(item) - 1).toString();
                                        }
                                        index++;
                                    }
                                });
                            }
                            else if (modelPropertyInfo.from) {
                                if (value["isEmpty"] && value["isEmpty"]()) {
                                    resultValue = {};
                                }
                                else {
                                    resultValue = modelPropertyInfo.toJsonObject ? modelPropertyInfo.toJsonObject(value, _this, refs) : value.toString();
                                }
                            }
                            else if (modelPropertyInfo.info || value["getInfo"]) {
                                resultValue = _this._serialize(value, modelPropertyInfo.info, refs);
                            }
                            else if (modelPropertyInfo.modelName) {
                                if (value instanceof Date) {
                                    resultValue = _this._options.serializeDate(value);
                                }
                                else {
                                    resultValue = value;
                                }
                            }
                            else {
                                throw new Error("Invalid info '" + serializationsInfo.stringify() + "'");
                            }
                            if (modelPropertyInfo.alwaysSerialize || _this._isSerializableValue(resultValue)) {
                                result[modelPropertyInfo.modelName] = resultValue;
                            }
                        }
                    });
                    if (isInitial) {
                        refs.linkObjTable.forEach(function (item) {
                            var refValue = refs.objects.indexOf(item.obj);
                            item.setRef(refValue);
                        });
                    }
                    return result;
                };
                return ModelSerializer;
            }());
            Utils.ModelSerializer = ModelSerializer;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Utils;
        (function (Utils) {
            Utils.deserializeArray = DevExpress.Analytics.Utils.deserializeArray;
            var ModelSerializer = (function (_super) {
                __extends(ModelSerializer, _super);
                function ModelSerializer() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ModelSerializer;
            }(DevExpress.Analytics.Utils.ModelSerializer));
            Utils.ModelSerializer = ModelSerializer;
            Utils.serializeDate = DevExpress.Analytics.Utils.serializeDate;
            Utils.extend = DevExpress.Analytics.Utils.extend;
            Utils.isPlainObject = DevExpress.Analytics.Utils.isPlainObject;
            Utils.isEmptyObject = DevExpress.Analytics.Utils.isEmptyObject;
            Utils.getPropertyValues = DevExpress.Analytics.Utils.getPropertyValues;
            Utils.knockoutArrayWrapper = DevExpress.Analytics.Utils.knockoutArrayWrapper;
            ;
            ;
            ;
            ;
            ;
        })(Utils = JS.Utils || (JS.Utils = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "deserializeArray");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "ModelSerializer");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "serializeDate");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "extend");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "isPlainObject");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "isEmptyObject");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "getPropertyValues");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "knockoutArrayWrapper");

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Localization;
        (function (Localization) {
            Localization.Globalize = DevExpress.Analytics.Localization.Globalize || window["Globalize"];
            Localization.messages = {};
            function addCultureInfo(json) {
                $.extend(Localization.messages, json.messages);
            }
            Localization.addCultureInfo = addCultureInfo;
            function localize(val) {
                return Localization.messages[val];
            }
            Localization.localize = localize;
            function formatDate(val) {
                return DevExpress.localization["formatDate"](val, "shortDate");
            }
            Localization.formatDate = formatDate;
            function parseDate(val, useDefault, format) {
                if (useDefault === void 0) { useDefault = true; }
                if (!useDefault)
                    return format ? DevExpress.localization["parseDate"](val, format) : DevExpress.localization["parseDate"](val);
                if (val) {
                    if (val instanceof Date)
                        return val;
                    var date = DevExpress.localization["parseDate"](val, "MM/dd/yyyy HH:mm:ss");
                    if (!date)
                        date = DevExpress.localization["parseDate"](val, "yyyy-MM-dd");
                    return date;
                }
                return null;
            }
            Localization.parseDate = parseDate;
            function selectPlaceholder() {
                return Analytics.getLocalization("Select...", "ASPxReportsStringId.ReportDesigner_PropertyGrid_Editor_EmptyText");
            }
            Localization.selectPlaceholder = selectPlaceholder;
            function noDataText() {
                return Analytics.getLocalization("No data to display", "ASPxReportsStringId.ReportDesigner_DataPreview_Empty");
            }
            Localization.noDataText = noDataText;
        })(Localization = Analytics.Localization || (Analytics.Localization = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function applyLocalizationToDevExtreme(currentCulture) {
                if (!currentCulture) {
                    return;
                }
                var messagesByLocales = DevExpress.localization.message.getMessagesByLocales();
                var specificLocaleMessages = messagesByLocales[currentCulture] || {};
                var neutralLocaleMessages = messagesByLocales[currentCulture.split("-")[0]] || {};
                if (!specificLocaleMessages["dxList-selectAll"] && !neutralLocaleMessages["dxList-selectAll"]) {
                    var message = Analytics.Localization.messages["ASPxReportsStringId.WebDocumentViewer_SelectAll"];
                    if (message) {
                        specificLocaleMessages["dxList-selectAll"] = message;
                    }
                }
                var cultureJson = {};
                cultureJson[currentCulture] = specificLocaleMessages;
                DevExpress.localization.loadMessages(cultureJson);
            }
            Internal.applyLocalizationToDevExtreme = applyLocalizationToDevExtreme;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        function _getLocalization(text) {
            return (Analytics.Localization.localize(text)) || text;
        }
        var custom_localization_values = {};
        function isCustomizedWithUpdateLocalizationMethod(text) {
            return !!custom_localization_values[text];
        }
        Analytics.isCustomizedWithUpdateLocalizationMethod = isCustomizedWithUpdateLocalizationMethod;
        function getLocalization(text, id) {
            if (id === void 0) { id = null; }
            var _localizedText = id && Analytics.Localization.localize(id) || _getLocalization(text);
            if (isCustomizedWithUpdateLocalizationMethod(_localizedText)) {
                text = _localizedText;
            }
            if (!isCustomizedWithUpdateLocalizationMethod(text)) {
                return _localizedText;
            }
            return _getLocalization(text);
        }
        Analytics.getLocalization = getLocalization;
        function updateLocalization(object) {
            $.extend(custom_localization_values, object);
            var messages = {};
            for (var name in object) {
                messages[name] = object[name];
            }
            Analytics.Localization.addCultureInfo({
                messages: messages
            });
        }
        Analytics.updateLocalization = updateLocalization;
        ;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        Analytics.StringId = {
            MasterDetailRelationsEditor: "DataAccessUIStringId.MasterDetailEditorForm_Title",
            DataAccessBtnOK: "DataAccessUIStringId.Button_OK",
            DataAccessBtnCancel: "DataAccessUIStringId.Button_Cancel",
            DataSourceWizardTitle: "DataAccessUIStringId.WizardTitleDatasource",
            WizardPageConfigureQuery: 'DataAccessUIStringId.WizardPageConfigureQuery'
        };
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function compareEditorInfo(editor1, editor2) {
                return !!editor1 && !!editor2 &&
                    editor1.header === editor2.header
                    && editor1.content === editor2.content
                    && editor1.editorType === editor2.editorType;
            }
            Utils.compareEditorInfo = compareEditorInfo;
            function findMatchesInString(textToTest, searchPattern) {
                var searchExpr = escapeToRegExp(searchPattern);
                return !!textToTest && textToTest.match(new RegExp(searchExpr, "gi"));
            }
            Utils.findMatchesInString = findMatchesInString;
            function escapeToRegExp(string) {
                return string.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
            }
            Utils.escapeToRegExp = escapeToRegExp;
            function formatUnicorn(text) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var str = text.toString();
                if (args.length) {
                    var t = typeof args[0];
                    var key;
                    var argsFinal = ("string" === t || "number" === t) ?
                        Array.prototype.slice.call(args)
                        : args[0];
                    for (key in argsFinal) {
                        str = str.replace(new RegExp("\\{" + key + "\\}", "gi"), argsFinal[key]);
                    }
                }
                return str;
            }
            Utils.formatUnicorn = formatUnicorn;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            Widgets.editorTemplates = {
                color: { header: "dx-color" },
                bool: { header: "dx-boolean" },
                boolSelect: { header: "dx-boolean-select" },
                numeric: { header: "dx-numeric" },
                modificators: { custom: "dx-modificators" },
                combobox: { header: "dx-combobox" },
                comboboxEditable: { header: "dx-combobox-editable" },
                text: { header: "dx-text" },
                image: { header: "dx-image" },
                file: { header: "dx-file" },
                commonCollection: { custom: "dx-commonCollection" },
                stringArray: { header: "dx-emptyHeader", content: "dx-string-array" }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            Widgets.propertiesGridEditorsPaddingLeft = 19;
            var Editor = (function (_super) {
                __extends(Editor, _super);
                function Editor(modelPropertyInfo, level, parentDisabled, textToSearch) {
                    if (parentDisabled === void 0) { parentDisabled = ko.observable(false); }
                    if (textToSearch === void 0) { textToSearch = undefined; }
                    var _this = _super.call(this) || this;
                    _this._model = ko.observable();
                    _this.isVisibleByContent = ko.observable(true);
                    _this.isSearchedProperty = ko.observable(true);
                    _this.isParentSearched = ko.observable(false);
                    _this.rtl = DevExpress.config().rtlEnabled;
                    _this._cachedValue = undefined;
                    _this.isEditorSelected = ko.observable(false);
                    _this.isPropertyModified = ko.computed(function () {
                        return _this._model() && _this._model().isPropertyModified && _this._model().isPropertyModified(_this.name);
                    });
                    _this.collapsed = ko.observable(true);
                    _this.info = ko.observable(modelPropertyInfo);
                    _this._disposables.push(_this.displayName = ko.computed(function () {
                        var info = _this.info();
                        return info && DevExpress.Analytics.getLocalization(info.displayName, info["localizationId"]);
                    }));
                    if (textToSearch) {
                        _this.textToSearch = textToSearch;
                        _this._disposables.push(_this.isSearchedProperty = ko.computed(function () {
                            return _this.isParentSearched() || !!Analytics.Utils.findMatchesInString(_this.displayName(), textToSearch());
                        }));
                    }
                    _this.padding = _this._setPadding(_this.rtl ? "right" : "left", level * Widgets.propertiesGridEditorsPaddingLeft);
                    var defaultValue = ko.observable(null), propertyName = modelPropertyInfo.propertyName;
                    _this.editorOptions = modelPropertyInfo.editorOptions;
                    if (modelPropertyInfo.defaultVal !== undefined) {
                        defaultValue = ko.observable(modelPropertyInfo.defaultVal);
                    }
                    if (modelPropertyInfo.from) {
                        defaultValue = modelPropertyInfo.from(modelPropertyInfo.defaultVal);
                    }
                    if (modelPropertyInfo.array) {
                        defaultValue = ko.observableArray();
                    }
                    _this._disposables.push(_this.values = ko.computed(function () {
                        var _values = _this.info().valueStore || _this.info().valuesArray;
                        if (_values) {
                            return _values;
                        }
                        _values = ko.unwrap(_this.info().values);
                        if (_values) {
                            return $.map(_values, function (displayValue, value) {
                                return { value: value, displayValue: displayValue };
                            });
                        }
                    }));
                    _this.level = level;
                    _this._init(modelPropertyInfo.editor, defaultValue, propertyName);
                    var calculateAccessibleByPropertyInfo = function (model, propertyInfo, defaultValue) {
                        var result;
                        if (ko.isObservable(propertyInfo)) {
                            result = propertyInfo();
                        }
                        else if (typeof propertyInfo === 'function') {
                            result = propertyInfo(model);
                        }
                        else {
                            result = propertyInfo !== undefined ? propertyInfo : defaultValue;
                        }
                        return result;
                    };
                    _this._disposables.push(_this.disabled = ko.computed(function () {
                        var model = _this._model(), result = parentDisabled() || model && (model.isPropertyDisabled && model.isPropertyDisabled(_this.name));
                        if (!result) {
                            result = calculateAccessibleByPropertyInfo(model, _this.info().disabled, false);
                        }
                        return result;
                    }));
                    _this._disposables.push(_this.visible = ko.computed(function () {
                        var model = _this._model(), result = _this.isSearchedProperty() && ((model && model.isPropertyVisible) ? model.isPropertyVisible(_this.name) : _this.isVisibleByContent());
                        if (result) {
                            result = calculateAccessibleByPropertyInfo(model, _this.info().visible, true);
                        }
                        return result;
                    }));
                    _this._disposables.push(_this.isPropertyModified);
                    return _this;
                }
                Editor.prototype._setPadding = function (position, value) {
                    var obj = {};
                    obj["padding-" + position] = value;
                    return obj;
                };
                Editor.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this._cachedValue = null;
                    this._model(null);
                };
                Editor.prototype._init = function (editorTemplate, value, name) {
                    var _this = this;
                    editorTemplate = editorTemplate || Widgets.editorTemplates.text;
                    this.templateName = editorTemplate.header;
                    this.contentTemplateName = editorTemplate.content;
                    this.defaultValue = editorTemplate === Widgets.editorTemplates.color ? "transparent" : null;
                    this._cachedValue = undefined;
                    this._disposables.push(this.value = ko.computed({
                        read: function () {
                            var model = _this._model();
                            if (!model && _this._cachedValue) {
                                return _this._cachedValue;
                            }
                            var modelValue = model && model[name] !== undefined ? model[name] : value;
                            if (ko.isObservable(modelValue) && !modelValue["push"]) {
                                var hasValueInModel = modelValue() !== undefined && modelValue() !== null;
                                _this._cachedValue = hasValueInModel ? modelValue() : _this.defaultValue;
                                return _this._cachedValue;
                            }
                            else {
                                _this._cachedValue = modelValue;
                                return _this._cachedValue;
                            }
                        },
                        write: function (val) {
                            var model = _this._model();
                            if (!model) {
                                return;
                            }
                            var modelValue = model[name];
                            if (!DevExpress["validationEngine"].validate(val, _this.validationRules, _this.displayName()).isValid) {
                                return;
                            }
                            if (ko.isObservable(modelValue)) {
                                modelValue(val);
                            }
                            else {
                                model[name] = val;
                            }
                        }
                    }));
                    this.name = name;
                    this.editorTemplate = editorTemplate && editorTemplate.custom || 'dx-property-editor';
                };
                Editor.prototype.findInfo = function (viewModel) {
                    var _this = this;
                    if (!viewModel)
                        return null;
                    var modelInfo = viewModel["getInfo"] && viewModel["getInfo"]();
                    if (modelInfo) {
                        return modelInfo.filter(function (property) { return property.propertyName === _this.name; })[0];
                    }
                    return null;
                };
                Editor.prototype.updateInfo = function (propertyInfo) {
                    if (propertyInfo && Analytics.Utils.compareEditorInfo(propertyInfo.editor, this.info().editor)) {
                        if (this.info() !== propertyInfo) {
                            this.info(propertyInfo);
                        }
                        return true;
                    }
                    return !propertyInfo;
                };
                Editor.prototype.update = function (viewModel) {
                    if (!!viewModel) {
                        var propertyInfo = this.findInfo(viewModel);
                        this.isVisibleByContent(this.name in viewModel && this.updateInfo(propertyInfo));
                        this._model(this.isVisibleByContent() ? viewModel : null);
                    }
                    else {
                        this.isVisibleByContent(false);
                        this._model(null);
                    }
                };
                Editor.prototype.getOptions = function (templateOptions) {
                    var extendedOptions = this.info.peek().editor.extendedOptions;
                    return $.extend({}, templateOptions, this.editorOptions, extendedOptions);
                };
                Editor.prototype.getValidationRules = function () {
                    return !!this.info && !!this.info() && this.info().validationRules || [];
                };
                Object.defineProperty(Editor.prototype, "validationRules", {
                    get: function () {
                        return this.getValidationRules();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(Editor.prototype, "isComplexEditor", {
                    get: function () { return !!this.contentTemplateName; },
                    enumerable: true,
                    configurable: true
                });
                return Editor;
            }(Analytics.Utils.Disposable));
            Widgets.Editor = Editor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var ObjectProperties = (function (_super) {
                __extends(ObjectProperties, _super);
                function ObjectProperties(target, editorsInfo, level, parentDisabled, recreateEditors, textToSearch) {
                    if (level === void 0) { level = 0; }
                    if (parentDisabled === void 0) { parentDisabled = ko.observable(false); }
                    if (recreateEditors === void 0) { recreateEditors = false; }
                    var _this = _super.call(this) || this;
                    _this._targetSubscription = null;
                    _this._infoSubscription = null;
                    _this._getInfoComputed = null;
                    _this.level = 0;
                    _this.rtl = DevExpress['config']()['rtlEnabled'];
                    _this._editors = ko.observableArray([]);
                    _this.level = level;
                    _this._parentDisabled = parentDisabled;
                    _this._textToSearch = textToSearch;
                    _this._disposables.push(_this.visible = ko.computed(function () {
                        return _this._editors().some(function (editor) { return editor.visible(); });
                    }));
                    _this._targetSubscription = target.subscribe(function (newVal) {
                        _this._infoSubscription && _this._infoSubscription.dispose();
                        _this._getInfoComputed && _this._getInfoComputed.dispose();
                        _this._update(newVal, editorsInfo, recreateEditors);
                    });
                    _this._update(target(), editorsInfo, recreateEditors);
                    return _this;
                }
                ObjectProperties.prototype.update = function (viewModel) {
                    if (viewModel) {
                        this._editors().forEach(function (editor) {
                            editor.update(viewModel);
                        });
                    }
                };
                ObjectProperties.prototype._cleanEditorsSubscriptions = function () {
                    this._editors().forEach(function (editor) {
                        editor.dispose();
                        for (var name in editor) {
                            if (ko.isComputed(editor[name])) {
                                editor[name].dispose();
                            }
                        }
                    });
                };
                ObjectProperties.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.disposeObservableArray(this._editors);
                    this.resetObservableArray(this._editors);
                    this.cleanSubscriptions();
                };
                ObjectProperties.prototype.cleanSubscriptions = function () {
                    this._infoSubscription && this._infoSubscription.dispose();
                    this._getInfoComputed && this._getInfoComputed.dispose();
                    this._targetSubscription && this._targetSubscription.dispose();
                    this._cleanEditorsSubscriptions();
                };
                ObjectProperties.prototype.cleanEditors = function () {
                    this._cleanEditorsSubscriptions();
                    this._editors([]);
                };
                ObjectProperties.prototype.findEditorByInfo = function (serializationInfo) {
                    return this._editors().filter(function (editor) { return editor.name === serializationInfo.propertyName && Analytics.Utils.compareEditorInfo(editor.info().editor, serializationInfo.editor); })[0];
                };
                ObjectProperties.prototype.createEditor = function (modelPropertyInfo) {
                    var editorType = modelPropertyInfo.editor && modelPropertyInfo.editor.editorType || Widgets.Editor;
                    return new editorType(modelPropertyInfo, this.level, this._parentDisabled, this._textToSearch);
                };
                ObjectProperties.prototype.createEditors = function (serializationInfo) {
                    var _this = this;
                    var self = this;
                    return (serializationInfo || [])
                        .filter(function (info) { return !!info.editor && !_this.findEditorByInfo(info); })
                        .map(function (info) { return _this.createEditor(info); });
                };
                ObjectProperties.prototype._createEditors = function (serializationInfo) {
                    var _this = this;
                    if (!serializationInfo || serializationInfo.length === 0)
                        return false;
                    this.createEditors(serializationInfo).forEach(function (editor) { return _this._editors.push(editor); });
                    var propertyNames = serializationInfo.map(function (info) { return info.propertyName; });
                    this._editors.sort(function (a, b) {
                        return propertyNames.indexOf(a.name) - propertyNames.indexOf(b.name);
                    });
                };
                ObjectProperties.prototype._update = function (target, editorsInfo, recreateEditors) {
                    var _this = this;
                    if (recreateEditors) {
                        this._cleanEditorsSubscriptions();
                        this.resetObservableArray(this._editors);
                    }
                    var infoSubscription = null;
                    this._getInfoComputed = ko.computed(function () {
                        return (editorsInfo && editorsInfo.editors && ko.unwrap(editorsInfo.editors))
                            || (target && target["getInfo"] && target["getInfo"]());
                    });
                    this._infoSubscription = this._getInfoComputed.subscribe(function (newInfo) {
                        if (recreateEditors) {
                            _this._cleanEditorsSubscriptions();
                            _this.resetObservableArray(_this._editors);
                        }
                        _this._createEditors(newInfo);
                        _this.update(target);
                    });
                    this._createEditors(this._getInfoComputed());
                    this.update(target);
                };
                ObjectProperties.prototype.getEditors = function () {
                    return this._editors();
                };
                return ObjectProperties;
            }(Analytics.Utils.Disposable));
            Widgets.ObjectProperties = ObjectProperties;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var CodeResolver = (function () {
                function CodeResolver() {
                    this._queue = [];
                    this._done = [];
                }
                CodeResolver.prototype.done = function (callback) {
                    this._done.push(callback);
                };
                CodeResolver.prototype.execute = function (func, time) {
                    if (time === void 0) { time = 0; }
                    var deferred = $.Deferred();
                    if (time) {
                        var self = this;
                        this._queue.push(function () {
                            setTimeout(function () {
                                deferred.resolve(func());
                                self._queue.splice(0, 1);
                                if (self._queue.length !== 0) {
                                    self._queue[0]();
                                }
                                else {
                                    for (var i = 0; i < self._done.length; i++) {
                                        self._done[i]();
                                    }
                                }
                            }, time);
                        });
                        if (this._queue.length === 1) {
                            this._queue[0]();
                        }
                    }
                    else {
                        deferred.resolve(func());
                    }
                    return deferred.promise();
                };
                return CodeResolver;
            }());
            Internal.CodeResolver = CodeResolver;
            Internal.globalResolver = new CodeResolver();
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers['dxPropertyGrid'] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    $(element).children().remove();
                    var templateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate('dx-propertieseditor'), $element = $(element).append(templateHtml);
                    var value = valueAccessor();
                    var model = new Widgets.ObjectProperties(value.target, value.editorsInfo, value.level, value.parentDisabled, value.recreateEditors, value.textToSearch);
                    ko.applyBindings(bindingContext.createChildContext(model), $element.children()[0]);
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                        model.dispose();
                    });
                    return { controlsDescendantBindings: true };
                }
            };
            ko.virtualElements.allowedBindings["lazy"] = true;
            ko.bindingHandlers['lazy'] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var resolver = Analytics.Internal.globalResolver;
                    var parsedBindings = valueAccessor();
                    if (parsedBindings.innerBindings) {
                        resolver = parsedBindings.resolver;
                        parsedBindings = parsedBindings.innerBindings;
                    }
                    var isDisposed = false;
                    $.each(parsedBindings, function (innerBindingKey, innerBindingParameters) {
                        var innerBinding = ko.bindingHandlers[innerBindingKey];
                        resolver.execute(function () {
                            if (!isDisposed) {
                                var isInitialized = false;
                                ko.computed({
                                    read: function () {
                                        if (!isInitialized && innerBinding.init) {
                                            innerBinding.init(element, function () { return innerBindingParameters; }, allBindings, viewModel, bindingContext);
                                            isInitialized = true;
                                        }
                                        if (innerBinding.update) {
                                            innerBinding.update(element, function () { return innerBindingParameters; }, allBindings, viewModel, bindingContext);
                                        }
                                    },
                                    disposeWhenNodeIsRemoved: element
                                });
                            }
                        }, 1);
                    });
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                        isDisposed = true;
                    });
                    return { controlsDescendantBindings: true };
                }
            };
            ko.bindingHandlers["dxdAccordion"] = {
                init: function (element, valueAccessor) {
                    var options = valueAccessor(), $element = $(element), $accordionContent = $element.find(".dx-accordion-content").first(), scrollUpdateCallback = function () {
                        var $scroll = $element.parents(".dx-scrollview");
                        if ($scroll.length > 0) {
                            var scrollView = DevExpress.ui.dxScrollView["getInstance"]($scroll.get(0));
                            scrollView && scrollView["update"]();
                        }
                    };
                    var accordionButton = $element
                        .find(".dx-accordion-header,.dx-accordion-button").get(0);
                    DevExpress["events"].off(accordionButton, "dxclick");
                    DevExpress["events"].on(accordionButton, "dxclick", function () {
                        options.collapsed(options.alwaysShow && options.alwaysShow() ? false : !options.collapsed());
                    });
                    options.collapsed() ? $accordionContent.hide() : $accordionContent.show();
                    var subscription = options.collapsed.subscribe(function (newVal) {
                        $accordionContent.slideToggle(options.timeout, function () { return scrollUpdateCallback(); });
                    });
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () { return subscription.dispose(); });
                }
            };
            ko.bindingHandlers["dxdAccordionExt"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var options = valueAccessor(), $element = $(element), scrollUpdateCallback = function () {
                        var $scroll = $element.parents(".dx-scrollview");
                        if ($scroll.length > 0) {
                            var scrollView = DevExpress.ui.dxScrollView["getInstance"]($scroll.get(0));
                            scrollView && scrollView["update"]();
                        }
                    }, $accordionContent = $element.find(".dx-accordion-content").first(), accordionContentHTML = null;
                    if (options.collapsed() && options.lazyContentRendering === true) {
                        accordionContentHTML = $accordionContent.html();
                        $accordionContent.empty();
                    }
                    options.collapsed.subscribe(function (newVal) {
                        if (newVal) {
                            $accordionContent.slideUp(options.timeout, function () {
                                scrollUpdateCallback();
                            });
                        }
                        else {
                            if (accordionContentHTML) {
                                $accordionContent.html(accordionContentHTML);
                                ko.applyBindingsToDescendants(bindingContext, $accordionContent.get(0));
                                accordionContentHTML = null;
                            }
                            $accordionContent.slideDown(options.timeout, function () {
                                scrollUpdateCallback();
                            });
                        }
                    });
                    options.collapsed() ? $accordionContent.hide() : $accordionContent.show();
                }
            };
            ko.bindingHandlers["dxLocalizedSelectBox"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var options = valueAccessor();
                    var prevDisplayExpr = options.displayExpr;
                    options["placeholder"] = options["placeholder"] || Analytics.Localization.selectPlaceholder();
                    options["noDataText"] = options["noDataText"] || Analytics.Localization.noDataText();
                    options.displayExpr = function (value) {
                        if (!value)
                            return value;
                        if (!prevDisplayExpr)
                            return Analytics.getLocalization(value, value.localizationId);
                        return Analytics.getLocalization($.isFunction(prevDisplayExpr) ? prevDisplayExpr(value) : value[prevDisplayExpr], value.localizationId);
                    };
                    var extendedOptions = viewModel.getOptions ? viewModel.getOptions(options) : options;
                    ko.bindingHandlers["dxSelectBox"].init(element, function () { return extendedOptions; }, allBindings, viewModel, bindingContext);
                    return { controlsDescendantBindings: true };
                }
            };
            ko.bindingHandlers["styleunit"] = {
                'update': function (element, valueAccessor) {
                    var value = ko.utils.unwrapObservable(valueAccessor() || {});
                    $.each(value, function (styleName, styleValue) {
                        styleValue = ko.utils.unwrapObservable(styleValue) || 0;
                        element.style[styleName] = styleValue + "px";
                    });
                }
            };
            ko.bindingHandlers["service"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var value = ko.unwrap(valueAccessor() || {}), findService = function (serviceName) {
                        var context = bindingContext.$parents.filter(function (item) { return item[serviceName] !== undefined; })[0];
                        if (context) {
                            return context[serviceName];
                        }
                        return null;
                    }, service = findService(value.name);
                    if (service) {
                        var entity = service(viewModel);
                        var childContext = bindingContext.createChildContext(entity.data);
                        ko.renderTemplate(entity.templateName, childContext, {}, element, 'replaceNode');
                    }
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var PopupService = (function () {
                function PopupService() {
                    this.data = ko.observable();
                    this.title = ko.observable();
                    this.visible = ko.observable(false);
                    this.actions = ko.observableArray([]);
                    this.target = ko.observable();
                }
                return PopupService;
            }());
            Internal.PopupService = PopupService;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var EditorAddOn = (function (_super) {
                __extends(EditorAddOn, _super);
                function EditorAddOn(editor, popupService) {
                    var _this = _super.call(this) || this;
                    _this.showPopup = function (args) {
                        _this._popupService.title(_this._editor.displayName());
                        _this._updateActions(_this._editor._model());
                        _this._popupService.target(args.element);
                        _this._popupService.visible(true);
                    };
                    _this.templateName = "dx-editor-addons";
                    _this._editor = editor;
                    _this._popupService = popupService;
                    _this._disposables.push(_this.visible = ko["pureComputed"](function () {
                        if (editor.disabled()) {
                            return false;
                        }
                        var actions = editor._model() && editor._model().actions;
                        return actions && actions.length > 0 && actions.some(function (x) { return x.visible(editor.name); });
                    }));
                    _this._disposables.push(_this.editorMenuButtonCss = ko["pureComputed"](function () {
                        return editor._model() && editor._model()["getActionClassName"] && editor._model()["getActionClassName"](editor.name) || "";
                    }));
                    return _this;
                }
                EditorAddOn.prototype._updateActions = function (viewModel) {
                    var _this = this;
                    this._popupService.actions([]);
                    if (viewModel.actions) {
                        viewModel.actions.forEach(function (modelAction) {
                            if (modelAction.visible(_this._editor.name)) {
                                _this._popupService.actions.push({
                                    action: function () {
                                        modelAction.action(_this._editor.name);
                                        _this._popupService.visible(false);
                                    },
                                    title: modelAction.title,
                                    visible: function () { return true; }
                                });
                            }
                        });
                    }
                };
                return EditorAddOn;
            }(Analytics.Utils.Disposable));
            Internal.EditorAddOn = EditorAddOn;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            function RegexGuid(guid) {
                return (/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(guid)
                    || /^\{[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\}$/.test(guid)
                    || /^\([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\)$/.test(guid)
                    || /^[0-9a-fA-F]{32}$/.test(guid));
            }
            function validateGuid(guid) {
                return guid && RegexGuid(guid);
            }
            Widgets.validateGuid = validateGuid;
            function validateNullableGuid(guid) {
                return !guid || RegexGuid(guid);
            }
            Widgets.validateNullableGuid = validateNullableGuid;
            var guidValidationMessage = function () { return DevExpress.Analytics.getLocalization('Guid is required and should have a valid format.', 'ASPxReportsStringId.ReportDesigner_GuidIsRequired_Error'); };
            Widgets.guidValidationRules = [{ type: "custom", validationCallback: function (options) { return validateNullableGuid(options.value); }, message: guidValidationMessage }];
            Widgets.guidRequiredValidationRules = [{ type: 'required', message: guidValidationMessage }];
            Widgets.requiredValidationRules = [{ type: 'required', message: function () { return DevExpress.Analytics.getLocalization('The value cannot be empty', "ASPxReportsStringId.ParametersPanel_DateTimeValueValidationError"); } }];
            var GuidEditor = (function (_super) {
                __extends(GuidEditor, _super);
                function GuidEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                GuidEditor.prototype.getValidationRules = function () {
                    return (_super.prototype.getValidationRules.call(this) || []).concat(Widgets.guidValidationRules).concat((this.editorOptions && this.editorOptions.isNullable) ? [] : Widgets.guidRequiredValidationRules);
                };
                return GuidEditor;
            }(Widgets.Editor));
            Widgets.GuidEditor = GuidEditor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var PropertyGridEditor = (function (_super) {
                __extends(PropertyGridEditor, _super);
                function PropertyGridEditor(info, level, parentDisabled, textToSearch) {
                    var _this = _super.call(this, info, level, parentDisabled, textToSearch) || this;
                    _this.editorCreated = ko.observable(false);
                    _this.viewmodel = _this.createObjectProperties();
                    _this._disposables.push(_this.viewmodel);
                    var subscription = _this.collapsed.subscribe(function (newVal) {
                        if (!newVal) {
                            subscription.dispose();
                            _this.editorCreated(true);
                        }
                    });
                    _this._disposables.push(subscription);
                    if (textToSearch) {
                        _this._disposables.push(_this.visibleByName = ko.computed(function () {
                            var visible = !!Analytics.Utils.findMatchesInString(_this.displayName(), textToSearch());
                            if (!$.isEmptyObject(_this.viewmodel)) {
                                _this.viewmodel._editors().forEach(function (editor) { return editor.isParentSearched(visible); });
                            }
                            return visible;
                        }));
                        _this.isSearchedProperty["dispose"] && _this.isSearchedProperty["dispose"]();
                        _this._disposables.push(_this.isSearchedProperty = ko.computed(function () {
                            if (_this.visibleByName())
                                return true;
                            var visibleByEditors = _this.viewmodel.visible();
                            visibleByEditors && _this.collapsed(false);
                            return visibleByEditors;
                        }));
                    }
                    return _this;
                }
                PropertyGridEditor.prototype.createObjectProperties = function () {
                    var _this = this;
                    return new Widgets.ObjectProperties(this.value, { editors: ko.computed(function () { return _this.info().info; }) }, this.level + 1, this.disabled, undefined, this.textToSearch);
                };
                return PropertyGridEditor;
            }(Widgets.Editor));
            Widgets.PropertyGridEditor = PropertyGridEditor;
            Widgets.editorTemplates["objecteditor"] = { header: "dx-emptyHeader", content: "dx-objectEditorContent", editorType: PropertyGridEditor };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var CollectionItemWrapper = (function () {
                function CollectionItemWrapper(editor, array, index, displayNameField) {
                    var _this = this;
                    if (displayNameField === void 0) { displayNameField = ""; }
                    this.collapsed = ko.observable(true);
                    this.selected = ko.observable(false);
                    this.value = ko.computed({
                        read: function () {
                            return array.peek()[index()];
                        },
                        write: function (val) {
                            array.peek()[index()] = val;
                        }
                    });
                    this.editor = editor;
                    this.index = index;
                    this.name = ko.computed(function () {
                        return displayNameField && _this.value() && _this.value()[displayNameField] ? ko.unwrap(_this.value()[displayNameField]) : index();
                    });
                }
                return CollectionItemWrapper;
            }());
            Widgets.CollectionItemWrapper = CollectionItemWrapper;
            var CollectionEditorViewModel = (function () {
                function CollectionEditorViewModel(options, disabled) {
                    var _this = this;
                    if (disabled === void 0) { disabled = ko.observable(false); }
                    this.buttonMap = {
                        "delete": { text: 'Delete', localizationId: 'ReportStringId.Cmd_Delete' },
                        "add": { text: 'Add', localizationId: 'ChartStringId.MenuItemAdd' },
                        "down": { text: 'Move Down', localizationId: 'ReportStringId.Cmd_BandMoveDown' },
                        "up": { text: 'Move Up', localizationId: 'ReportStringId.Cmd_BandMoveUp' }
                    };
                    this.selectedIndex = ko.observable(null);
                    this.alwaysShow = ko.observable(false);
                    this.collapsed = ko.observable(options.collapsed !== false);
                    var addHandler = options.addHandler || options.info && options.info() && options.info()["addHandler"];
                    var hideButtons = options.hideButtons || options.info && options.info() && options.info()["hideButtons"];
                    this._textEmptyArray = options.textEmptyArray || { text: 'To create an item click the Add button.', localizationId: 'ASPxReportsStringId.ReportDesigner_SqlDSWizard_PageConfigureParametersEmpty' };
                    this.displayPropertyName = options.info && options.info() && options.info()["displayPropertyName"] || options.displayName;
                    this.showButtons = ko.computed(function () {
                        return !ko.unwrap(hideButtons) && !_this.collapsed();
                    });
                    var _isDisabled = function (selectedIndex, name) {
                        if (options.isDisabledButton) {
                            return options.isDisabledButton(selectedIndex, name);
                        }
                        else if (name === "delete") {
                            return selectedIndex === null;
                        }
                        else if (name === "add") {
                            return false;
                        }
                        else if (name === "up") {
                            return selectedIndex === null || selectedIndex === 0;
                        }
                        else if (name === "down") {
                            return selectedIndex === null || selectedIndex === (_this.values().length - 1);
                        }
                    };
                    this.isDisabledButton = function (name) {
                        return disabled() || _isDisabled(_this.selectedIndex(), name);
                    };
                    this.isVisibleButton = function (name) {
                        if (!_this.showButtons()) {
                            return false;
                        }
                        else
                            return options.isVisibleButton ? options.isVisibleButton(_this.selectedIndex(), name) : true;
                    };
                    this.padding = options.level !== void 0 ? options.level * Widgets.propertiesGridEditorsPaddingLeft : 0;
                    this.displayName = (options.info && options.info()) ? DevExpress.Analytics.getLocalization(options.info().displayName, options.info().localizationId) : options.displayName;
                    this.options = options;
                    if (!options.displayName) {
                        this.collapsed(false);
                        this.alwaysShow(true);
                    }
                    this.values = ko.computed(function () {
                        return ko.unwrap(options.values());
                    });
                    this.add = function (model) {
                        options.undoEngine && options.undoEngine().start();
                        options.values().push(addHandler());
                        options.undoEngine && options.undoEngine().end();
                        model.event.stopPropagation();
                    };
                    this.up = function (model) {
                        _this._move(options.values(), -1);
                        model.event.stopPropagation();
                    };
                    this.down = function (model) {
                        _this._move(options.values(), 1);
                        model.event.stopPropagation();
                    };
                    this.remove = function (model) {
                        if (_this.selectedIndex() >= 0) {
                            options.values().splice(_this.selectedIndex(), 1);
                            _this.selectedIndex(null);
                        }
                        model.event.stopPropagation();
                    };
                    this.select = function (event) {
                        _this.selectedIndex(event.model.index());
                    };
                    this.disabled = disabled;
                }
                CollectionEditorViewModel.prototype._move = function (array, offset) {
                    if (this.selectedIndex() >= 0) {
                        var old_index = this.selectedIndex(), new_index = old_index + offset;
                        if ((new_index >= array().length) || (new_index < 0)) {
                            return;
                        }
                        array.splice(new_index, 0, array.splice(old_index, 1)[0]);
                        this.selectedIndex(new_index);
                    }
                };
                CollectionEditorViewModel.prototype.getDisplayTextButton = function (key) {
                    return DevExpress.Analytics.getLocalization(this.buttonMap[key].text, this.buttonMap[key].localizationId);
                };
                CollectionEditorViewModel.prototype.getDisplayTextEmptyArray = function () {
                    return DevExpress.Analytics.getLocalization(this._textEmptyArray.text, this._textEmptyArray.localizationId);
                };
                CollectionEditorViewModel.prototype.createCollectionItemWrapper = function (grandfather, index) {
                    return new CollectionItemWrapper(grandfather, this.values, index, this.displayPropertyName);
                };
                return CollectionEditorViewModel;
            }());
            Widgets.CollectionEditorViewModel = CollectionEditorViewModel;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers['dxCollectionEditor'] = {
                init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                    var values = valueAccessor(), gridViewModel = new Widgets.CollectionEditorViewModel(values, viewModel.disabled), templateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate(values.editorTemplate || '#dx-collectioneditor'), $templateHtml = $(templateHtml), itemTemplateName = values.info && values.info() && values.info()["template"] || values.template;
                    if (itemTemplateName) {
                        var itemTemplateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate(itemTemplateName);
                        $templateHtml.find(".dx-collection-item").append($(itemTemplateHtml));
                    }
                    else {
                        $templateHtml.find(".dx-collection-item").append($(element).children());
                    }
                    var $element = $(element).append($templateHtml);
                    var childContext = bindingContext.createChildContext(gridViewModel);
                    ko.applyBindings(childContext, $element.children()[0]);
                    return { controlsDescendantBindings: true };
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var editor_prefix = "dx-ellipsiseditor", EDITOR_CLASS = editor_prefix + " dx-dropdowneditor", EDITOR_BUTTON_CLASS = editor_prefix + "-button dx-widget dx-button-normal dx-dropdowneditor-button dx-ellipsis-button", EDITOR_BUTTON_ICON_CLASS = editor_prefix + "-icon dx-ellipsis-image dx-dropdowneditor-icon", EDITOR_BUTTON_ICON_TEMPLATE = "dxrd-svg-ellipsis";
            var dxEllipsisEditor = (function (_super) {
                __extends(dxEllipsisEditor, _super);
                function dxEllipsisEditor(element, options) {
                    return _super.call(this, element, options) || this;
                }
                dxEllipsisEditor.prototype._init = function () {
                    _super.prototype._init.call(this);
                    var $element = $(this.element());
                    $element.addClass(EDITOR_CLASS);
                    this._koContext = ko.contextFor($element.get(0));
                };
                dxEllipsisEditor.prototype._render = function () {
                    _super.prototype._render.call(this);
                    this._renderButton();
                };
                dxEllipsisEditor.prototype._renderButton = function () {
                    this._$button = $("<div />").addClass(EDITOR_BUTTON_CLASS);
                    this._attachButtonEvents();
                    this._$buttonIcon = $("<div />").addClass(EDITOR_BUTTON_ICON_CLASS).height("100%").append(ko.utils.parseHtmlFragment(Analytics.Widgets.Internal.SvgTemplatesEngine.templates[EDITOR_BUTTON_ICON_TEMPLATE])).appendTo(this._$button);
                    ko.applyBindingsToDescendants(this._koContext, this._$buttonIcon[0]);
                    var buttonsContainer = _super.prototype._buttonsContainer.call(this);
                    this._$button.prependTo(buttonsContainer);
                };
                dxEllipsisEditor.prototype._updateButtonSize = function () {
                    this._$buttonIcon.height($(this.element()).height());
                };
                dxEllipsisEditor.prototype._attachButtonEvents = function () {
                    var _this = this;
                    this._$button.off("click");
                    if (!this.option("disabled")) {
                        this._$button.on("click", function (e) {
                            if (_this.option("buttonAction")) {
                                _this.option("buttonAction")();
                                e.stopPropagation();
                            }
                        });
                    }
                };
                dxEllipsisEditor.prototype._optionChanged = function (obj, value) {
                    var name = obj.name || obj;
                    switch (name) {
                        case "disabled":
                            this._attachButtonEvents();
                            break;
                    }
                    _super.prototype._optionChanged.apply(this, arguments);
                };
                return dxEllipsisEditor;
            }(DevExpress.ui.dxTextBox));
            Widgets.dxEllipsisEditor = dxEllipsisEditor;
            DevExpress.registerComponent("dxEllipsisEditor", dxEllipsisEditor);
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var editor_prefix = "dx-fileimage", EDITOR_INPUT_WRAPPER_CLASS = editor_prefix + "-input-wrapper";
            var dxFileImagePicker = (function (_super) {
                __extends(dxFileImagePicker, _super);
                function dxFileImagePicker(element, options) {
                    var _this_1 = this;
                    options.placeholder = options.placeholder || DevExpress.Analytics.getLocalization("(none)", "ChartStringId.WizNoBackImage");
                    _this_1 = _super.call(this, element, options) || this;
                    return _this_1;
                }
                dxFileImagePicker.prototype._handleFiles = function (filesHolder) {
                    var _this_1 = this;
                    var files = filesHolder.files;
                    for (var i = 0; i < files.length; i++) {
                        var file = files[i];
                        if (this.option("type") === "img") {
                            var imageType = /image.*/;
                            if (!file.type.match(imageType)) {
                                continue;
                            }
                        }
                        var fr = new FileReader();
                        if (this.option("readMode") !== "text") {
                            fr.onload = function (args) {
                                if (_this_1.option("useFormat")) {
                                    _this_1.option("format", _this_1._filesinput[0].files[0].name.split('.').pop());
                                }
                                var encodedContent = fr.result.replace(/^data:[^,]+,/, '');
                                _this_1.option("value", encodedContent);
                                _this_1._filesinput.val("");
                            };
                            fr.readAsDataURL(file);
                        }
                        else {
                            fr.onload = function (args) {
                                _this_1.option("value", fr.result);
                                _this_1._filesinput.val("");
                            };
                            fr.readAsText(file);
                        }
                    }
                };
                dxFileImagePicker.prototype._$getInput = function () {
                    var accept = this.option('accept') ? "accept = '" + this.option('accept') + "'" : "";
                    return $("<input type='file' " + accept + " style='display:none' />");
                };
                dxFileImagePicker.prototype._render = function () {
                    _super.prototype._render.call(this);
                    var _this = this;
                    this._filesinput = this._$getInput().on("change", function (e) {
                        _this._handleFiles(_this._filesinput.get(0));
                    }).appendTo(this.element());
                };
                dxFileImagePicker.prototype._renderInput = function (inputContainer) {
                    var $inputContainer = inputContainer && $(inputContainer) || $("<div />");
                    $inputContainer.addClass(EDITOR_INPUT_WRAPPER_CLASS);
                    this._inputContainer = $inputContainer.get(0);
                    $(this.element()).append(this["_inputContainer"]);
                    _super.prototype._renderInput.call(this, inputContainer);
                };
                dxFileImagePicker.prototype._attachButtonEvents = function () {
                    var _this_1 = this;
                    this._$button.off("click");
                    if (!this.option("disabled")) {
                        this._$button.on("click", function (e) {
                            if (!_this_1.option("value")) {
                                _this_1._filesinput.val("");
                            }
                            _this_1._filesinput.click();
                        });
                    }
                };
                dxFileImagePicker.prototype._renderValue = function () {
                    if (this.option("placeHolder")) {
                        this.option("text", this.option("value") && this.option("placeHolder"));
                    }
                    else {
                        this.option("text", this.option("value"));
                    }
                    _super.prototype._renderValue.call(this);
                };
                return dxFileImagePicker;
            }(Widgets.dxEllipsisEditor));
            Widgets.dxFileImagePicker = dxFileImagePicker;
            DevExpress.registerComponent("dxFileImagePicker", dxFileImagePicker);
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            Widgets.availableUnits = [
                { value: "pt", displayValue: "Point", localizationId: "DevExpress.ReportDesigner_FontOptions_Unit_Point" },
                { value: "world", displayValue: "World", localizationId: "ASPxReportsStringId.ReportDesigner_FontOptions_Unit_World" },
                { value: "px", displayValue: "Pixel", localizationId: "ASPxReportsStringId.ReportDesigner_FontOptions_Unit_Pixel" },
                { value: "in", displayValue: "Inch", localizationId: "ASPxReportsStringId.ReportDesigner_Wizard_Inch" },
                { value: "doc", displayValue: "Document", localizationId: "PreviewStringId.ReportDesigner_FontOptions_Unit_Document" },
                { value: "mm", displayValue: "Millimetr", localizationId: "ASPxReportsStringId.ReportDesigner_Wizard_Millimeter" }
            ];
            var FontModel = (function (_super) {
                __extends(FontModel, _super);
                function FontModel(value) {
                    var _this = _super.call(this) || this;
                    _this.family = ko.observable("Times New Roman");
                    _this.unit = ko.observable("pt");
                    _this.isUpdateModel = false;
                    _this.size = ko.observable(9);
                    _this.modificators = {
                        bold: ko.observable(false),
                        italic: ko.observable(false),
                        strikeout: ko.observable(false),
                        underline: ko.observable(false)
                    };
                    _this.updateModel(value());
                    _this._disposables.push(value.subscribe(function (newVal) {
                        _this.isUpdateModel = true;
                        _this.updateModel(newVal);
                        _this.isUpdateModel = false;
                    }));
                    _this._disposables.push(_this.modificators.bold.subscribe(function (newVal) { return _this.updateValue(value); }));
                    _this._disposables.push(_this.modificators.italic.subscribe(function (newVal) { return _this.updateValue(value); }));
                    _this._disposables.push(_this.modificators.strikeout.subscribe(function (newVal) { return _this.updateValue(value); }));
                    _this._disposables.push(_this.modificators.underline.subscribe(function (newVal) { return _this.updateValue(value); }));
                    _this._disposables.push(_this.family.subscribe(function (newVal) { return _this.updateValue(value); }));
                    _this._disposables.push(_this.size.subscribe(function (newVal) { return _this.updateValue(value); }));
                    _this._disposables.push(_this.unit.subscribe(function (newVal) { return _this.updateValue(value); }));
                    return _this;
                }
                FontModel.prototype.updateModel = function (value) {
                    if (value) {
                        var components = value.split(',');
                        this.family(components[0]);
                        var self = this;
                        Widgets.availableUnits.forEach(function (element) {
                            if (components[1].indexOf(element.value) != -1) {
                                self.size(parseFloat(components[1].split(element.value)[0]));
                                self.unit(element.value);
                            }
                        });
                        this.modificators.bold(value.indexOf("Bold") !== -1);
                        this.modificators.italic(value.indexOf("Italic") !== -1);
                        this.modificators.underline(value.indexOf("Underline") !== -1);
                        this.modificators.strikeout(value.indexOf("Strikeout") !== -1);
                    }
                };
                FontModel.prototype.updateValue = function (value) {
                    if (!this.isUpdateModel) {
                        var leftPart = [this.family(), this.size() + this.unit()].join(", ");
                        var modificators = [];
                        if (this.modificators.bold())
                            modificators.push("Bold");
                        if (this.modificators.italic())
                            modificators.push("Italic");
                        if (this.modificators.underline())
                            modificators.push("Underline");
                        if (this.modificators.strikeout())
                            modificators.push("Strikeout");
                        var rightPart = modificators.join(', ');
                        value(!!rightPart ? [leftPart, rightPart].join(", style=") : leftPart);
                    }
                };
                return FontModel;
            }(Analytics.Utils.Disposable));
            Widgets.FontModel = FontModel;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            Widgets.availableFonts = ko.observable({
                "Times New Roman": "Times New Roman",
                "Arial": "Arial",
                "Arial Black": "Arial Black",
                "Comic Sans MS": "Comic Sans MS",
                "Courier New": "Courier New",
                "Georgia": "Georgia",
                "Impact": "Impact",
                "Lucida Console": "Lucida Console",
                "Lucida Sans Unicode": "Lucida Sans Unicode",
                "Tahoma": "Tahoma",
                "Trebuchet MS": "Trebuchet MS",
                "Verdana": "Verdana",
                "MS Sans Serif": "MS Sans Serif",
                "MS Serif": "MS Serif",
                "Symbol": "Symbol",
                "Webdings": "Webdings",
                "Wingdings": "Wingdings"
            });
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FontEditor = (function (_super) {
                __extends(FontEditor, _super);
                function FontEditor(info, level, parentDisabled, textToSearch) {
                    return _super.call(this, info, level, parentDisabled, textToSearch) || this;
                }
                FontEditor.prototype.createObjectProperties = function () {
                    var model = new Widgets.FontModel(this.value);
                    this._disposables.push(model);
                    return new Widgets.ObjectProperties(ko.observable(model), { editors: Widgets.fontInfo }, this.level + 1, this.disabled, undefined, this.textToSearch);
                };
                return FontEditor;
            }(Widgets.PropertyGridEditor));
            Widgets.FontEditor = FontEditor;
            Widgets.fontInfo = [
                {
                    propertyName: "family", displayName: "Font Name", localizationId: "ReportStringId.UD_TTip_FormatFontName",
                    editor: Widgets.editorTemplates.combobox, values: Widgets.availableFonts
                },
                { propertyName: "size", displayName: "Size", localizationId: "System.Drawing.Font.Size", editor: Widgets.editorTemplates.numeric },
                {
                    propertyName: "unit", displayName: "Unit", localizationId: "System.Drawing.Font.Unit", editor: Widgets.editorTemplates.combobox,
                    valuesArray: Widgets.availableUnits
                },
                { propertyName: "modificators", editor: Widgets.editorTemplates.modificators },
            ];
            Widgets.editorTemplates["font"] = { header: "dx-emptyHeader", content: "dx-objectEditorContent", editorType: FontEditor };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Utils;
        (function (Utils) {
            Utils.getLocalization = DevExpress.Analytics.getLocalization;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "getLocalization");
            Utils.findMatchesInString = DevExpress.Analytics.Utils.findMatchesInString;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "findMatchesInString");
            Utils.escapeToRegExp = DevExpress.Analytics.Utils.escapeToRegExp;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "escapeToRegExp");
            Utils.formatUnicorn = DevExpress.Analytics.Utils.formatUnicorn;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "formatUnicorn");
            var PopupService = (function (_super) {
                __extends(PopupService, _super);
                function PopupService() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return PopupService;
            }(DevExpress.Analytics.Internal.PopupService));
            Utils.PopupService = PopupService;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Internal, "PopupService");
        })(Utils = JS.Utils || (JS.Utils = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Widgets;
        (function (Widgets) {
            var CollectionItemWrapper = (function (_super) {
                __extends(CollectionItemWrapper, _super);
                function CollectionItemWrapper() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CollectionItemWrapper;
            }(DevExpress.Analytics.Widgets.CollectionItemWrapper));
            Widgets.CollectionItemWrapper = CollectionItemWrapper;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "CollectionItemWrapper");
            var CollectionEditorViewModel = (function (_super) {
                __extends(CollectionEditorViewModel, _super);
                function CollectionEditorViewModel() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CollectionEditorViewModel;
            }(DevExpress.Analytics.Widgets.CollectionEditorViewModel));
            Widgets.CollectionEditorViewModel = CollectionEditorViewModel;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "CollectionEditorViewModel");
            var dxEllipsisEditor = (function (_super) {
                __extends(dxEllipsisEditor, _super);
                function dxEllipsisEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return dxEllipsisEditor;
            }(DevExpress.Analytics.Widgets.dxEllipsisEditor));
            Widgets.dxEllipsisEditor = dxEllipsisEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "dxEllipsisEditor");
            var dxFileImagePicker = (function (_super) {
                __extends(dxFileImagePicker, _super);
                function dxFileImagePicker() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return dxFileImagePicker;
            }(DevExpress.Analytics.Widgets.dxFileImagePicker));
            Widgets.dxFileImagePicker = dxFileImagePicker;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "dxFileImagePicker");
            var FontEditor = (function (_super) {
                __extends(FontEditor, _super);
                function FontEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FontEditor;
            }(DevExpress.Analytics.Widgets.FontEditor));
            Widgets.FontEditor = FontEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FontEditor");
            Widgets.fontInfo = DevExpress.Analytics.Widgets.fontInfo;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "fontInfo");
            Widgets.availableFonts = DevExpress.Analytics.Widgets.availableFonts;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "availableFonts");
            Widgets.availableUnits = DevExpress.Analytics.Widgets.availableUnits;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "availableUnits");
            var FontModel = (function (_super) {
                __extends(FontModel, _super);
                function FontModel() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FontModel;
            }(DevExpress.Analytics.Widgets.FontModel));
            Widgets.FontModel = FontModel;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FontModel");
            Widgets.propertiesGridEditorsPaddingLeft = DevExpress.Analytics.Widgets.propertiesGridEditorsPaddingLeft;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "propertiesGridEditorsPaddingLeft");
            var Editor = (function (_super) {
                __extends(Editor, _super);
                function Editor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return Editor;
            }(DevExpress.Analytics.Widgets.Editor));
            Widgets.Editor = Editor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "Editor");
            Widgets.editorTemplates = DevExpress.Analytics.Widgets.editorTemplates;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "editorTemplates");
            Widgets.validateGuid = DevExpress.Analytics.Widgets.validateGuid;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "validateGuid");
            Widgets.guidValidationRules = DevExpress.Analytics.Widgets.guidValidationRules;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "guidValidationRules");
            var GuidEditor = (function (_super) {
                __extends(GuidEditor, _super);
                function GuidEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return GuidEditor;
            }(DevExpress.Analytics.Widgets.GuidEditor));
            Widgets.GuidEditor = GuidEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "GuidEditor");
            var PropertyGridEditor = (function (_super) {
                __extends(PropertyGridEditor, _super);
                function PropertyGridEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return PropertyGridEditor;
            }(DevExpress.Analytics.Widgets.PropertyGridEditor));
            Widgets.PropertyGridEditor = PropertyGridEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "PropertyGridEditor");
            var EditorAddOn = (function (_super) {
                __extends(EditorAddOn, _super);
                function EditorAddOn() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return EditorAddOn;
            }(DevExpress.Analytics.Internal.EditorAddOn));
            Widgets.EditorAddOn = EditorAddOn;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Internal, "EditorAddOn");
            var ObjectProperties = (function (_super) {
                __extends(ObjectProperties, _super);
                function ObjectProperties() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ObjectProperties;
            }(DevExpress.Analytics.Widgets.ObjectProperties));
            Widgets.ObjectProperties = ObjectProperties;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "ObjectProperties");
            Widgets.compareEditorInfo = DevExpress.Analytics.Utils.compareEditorInfo;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Utils, "compareEditorInfo");
        })(Widgets = JS.Widgets || (JS.Widgets = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Localization;
        (function (Localization) {
            Localization.Globalize = DevExpress.Analytics.Localization.Globalize;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "Globalize");
            Localization.messages = DevExpress.Analytics.Localization.messages;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "messages");
            Localization.addCultureInfo = DevExpress.Analytics.Localization.addCultureInfo;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "addCultureInfo");
            Localization.localize = DevExpress.Analytics.Localization.localize;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "localize");
            Localization.parseDate = DevExpress.Analytics.Localization.parseDate;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "parseDate");
            Localization.selectPlaceholder = DevExpress.Analytics.Localization.selectPlaceholder;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "selectPlaceholder");
            Localization.noDataText = DevExpress.Analytics.Localization.noDataText;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Localization, DevExpress.Analytics.Localization, "noDataText");
        })(Localization = JS.Localization || (JS.Localization = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var JS;
    (function (JS) {
        var CodeResolver = (function (_super) {
            __extends(CodeResolver, _super);
            function CodeResolver() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return CodeResolver;
        }(DevExpress.Analytics.Internal.CodeResolver));
        JS.CodeResolver = CodeResolver;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.JS, DevExpress.Analytics.Internal, "CodeResolver");
        JS.globalResolver = DevExpress.Analytics.Internal.globalResolver;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.JS, DevExpress.Analytics.Internal, "globalResolver");
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var Designer;
    (function (Designer) {
        Designer.isCustomizedWithUpdateLocalizationMethod = DevExpress.Analytics.isCustomizedWithUpdateLocalizationMethod;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "isCustomizedWithUpdateLocalizationMethod");
        Designer.getLocalization = DevExpress.Analytics.getLocalization;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "getLocalization");
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Analytics.Utils, DevExpress.Analytics, "getLocalization");
        Designer.updateLocalization = DevExpress.Analytics.updateLocalization;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "updateLocalization");
        Designer.StringId = undefined;
        if (DevExpress.Analytics && DevExpress.Analytics["StringId"]) {
            Designer.StringId = DevExpress.Analytics["StringId"];
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "StringId");
        }
    })(Designer = DevExpress.Designer || (DevExpress.Designer = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                Internal.extendedTemplates = function (templates) {
                    if (templates === void 0) { templates = Widgets.Internal.SvgTemplatesEngine.templates; }
                    return ({
                        'dxrd-svg-fieldlist-list': templates['dxrd-svg-fieldlist-table'],
                        'dxrd-svg-fieldlist-default': templates['dxrd-svg-fieldlist-column']
                    });
                };
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                Internal.availableTemplates = {
                    'dxrd-svg-collapsed': '<svg data-bind="svgAttrs" viewBox="0 0 9 9"><path class="dxd-icon-fill" d="M2 2l5 3-5 3z"/></svg>',
                    'dxrd-svg-ellipsis': '<svg data-bind="svgAttrs" viewBox="-467 277 16 16"><path class="dxd-icon-fill" d="M-464 284h2v2h-2zM-460 284h2v2h-2zM-456 284h2v2h-2z"/></svg>',
                    'dxrd-svg-expressioneditor-addition': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M20 10h-6V4h-4v6H4v4h6v6h4v-6h6z"/></svg>',
                    'dxrd-svg-expressioneditor-and': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M15 4c-1.1 0-2.1.2-3 .7-.9-.5-1.9-.7-3-.7-3.9 0-7 3.1-7 7s3.1 7 7 7c1.1 0 2.1-.2 3-.7.9.4 1.9.7 3 .7 3.9 0 7-3.1 7-7s-3.1-7-7-7zm-1 7c0 1.6-.8 3.1-2 4-1.2-.9-2-2.3-2-4s.8-3.1 2-4c1.2.9 2 2.4 2 4zM4 11c0-2.8 2.2-5 5-5 .3 0 .7 0 1 .1-1.2 1.3-2 3-2 4.9s.8 3.6 2 4.9c-.3.1-.7.1-1 .1-2.8 0-5-2.2-5-5zm11 5c-.3 0-.7 0-1-.1 1.2-1.3 2-3 2-4.9s-.8-3.6-2-4.9c.3-.1.7-.1 1-.1 2.8 0 5 2.2 5 5s-2.2 5-5 5z"/><path class="dxd-icon-fill dxd-opacity-60" d="M14 11c0 1.6-.8 3.1-2 4-1.2-.9-2-2.3-2-4s.8-3.1 2-4c1.2.9 2 2.4 2 4z"/></svg>',
                    'dxrd-svg-expressioneditor-division': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2 10h20v4H2z"/><circle class="dxd-icon-fill" cx="12" cy="6" r="2"/><circle class="dxd-icon-fill" cx="12" cy="18" r="2"/></svg>',
                    'dxrd-svg-expressioneditor-edit': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 8l-6 6-6-6z"/></svg>',
                    'dxrd-svg-expressioneditor-equal': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M4 6h16v4H4zM4 12h16v4H4z"/></svg>',
                    'dxrd-svg-expressioneditor-greater': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M4 4v2l10 6-10 6v2l14-8z"/></svg>',
                    'dxrd-svg-expressioneditor-greater_or_equal': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M4 2v2l10 6-10 6v2l14-8zM4 22l14-8v-2L4 20z"/></svg>',
                    'dxrd-svg-expressioneditor-less': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 4v2L8 12l10 6v2L4 12z"/></svg>',
                    'dxrd-svg-expressioneditor-less_or_equal': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 2v2L8 10l10 6v2L4 10zM18 22L4 14v-2l14 8z"/></svg>',
                    'dxrd-svg-expressioneditor-modulus': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M16 4L2 20h4L20 4zM16 12c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM6 12c2.2 0 4-1.8 4-4S8.2 4 6 4 2 5.8 2 8s1.8 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/></svg>',
                    'dxrd-svg-expressioneditor-multiplication': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 6l-2-2-5 5-5-5-2 2 5 5-5 5 2 2 5-5 5 5 2-2-5-5z"/></svg>',
                    'dxrd-svg-expressioneditor-not': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M15 4c-1.1 0-2.1.2-3 .7-.9-.5-1.9-.7-3-.7-3.9 0-7 3.1-7 7s3.1 7 7 7c1.1 0 2.1-.2 3-.7.9.4 1.9.7 3 .7 3.9 0 7-3.1 7-7s-3.1-7-7-7zm-1 7c0 1.6-.8 3.1-2 4-1.2-.9-2-2.3-2-4s.8-3.1 2-4c1.2.9 2 2.4 2 4zM4 11c0-2.8 2.2-5 5-5 .3 0 .7 0 1 .1-1.2 1.3-2 3-2 4.9s.8 3.6 2 4.9c-.3.1-.7.1-1 .1-2.8 0-5-2.2-5-5zm11 5c-.3 0-.7 0-1-.1 1.2-1.3 2-3 2-4.9s-.8-3.6-2-4.9c.3-.1.7-.1 1-.1 2.8 0 5 2.2 5 5s-2.2 5-5 5z"/><path class="dxd-icon-fill dxd-opacity-60" d="M4 11c0-2.8 2.2-5 5-5 .3 0 .7 0 1 .1-1.2 1.3-2 3-2 4.9s.8 3.6 2 4.9c-.3.1-.7.1-1 .1-2.8 0-5-2.2-5-5z"/></svg>',
                    'dxrd-svg-expressioneditor-not_equal': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M20 0h-2l-3.8 6H4v4h7.6l-1.2 2H4v4h3.8L4 22h2l3.8-6H20v-4h-7.6l1.2-2H20V6h-3.8z"/></svg>',
                    'dxrd-svg-expressioneditor-or': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-60" d="M14 11c0 1.6-.8 3.1-2 4-1.2-.9-2-2.3-2-4s.8-3.1 2-4c1.2.9 2 2.4 2 4z"/><path class="dxd-icon-fill" d="M15 4c-1.1 0-2.1.2-3 .7-.9-.5-1.9-.7-3-.7-3.9 0-7 3.1-7 7s3.1 7 7 7c1.1 0 2.1-.2 3-.7.9.4 1.9.7 3 .7 3.9 0 7-3.1 7-7s-3.1-7-7-7zm-1 7c0 1.6-.8 3.1-2 4-1.2-.9-2-2.3-2-4s.8-3.1 2-4c1.2.9 2 2.4 2 4zM4 11c0-2.8 2.2-5 5-5 .3 0 .7 0 1 .1-1.2 1.3-2 3-2 4.9s.8 3.6 2 4.9c-.3.1-.7.1-1 .1-2.8 0-5-2.2-5-5zm11 5c-.3 0-.7 0-1-.1 1.2-1.3 2-3 2-4.9s-.8-3.6-2-4.9c.3-.1.7-.1 1-.1 2.8 0 5 2.2 5 5s-2.2 5-5 5z"/><path class="dxd-icon-fill dxd-opacity-60" d="M4 11c0-2.8 2.2-5 5-5 .3 0 .7 0 1 .1-1.2 1.3-2 3-2 4.9s.8 3.6 2 4.9c-.3.1-.7.1-1 .1-2.8 0-5-2.2-5-5zM15 16c-.3 0-.7 0-1-.1 1.2-1.3 2-3 2-4.9s-.8-3.6-2-4.9c.3-.1.7-.1 1-.1 2.8 0 5 2.2 5 5s-2.2 5-5 5z"/></svg>',
                    'dxrd-svg-expressioneditor-parenthesis': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2 11c0 3.8 1.8 7.1 4 9h2c-2.2-1.9-4-5.2-4-9s1.8-7.1 4-9H6c-2.2 1.9-4 5.2-4 9zM16 2h-2c2.2 1.8 4 5.2 4 9s-1.8 7.2-4 9h2c2.2-1.8 4-5.2 4-9s-1.8-7.2-4-9z"/><path class="dxd-icon-fill" d="M6 10h2v2H6zM10 10h2v2h-2zM14 10h2v2h-2z"/></svg>',
                    'dxrd-svg-expressioneditor-subtraction': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M4 10h16v4H4z"/></svg>',
                    'dxrd-svg-fieldlist-array': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M18 6v2h-2v2h2v8h2V6zM4 8H2v2h2v8h2V6H4zM8 18h6V6H8v12zm2-10h2v8h-2V8z"/></svg>',
                    'dxrd-svg-fieldlist-bitearray': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M18 6v2h-2v2h2v8h2V6zM4 8H2v2h2v8h2V6H4zM8 18h6V6H8v12zm2-10h2v8h-2V8z"/></svg>',
                    'dxrd-svg-fieldlist-bool': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M4 10v4l6 6 10-10V6L10 16z"/></svg>',
                    'dxrd-svg-fieldlist-booleanfield': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M4 10v4l6 6 10-10V6L10 16z"/></svg>',
                    'dxrd-svg-fieldlist-column': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M0 0h22v4H0zM6 6h4v16H6zM12 12h4v4h-4zM12 18h4v4h-4zM18 6h4v4h-4zM0 12h4v4H0zM18 18h4v4h-4zM12 6h4v4h-4zM0 18h4v4H0zM0 6h4v4H0zM18 12h4v4h-4z"/></svg>',
                    'dxrd-svg-fieldlist-datasource': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><ellipse class="dxd-icon-fill dxd-opacity-80" cx="11" cy="4" rx="7" ry="2"/><path class="dxd-icon-fill dxd-opacity-80" d="M11 10c-3.9 0-7-.9-7-2v12c0 1.1 3.1 2 7 2s7-.9 7-2V8c0 1.1-3.1 2-7 2z"/></svg>',
                    'dxrd-svg-fieldlist-date': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M11 0C4.9 0 0 4.9 0 11s4.9 11 11 11 11-4.9 11-11S17.1 0 11 0zm6 12h-6c-.5 0-1-.5-1-1V5c0-.5.5-1 1-1s1 .5 1 1v5h5c.5 0 1 .5 1 1s-.5 1-1 1z"/></svg>',
                    'dxrd-svg-fieldlist-datetimefield': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M11 0C4.9 0 0 4.9 0 11s4.9 11 11 11 11-4.9 11-11S17.1 0 11 0zm6 12h-6c-.5 0-1-.5-1-1V5c0-.5.5-1 1-1s1 .5 1 1v5h5c.5 0 1 .5 1 1s-.5 1-1 1z"/></svg>',
                    'dxrd-svg-fieldlist-doublefield': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M6 6H4v2h2v10h2V4H6zM10 16h2v2h-2zM20 12V4h-6v2h4v4h-4v8h6v-2h-4v-4z"/></svg>',
                    'dxrd-svg-fieldlist-enum': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M13 12H1c-.5 0-1 .5-1 1v8c0 .5.5 1 1 1h12c.5 0 1-.5 1-1v-8c0-.5-.5-1-1-1zm-1 8H2v-2h10v2zm0-4H2v-2h10v2zM23 4H11c-.5 0-1 .5-1 1v5h12v2h-6v2h7c.5 0 1-.5 1-1V5c0-.5-.5-1-1-1zm-1 4H12V6h10v2z"/></svg>',
                    'dxrd-svg-fieldlist-float': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M6 6H4v2h2v10h2V4H6zM10 16h2v2h-2zM20 12V4h-6v2h4v4h-4v8h6v-2h-4v-4z"/></svg>',
                    'dxrd-svg-fieldlist-guid': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M10 10v10h8V2h-2v8h-6zm2 2h4v6h-4v-6zM6 10h2v10H6zM6 6h2v2H6z"/></svg>',
                    'dxrd-svg-fieldlist-integer': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M4 8H2v2h2v8h2V6H4zM8 6v2h4v2H8v8h6v-2h-4v-4h4V6h-2zM16 6v2h4v2h-2v2h2v4h-4v2h6V6z"/></svg>',
                    'dxrd-svg-fieldlist-integerfield': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M4 8H2v2h2v8h2V6H4zM8 6v2h4v2H8v8h6v-2h-4v-4h4V6h-2zM16 6v2h4v2h-2v2h2v4h-4v2h6V6z"/></svg>',
                    'dxrd-svg-fieldlist-listsource': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><ellipse class="dxd-icon-fill dxd-opacity-80" cx="11" cy="4" rx="7" ry="2"/><path class="dxd-icon-fill dxd-opacity-80" d="M11 10c-3.9 0-7-.9-7-2v12c0 1.1 3.1 2 7 2s7-.9 7-2V8c0 1.1-3.1 2-7 2z"/></svg>',
                    'dxrd-svg-fieldlist-none': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M0 0v22h22V0H0zm16 14l-2 2-3-3-3 3-2-2 3-3-3-3 2-2 3 3 3-3 2 2-3 3 3 3z"/></svg>',
                    'dxrd-svg-fieldlist-parameters': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M12 4h4v8h-4zM8 18h4v4H8zM8 12h4v4H8zM8 0h4v4H8zM4 4h4v4H4z"/></svg>',
                    'dxrd-svg-fieldlist-string': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M4 8h4v4H2v8h8V6H4v2zm4 10H4v-4h4v4zM14 10V2h-2v18h8V10h-6zm4 8h-4v-6h4v6z"/></svg>',
                    'dxrd-svg-fieldlist-stringfield': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M4 8h4v4H2v8h8V6H4v2zm4 10H4v-4h4v4zM14 10V2h-2v18h8V10h-6zm4 8h-4v-6h4v6z"/></svg>',
                    'dxrd-svg-fieldlist-table': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M0 0h22v4H0zM12 12h4v4h-4zM12 18h4v4h-4zM18 6h4v4h-4zM0 12h4v4H0zM18 18h4v4h-4zM12 6h4v4h-4zM6 12h4v4H6zM6 18h4v4H6zM6 6h4v4H6zM0 18h4v4H0zM0 6h4v4H0zM18 12h4v4h-4z"/></svg>',
                    'dxrd-svg-fieldlist-view': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M0 6h4v4H0zM6 6h4v4H6zM12 6h4v4h-4zM18 6h4v4h-4zM0 12h4v4H0zM6 12h4v4H6zM0 18h4v4H0zM6 18h4v4H6zM0 0h22v4H0zM23.7 22.3l-2.5-2.5c.5-.8.8-1.8.8-2.8 0-2.8-2.2-5-5-5s-5 2.2-5 5 2.2 5 5 5c1 0 2-.3 2.8-.8l2.5 2.5c.4.4 1 .4 1.4 0 .4-.4.4-1 0-1.4zM17 20c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z"/></svg>',
                    'dxrd-svg-filtereditor-add': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-filter-editor-add-icon-fill-color" d="M20 10h-6V4h-4v6H4v4h6v6h4v-6h6z"/></svg>',
                    'dxrd-svg-filtereditor-edit': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 8l-6 6-6-6z"/></svg>',
                    'dxrd-svg-filtereditor-remove': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-filter-editor-remove-icon-fill-color" d="M18 6l-2-2-5 5-5-5-2 2 5 5-5 5 2 2 5-5 5 5 2-2-5-5z"/></svg>',
                    'dxrd-svg-fontstyle-bold': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M14.4 10.8c1.1.3 1.9.7 2.5 1.3.8.8 1.1 1.8 1.1 3 0 .9-.2 1.8-.7 2.6-.5.8-1.2 1.4-2 1.8-.9.4-2.2.6-4 .6H4v-.5h.4c.7 0 1.1-.2 1.4-.7.2-.5.2-2 .2-3V6c0-1.1 0-2.6-.3-2.9-.3-.4-.7-.6-1.3-.6H4V2h6.6c1.3 0 2.3.1 3.1.3 1.2.3 2.1.9 2.7 1.7s.9 1.7.9 2.8c0 .9-.2 1.7-.7 2.4-.5.7-1.2 1.3-2.2 1.6zM8 10H10.6c1.1 0 2 0 2.6-.3.6-.3.9-.6 1.2-1.2.3-.6.5-1.2.5-1.9 0-1.1-.4-2-1.1-2.7S11.4 3 10 3H8v7zm0 8.9h3c1.4 0 2.5-.3 3.2-1s1.1-1.6 1.1-2.7c0-.7-.2-1.4-.5-2-.3-.6-.9-1.2-1.6-1.5-.8-.4-1.5-.7-2.7-.7H8v7.9z"/></svg>',
                    'dxrd-svg-fontstyle-italic': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M14 21.5l-.2.5H6l.2-.5c.8 0 1.3-.1 1.6-.2.4-.2.7-.4.9-.7.3-.5.5-1.3.8-2.5l2.4-12c.3-1.3.3-1.8.3-2.3 0-.3-.1-.5-.2-.6s-.3-.3-.6-.4c-.3-.1-.7-.1-1.5-.1l.3-.7H18l-.2.5c-.6 0-1.4.1-1.7.2-.4.2-.8.5-1 .8-.1.5-.5 1-.8 2.5L12 18.1c-.2 1.3-.3 1.7-.3 2.1 0 .2.1.5.2.6.1.2.3.3.6.4s.7.2 1.5.3z"/></svg>',
                    'dxrd-svg-fontstyle-strikeout': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M20 12h-5.3c-.7-.4-1.7-.9-2.9-1.5-2.4-1.2-3.9-2.1-4.6-2.8-.4-.5-.7-1-.7-1.6 0-.8.3-1.4 1-2.1.6-.4.8-.7 2.1-.9.9-.1 1.9.2 2.8.7.9.4 1.6 1 2.1 1.8s.8 1.4 1 2.4h.5V2h-.5c-.1.4-.2.7-.4.9-.2.1-.4.2-.7.2-.2 0-.6-.1-1.2-.4-1.3-.5-2.5-.7-3.6-.7-1.8 0-3 .8-3.9 1.5C4.5 4.4 4 5.7 4 7c0 .8.2 1.5.6 2.2s1 1.3 1.7 1.8c.4.3.9.6 1.6 1H2v2h9.7c.9.5 1.5.8 1.8 1 .6.4 1 .9 1.3 1.3s.4 1 .4 1.4c0 .8-.4 1.6-1.1 2.2-.8.6-1.8.9-3.1.9-1.1 0-2.1-.2-3.1-.7-.9-.5-1.8-1-2.3-1.7-.2-.2-.8-1.4-1-2.4H4v6h.6c.1-.4.2-.7.3-.9.2-.1.4-.2.6-.2.3 0 1.1.1 2.1.4s1.7.5 2 .5c.5.1 1.1.1 1.7.1 1.9 0 3.5-.5 4.8-1.6 1.2-1 1.9-2.3 1.9-3.7 0-.8-.2-1.5-.6-2.2-.1-.2-.2-.2-.3-.4H20v-2z"/></svg>',
                    'dxrd-svg-fontstyle-underline': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M14 0v1h.9c.4 0 .7.1.8.2.3.4.3 1.2.3 2.3V12c0 .8 0 1.7-.1 2.6-.1 1-.5 1.8-1 2.3-1 .9-3 1.1-3.7 1.1-.7 0-2.9-.2-3.9-1.1-.7-.7-.9-1.3-1.1-2.2-.2-1.1-.2-2-.2-2.7V3.5c0-1.1 0-2 .3-2.2.2-.2.6-.3 1.1-.3H8V0H2v1h.9c.7 0 .9.1 1 .2.1.2.1 1.1.1 2.3v7.6c0 2.4.2 4 .5 4.8.5 1.2 1.3 2.3 2.4 3C8.7 20 9.9 20 11 20c1.4 0 2.6-.1 4.1-1.1 1.1-.8 1.9-1.7 2.3-3 .3-.9.4-2.5.4-4.8V3.5c0-1.2 0-1.9.3-2.2.3-.3.5-.3 1.3-.3h.6V0h-6zM2 22h18v2H2z"/></svg>',
                    'dxrd-svg-menu-menu': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2 2h20v4H2zM2 10h20v4H2zM2 18h20v4H2z"/></svg>',
                    'dxrd-svg-menu-open': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M4 8L2 20h18l2-12z"/><path class="dxd-icon-fill" d="M20 6V4H6V2H0v18L2 6z"/></svg>',
                    'dxrd-svg-menu-save': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M10 0h6v6h-6z"/><path class="dxd-icon-fill" d="M18 0v8H4V0H2L0 2v20h22V0h-4zm0 18H4v-6h14v6z"/></svg>',
                    'dxrd-svg-operations-add': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M22 10h-8V2h-4v8H2v4h8v8h4v-8h8z"/></svg>',
                    'dxrd-svg-operations-add_calcfield': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 8V0H0v16h10c0-4.4 3.6-8 8-8zM8 4H6v2h2v2H6v6H2v-2h2V8H2V6h2V2h4v2z"/><path class="dxd-icon-fill" d="M18 10c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm3 7h-2v2h-2v-2h-2v-2h2v-2h2v2h2v2z"/></svg>',
                    'dxrd-svg-operations-add_datasource': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><ellipse class="dxd-icon-fill" cx="8" cy="2" rx="6" ry="2"/><path class="dxd-icon-fill" d="M16 10c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm3 7h-2v2h-2v-2h-2v-2h2v-2h2v2h2v2zM8 13c-3.1 0-6-.9-6-2v5c0 1.1 2.9 2 6 2h.3c-.2-.6-.3-1.3-.3-2 0-1.1.2-2.1.6-3H8zM14 8.3V4c0 1.1-2.9 2-6 2s-6-.9-6-2v5c0 1.1 2.9 2 6 2 .6 0 1.3 0 1.9-.1 1-1.3 2.5-2.2 4.1-2.6z"/></svg>',
                    'dxrd-svg-operations-add_query': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M0 6h4v4H0zM6 6h4v4H6zM12 6h4v4h-4zM18 6h4v4h-4zM0 12h4v4H0zM6 12h4v4H6zM0 18h4v4H0zM6 18h4v4H6zM0 0h22v4H0zM18 12c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm3 7h-2v2h-2v-2h-2v-2h2v-2h2v2h2v2z"/></svg>',
                    'dxrd-svg-operations-ascending': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M12 0L6 6h4v16h4V6h4z"/></svg>',
                    'dxrd-svg-operations-descending': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M12 22l6-6h-4V0h-4v16H6z"/></svg>',
                    'dxrd-svg-operations-edit': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2 22h4l-4-4zM4 16l4 4 8-8-4-4zM16 4l-2 2 4 4 2-2z"/></svg>',
                    'dxrd-svg-operations-movedown': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M6 10l6 6 6-6V6l-6 6-6-6z"/></svg>',
                    'dxrd-svg-operations-moveleft': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M12 6l-6 6 6 6h4l-6-6 6-6z"/></svg>',
                    'dxrd-svg-operations-moveleft_all': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M12 6H8l-6 6 6 6h4l-6-6z"/><path class="dxd-icon-fill" d="M20 6h-4l-6 6 6 6h4l-6-6z"/></svg>',
                    'dxrd-svg-operations-moveright': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M10 18l6-6-6-6H6l6 6-6 6z"/></svg>',
                    'dxrd-svg-operations-moveright_all': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M10 18h4l6-6-6-6h-4l6 6z"/><path class="dxd-icon-fill" d="M2 18h4l6-6-6-6H2l6 6z"/></svg>',
                    'dxrd-svg-operations-moveup': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 12l-6-6-6 6v4l6-6 6 6z"/></svg>',
                    'dxrd-svg-operations-recycle_bin': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M6 19c0 .5.5 1 1 1h10c.5 0 1-.5 1-1V8H6v11zM19 4h-5V3c0-.5-.5-1-1-1h-2c-.5 0-1 .5-1 1v1H5c-.6 0-1 .4-1 1v1h16V5c0-.6-.4-1-1-1z"/></svg>',
                    'dxrd-svg-operations-remove': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M4 10h14v4H4z"/></svg>',
                    'dxrd-svg-operations-unsorted': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M0 20l6-6V6H2l5-6 5 6H8v6l6-6V0h2v4l4-4 2 2-6 6v8h4l-5 6-5-6h4v-6l-6 6v6H6v-4l-4 4z"/></svg>',
                    'dxrd-svg-properties-borders-all': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M0 0v22h22V0H0zm20 20H2V2h18v18z"/></svg>',
                    'dxrd-svg-properties-borders-bottom': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M0 12h2v4H0zM12 0h4v2h-4zM0 6h2v4H0zM18 2h2v2h2V0h-4zM6 0h4v2H6zM20 18v2H2v-2H0v4h22v-4zM2 4V2h2V0H0v4zM20 6h2v4h-2zM20 12h2v4h-2z"/></svg>',
                    'dxrd-svg-properties-borders-left': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M6 0h4v2H6zM20 12h2v4h-2zM12 0h4v2h-4zM20 18v2h-2v2h4v-4zM20 6h2v4h-2zM4 20H2V2h2V0H0v22h4zM18 2h2v2h2V0h-4zM12 20h4v2h-4zM6 20h4v2H6z"/></svg>',
                    'dxrd-svg-properties-borders-none': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M6 0h4v2H6zM20 12h2v4h-2zM12 0h4v2h-4zM20 18v2h-2v2h4v-4zM20 6h2v4h-2zM18 2h2v2h2V0h-4zM12 20h4v2h-4zM6 20h4v2H6zM0 6h2v4H0zM2 4V2h2V0H0v4zM2 18H0v4h4v-2H2zM0 12h2v4H0z"/></svg>',
                    'dxrd-svg-properties-borders-right': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M12 20h4v2h-4zM0 6h2v4H0zM6 20h4v2H6zM2 4V2h2V0H0v4zM0 12h2v4H0zM18 2h2v18h-2v2h4V0h-4zM4 20H2v-2H0v4h4zM6 0h4v2H6zM12 0h4v2h-4z"/></svg>',
                    'dxrd-svg-properties-borders-top': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill dxd-opacity-80" d="M20 6h2v4h-2zM6 20h4v2H6zM20 12h2v4h-2zM4 20H2v-2H0v4h4zM12 20h4v2h-4zM2 4V2h18v2h2V0H0v4zM20 18v2h-2v2h4v-4zM0 12h2v4H0zM0 6h2v4H0z"/></svg>',
                    'dxrd-svg-properties-search': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2.6 21.4c.8.8 2 .8 2.8 0l4.6-4.6c1.2.7 2.6 1.1 4.1 1.1 4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8c0 1.5.4 2.9 1.1 4.1l-4.6 4.6c-.8.8-.8 2 0 2.8zM10 10.1c0-2.2 1.8-4 4-4s4 1.8 4 4-1.8 4-4 4-4-1.9-4-4z"/></svg>',
                    'dxrd-svg-properties-sortingbyalphabet': '<svg data-bind="svgAttrs" viewBox="0 0 16 16"><path class="dxd-icon-fill" d="M3.2 0L1 7h1.6L3 5.3h2L5.4 7H7L4.9 0H3.2zm0 4.2L3.8 2c0-.1.1-.4.2-.8v.1c0 .3.1.6.1.7l.5 2.2H3.2zM1 10h4l-4 5v1h6v-1H3l4-5V9H1zM13 12V0h-2v12H8l4 4 4-4z"/></svg>',
                    'dxrd-svg-properties-sortingbygroups': '<svg data-bind="svgAttrs" viewBox="0 0 16 16"><path class="dxd-icon-fill" d="M1 7h7V0H1v7zm1-6h5v5H2V1zM9 1h6v1H9zM9 3h6v1H9zM9 5h6v1H9zM9 10h6v1H9zM9 12h6v1H9zM9 14h6v1H9z"/><path class="dxd-icon-fill" d="M5 2H4v1H3v1h1v1h1V4h1V3H5zM1 16h7V9H1v7zm1-6h5v5H2v-5z"/><path class="dxd-icon-fill" d="M5 11H4v1H3v1h1v1h1v-1h1v-1H5z"/></svg>',
                    'dxrd-svg-queryBuilder-aggregate': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M21 0H3v4l8 8-8 8v4h18v-4H7l8-8-8-8h14z"/></svg>',
                    'dxrd-svg-queryBuilder-data_preview': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M21.7 20.3l-2.5-2.5c.5-.8.8-1.8.8-2.8 0-2.8-2.2-5-5-5s-5 2.2-5 5 2.2 5 5 5c1 0 2-.3 2.8-.8l2.5 2.5c.4.4 1 .4 1.4 0 .4-.4.4-1 0-1.4zM15 18c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z"/><ellipse class="dxd-icon-fill" cx="8" cy="2" rx="6" ry="2"/><path class="dxd-icon-fill" d="M8.7 13s-.1 0 0 0c-.1 0-.1 0 0 0H7.3C4.4 12.8 2 12 2 11v5c0 1 2.6 1.9 5.4 2H9c-.4-.9-.7-1.9-.7-2.9.1-.8.2-1.5.4-2.1zM14 8.2V4c0 1.1-2.9 2-6 2s-6-.9-6-2v5c0 1.1 2.9 2 6 2 .6 0 1.2 0 1.7-.1 1-1.4 2.5-2.4 4.3-2.7z"/></svg>',
                    'dxrd-svg-queryBuilder-group_by': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2 4h14v6H2zM8 14h14v6H8z"/></svg>',
                    'dxrd-svg-queryBuilder-select_statment': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M18 4l-4-4v4zM21.7 22.3l-4.5-4.5c.5-.8.8-1.8.8-2.8 0-2.8-2.2-5-5-5s-5 2.2-5 5 2.2 5 5 5c1 0 2-.3 2.8-.8l4.5 4.5c.4.4 1 .4 1.4 0s.4-1 0-1.4zM13.1 18c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.4 3-3 3z"/><path class="dxd-icon-fill" d="M13 8c2 0 3.7.8 5 2.1V6h-6V0H0v20h8.1C6.8 18.7 6 17 6 15c0-3.9 3.1-7 7-7z"/></svg>',
                    'dxrd-svg-queryBuilder-sorting_asc': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M8 0H4v14H2l4 8 4-8H8zM14 14h6l-6 6v2h8v-2h-6l6-6v-2h-8zM19.4 0L14 10h2l.9-2H20v2h2V0h-2.6zm.6 6h-1.9L20 2v4z"/></svg>',
                    'dxrd-svg-queryBuilder-sorting_desc': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M8 0H4v14H2l4 8 4-8H8zM22 0h-8v2h6l-6 6v2h8V8h-6l6-6zM14 22h2l.9-2H20v2h2V12h-2.6L14 22zm6-4h-1.9l1.9-4v4z"/></svg>',
                    'dxrd-svg-tabs-properties': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><circle class="dxd-icon-fill" cx="12" cy="12" r="2"/><path class="dxd-icon-fill" d="M20 10h-.3c-.2-.7-.5-1.4-.9-2.1l.2-.2c.8-.8.8-2.1 0-2.8-.8-.8-2.1-.8-2.8 0l-.2.2c-.6-.4-1.3-.7-2.1-.9V4c0-1.1-.9-2-2-2S10 2.9 10 4v.3c-.7.2-1.4.4-2.1.8l-.1-.2c-.8-.7-2.1-.7-2.9 0-.7.8-.7 2.1 0 2.9l.2.2c-.4.6-.6 1.3-.8 2H4c-1.1 0-2 .9-2 2s.9 2 2 2h.3c.2.7.5 1.4.9 2.1l-.2.2c-.8.8-.8 2.1 0 2.8.8.8 2.1.8 2.8 0l.2-.2c.6.4 1.3.7 2.1.9v.2c0 1.1.9 2 2 2s2-.9 2-2v-.3c.7-.2 1.4-.5 2.1-.9l.2.2c.8.8 2.1.8 2.8 0 .8-.8.8-2.1 0-2.8L19 16c.4-.6.7-1.3.9-2.1h.1c1.1 0 2-.9 2-2 0-1-.9-1.9-2-1.9zm-8 6c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"/></svg>',
                    'dxrd-svg-toolbar-copy': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M10 10h4l-4-4z"/><path class="dxd-icon-fill" d="M8 6H0v18h14V12H8zM18 0v4h4z"/><path class="dxd-icon-fill" d="M16 0H8v4h2l6 6v8h6V6h-6z"/></svg>',
                    'dxrd-svg-toolbar-cut': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M17.9 14c-.6 0-1.2.1-1.7.4L14 12l6-6V2l-8 8-8-8v4l6 6 2-2 2 2-2 2-2-2-2.3 2.4c-.6-.2-1.1-.4-1.7-.4-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4c0-.6-.1-1.1-.3-1.6L12 14l2.3 2.4c-.2.5-.3 1-.3 1.6 0 2.2 1.8 4 4 4s4-1.8 4-4c-.1-2.2-1.9-4-4.1-4zM6 20c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm11.9 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>',
                    'dxrd-svg-toolbar-delete': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M20 4l-2-2-7 7-7-7-2 2 7 7-7 7 2 2 7-7 7 7 2-2-7-7z"/></svg>',
                    'dxrd-svg-toolbar-paste': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M8 2V0H6v2H4v2h6V2zM16 16v-6h-6v14h12v-8z"/><path class="dxd-icon-fill" d="M22 14h-4v-4zM8 8h6V2h-2v4H2V2H0v16h8z"/></svg>',
                    'dxrd-svg-toolbar-redo': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M24 9L14 2v4h-1.2C6 6 0 12.2 0 19v3c1.6-5.9 7-10 12.8-10H14v4.1L24 9z"/></svg>',
                    'dxrd-svg-toolbar-undo': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M0 9l10-7v4h1.2C18 6 24 12.2 24 19v3c-1.6-5.9-7-10-12.8-10H10v4.1L0 9z"/></svg>',
                    'dxrd-svg-toolbar-validate': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M22 6L8 20l-6-6v-4l6 6L22 2v4z"/></svg>',
                    'dxrd-svg-toolbar-zoomin': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M22 10h-8V2h-4v8H2v4h8v8h4v-8h8z"/></svg>',
                    'dxrd-svg-toolbar-zoomout': '<svg data-bind="svgAttrs" viewBox="0 0 24 24"><path class="dxd-icon-fill" d="M2 10h20v4H2z"/></svg>',
                };
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var SvgTemplateSource = (function () {
                    function SvgTemplateSource(template, _data, _templates) {
                        this._data = _data;
                        this._templates = _templates;
                        this.templateName = template;
                    }
                    SvgTemplateSource.prototype.data = function (key, value) {
                        this._data[this.templateName] = this._data[this.templateName] || {};
                        if (arguments.length === 1) {
                            return this._data[this.templateName][key];
                        }
                        this._data[this.templateName][key] = value;
                    };
                    SvgTemplateSource.prototype.text = function (value) {
                        if (arguments.length === 0) {
                            var template = this._templates[this.templateName];
                            if (!template)
                                throw new Error("Cannot find template with ID " + this.templateName);
                            return template;
                        }
                        this._templates[this.templateName] = value;
                    };
                    return SvgTemplateSource;
                }());
                var SvgTemplatesEngine = (function () {
                    function SvgTemplatesEngine() {
                        var _this = this;
                        this._hasTemplate = function (name) { return _this._templates.hasOwnProperty(name); };
                        this.makeTemplateSource = function (template, doc) {
                            var elem;
                            if (typeof template === "string") {
                                elem = (doc || document).getElementById(template);
                                if (elem) {
                                    return new ko.templateSources.domElement(elem);
                                }
                                return new ko.templateSources["svgTemplateSource"](template, _this._data, _this._templates);
                            }
                            else if (template && (template.nodeType == 1) || (template.nodeType == 8)) {
                                return new ko.templateSources.anonymousTemplate(template);
                            }
                            else
                                throw new Error("Unknown template type: " + template);
                        };
                        this._engine = new ko.nativeTemplateEngine();
                        this._data = {};
                        this._templates = {};
                        ko.templateSources["svgTemplateSource"] = SvgTemplateSource;
                        this._engine["makeTemplateSource"] = this.makeTemplateSource;
                        ko.setTemplateEngine(this._engine);
                    }
                    Object.defineProperty(SvgTemplatesEngine, "Instance", {
                        get: function () {
                            return this._instance || (this._instance = new this());
                        },
                        enumerable: true,
                        configurable: true
                    });
                    Object.defineProperty(SvgTemplatesEngine, "templates", {
                        get: function () {
                            return SvgTemplatesEngine.Instance._templates;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    SvgTemplatesEngine.addTemplates = function (templates) {
                        ko.utils.extend(SvgTemplatesEngine.templates, templates);
                    };
                    SvgTemplatesEngine.getExistingTemplate = function (name) {
                        return SvgTemplatesEngine.Instance._hasTemplate(name) ? name : undefined;
                    };
                    return SvgTemplatesEngine;
                }());
                Internal.SvgTemplatesEngine = SvgTemplatesEngine;
                function getTemplate(id) {
                    var id = id[0] === '#' ? id.substr(1) : id;
                    return $('#' + id).text() || DevExpress.Analytics.Widgets.Internal.SvgTemplatesEngine.templates[id];
                }
                Internal.getTemplate = getTemplate;
                SvgTemplatesEngine.addTemplates(Widgets.Internal.availableTemplates);
                SvgTemplatesEngine.addTemplates(Widgets.Internal.extendedTemplates());
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function propertiesVisitor(target, visitor, visited, skip) {
                if (visited === void 0) { visited = []; }
                if (skip === void 0) { skip = ["surface"]; }
                if (target && target !== undefined) {
                    var properties = [];
                    for (var propertyName in target) {
                        if (propertyName.indexOf("_") !== 0 && skip.indexOf(propertyName) === -1) {
                            var realPropertyName = propertyName;
                            if (ko.isComputed(target[propertyName]) && ko.isWriteableObservable(target["_" + propertyName])) {
                                realPropertyName = "_" + realPropertyName;
                            }
                            if (visited.indexOf(target[realPropertyName]) === -1 && !ko.isComputed(target[realPropertyName])) {
                                properties.push(target[realPropertyName]);
                            }
                        }
                    }
                    visitor(properties);
                    visited.push.apply(visited, properties);
                    properties.forEach(function (property) {
                        property = ko.unwrap(property);
                        if (typeof property === 'object') {
                            propertiesVisitor(property, visitor, visited, skip);
                        }
                    });
                }
            }
            Utils.propertiesVisitor = propertiesVisitor;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function checkModelReady(model) {
                return model.isModelReady ? model.isModelReady() : true;
            }
            Utils.checkModelReady = checkModelReady;
            var UndoEngine = (function (_super) {
                __extends(UndoEngine, _super);
                function UndoEngine(target, ignoredProperties, getInfoMethodName) {
                    if (ignoredProperties === void 0) { ignoredProperties = ["surface"]; }
                    var _this = _super.call(this) || this;
                    _this._groupObservers = [];
                    _this._getInfoMethodName = null;
                    _this._groupPosition = -1;
                    _this._observers = [];
                    _this._subscriptions = [];
                    _this._visited = [];
                    _this._position = ko.observable(-1);
                    _this._lockedPosition = ko.observable(-1);
                    _this._inUndoRedo = false;
                    _this.redoEnabled = ko.observable(false);
                    _this.undoEnabled = ko.observable(false);
                    _this.isIngroup = -1;
                    _this.isDirty = ko.computed({
                        read: function () { return _this._position() !== _this._lockedPosition(); },
                        write: function (value) { value ? _this._lockedPosition("forcibly marked as dirty") : _this._lockedPosition(_this._position()); }
                    });
                    _this._model = ko.unwrap(target);
                    _this._getInfoMethodName = getInfoMethodName;
                    _this._ignoredProperties = ignoredProperties;
                    if (_this._getInfoMethodName) {
                        if (ko.isSubscribable(target)) {
                            _this._targetSubscription = _this.subscribeProperty(target, true);
                        }
                        else {
                            _this._createDisposeFunction(target);
                        }
                    }
                    else {
                        var innerSubscriptions = _this.subscribe(_this._model);
                        if (ko.isSubscribable(target)) {
                            var prevVal = target();
                            _this._targetSubscription = target.subscribe(function (newTargetValue) {
                                _this._removePropertiesSubscriptions();
                                if (!_this._inUndoRedo) {
                                    _this.properyChanged({
                                        observable: target, propertyChanged: { oldVal: prevVal, val: newTargetValue }
                                    });
                                    prevVal = newTargetValue;
                                }
                                _this._cleanSubscribtions(innerSubscriptions);
                                _this._model = newTargetValue;
                                innerSubscriptions = _this.subscribe(_this._model);
                            });
                        }
                    }
                    _this._disposables.push(_this.isDirty);
                    return _this;
                }
                UndoEngine.tryGetUndoEngine = function (object) {
                    return object[UndoEngine._disposeUndoEngineSubscriptionsName] && object[UndoEngine._disposeUndoEngineSubscriptionsName].instance;
                };
                Object.defineProperty(UndoEngine.prototype, "_modelReady", {
                    get: function () {
                        return checkModelReady(this._model);
                    },
                    enumerable: true,
                    configurable: true
                });
                UndoEngine.prototype._disposeObserver = function (record) {
                    if (record.propertyChanged) {
                        var value = record.propertyChanged.val;
                        if (value && !value[UndoEngine._disposeUndoEngineSubscriptionsName]) {
                            value.dispose && value.dispose();
                        }
                    }
                    else if (record.arrayChanges) {
                        record.arrayChanges.forEach(function (change) {
                            if (change.status === "added") {
                                var value = change.value;
                                if (value && !value[UndoEngine._disposeUndoEngineSubscriptionsName])
                                    value.dispose && value.dispose();
                            }
                        });
                    }
                };
                UndoEngine.prototype.properyChanged = function (undoRecord) {
                    var _this = this;
                    if (this._inUndoRedo) {
                        return;
                    }
                    var currentPosition = this._position() + 1;
                    if (currentPosition < this._observers.length) {
                        var removedItems = this._observers.splice(currentPosition, this._observers.length);
                        removedItems.forEach(function (changeSet) {
                            if (Array.isArray(changeSet)) {
                                changeSet.reverse().forEach(function (item) { return _this._disposeObserver(item); });
                            }
                            else {
                                _this._disposeObserver(changeSet);
                            }
                        });
                    }
                    this._observers.push(undoRecord);
                    this._position(currentPosition);
                    this.undoEnabled(true);
                    this.redoEnabled(false);
                };
                UndoEngine.prototype.visitProperties = function (target, info) {
                    var subscribtions = [];
                    if (target && info) {
                        for (var i = 0; i < info.length; i++) {
                            if (info[i].modelName || info[i].editor || info[i].info) {
                                var realPropertyName = this.validatePropertyName(target, info[i].propertyName);
                                if (realPropertyName) {
                                    if (!ko.isComputed(target[realPropertyName])) {
                                        if (!ko.isObservable(target[realPropertyName])) {
                                            subscribtions.push.apply([], this._createDisposeFunction(target[realPropertyName], info[i].info));
                                        }
                                        else {
                                            subscribtions.push(this.subscribeProperty(target[realPropertyName], !info[i].link));
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return subscribtions;
                };
                UndoEngine.prototype.undoChangeSet = function (changeSet) {
                    if (changeSet.propertyChanged) {
                        changeSet.observable(changeSet.propertyChanged.oldVal);
                    }
                    else {
                        var array = changeSet.observable();
                        for (var i = 0; i < changeSet.arrayChanges.length; i++) {
                            if (changeSet.arrayChanges[i].status === "added") {
                                array.splice(array.indexOf(changeSet.arrayChanges[i].value), 1);
                            }
                            else if (changeSet.arrayChanges[i].status === "deleted") {
                                array.splice(changeSet.arrayChanges[i].index, 0, changeSet.arrayChanges[i].value);
                            }
                        }
                        changeSet.observable.valueHasMutated();
                    }
                };
                UndoEngine.prototype.redoChangeSet = function (changeSet) {
                    if (changeSet.propertyChanged) {
                        changeSet.observable(changeSet.propertyChanged.val);
                    }
                    else {
                        var array = changeSet.observable();
                        for (var i = 0; i < changeSet.arrayChanges.length; i++) {
                            if (changeSet.arrayChanges[i].status === "added") {
                                array.splice(changeSet.arrayChanges[i].index, 0, changeSet.arrayChanges[i].value);
                            }
                            else if (changeSet.arrayChanges[i].status === "deleted") {
                                array.splice(array.indexOf(changeSet.arrayChanges[i].value), 1);
                            }
                        }
                        changeSet.observable.valueHasMutated();
                    }
                };
                UndoEngine.prototype._disposeChilds = function (target, info) {
                    if (target && info) {
                        for (var i = 0; i < info.length; i++) {
                            if (info[i].modelName || info[i].editor || info[i].info) {
                                var propertyName = info[i].propertyName;
                                if (propertyName.indexOf("_") !== 0) {
                                    var realPropertyName = propertyName;
                                    if (ko.isWriteableObservable(target["_" + propertyName])) {
                                        realPropertyName = "_" + realPropertyName;
                                    }
                                    if (!ko.isComputed(target[realPropertyName])) {
                                        var val = ko.unwrap(target[realPropertyName]);
                                        if (!!val && typeof val === "object") {
                                            if (!info[i].link) {
                                                this._callDisposeFunction(val);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                };
                UndoEngine.prototype._createDisposeFunction = function (val, info) {
                    var _this = this;
                    var subscriptions = [];
                    if (val && typeof val === "object") {
                        var objectInfo = info || (val[this._getInfoMethodName] && val[this._getInfoMethodName]());
                        if (!!objectInfo) {
                            if (val[UndoEngine._disposeUndoEngineSubscriptionsName]) {
                                val[UndoEngine._disposeUndoEngineSubscriptionsName].inc++;
                            }
                            else {
                                val[UndoEngine._disposeUndoEngineSubscriptionsName] = { inc: 1, instance: this };
                                subscriptions = this.subscribe(val, objectInfo);
                                val[UndoEngine._disposeUndoEngineSubscriptionsName]["func"] = function () {
                                    val[UndoEngine._disposeUndoEngineSubscriptionsName].inc--;
                                    _this._disposeChilds(val, objectInfo);
                                    if (val[UndoEngine._disposeUndoEngineSubscriptionsName].inc === 0) {
                                        _this._cleanSubscribtions(subscriptions);
                                        delete val[UndoEngine._disposeUndoEngineSubscriptionsName];
                                    }
                                };
                            }
                        }
                    }
                    return subscriptions;
                };
                UndoEngine.prototype._callDisposeFunction = function (val) {
                    if (val) {
                        if (Array.isArray(val)) {
                            for (var i = 0; i < val.length; i++) {
                                val[i][UndoEngine._disposeUndoEngineSubscriptionsName] && val[i][UndoEngine._disposeUndoEngineSubscriptionsName].func();
                            }
                        }
                        else {
                            val[UndoEngine._disposeUndoEngineSubscriptionsName] && val[UndoEngine._disposeUndoEngineSubscriptionsName].func();
                        }
                    }
                };
                UndoEngine.prototype._cleanSubscribtions = function (subscribtionArray) {
                    if (subscribtionArray) {
                        if (subscribtionArray.length) {
                            for (var i = 0; i < subscribtionArray.length; i++) {
                                this._cleanSubscribtions(subscribtionArray[i]);
                            }
                        }
                        else {
                            subscribtionArray.dispose && subscribtionArray.dispose();
                        }
                    }
                };
                UndoEngine.prototype.validatePropertyName = function (target, propertyName) {
                    if ((!this._ignoredProperties || (this._ignoredProperties && this._ignoredProperties.indexOf(propertyName) === -1)) && propertyName.indexOf("_") !== 0) {
                        if (ko.isWriteableObservable(target["_" + propertyName])) {
                            return "_" + propertyName;
                        }
                        return propertyName;
                    }
                    return null;
                };
                UndoEngine.prototype.subscribeProperty = function (property, subscribeChilds) {
                    var _this = this;
                    if (ko.isObservable(property)) {
                        var prevVal = property();
                        if (Array.isArray(prevVal)) {
                            for (var i = 0; i < property().length; i++) {
                                this._createDisposeFunction(property()[i]);
                            }
                            return property.subscribe(function (args) {
                                if (_this._modelReady) {
                                    var addedItems = args.filter(function (x) { return x.status === "added"; });
                                    var removedItems = args.filter(function (x) { return x.status === "deleted"; });
                                    for (var i = 0; i < removedItems.length; i++) {
                                        _this._callDisposeFunction(removedItems[i].value);
                                    }
                                    for (var i = 0; i < addedItems.length; i++) {
                                        _this._createDisposeFunction(addedItems[i].value);
                                    }
                                    _this.properyChanged({ observable: property, arrayChanges: args });
                                }
                            }, null, "arrayChange");
                        }
                        else {
                            if (ko.isWriteableObservable(property)) {
                                if (subscribeChilds) {
                                    this._createDisposeFunction(property());
                                }
                                return property.subscribe(function (val) {
                                    if (_this._modelReady) {
                                        if (subscribeChilds) {
                                            _this._callDisposeFunction(prevVal);
                                        }
                                        _this.properyChanged({
                                            observable: property, propertyChanged: { oldVal: prevVal, val: val }
                                        });
                                        prevVal = val;
                                        if (subscribeChilds) {
                                            _this._createDisposeFunction(val);
                                        }
                                    }
                                });
                            }
                        }
                    }
                };
                UndoEngine.prototype.subscribeProperties = function (properties) {
                    var _this = this;
                    properties.forEach(function (property) {
                        if (ko.isObservable(property)) {
                            var prevVal = property();
                            if (property["push"]) {
                                _this._subscriptions.push(property.subscribe(function (args) {
                                    if (_this._modelReady) {
                                        if (!_this._inUndoRedo) {
                                            _this.properyChanged({ observable: property, arrayChanges: args });
                                            _this.subscribe(args.map(function (item) { return item.value; }));
                                        }
                                    }
                                }, null, "arrayChange"));
                            }
                            else {
                                if (ko.isWriteableObservable(property)) {
                                    _this._subscriptions.push(property.subscribe(function (val) {
                                        if (_this._modelReady) {
                                            _this.properyChanged({
                                                observable: property, propertyChanged: { oldVal: prevVal, val: val }
                                            });
                                            prevVal = property();
                                        }
                                    }));
                                }
                            }
                        }
                    });
                };
                UndoEngine.prototype.subscribe = function (target, info) {
                    var _this = this;
                    if (this._getInfoMethodName) {
                        return this.visitProperties(target, info || (target && target[this._getInfoMethodName] && target[this._getInfoMethodName]()));
                    }
                    else {
                        Utils.propertiesVisitor(target, function (properties) { _this.subscribeProperties(properties); }, this._visited, this._ignoredProperties);
                    }
                };
                UndoEngine.prototype._removePropertiesSubscriptions = function () {
                    this._subscriptions.forEach(function (subscription) { return subscription.dispose(); });
                    this._subscriptions = [];
                    this._visited = [];
                };
                UndoEngine.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.removeTargetSubscription();
                };
                UndoEngine.prototype.removeTargetSubscription = function () {
                    this._targetSubscription && this._targetSubscription.dispose();
                    this.reset();
                };
                UndoEngine.prototype.undoAll = function () {
                    if (this.undoEnabled()) {
                        this.undo();
                        this.undoAll();
                    }
                };
                UndoEngine.prototype.reset = function () {
                    this._removePropertiesSubscriptions();
                    this.clearHistory();
                };
                UndoEngine.prototype.clearHistory = function () {
                    this._groupObservers = [];
                    this._observers = [];
                    this.redoEnabled(false);
                    this.undoEnabled(false);
                    this._inUndoRedo = false;
                    this._groupPosition = -1;
                    this._position(-1);
                    this._lockedPosition(this._position());
                };
                UndoEngine.prototype.undo = function () {
                    var _this = this;
                    try {
                        this._inUndoRedo = true;
                        if (this.undoEnabled()) {
                            var changeSet = this._observers[this._position()];
                            if (changeSet) {
                                if (Array.isArray(changeSet)) {
                                    changeSet.reverse().forEach(function (item) { return _this.undoChangeSet(item); });
                                }
                                else {
                                    this.undoChangeSet(changeSet);
                                }
                                this._position(this._position() - 1);
                                this.undoEnabled(this._observers.length !== 0 && this._position() >= 0);
                                this.redoEnabled(true);
                            }
                        }
                    }
                    finally {
                        this._inUndoRedo = false;
                    }
                };
                UndoEngine.prototype.redo = function () {
                    var _this = this;
                    try {
                        this._inUndoRedo = true;
                        if (this.redoEnabled()) {
                            var changeSet = this._observers[this._position() + 1];
                            if (changeSet) {
                                if (Array.isArray(changeSet)) {
                                    changeSet.reverse().forEach(function (item) { return _this.redoChangeSet(item); });
                                }
                                else {
                                    this.redoChangeSet(changeSet);
                                }
                                this._position(this._position() + 1);
                                this.undoEnabled(this._observers.length !== 0 && this._position() >= 0);
                                this.redoEnabled(this._position() + 1 < this._observers.length);
                            }
                        }
                    }
                    finally {
                        this._inUndoRedo = false;
                    }
                };
                UndoEngine.prototype.start = function () {
                    this.isIngroup++;
                    if (this.isIngroup !== 0)
                        return;
                    this._groupObservers = this._observers;
                    this._observers = [];
                    this._groupPosition = this._position();
                    this._position(-1);
                    this._lockedPosition(this._position());
                };
                UndoEngine.prototype.end = function () {
                    var _this = this;
                    this.isIngroup--;
                    if (this.isIngroup !== -1) {
                        return;
                    }
                    if (this._observers.length > 0) {
                        this._position(this._groupPosition + 1);
                        var removedItems = this._groupObservers.splice(this._position(), this._groupObservers.length - this._position(), this._observers);
                        removedItems.forEach(function (changeSet) {
                            if (Array.isArray(changeSet)) {
                                changeSet.reverse().forEach(function (item) { return _this._disposeObserver(item); });
                            }
                            else {
                                _this._disposeObserver(changeSet);
                            }
                        });
                    }
                    else {
                        this._position(this._groupPosition);
                    }
                    this._observers = this._groupObservers;
                };
                UndoEngine._disposeUndoEngineSubscriptionsName = "___dispose___UndoEngine___Subscriptions___";
                return UndoEngine;
            }(Utils.Disposable));
            Utils.UndoEngine = UndoEngine;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Utils;
        (function (Utils) {
            var UndoEngine = (function (_super) {
                __extends(UndoEngine, _super);
                function UndoEngine() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return UndoEngine;
            }(DevExpress.Analytics.Utils.UndoEngine));
            Utils.UndoEngine = UndoEngine;
            ;
            Utils.DEBUG = false;
            Utils.NotifyAboutWarning = function () { };
            Utils.propertiesVisitor = DevExpress.Analytics.Utils.propertiesVisitor;
        })(Utils = JS.Utils || (JS.Utils = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "UndoEngine");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "propertiesVisitor");

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var PathRequest = (function () {
                function PathRequest(fullPath, pathParts) {
                    if (pathParts === void 0) { pathParts = []; }
                    this.pathParts = pathParts;
                    this.path = "";
                    this.fullPath = fullPath;
                    if (fullPath) {
                        if (fullPath.indexOf('.') !== -1) {
                            var pathComponents = fullPath.split('.');
                            this.id = this.ref = pathComponents[0];
                            pathComponents.splice(0, 1);
                            this.path = pathComponents.join('.');
                        }
                        else {
                            this.id = this.ref = fullPath;
                        }
                    }
                }
                return PathRequest;
            }());
            Utils.PathRequest = PathRequest;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var ValueEditorHelper = (function () {
                    function ValueEditorHelper() {
                    }
                    ValueEditorHelper._getCharFromKeyCode = function (e) {
                        var code = 0;
                        if (navigator.userAgent.toLowerCase().indexOf('firefox') === -1) {
                            code = e.keyCode;
                        }
                        else if (e.ctrlKey === false) {
                            code = e.charCode;
                        }
                        if (code) {
                            return String.fromCharCode(code);
                        }
                        return null;
                    };
                    ValueEditorHelper._getCaretPosition = function (el) {
                        var start = -1, end = -1, normalizedValue, range, textInputRange, len, endRange;
                        try {
                            if (typeof el.selectionStart == "number" && typeof el.selectionEnd == "number") {
                                start = el.selectionStart;
                                end = el.selectionEnd;
                            }
                            else if (document["selection"]) {
                                range = document["selection"].createRange();
                                if (range && range.parentElement() == el) {
                                    len = el.value.length;
                                    normalizedValue = el.value.replace(/\r\n/g, "\n");
                                    textInputRange = el.createTextRange();
                                    textInputRange.moveToBookmark(range.getBookmark());
                                    endRange = el.createTextRange();
                                    endRange.collapse(false);
                                    if (textInputRange.compareEndPoints("StartToEnd", endRange) > -1) {
                                        start = end = len;
                                    }
                                    else {
                                        start = -textInputRange.moveStart("character", -len);
                                        start += normalizedValue.slice(0, start).split("\n").length - 1;
                                        if (textInputRange.compareEndPoints("EndToEnd", endRange) > -1) {
                                            end = len;
                                        }
                                        else {
                                            end = -textInputRange.moveEnd("character", -len);
                                            end += normalizedValue.slice(0, end).split("\n").length - 1;
                                        }
                                    }
                                }
                            }
                        }
                        catch (e) {
                        }
                        return {
                            start: start,
                            end: end
                        };
                    };
                    ValueEditorHelper._validate = function (value, minValue, maxValue) {
                        var _a, _b, _c, _d;
                        if (!/^(0|(-?(([1-9]\d*)|(0\.\d+)|([1-9]\d*\.\d+)|(\d*\.\d+[eE][+\-]?\d+))))$/.test(value))
                            return false;
                        if (!maxValue)
                            return true;
                        var negative = value[0] === "-";
                        var valModulo = negative ? value.substring(1) : value;
                        if (negative && !minValue)
                            return false;
                        var boundModulo = negative ? minValue.substring(1) : maxValue;
                        var valMantissa, valExp, boundMantissa, boundExp;
                        _a = valModulo.toLowerCase().split("e"), valMantissa = _a[0], valExp = _a[1];
                        _b = boundModulo.toLowerCase().split("e"), boundMantissa = _b[0], boundExp = _b[1];
                        var valIntPart, valFracPart, boundIntPart, boundFracPart;
                        _c = valMantissa.split("."), valIntPart = _c[0], valFracPart = _c[1];
                        _d = boundMantissa.split("."), boundIntPart = _d[0], boundFracPart = _d[1];
                        valIntPart = (valIntPart || "").replace(/^0+/, "");
                        boundIntPart = (boundIntPart || "").replace(/^0+/, "");
                        var valOrder = valIntPart.length;
                        if (valExp)
                            valOrder += parseInt(valExp);
                        var boundOrder = boundIntPart.length;
                        if (boundExp)
                            boundOrder += parseInt(boundExp);
                        if (valOrder < boundOrder)
                            return true;
                        if (valOrder > boundOrder)
                            return false;
                        valFracPart = valFracPart || "0";
                        boundFracPart = boundFracPart || "0";
                        if (valIntPart + valFracPart > boundIntPart + boundFracPart)
                            return false;
                        return true;
                    };
                    ValueEditorHelper.validateWidgetValue = function (e, validate, defaultVal) {
                        var currentValue = e.component.option("value");
                        if (!validate(currentValue)) {
                            e.component.option("value", defaultVal);
                        }
                    };
                    ValueEditorHelper.getNumberEditorOptions = function (id, specifics, extendOptions) {
                        if (extendOptions === void 0) { extendOptions = {}; }
                        var editorOptions = ValueEditorHelper.editors[id] || ValueEditorHelper.editors[specifics];
                        return editorOptions ? ValueEditorHelper.getValueEditorOptions(editorOptions.regExpEditing, function (value) {
                            return ValueEditorHelper._validate(value, editorOptions.minValue, editorOptions.maxValue);
                        }, "", extendOptions) : extendOptions;
                    };
                    ValueEditorHelper.getValueEditorOptions = function (regExpEditing, validate, defaultVal, extendOptions) {
                        var _this = this;
                        if (extendOptions === void 0) { extendOptions = {}; }
                        var options = {
                            onFocusIn: function (e) {
                                ValueEditorHelper.validateWidgetValue(e, validate, defaultVal);
                                ValueEditorHelper._invokeStandardHandler(extendOptions, "onFocusIn", e);
                            },
                            onKeyPress: function (e) {
                                var char = ValueEditorHelper._getCharFromKeyCode(e.event);
                                if (!char)
                                    return;
                                var $input = $(e.element).find("input").eq(0);
                                var caretPosition = ValueEditorHelper._getCaretPosition($input.get(0));
                                var currentValue = $input.val();
                                if (caretPosition.start < 0) {
                                    caretPosition = currentValue ? currentValue.length : 0;
                                }
                                var result = [currentValue.slice(0, caretPosition.start), char, currentValue.slice(caretPosition.end)].join("");
                                if (!regExpEditing.test(result))
                                    e.event.preventDefault();
                                $input = null;
                                ValueEditorHelper._invokeStandardHandler(extendOptions, "onKeyPress", e);
                            },
                            onPaste: function (e) {
                                var clipboardData = e.event.originalEvent.clipboardData || window["clipboardData"] || {};
                                var pastedData = clipboardData.getData && clipboardData.getData("Text");
                                if (typeof pastedData !== "string")
                                    return;
                                var $input = $(e.element).find("input").eq(0);
                                var caretPosition = ValueEditorHelper._getCaretPosition($input.get(0));
                                var currentValue = $input.val();
                                if (caretPosition.start < 0) {
                                    caretPosition.end = caretPosition.start = currentValue ? currentValue.length : 0;
                                }
                                var result = [
                                    currentValue.slice(0, caretPosition.start), pastedData, currentValue.slice(caretPosition.end)
                                ].join("");
                                if (!regExpEditing.test(result))
                                    e.event.preventDefault();
                                $input = null;
                                ValueEditorHelper._invokeStandardHandler(extendOptions, "onPaste", e);
                            },
                            onValueChanged: function (e) {
                                if (e.value !== defaultVal)
                                    _this.validateWidgetValue(e, validate, e.previousValue);
                                ValueEditorHelper._invokeStandardHandler(extendOptions, "onValueChanged", e);
                            }
                        };
                        return $.extend({}, extendOptions, options);
                    };
                    ValueEditorHelper.isValid = function (id, specifics, value) {
                        var editorOptions = ValueEditorHelper.editors[id] || ValueEditorHelper.editors[specifics];
                        return editorOptions.regExpEditing.test(value) && ValueEditorHelper._validate(value, editorOptions.minValue, editorOptions.maxValue);
                    };
                    ValueEditorHelper._invokeStandardHandler = function (extendOptions, name, e) {
                        if ($.isFunction(extendOptions[name]))
                            extendOptions[name](e);
                    };
                    ValueEditorHelper.editors = {
                        "integer": {
                            regExpEditing: /^-?\d*$/
                        },
                        "float": {
                            regExpEditing: /^-?(\d+\.?\d*)?([eE][+\-]?\d+)?$/
                        },
                        "System.Byte": {
                            regExpEditing: /^\d*$/,
                            minValue: null,
                            maxValue: "255"
                        },
                        "System.SByte": {
                            regExpEditing: /^-?\d*$/,
                            minValue: "-128",
                            maxValue: "127"
                        },
                        "System.Int16": {
                            regExpEditing: /^-?\d*$/,
                            minValue: "-32768",
                            maxValue: "32767"
                        },
                        "System.UInt16": {
                            regExpEditing: /^\d*$/,
                            minValue: null,
                            maxValue: "65535"
                        },
                        "System.Int32": {
                            regExpEditing: /^-?\d*$/,
                            minValue: "-2147483648",
                            maxValue: "2147483647"
                        },
                        "System.UInt32": {
                            regExpEditing: /^\d*$/,
                            minValue: null,
                            maxValue: "4294967295"
                        },
                        "System.Int64": {
                            regExpEditing: /^-?\d*$/,
                            minValue: "-9223372036854775808",
                            maxValue: "9223372036854775807"
                        },
                        "System.UInt64": {
                            regExpEditing: /^\d*$/,
                            minValue: null,
                            maxValue: "18446744073709551615"
                        },
                        "System.Single": {
                            regExpEditing: /^-?(\d+\.?\d*)?([eE][+\-]?\d*)?$/,
                            minValue: "-3.40282347e+38",
                            maxValue: "3.40282347e+38"
                        },
                        "System.Double": {
                            regExpEditing: /^-?(\d+\.?\d*)?([eE][+\-]?\d*)?$/,
                            minValue: "-1.7976931348623157e+308",
                            maxValue: "1.7976931348623157e+308"
                        },
                        "System.Decimal": {
                            regExpEditing: /^-?(\d+\.?\d*)?([eE][+\-]?\d*)?$/,
                            minValue: "-79228162514264337593543950335",
                            maxValue: "79228162514264337593543950335"
                        }
                    };
                    return ValueEditorHelper;
                }());
                Internal.ValueEditorHelper = ValueEditorHelper;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function integerValueConverter(val, defaultValue) {
                var stringValue = "" + val;
                return Analytics.Widgets.Internal.ValueEditorHelper.isValid(this.value, "integer", stringValue) ? stringValue : defaultValue;
            }
            Utils.integerValueConverter = integerValueConverter;
            function validateExpression(options) {
                var deferred = $.Deferred();
                try {
                    var requests = [];
                    var _pushRequest = function (path, propertyName) {
                        var propertyDeferred = $.Deferred();
                        options.fieldListProvider.getItemByPath(new Utils.PathRequest(path))
                            .done(function (_) { return propertyDeferred.resolve(); }).fail(function (_) {
                            path === propertyName ? propertyDeferred.reject()
                                : options.fieldListProvider.getItemByPath(new Utils.PathRequest([path.split('.')[0], propertyName].join('.')))
                                    .done(function (_) { return propertyDeferred.resolve(); }).fail(function (_) { return propertyDeferred.reject(); });
                        });
                        requests.push(propertyDeferred);
                    };
                    var expression = Analytics.Criteria.CriteriaOperator.parse(options.expression);
                    Analytics.Criteria.Utils.criteriaForEach(expression, function (operator, innerPath) {
                        if (operator instanceof Analytics.Criteria.OperandProperty) {
                            var propertyName = operator.propertyName.indexOf("^.") === 0 ? operator.propertyName.substring(2) : operator.propertyName;
                            var path = propertyName;
                            if ((options.rootItems || []).indexOf(propertyName.split('.')[0]) === -1 && innerPath) {
                                path = [innerPath, propertyName].join('.');
                            }
                            _pushRequest(path, propertyName);
                        }
                        else if (operator instanceof Analytics.Criteria.OperandParameter) {
                            var parameterName = operator.parameterName;
                            var parameterPath = "Parameters." + parameterName;
                            _pushRequest(parameterPath, parameterName);
                        }
                    }, options.path);
                    $.when.apply($, requests).done(function (_) { return deferred.resolve(); }).fail(function (_) { return deferred.reject(); });
                }
                catch (e) {
                    deferred.reject();
                }
                return deferred.promise();
            }
            Utils.validateExpression = validateExpression;
            function floatValueConverter(val, defaultValue) {
                var stringValue = "" + val;
                return Analytics.Widgets.Internal.ValueEditorHelper.isValid(this.value, "float", stringValue) ? stringValue : defaultValue;
            }
            Utils.floatValueConverter = floatValueConverter;
            var _lightThemes = ['generic.light', 'generic.carmine', 'generic.greenmist', 'generic.softblue', 'generic.light.compact'];
            var _darkThemes = ['generic.dark', 'generic.contrast', 'generic.dark.compact', 'generic.darkmoon', 'generic.darkviolet'];
            function getCurrentTheme() {
                return DevExpress.ui.themes.current();
            }
            function isDarkTheme(theme) {
                theme = theme || getCurrentTheme();
                if ($.inArray(theme, _darkThemes) !== -1)
                    return true;
                if ($.inArray(theme, _lightThemes) !== -1)
                    return false;
                return false;
            }
            Utils.isDarkTheme = isDarkTheme;
            function setCursorInFunctionParameter(paramCount, editor, insertValue) {
                if (!paramCount || paramCount <= 0)
                    return;
                var cursorPosition = editor.getCursorPosition(), lastIndexOpeningBracket = insertValue.lastIndexOf("(");
                if (insertValue.charAt(lastIndexOpeningBracket + 1) === "'")
                    lastIndexOpeningBracket++;
                editor.gotoLine(cursorPosition.row + 1, cursorPosition.column - (insertValue.length - 1 - lastIndexOpeningBracket));
            }
            Utils.setCursorInFunctionParameter = setCursorInFunctionParameter;
            function isList(data) {
                return data.isList === true || data.specifics === "List" || data.specifics === "ListSource";
            }
            Utils.isList = isList;
            function getParentContainer(el, container) {
                if (container === void 0) { container = ".dx-designer-viewport"; }
                return $(el).closest(container);
            }
            Utils.getParentContainer = getParentContainer;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            Widgets.ace = DevExpress.Analytics.Widgets["ace"] || window["ace"];
            Widgets.aceAvailable = !!Widgets.ace;
            ko.bindingHandlers["dxAceEditor"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var values = valueAccessor(), text = values.value, editorContainer = values.editorContainer, editor, shouldProcessOnChangeEvent = true, _setEditorText = function (editorInstance, text) {
                        shouldProcessOnChangeEvent = false;
                        editorInstance.getSession().setValue((text && text.toString()) || "");
                        editorInstance.clearSelection();
                        editorInstance.getSession().getUndoManager().reset();
                        shouldProcessOnChangeEvent = true;
                    };
                    if (Widgets.ace) {
                        var showGutter = values.options.showGutter != undefined ? values.options.showGutter : true;
                        var additionalOptions = values.additionalOptions;
                        var langTools = Widgets.ace.require("ace/ext/language_tools");
                        editor = Widgets.ace.edit(element);
                        var guid = ko.observable(null);
                        var theme = values.theme;
                        if (!theme)
                            theme = Analytics.Utils.isDarkTheme() ? "ace/theme/ambiance" : "ace/theme/dreamweaver";
                        editor.setTheme(theme);
                        editor.$blockScrolling = Infinity;
                        var languageMode = viewModel.languageHelper.getLanguageMode();
                        var session = editor.getSession();
                        session.gutterRenderer = {
                            getWidth: function (session, lastLineNumber, config) {
                                return lastLineNumber.toString().length * config.characterWidth;
                            },
                            getText: function (session, row) {
                                return row + 1;
                            }
                        };
                        session.setMode(languageMode);
                        var onBlur = function () { editor.completer && editor.completer.popup && editor.completer.popup.hide(); }, onChange, onFocus;
                        if (additionalOptions) {
                            if (additionalOptions.onChange) {
                                var timer = null;
                                onChange = function (e) {
                                    if (timer !== null)
                                        clearTimeout(timer);
                                    if (shouldProcessOnChangeEvent) {
                                        timer = setTimeout(function () {
                                            text() !== session.getValue() && additionalOptions.onChange(session);
                                        }, additionalOptions && additionalOptions.changeTimeout || 1000);
                                    }
                                };
                                session.on("change", onChange);
                            }
                            if (additionalOptions.overrideEditorFocus) {
                                editor.focus = function (a, e) {
                                    editor.textInput.getElement().focus();
                                };
                            }
                            if (additionalOptions.onFocus) {
                                onFocus = function () { additionalOptions.onFocus(session); };
                                editor.on("focus", onFocus);
                            }
                            if (additionalOptions.onBlur) {
                                onBlur = function () {
                                    editor.completer && editor.completer.popup && editor.completer.popup.hide();
                                    return additionalOptions.onBlur(session);
                                };
                            }
                        }
                        editor.on("blur", onBlur);
                        var completers = viewModel.languageHelper.createCompleters(editor, bindingContext, viewModel);
                        langTools.setCompleters(completers);
                        editor.setOptions(values.options);
                        if (additionalOptions && "setUseWrapMode" in additionalOptions) {
                            editor.getSession().setUseWrapMode(additionalOptions.setUseWrapMode);
                        }
                        if (!showGutter) {
                            editor.renderer.setShowGutter(showGutter);
                        }
                        if (editor.renderer.$gutter) {
                            var gutterClassName = editor.renderer.$gutter.className + " dxd-border-primary dxd-text-primary dxd-back-primary";
                            editor.renderer.$gutter.className = gutterClassName;
                        }
                        var oldMouseMove = editor._defaultHandlers.guttermousemove;
                        editor._defaultHandlers.guttermousemove = function (e) {
                            var rect = element.getBoundingClientRect();
                            e.x = e.x - rect.left;
                            e.y = e.y - rect.top;
                            oldMouseMove(e);
                        };
                        if (ko.isSubscribable(text)) {
                            var subscription = text.subscribe(function (newText) {
                                if (newText !== session.getValue()) {
                                    _setEditorText(editor, newText);
                                }
                                if (additionalOptions && additionalOptions.onValueChange)
                                    additionalOptions.onValueChange(editor);
                            });
                        }
                        _setEditorText(editor, ko.unwrap(text));
                        if (values.callbacks)
                            values.callbacks.focus = function () {
                                setTimeout(function () {
                                    editor.textInput.getElement().focus();
                                }, 10);
                            };
                        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                            subscription.dispose();
                            if (values.callbacks)
                                values.callbacks.focus = $.noop;
                            completers.forEach(function (x) { return x.dispose && x.dispose(); });
                            onBlur && editor.off("blur", onBlur);
                            onFocus && editor.off("focus", onFocus);
                            onChange && session.off("change", onChange);
                        });
                    }
                    if (ko.isObservable(editorContainer)) {
                        editorContainer(editor);
                    }
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers["focus"] = {
                init: function (element, valueAccessor) {
                    var visible = valueAccessor().on || valueAccessor();
                    var subscription = visible.subscribe(function (newVal) {
                        if (newVal) {
                            setTimeout(function () {
                                $(element).find(":input").focus();
                            }, 1);
                        }
                    });
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                        subscription.dispose();
                    });
                }
            };
            ko.bindingHandlers["svgAttrs"] = {
                update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
                    element.setAttribute('xmlns', "http://www.w3.org/2000/svg");
                    element.setAttribute('xmlns:xlink', "http://www.w3.org/1999/xlink");
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                Internal.operatorNames = [
                    { text: "+", image: "addition", descriptionStringId: 'ExpressionEditorStringId.Operator_Plus' },
                    { text: "-", image: "subtraction", descriptionStringId: 'ExpressionEditorStringId.Operator_Minus' },
                    { text: "*", image: "multiplication", descriptionStringId: 'ExpressionEditorStringId.Operator_Multiply' },
                    { text: "/", image: "division", descriptionStringId: 'ExpressionEditorStringId.Operator_Divide' },
                    { text: "%", image: "modulus", hasSeparator: true, descriptionStringId: 'ExpressionEditorStringId.Operator_Modulo' },
                    { text: "()", image: "parenthesis", hasSeparator: true },
                    { text: "|", descriptionStringId: 'ExpressionEditorStringId.Operator_BitwiseOr' },
                    { text: "&", descriptionStringId: 'ExpressionEditorStringId.Operator_BitwiseAnd' },
                    { text: "^", descriptionStringId: 'ExpressionEditorStringId.Operator_BitwiseXor' },
                    { text: "==", image: "equal", descriptionStringId: 'ExpressionEditorStringId.Operator_Equal' },
                    { text: "!=", image: "not_equal", descriptionStringId: 'ExpressionEditorStringId.Operator_NotEqual' },
                    { text: "<", image: "less", descriptionStringId: 'ExpressionEditorStringId.Operator_Less' },
                    { text: "<=", image: "less_or_equal", descriptionStringId: 'ExpressionEditorStringId.Operator_LessOrEqual' },
                    { text: ">=", image: "greater_or_equal", descriptionStringId: 'ExpressionEditorStringId.Operator_GreaterOrEqual' },
                    { text: ">", hasSeparator: true, image: "greater", descriptionStringId: 'ExpressionEditorStringId.Operator_Greater' },
                    { text: "In", descriptionStringId: 'ExpressionEditorStringId.Operator_In' },
                    { text: "Like", descriptionStringId: 'ExpressionEditorStringId.Operator_Like' },
                    { text: "Between", descriptionStringId: 'ExpressionEditorStringId.Operator_Between' },
                    { text: "And", image: "and", descriptionStringId: 'ExpressionEditorStringId.Operator_And' },
                    { text: "Or", image: "or", descriptionStringId: 'ExpressionEditorStringId.Operator_Or' },
                    { text: "Not", image: "not", descriptionStringId: 'ExpressionEditorStringId.Operator_Not' }
                ];
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                Internal.functionDisplay = [
                    {
                        display: "Aggregate",
                        localizationId: 'DataAccessStringId.ExpressionEditor_FunctionCategory_Aggregate',
                        category: "Aggregate",
                        items: {
                            Avg: [{ paramCount: 1, text: "[].Avg()", displayName: "Avg()", descriptionStringId: 'ExpressionEditorStringId.Function_AvgAggregate' }],
                            Count: [{ paramCount: 1, text: "[].Count()", displayName: "Count()", descriptionStringId: 'ExpressionEditorStringId.Function_CountAggregate' }],
                            Exists: [{ paramCount: 1, text: "[].Exists()", displayName: "Exists()", descriptionStringId: 'ExpressionEditorStringId.Function_ExistsAggregate' }],
                            Max: [{ paramCount: 1, text: "[].Max()", displayName: "Max()", descriptionStringId: 'ExpressionEditorStringId.Function_MaxAggregate' }],
                            Min: [{ paramCount: 1, text: "[].Min()", displayName: "Min()", descriptionStringId: 'ExpressionEditorStringId.Function_MinAggregate' }],
                            Single: [{ paramCount: 1, text: "[].Single()", displayName: "Single()", descriptionStringId: 'ExpressionEditorStringId.Function_SingleAggregate' }],
                            Sum: [{ paramCount: 1, text: "[].Sum()", displayName: "Sum()", descriptionStringId: 'ExpressionEditorStringId.Function_SumAggregate' }],
                        }
                    }, {
                        display: "Date-Time",
                        localizationId: 'DataAccessStringId.ExpressionEditor_FunctionCategory_DateTime',
                        items: {
                            LocalDateTimeThisYear: [{ paramCount: 0, text: "LocalDateTimeThisYear()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeThisYear' }],
                            LocalDateTimeThisMonth: [{ paramCount: 0, text: "LocalDateTimeThisMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeThisMonth' }],
                            LocalDateTimeLastMonth: [{ paramCount: 0, text: "LocalDateTimeLastMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeLastMonth' }],
                            LocalDateTimeLastWeek: [{ paramCount: 0, text: "LocalDateTimeLastWeek()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeLastWeek' }],
                            LocalDateTimeLastYear: [{ paramCount: 0, text: "LocalDateTimeLastYear()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeLastYear' }],
                            LocalDateTimeThisWeek: [{ paramCount: 0, text: "LocalDateTimeThisWeek()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeThisWeek' }],
                            LocalDateTimeYesterday: [{ paramCount: 0, text: "LocalDateTimeYesterday()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeYesterday' }],
                            LocalDateTimeToday: [{ paramCount: 0, text: "LocalDateTimeToday()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeToday' }],
                            LocalDateTimeNow: [{ paramCount: 0, text: "LocalDateTimeNow()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeNow' }],
                            LocalDateTimeTomorrow: [{ paramCount: 0, text: "LocalDateTimeTomorrow()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeTomorrow' }],
                            LocalDateTimeDayAfterTomorrow: [{ paramCount: 0, text: "LocalDateTimeDayAfterTomorrow()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeDayAfterTomorrow' }],
                            LocalDateTimeNextWeek: [{ paramCount: 0, text: "LocalDateTimeNextWeek()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeNextWeek' }],
                            LocalDateTimeTwoMonthsAway: [{ paramCount: 0, text: "LocalDateTimeTwoMonthsAway()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeTwoMonthsAway' }],
                            LocalDateTimeTwoYearsAway: [{ paramCount: 0, text: "LocalDateTimeTwoYearsAway()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeTwoYearsAway' }],
                            LocalDateTimeTwoWeeksAway: [{ paramCount: 0, text: "LocalDateTimeTwoWeeksAway()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeTwoWeeksAway' }],
                            LocalDateTimeNextMonth: [{ paramCount: 0, text: "LocalDateTimeNextMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeNextMonth' }],
                            LocalDateTimeNextYear: [{ paramCount: 0, text: "LocalDateTimeNextYear()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeNextYear' }],
                            LocalDateTimeYearBeforeToday: [{ paramCount: 0, text: "LocalDateTimeYearBeforeToday()", descriptionStringId: 'ExpressionEditorStringId.Function_LocalDateTimeYearBeforeToday' }],
                            IsOutlookIntervalBeyondThisYear: null,
                            IsOutlookIntervalLaterThisYear: null,
                            IsOutlookIntervalLaterThisMonth: null,
                            IsOutlookIntervalNextWeek: null,
                            IsOutlookIntervalLaterThisWeek: null,
                            IsOutlookIntervalTomorrow: null,
                            IsOutlookIntervalToday: null,
                            IsOutlookIntervalYesterday: null,
                            IsOutlookIntervalEarlierThisWeek: null,
                            IsOutlookIntervalLastWeek: null,
                            IsOutlookIntervalEarlierThisMonth: null,
                            IsOutlookIntervalEarlierThisYear: null,
                            IsOutlookIntervalPriorThisYear: null,
                            IsLastMonth: [{ paramCount: 1, text: "IsLastMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_IsLastMonth' }],
                            IsLastYear: [{ paramCount: 1, text: "IsLastYear()", descriptionStringId: 'ExpressionEditorStringId.Function_IsLastYear' }],
                            IsNextMonth: [{ paramCount: 1, text: "IsNextMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_IsNextMonth' }],
                            IsNextYear: [{ paramCount: 1, text: "IsNextYear()", descriptionStringId: 'ExpressionEditorStringId.Function_IsNextYear' }],
                            IsThisWeek: [{ paramCount: 1, text: "IsThisWeek()", descriptionStringId: 'ExpressionEditorStringId.Function_IsThisWeek' }],
                            IsThisMonth: [{ paramCount: 1, text: "IsThisMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_IsThisMonth' }],
                            IsThisYear: [{ paramCount: 1, text: "IsThisYear()", descriptionStringId: 'ExpressionEditorStringId.Function_IsThisYear' }],
                            IsJanuary: [{ paramCount: 1, text: "IsJanuary()", descriptionStringId: 'ExpressionEditorStringId.Function_IsJanuary' }],
                            IsFebruary: [{ paramCount: 1, text: "IsFebruary()", descriptionStringId: 'ExpressionEditorStringId.Function_IsFebruary' }],
                            IsMarch: [{ paramCount: 1, text: "IsMarch()", descriptionStringId: 'ExpressionEditorStringId.Function_IsMarch' }],
                            IsApril: [{ paramCount: 1, text: "IsApril()", descriptionStringId: 'ExpressionEditorStringId.Function_IsApril' }],
                            IsMay: [{ paramCount: 1, text: "IsMay()", descriptionStringId: 'ExpressionEditorStringId.Function_IsMay' }],
                            IsJune: [{ paramCount: 1, text: "IsJune()", descriptionStringId: 'ExpressionEditorStringId.Function_IsJune' }],
                            IsJuly: [{ paramCount: 1, text: "IsJuly()", descriptionStringId: 'ExpressionEditorStringId.Function_IsJuly' }],
                            IsAugust: [{ paramCount: 1, text: "IsAugust()", descriptionStringId: 'ExpressionEditorStringId.Function_IsAugust' }],
                            IsSeptember: [{ paramCount: 1, text: "IsSeptember()", descriptionStringId: 'ExpressionEditorStringId.Function_IsSeptember' }],
                            IsOctober: [{ paramCount: 1, text: "IsOctober()", descriptionStringId: 'ExpressionEditorStringId.Function_IsOctober' }],
                            IsNovember: [{ paramCount: 1, text: "IsNovember()", descriptionStringId: 'ExpressionEditorStringId.Function_IsNovember' }],
                            IsDecember: [{ paramCount: 1, text: "IsDecember()", descriptionStringId: 'ExpressionEditorStringId.Function_IsDecember' }],
                            IsSameDay: [{ paramCount: 2, text: "IsSameDay(, )", descriptionStringId: 'ExpressionEditorStringId.Function_IsSameDay' }],
                            IsYearToDate: [{ paramCount: 1, text: "IsYearToDate()", descriptionStringId: 'ExpressionEditorStringId.Function_IsYearToDate' }],
                            DateDiffTick: [{ paramCount: 2, text: "DateDiffTick(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffTick' }],
                            DateDiffSecond: [{ paramCount: 2, text: "DateDiffSecond(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffSecond' }],
                            DateDiffMilliSecond: [{ paramCount: 2, text: "DateDiffMilliSecond(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffMilliSecond' }],
                            DateDiffMinute: [{ paramCount: 2, text: "DateDiffMinute(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffMinute' }],
                            DateDiffHour: [{ paramCount: 2, text: "DateDiffHour(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffHour' }],
                            DateDiffDay: [{ paramCount: 2, text: "DateDiffDay(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffDay' }],
                            DateDiffMonth: [{ paramCount: 2, text: "DateDiffMonth(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffMonth' }],
                            DateDiffYear: [{ paramCount: 2, text: "DateDiffYear(, )", descriptionStringId: 'ExpressionEditorStringId.Function_DateDiffYear' }],
                            GetDate: [{ paramCount: 1, text: "GetDate()", descriptionStringId: 'ExpressionEditorStringId.Function_GetDate' }],
                            GetMilliSecond: [{ paramCount: 1, text: "GetMilliSecond()", descriptionStringId: 'ExpressionEditorStringId.Function_GetMilliSecond' }],
                            GetSecond: [{ paramCount: 1, text: "GetSecond()", descriptionStringId: 'ExpressionEditorStringId.Function_GetSecond' }],
                            GetMinute: [{ paramCount: 1, text: "GetMinute()", descriptionStringId: 'ExpressionEditorStringId.Function_GetMinute' }],
                            GetHour: [{ paramCount: 1, text: "GetHour()", descriptionStringId: 'ExpressionEditorStringId.Function_GetHour' }],
                            GetDay: [{ paramCount: 1, text: "GetDay()", descriptionStringId: 'ExpressionEditorStringId.Function_GetDay' }],
                            GetMonth: [{ paramCount: 1, text: "GetMonth()", descriptionStringId: 'ExpressionEditorStringId.Function_GetMonth' }],
                            GetYear: [{ paramCount: 1, text: "GetYear()", descriptionStringId: 'ExpressionEditorStringId.Function_GetYear' }],
                            GetDayOfWeek: [{ paramCount: 1, text: "GetDayOfWeek()", descriptionStringId: 'ExpressionEditorStringId.Function_GetDayOfWeek' }],
                            GetDayOfYear: [{ paramCount: 1, text: "GetDayOfYear()", descriptionStringId: 'ExpressionEditorStringId.Function_GetDayOfYear' }],
                            GetTimeOfDay: [{ paramCount: 1, text: "GetTimeOfDay()", descriptionStringId: 'ExpressionEditorStringId.Function_GetTimeOfDay' }],
                            Now: [{ paramCount: 0, text: "Now()", descriptionStringId: 'ExpressionEditorStringId.Function_Now' }],
                            UtcNow: [{ paramCount: 0, text: "UtcNow()", descriptionStringId: 'ExpressionEditorStringId.Function_UtcNow' }],
                            Today: [{ paramCount: 0, text: "Today()", descriptionStringId: 'ExpressionEditorStringId.Function_Today' }],
                            AddTimeSpan: [{ paramCount: 2, text: "AddTimeSpan(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddTimeSpan' }],
                            AddTicks: [{ paramCount: 2, text: "AddTicks(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddTicks' }],
                            AddMilliSeconds: [{ paramCount: 2, text: "AddMilliSeconds(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddMilliSeconds' }],
                            AddSeconds: [{ paramCount: 2, text: "AddSeconds(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddSeconds' }],
                            AddMinutes: [{ paramCount: 2, text: "AddMinutes(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddMinutes' }],
                            AddHours: [{ paramCount: 2, text: "AddHours(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddHours' }],
                            AddDays: [{ paramCount: 2, text: "AddDays(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddDays' }],
                            AddMonths: [{ paramCount: 2, text: "AddMonths(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddMonths' }],
                            AddYears: [{ paramCount: 2, text: "AddYears(, )", descriptionStringId: 'ExpressionEditorStringId.Function_AddYears' }],
                        },
                    }, {
                        display: "Logical",
                        localizationId: 'DataAccessStringId.ExpressionEditor_FunctionCategory_Logical',
                        items: {
                            Iif: [{ paramCount: 3, text: "Iif(, , )", descriptionStringId: 'ExpressionEditorStringId.Function_Iif' }],
                            IsNull: [{ paramCount: 1, text: "IsNull()", descriptionStringId: 'ExpressionEditorStringId.Function_IsNull' }],
                            IsNullOrEmpty: [{ paramCount: 1, text: "IsNullOrEmpty()", descriptionStringId: 'ExpressionEditorStringId.Function_IsNullOrEmpty' }],
                        }
                    }, {
                        display: "Math",
                        localizationId: 'DataAccessStringId.ExpressionEditor_FunctionCategory_Math',
                        items: {
                            Abs: [{ paramCount: 1, text: "Abs()", descriptionStringId: 'ExpressionEditorStringId.Function_Abs' }],
                            Sqr: [{ paramCount: 1, text: "Sqr()", descriptionStringId: 'ExpressionEditorStringId.Function_Sqr' }],
                            Cos: [{ paramCount: 1, text: "Cos()", descriptionStringId: 'ExpressionEditorStringId.Function_Cos' }],
                            Sin: [{ paramCount: 1, text: "Sin()", descriptionStringId: 'ExpressionEditorStringId.Function_Sin' }],
                            Atn: [{ paramCount: 1, text: "Atn()", descriptionStringId: 'ExpressionEditorStringId.Function_Atn' }],
                            Exp: [{ paramCount: 1, text: "Exp()", descriptionStringId: 'ExpressionEditorStringId.Function_Exp' }],
                            Log: [
                                { paramCount: 1, text: "Log()", descriptionStringId: 'ExpressionEditorStringId.Function_Log' },
                                { paramCount: 2, text: "Log(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Log_2' },
                            ],
                            Rnd: [{ paramCount: 0, text: "Rnd()", descriptionStringId: 'ExpressionEditorStringId.Function_Rnd' }],
                            Tan: [{ paramCount: 1, text: "Tan()", descriptionStringId: 'ExpressionEditorStringId.Function_Tan' }],
                            Power: [{ paramCount: 2, text: "Power(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Power' }],
                            Sign: [{ paramCount: 1, text: "Sign()", descriptionStringId: 'ExpressionEditorStringId.Function_Sign' }],
                            Round: [
                                { paramCount: 1, text: "Round()", descriptionStringId: 'ExpressionEditorStringId.Function_Round' },
                                { paramCount: 2, text: "Round(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Round_2' },
                            ],
                            Ceiling: [{ paramCount: 1, text: "Ceiling()", descriptionStringId: 'ExpressionEditorStringId.Function_Ceiling' }],
                            Floor: [{ paramCount: 1, text: "Floor()", descriptionStringId: 'ExpressionEditorStringId.Function_Floor' }],
                            Max: [{ paramCount: 2, text: "Max(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Max' }],
                            Min: [{ paramCount: 2, text: "Min(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Min' }],
                            Acos: [{ paramCount: 1, text: "Acos()", descriptionStringId: 'ExpressionEditorStringId.Function_Acos' }],
                            Asin: [{ paramCount: 1, text: "Asin()", descriptionStringId: 'ExpressionEditorStringId.Function_Asin' }],
                            Atn2: [{ paramCount: 2, text: "Atn2(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Atn2' }],
                            BigMul: [{ paramCount: 2, text: "BigMul(, )", descriptionStringId: 'ExpressionEditorStringId.Function_BigMul' }],
                            Cosh: [{ paramCount: 1, text: "Cosh()", descriptionStringId: 'ExpressionEditorStringId.Function_Cosh' }],
                            Log10: [{ paramCount: 1, text: "Log10()", descriptionStringId: 'ExpressionEditorStringId.Function_Log10' }],
                            Sinh: [{ paramCount: 1, text: "Sinh()", descriptionStringId: 'ExpressionEditorStringId.Function_Sinh' }],
                            Tanh: [{ paramCount: 1, text: "Tanh()", descriptionStringId: 'ExpressionEditorStringId.Function_Tanh' }],
                            ToInt: [{ paramCount: 1, text: "ToInt()", descriptionStringId: 'ExpressionEditorStringId.Function_ToInt' }],
                            ToLong: [{ paramCount: 1, text: "ToLong()", descriptionStringId: 'ExpressionEditorStringId.Function_ToLong' }],
                            ToFloat: [{ paramCount: 1, text: "ToFloat()", descriptionStringId: 'ExpressionEditorStringId.Function_ToFloat' }],
                            ToDouble: [{ paramCount: 1, text: "ToDouble()", descriptionStringId: 'ExpressionEditorStringId.Function_ToDouble' }],
                            ToDecimal: [{ paramCount: 1, text: "ToDecimal()", descriptionStringId: 'ExpressionEditorStringId.Function_ToDecimal' }],
                        }
                    }, {
                        display: "String",
                        localizationId: 'DataAccessStringId.ExpressionEditor_FunctionCategory_Text',
                        items: {
                            Trim: [{ paramCount: 1, text: "Trim()", descriptionStringId: 'ExpressionEditorStringId.Function_Trim' }],
                            Len: [{ paramCount: 1, text: "Len()", descriptionStringId: 'ExpressionEditorStringId.Function_Len' }],
                            Substring: [
                                { paramCount: 3, text: "Substring('', , )", descriptionStringId: 'ExpressionEditorStringId.Function_Substring_3' },
                                { paramCount: 2, text: "Substring('', )", descriptionStringId: 'ExpressionEditorStringId.Function_Substring' }
                            ],
                            Upper: [{ paramCount: 1, text: "Upper()", descriptionStringId: 'ExpressionEditorStringId.Function_Upper' }],
                            Lower: [{ paramCount: 1, text: "Lower()", descriptionStringId: 'ExpressionEditorStringId.Function_Lower' }],
                            Concat: [{ paramCount: Infinity, text: "Concat(, )", descriptionStringId: 'ExpressionEditorStringId.Function_Concat' }],
                            Ascii: [{ paramCount: 1, text: "Ascii('')", descriptionStringId: 'ExpressionEditorStringId.Function_Ascii' }],
                            Char: [{ paramCount: 1, text: "Char()", descriptionStringId: 'ExpressionEditorStringId.Function_Char' }],
                            ToStr: [{ paramCount: 1, text: "ToStr()", descriptionStringId: 'ExpressionEditorStringId.Function_ToStr' }],
                            Replace: [{ paramCount: 3, text: "Replace('','', '')", descriptionStringId: 'ExpressionEditorStringId.Function_Replace' }],
                            Reverse: [{ paramCount: 1, text: "Reverse('')", descriptionStringId: 'ExpressionEditorStringId.Function_Reverse' }],
                            Insert: [{ paramCount: 3, text: "Insert('', , '')", descriptionStringId: 'ExpressionEditorStringId.Function_Insert' }],
                            CharIndex: [
                                { paramCount: 2, text: "CharIndex('','')", descriptionStringId: 'ExpressionEditorStringId.Function_CharIndex' },
                                { paramCount: 3, text: "CharIndex('','', )", descriptionStringId: 'ExpressionEditorStringId.Function_CharIndex_3' }
                            ],
                            Remove: [
                                { paramCount: 2, text: "Remove('', )", descriptionStringId: 'ExpressionEditorStringId.Function_Remove' },
                                { paramCount: 3, text: "Remove('', , )", descriptionStringId: 'ExpressionEditorStringId.Function_Remove_3' }
                            ],
                            PadLeft: [
                                { paramCount: 2, text: "PadLeft(, )", descriptionStringId: 'ExpressionEditorStringId.Function_PadLeft' },
                                { paramCount: 3, text: "PadLeft(, , '')", descriptionStringId: 'ExpressionEditorStringId.Function_PadLeft_3' }
                            ],
                            PadRight: [
                                { paramCount: 2, text: "PadRight(, )", descriptionStringId: 'ExpressionEditorStringId.Function_PadRight' },
                                { paramCount: 3, text: "PadRight(, , '')", descriptionStringId: 'ExpressionEditorStringId.Function_PadRight_3' }
                            ],
                            StartsWith: [{ paramCount: 2, text: "StartsWith('', '')", descriptionStringId: 'ExpressionEditorStringId.Function_StartsWith' }],
                            EndsWith: [{ paramCount: 2, text: "EndsWith('', '')", descriptionStringId: 'ExpressionEditorStringId.Function_EndsWith' }],
                            Contains: [{ paramCount: 0, text: "Contains('', '')", descriptionStringId: 'ExpressionEditorStringId.Function_Contains' }],
                            Join: [
                                { paramCount: 1, text: "Join()", descriptionStringId: "ExpressionEditorStringId.Function_Join" },
                                { paramCount: 2, text: "Join(, '')", descriptionStringId: "ExpressionEditorStringId.Function_Join_2" }
                            ],
                        }
                    }
                ];
                function insertInFunctionDisplay(addins) {
                    return Internal.functionDisplay.map(function (cat) {
                        var ext = addins[cat.display];
                        return ext ? {
                            display: cat.display, category: cat.category, localizationId: cat.localizationId,
                            items: $.extend({}, cat.items, ext)
                        } : cat;
                    });
                }
                Internal.insertInFunctionDisplay = insertInFunctionDisplay;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            function getEnumNames(enumType) {
                var result = [];
                for (var enumValue in enumType) {
                    if (isNaN(enumValue)) {
                        result.push(enumValue);
                    }
                }
                return result;
            }
            var CriteriaOperator = (function () {
                function CriteriaOperator() {
                    var _this = this;
                    this.type = "Default";
                    this.operands = null;
                    this.changeValueType = function (type, location) {
                        var result = new type();
                        if (location.index !== null) {
                            _this[location.name][location.index] = result;
                        }
                        else {
                            _this[location.name] = result;
                        }
                        return result;
                    };
                    this.changeValue = function (operand, reverse, location) {
                        var result = reverse ? new Criteria.UnaryOperator(Criteria.UnaryOperatorType.Minus, operand) : operand;
                        if (location.index !== null) {
                            _this[location.name][location.index] = result;
                        }
                        else {
                            _this[location.name] = result;
                        }
                        return result;
                    };
                    this.assignLeftPart = function (criteriaOperator) { return void 0; };
                    this.assignRightPart = function (criteriaOperator) { return void 0; };
                    this.assignType = function (type) {
                        _this.operatorType = type;
                    };
                    this.resetrightPart = function (value) { return void 0; };
                }
                CriteriaOperator.operators = function (enums) {
                    var result = [].concat.apply([], enums.map(function (enumType) {
                        return getEnumNames(enumType).map(function (enumName) {
                            return { name: enumName, value: enumType[enumName], type: enumType };
                        });
                    }));
                    return result;
                };
                CriteriaOperator.parse = function (stringCriteria) {
                    if (stringCriteria && stringCriteria !== "") {
                        return Criteria["criteriaparser"].parse(stringCriteria);
                    }
                    return null;
                };
                CriteriaOperator.create = function (operatorType) {
                    var operator = null;
                    switch (operatorType.type) {
                        case Criteria.BinaryOperatorType:
                            operator = new Criteria.BinaryOperator(new Criteria.OperandProperty(), new Criteria.OperandValue(), operatorType.value);
                            break;
                        case Criteria.GroupOperatorType:
                            operator = new Criteria.GroupOperator(operatorType.value, []);
                            break;
                        case Criteria.FunctionOperatorType:
                            operator = new Criteria.FunctionOperator(operatorType.value, [new Criteria.OperandProperty()]);
                            break;
                        case Criteria.BetweenOperator:
                            operator = new Criteria.BetweenOperator(new Criteria.OperandProperty(), new Criteria.OperandValue(), new Criteria.OperandValue());
                            break;
                        case Criteria.InOperator:
                            operator = new Criteria.InOperator(new Criteria.OperandProperty(), [new Criteria.OperandValue()]);
                            break;
                        case Criteria.UnaryOperatorType:
                            operator = new Criteria.UnaryOperator(operatorType.value, new Criteria.OperandProperty());
                            break;
                        case Criteria.Aggregate:
                            var result = new Criteria.AggregateOperand(new Criteria.OperandProperty(), null, operatorType.value, new Criteria.GroupOperator(Criteria.GroupOperatorType.And, []));
                            if (operatorType.value === Criteria.Aggregate.Exists) {
                                operator = result;
                            }
                            else {
                                if (operatorType.value !== Criteria.Aggregate.Count) {
                                    result.aggregatedExpression = new Criteria.OperandProperty();
                                }
                                operator = new Criteria.BinaryOperator(result, new Criteria.OperandValue(), Criteria.BinaryOperatorType.Equal);
                            }
                            break;
                        default:
                            throw Error("Unsupported operator type");
                    }
                    if (operatorType.reverse) {
                        return new Criteria.UnaryOperator(Criteria.UnaryOperatorType.Not, operator);
                    }
                    return operator;
                };
                CriteriaOperator.and = function (left, right) {
                    return Criteria.GroupOperator.combine(Criteria.GroupOperatorType.Or, [left, right]);
                };
                CriteriaOperator.or = function (left, right) {
                    return Criteria.GroupOperator.combine(Criteria.GroupOperatorType.Or, [left, right]);
                };
                CriteriaOperator.getNotValidRange = function (value, errorMessage) {
                    var start = 0;
                    var end = 0;
                    var parts = errorMessage.split('\n');
                    var errorText = parts[1];
                    var errorLength = parts[2].length;
                    if (errorText.indexOf('...') === 0) {
                        errorText = errorText.split("...")[1];
                    }
                    var start = value.indexOf(errorText);
                    var end = start + errorLength;
                    return { start: start, end: end };
                };
                Object.defineProperty(CriteriaOperator.prototype, "displayType", {
                    get: function () {
                        return this.operatorType;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperator.prototype, "enumType", {
                    get: function () {
                        return null;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperator.prototype, "leftPart", {
                    get: function () { return null; },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperator.prototype, "rightPart", {
                    get: function () { return null; },
                    enumerable: true,
                    configurable: true
                });
                CriteriaOperator.prototype.assignFrom = function (criteriaOperator, incorrectSpecificsForAggregate) {
                    if (incorrectSpecificsForAggregate === void 0) { incorrectSpecificsForAggregate = false; }
                    var operator = criteriaOperator;
                    if (criteriaOperator instanceof Criteria.UnaryOperator && !(criteriaOperator.leftPart instanceof Criteria.OperandProperty)) {
                        operator = criteriaOperator.leftPart;
                    }
                    if (incorrectSpecificsForAggregate) {
                        this.assignLeftPart(operator.leftPart);
                    }
                    else {
                        this.assignLeftPart(operator);
                    }
                    if (operator.rightPart) {
                        this.assignRightPart(operator);
                    }
                };
                CriteriaOperator.prototype.children = function () {
                    var operands = [];
                    if (this.leftPart)
                        operands.push.apply(operands, $.isArray(this.leftPart) ? this.leftPart : [this.leftPart]);
                    if (this.rightPart)
                        operands.push.apply(operands, $.isArray(this.rightPart) ? this.rightPart : [this.rightPart]);
                    return operands;
                };
                CriteriaOperator.prototype.accept = function (visitor) { throw "Not implemented"; };
                return CriteriaOperator;
            }());
            Criteria.CriteriaOperator = CriteriaOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var CodeCompletor = (function (_super) {
                __extends(CodeCompletor, _super);
                function CodeCompletor(_options) {
                    var _this = _super.call(this) || this;
                    _this._options = _options;
                    _this._contextPath = null;
                    _this._isInContext = function () { return _this._contextPath !== null; };
                    _this._getPath = function () { return _this._contextPath ? _this._path() + "." + _this._contextPath : _this._path(); };
                    _this.identifierRegexps = [/\./, /\[/];
                    _this._fieldListProvider = _options.fieldListProvider;
                    _this._path = _options.path;
                    _this._editor = _options.editor;
                    _this._functions = ko.computed(function () { return ko.unwrap(_options.functions) || Widgets.Internal.functionDisplay; });
                    _this._rootItems = _options.rootItems || [{ name: "Parameters", needPrefix: true }];
                    _this._disposables.push(_this._functions);
                    return _this;
                }
                CodeCompletor.prototype._previousSymbol = function () {
                    var cursorPosition = this._editor.getCursorPosition();
                    return this._editor.session.getLine(cursorPosition.row)[cursorPosition.column - 1];
                };
                CodeCompletor.prototype.beforeInsertMatch = function (editor, token, parentPrefix) {
                    var cursorPosition = editor.getCursorPosition();
                    if (parentPrefix === "Parameters.") {
                        token = token || !this["_isInContext"]() && editor.session.getTokenAt(cursorPosition.row, cursorPosition.column);
                        if (token) {
                            if ((token.type === "support.variable.other" || token.type === "support.function")) {
                                editor.session.remove({
                                    start: { column: token.start - 1 || 0, row: cursorPosition.row },
                                    end: { column: Math.max(token.start + token.value.length || 0, cursorPosition.column), row: cursorPosition.row }
                                });
                            }
                            else if (token.type === "support.variable.parameter") {
                                editor.session.remove({
                                    start: { column: token.start || 0, row: cursorPosition.row },
                                    end: { column: Math.max(token.start + token.value.length + 1 || 0, cursorPosition.column), row: cursorPosition.row }
                                });
                            }
                            else if (token.type === "text" && token.value[token.value.length - 1] === '?') {
                                editor.session.remove({
                                    start: { column: token.start + token.value.length - 1 || 0, row: cursorPosition.row },
                                    end: { column: token.start + token.value.length || 0, row: cursorPosition.row },
                                });
                            }
                        }
                    }
                    else {
                        token = token || editor.session.getTokenAt(cursorPosition.row, cursorPosition.column);
                        if (!token)
                            return;
                        var endColumn = null;
                        if (token.type === "support.variable.other" || token.type === "support.function") {
                            endColumn = Math.max(token.start + token.value.length || 0, cursorPosition.column);
                        }
                        else if (token.type === "support.context.start" && cursorPosition.column < token.start + token.value.length) {
                            endColumn = token.start + token.value.length - 1 || 0;
                        }
                        if (endColumn !== null)
                            editor.session.remove({
                                start: { column: token.start || 0, row: cursorPosition.row },
                                end: { column: endColumn, row: cursorPosition.row }
                            });
                    }
                };
                CodeCompletor.prototype.insertMatch = function (editor, parentPrefix, fieldName) {
                    if (parentPrefix === "Parameters.") {
                        editor.insert("?" + fieldName);
                    }
                    else {
                        editor.insert("[" + (parentPrefix || "") + fieldName + "]");
                    }
                };
                CodeCompletor.prototype.generateFieldDisplayName = function (parentPrefix, displayName) {
                    if (parentPrefix === "Parameters.") {
                        return "?" + displayName;
                    }
                    return "[" + displayName + "]";
                };
                CodeCompletor.prototype._convertDataMemberInfoToCompletions = function (fields, token, parentPrefix) {
                    var _this = this;
                    if (parentPrefix === void 0) { parentPrefix = ""; }
                    return (fields || []).map(function (field) {
                        var displayName = _this.generateFieldDisplayName(parentPrefix, field.displayName);
                        return {
                            caption: field.displayName || field.name,
                            snippet: displayName,
                            meta: Analytics.Utils.isList(field) && Analytics.getLocalization("list", "DxDesignerStringId.CodeCompletion_List") || Analytics.getLocalization("field", "DxDesignerStringId.CodeCompletion_Field"),
                            score: Analytics.Utils.isList(field) && 200 || 100,
                            completer: {
                                insertMatch: function (editor, data) {
                                    _this.beforeInsertMatch(editor, token, parentPrefix);
                                    _this.insertMatch(editor, parentPrefix, _this._options.getRealExpression ? (field.displayName || field.name) : field.name);
                                }
                            }
                        };
                    });
                };
                CodeCompletor.prototype._combinePath = function (parentPrefix) {
                    var path = this._getPath();
                    if (parentPrefix) {
                        var rootItem = this._rootItems.filter(function (item) { return parentPrefix.indexOf(item.name) === 0; })[0];
                        if (rootItem && rootItem.rootPath)
                            path = [rootItem.rootPath, parentPrefix].join('.');
                        else
                            path = [path, parentPrefix].join('.');
                    }
                    return path;
                };
                CodeCompletor.prototype._getParentPrefix = function (token) {
                    var position = this._editor.getCursorPosition().column - token.start - 1;
                    var dotIndex = token.value.lastIndexOf(".", position);
                    var closeIndex = token.value.lastIndexOf("]", position);
                    dotIndex = Math.max(closeIndex, dotIndex);
                    var startIndex = token.type === "support.variable.other" || token.type === "support.context.start" ? 1 : 0;
                    var parentPrefix = token.value.substring(startIndex, dotIndex);
                    if (parentPrefix[0] === "[")
                        parentPrefix = parentPrefix.substr(1);
                    if (parentPrefix[parentPrefix.length - 1] === "]")
                        parentPrefix = parentPrefix.substring(0, parentPrefix.length - 1);
                    return parentPrefix;
                };
                CodeCompletor.prototype._getRealPath = function (path) {
                    var pathArray = path.split('.');
                    var $deferred = $.Deferred();
                    if (this._options.getRealExpression) {
                        this._options.getRealExpression(pathArray[0], this.generateFieldDisplayName(null, pathArray.splice(1).join('.'))).done(function (result) {
                            result = result.slice(1, result.length - 1);
                            $deferred.resolve(result && [pathArray[0], result].join('.') || pathArray[0]);
                        }).fail(function () { $deferred.resolve(path); });
                    }
                    else {
                        $deferred.resolve(path);
                    }
                    return $deferred.promise();
                };
                CodeCompletor.prototype._getFields = function (token, completions, ignorePrefix) {
                    var _this = this;
                    if (token === void 0) { token = null; }
                    if (completions === void 0) { completions = []; }
                    if (ignorePrefix === void 0) { ignorePrefix = false; }
                    var $deferred = $.Deferred();
                    var parentPrefix = undefined;
                    if (token && (token.type === "support.variable.other" || token.type === "support.function" || token.type === "support.context.start")) {
                        parentPrefix = this._getParentPrefix(token);
                    }
                    this._getRealPath(this._combinePath(parentPrefix)).done(function (path) {
                        var $fields = ko.unwrap(_this._fieldListProvider).getItems(new Analytics.Utils.PathRequest(path))
                            .done(function (fields) {
                            completions.push.apply(completions, _this._convertDataMemberInfoToCompletions(CodeCompletor._cleanupFields(fields), token, ignorePrefix ? null : parentPrefix && parentPrefix + "."));
                        });
                        var $deferreds = [$fields];
                        var rootPathRequests = [];
                        if (!parentPrefix) {
                            _this._rootItems.forEach(function (item) {
                                var path = item.rootPath || item.name;
                                if (rootPathRequests.indexOf(path) === -1) {
                                    rootPathRequests.push(path);
                                    $deferreds.push(ko.unwrap(_this._fieldListProvider).getItems(new Analytics.Utils.PathRequest(item.rootPath || item.name))
                                        .done(function (fields) {
                                        completions.push.apply(completions, _this._convertDataMemberInfoToCompletions(CodeCompletor._cleanupFields(fields), token, item.needPrefix ? item.name + "." : ""));
                                    }));
                                }
                            });
                        }
                        $.when($deferreds).always(function () { $deferred.resolve(completions); });
                    });
                    return $deferred.promise();
                };
                CodeCompletor._cleanupFields = function (fields) {
                    if (fields === void 0) { fields = []; }
                    return fields.filter(function (x) { return x.specifics !== "parameters" && x.specifics !== "none"; });
                };
                CodeCompletor.prototype.getFunctionsCompletions = function () {
                    var functions = [];
                    var functionsWithoutAggregates = ko.unwrap(this._functions).filter(function (fnDisplay) { return fnDisplay.category !== "Aggregate"; });
                    functionsWithoutAggregates.forEach(function (fnDisplay) {
                        Object.keys(fnDisplay.items).forEach(function (fnKey) {
                            if (fnDisplay.items[fnKey]) {
                                functions.push(createFunctionCompletion(fnDisplay.items[fnKey][0], fnKey));
                            }
                        });
                    });
                    return functions;
                };
                CodeCompletor.prototype.getAggregateCompletions = function () {
                    var functions = [];
                    var aggregates = ko.unwrap(this._functions).filter(function (fnDisplay) { return fnDisplay.category === "Aggregate"; })[0];
                    if (aggregates)
                        Object.keys(aggregates.items).forEach(function (fnKey) {
                            if (aggregates.items[fnKey]) {
                                functions.push(createFunctionCompletion(aggregates.items[fnKey][0], fnKey, fnKey + "()"));
                            }
                        });
                    return functions;
                };
                CodeCompletor.prototype.getOperatorCompletions = function (prefix) {
                    return Widgets.Internal.operatorNames.map(function (operator) {
                        return { caption: operator.text, snippet: prefix + operator.text, meta: Analytics.getLocalization("operator", "DxDesignerStringId.CodeCompletion_Operator") };
                    });
                };
                CodeCompletor.prototype._addFunctions = function (completions) {
                    completions.push.apply(completions, this.getFunctionsCompletions());
                };
                CodeCompletor.prototype._addAggregates = function (completions) {
                    completions.push.apply(completions, this.getAggregateCompletions());
                };
                CodeCompletor.prototype._addOperators = function (completions, text) {
                    var prefix = /\s/.test(text[text.length - 1]) ? "" : " ";
                    completions.push.apply(completions, this.getOperatorCompletions(prefix));
                };
                CodeCompletor.prototype._addParameterOperators = function (completions, token) {
                    var _this = this;
                    var $deferred = $.Deferred();
                    var $parametersPromise = ko.unwrap(this["_fieldListProvider"]).getItems(new Analytics.Utils.PathRequest("Parameters"))
                        .done(function (fields) {
                        completions.push.apply(completions, _this["_convertDataMemberInfoToCompletions"](fields, token, "Parameters."));
                    });
                    $.when($parametersPromise).always(function () { $deferred.resolve(completions); });
                    return $deferred.promise();
                };
                CodeCompletor.prototype._getOperands = function (token) {
                    if (token === void 0) { token = null; }
                    var result = [];
                    this._addFunctions(result);
                    return this._getFields(token, result);
                };
                CodeCompletor.prototype._getOperandsOrOperators = function (token, text, completions) {
                    var exceptionInfo;
                    try {
                        Analytics.Criteria.CriteriaOperator.parse(text);
                    }
                    catch (exception) {
                        exceptionInfo = exception.hash;
                    }
                    var trimmedText = text.trim();
                    var lastNonSpaceSymbol = trimmedText[trimmedText.length - 1];
                    if (lastNonSpaceSymbol === '?' && text[text.length - 1] !== " ") {
                        this._addParameterOperators(completions, token);
                    }
                    else if (!exceptionInfo && trimmedText || (lastNonSpaceSymbol === "]" || lastNonSpaceSymbol === ")")) {
                        this._addOperators(completions, text);
                    }
                    else {
                        return this._getOperands();
                    }
                };
                CodeCompletor.prototype._findStartContextTokenPosition = function (tokens, index) {
                    var blocks = 0;
                    var path = [];
                    for (var i = index; i > -1; i--) {
                        if (tokens[i].type === "support.context.end") {
                            blocks++;
                        }
                        else if (tokens[i].type === "support.context.start") {
                            if (blocks > 0)
                                blocks--;
                            else
                                return i;
                        }
                    }
                };
                CodeCompletor.prototype._findOpenedStartContext = function (tokens, index) {
                    var openedContextIndexes = [];
                    var contextItems = tokens.filter(function (token, tokenIndex) { return (token.type === "support.context.start" || token.type === "support.context.end") && tokenIndex < index; });
                    for (var i = 0; i < contextItems.length; i++) {
                        if (contextItems[i].type === "support.context.start") {
                            openedContextIndexes.push(tokens.indexOf(contextItems[i]));
                        }
                        else {
                            openedContextIndexes.pop();
                        }
                    }
                    return openedContextIndexes;
                };
                CodeCompletor.prototype._findOpenedAggregates = function (tokens, index) {
                    var openedAggregatesIndexes = [];
                    var aggregates = tokens.filter(function (token, tokenIndex) { return token.type === "support.other.aggregate" && tokenIndex < index; });
                    if (aggregates.length > 0) {
                        var currentToken = tokens[index];
                        var currentCursorPosition = this._editor.getCursorPosition().column - (currentToken && currentToken.start || 0);
                        for (var i = aggregates.length - 1; i > -1; i--) {
                            var aggregateIndex = tokens.indexOf(aggregates[i]);
                            var openBrace = 0;
                            var closeBrace = 0;
                            var isClosedAggregate = false;
                            if (aggregateIndex + 1 === index && tokens[aggregateIndex + 1].value.substr(0, currentCursorPosition).indexOf("()") !== -1 ||
                                aggregateIndex + 1 < index && tokens[aggregateIndex + 1].value.indexOf("()") !== -1) {
                                isClosedAggregate = true;
                                index = aggregateIndex;
                                continue;
                            }
                            for (var j = aggregateIndex; j < index; j++) {
                                if (tokens[j].value.trim() === "(") {
                                    openBrace++;
                                }
                                else if (tokens[j].value.trim() === ")") {
                                    closeBrace++;
                                }
                                if (openBrace === closeBrace && openBrace !== 0) {
                                    isClosedAggregate = true;
                                    break;
                                }
                            }
                            if (!isClosedAggregate)
                                openedAggregatesIndexes.splice(0, 0, aggregateIndex);
                            index = aggregateIndex;
                        }
                    }
                    return openedAggregatesIndexes;
                };
                CodeCompletor.prototype._getContextPath = function (tokens, currentPosition) {
                    var path = [];
                    var openedAggregatePositions = this._findOpenedAggregates(tokens, currentPosition);
                    var openedContextPositions = this._findOpenedStartContext(tokens, currentPosition);
                    var contextPath = openedContextPositions.concat.apply(openedContextPositions, openedAggregatePositions).sort(function (a, b) { return a - b; });
                    if (contextPath.length > 0) {
                        for (var i = 0; i < contextPath.length; i++) {
                            if (tokens[contextPath[i]].type === "support.other.aggregate") {
                                if (tokens[contextPath[i] - 1].type === "support.context.end") {
                                    var startContextToken = this._findStartContextTokenPosition(tokens, contextPath[i] - 2);
                                    var member = trimBrackets(tokens[startContextToken].value.match(/^\[(?:[^\]\)])*\]/)[0]);
                                    path.push(member);
                                }
                                else if (tokens[contextPath[i] - 1].type === "support.variable.other") {
                                    path.push(trimBrackets(tokens[contextPath[i] - 1].value));
                                }
                            }
                            else {
                                var member = trimBrackets(tokens[contextPath[i]].value.match(/^\[(?:[^\]\)])*\]/)[0]);
                                path.push(member);
                            }
                        }
                    }
                    return path.filter(function (x) { return !!x; }).join('.');
                };
                CodeCompletor.prototype._getCompletions = function (editor, session, pos, prefix) {
                    var $deferred;
                    var completions = [];
                    var currentToken = session.getTokenAt(pos.row, pos.column);
                    var text = editor.session.getLine(pos.row).substring(0, pos.column);
                    var tokens = session.getTokens(pos.row);
                    var currentTokenIndex = currentToken ? currentToken.index : -1;
                    this._contextPath = this._getContextPath(tokens, currentTokenIndex);
                    if (!currentToken) {
                        $deferred = this._getOperands();
                    }
                    else if (currentToken.type === "support.context.start") {
                        var ignorePrefix = this._editor.getCursorPosition().column - currentToken.start === currentToken.value.length;
                        if (ignorePrefix) {
                            var functions = [];
                            this._addFunctions(functions);
                        }
                        $deferred = this._getFields(currentToken, functions, ignorePrefix);
                    }
                    else if (currentToken.type === "string.quoted.single") {
                    }
                    else if (currentToken.type.indexOf("support.variable") === 0) {
                        $deferred = this._getFields(currentToken);
                    }
                    else if (currentToken.type === "support.function") {
                        $deferred = this.defaultProcess(currentToken, text.substring(0, currentToken.start), completions);
                    }
                    else if (currentToken.type === "support.other.aggregate") {
                        var previousToken = tokens[currentTokenIndex - 1];
                        this._addAggregates(completions);
                        if (previousToken && trimBrackets(previousToken.value).trim()) {
                            $deferred = this._getFields({
                                start: (currentToken.start - (previousToken.value || "").length) || 0,
                                value: previousToken.value + currentToken.value,
                                type: "support.function"
                            }, completions);
                        }
                    }
                    else {
                        $deferred = this.defaultProcess(currentToken, text, completions);
                    }
                    return $deferred ? $deferred.promise() : $.Deferred().resolve(completions).promise();
                };
                CodeCompletor.prototype.defaultProcess = function (token, text, completions) {
                    return this._getOperandsOrOperators(token, text, completions);
                };
                CodeCompletor.prototype.getCompletions = function (aceEditor, session, pos, prefix, callback) {
                    this._getCompletions(aceEditor, session, pos, prefix).done(function (completions) {
                        callback(null, completions);
                    });
                };
                CodeCompletor.prototype.getDocTooltip = function (item) {
                    if (item.tooltip && !item.docHTML) {
                        item.docHTML = [
                            item.tooltip
                        ].join("");
                    }
                };
                return CodeCompletor;
            }(Analytics.Utils.Disposable));
            Widgets.CodeCompletor = CodeCompletor;
            function createFunctionCompletion(fnInfo, name, insertValue) {
                if (insertValue === void 0) { insertValue = null; }
                var insertValue = insertValue || fnInfo.text;
                return {
                    caption: name,
                    snippet: insertValue,
                    meta: Analytics.getLocalization("function", "DxDesignerStringId.CodeCompletion_Function"),
                    tooltip: fnInfo.description || DevExpress.Analytics.getLocalization(fnInfo.text, fnInfo.descriptionStringId) || null,
                    score: 10,
                    completer: {
                        insertMatch: function (editor, data) {
                            var completions = editor.completer.completions;
                            if (completions.filterText) {
                                var ranges = editor.selection.getAllRanges();
                                for (var i = 0, range; range = ranges[i]; i++) {
                                    range.start.column -= completions.filterText.length;
                                    editor.session.remove(range);
                                }
                            }
                            if (insertValue.substr(0, 3) === "[].") {
                                var ranges = editor.selection.getAllRanges();
                                for (var i = 0, range; range = ranges[i]; i++) {
                                    range.start.column -= 2;
                                    if (editor.session.getTextRange(range) === "].")
                                        insertValue = insertValue.substr(3);
                                }
                            }
                            editor.insert(insertValue);
                            Analytics.Utils.setCursorInFunctionParameter(fnInfo.paramCount, editor, insertValue);
                        }
                    }
                };
            }
            Widgets.createFunctionCompletion = createFunctionCompletion;
            function trimBrackets(value) {
                return value.substring(value[0] === "[" ? 1 : 0, value[value.length - 1] === "]" ? value.length - 1 : value.length);
            }
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var Utils;
            (function (Utils) {
                Utils.operatorTokens = {
                    "Plus": "+",
                    "Minus": "-",
                    "Equal": "=",
                    "NotEqual": "<>",
                    "Greater": ">",
                    "Less": "<",
                    "LessOrEqual": "<=",
                    "GreaterOrEqual": ">="
                };
                function criteriaForEach(operator, callback, path) {
                    if (path === void 0) { path = ""; }
                    callback(operator, path);
                    if (operator instanceof Criteria.AggregateOperand) {
                        operator.leftPart && criteriaForEach(operator.leftPart, callback, path);
                        if (operator.leftPart && operator.leftPart["propertyName"]) {
                            path = path ? [path, operator.leftPart["propertyName"]].join('.') : operator.leftPart["propertyName"];
                        }
                    }
                    operator.children().forEach(function (item) { return criteriaForEach(item, callback, path); });
                }
                Utils.criteriaForEach = criteriaForEach;
            })(Utils = Criteria.Utils || (Criteria.Utils = {}));
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var OperandProperty = (function (_super) {
                __extends(OperandProperty, _super);
                function OperandProperty(propertyName, startColumn, startLine, originalPropertyLength) {
                    if (propertyName === void 0) { propertyName = ""; }
                    if (startColumn === void 0) { startColumn = -1; }
                    if (startLine === void 0) { startLine = -1; }
                    if (originalPropertyLength === void 0) { originalPropertyLength = 0; }
                    var _this = _super.call(this) || this;
                    _this.type = "Property";
                    _this.propertyName = propertyName;
                    _this.originalPropertyLength = originalPropertyLength;
                    _this.startPosition = { column: startColumn, line: startLine };
                    return _this;
                }
                Object.defineProperty(OperandProperty.prototype, "displayType", {
                    get: function () {
                        return '[' + this.propertyName + ']';
                    },
                    enumerable: true,
                    configurable: true
                });
                OperandProperty.prototype.accept = function (visitor) {
                    return visitor.visitOperandProperty
                        ? visitor.visitOperandProperty(this)
                        : new OperandProperty(this.propertyName);
                };
                return OperandProperty;
            }(Criteria.CriteriaOperator));
            Criteria.OperandProperty = OperandProperty;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var DisplayExpressionConverter = (function () {
                function DisplayExpressionConverter(displayNameProvider) {
                    this.displayNameProvider = displayNameProvider;
                }
                DisplayExpressionConverter.prototype._replaceNames = function (path, expression, getDisplayExpression) {
                    var _this = this;
                    var def = $.Deferred();
                    if (!expression)
                        return def.resolve("").promise();
                    try {
                        var expressionCriteria = Analytics.Criteria.CriteriaOperator.parse(expression);
                    }
                    catch (e) {
                        return def.reject().promise();
                    }
                    var requests = [];
                    var result = [];
                    var serializer = new Analytics.Widgets.Internal.FilterEditorSerializer();
                    Analytics.Criteria.Utils.criteriaForEach(expressionCriteria, function (operator, innerPath) {
                        if (operator instanceof Analytics.Criteria.OperandProperty) {
                            var isContainsParentRelationshipTraversalOperator = operator.propertyName.indexOf("^.") === 0;
                            var propertyName = isContainsParentRelationshipTraversalOperator ? operator.propertyName.substring(2) : operator.propertyName;
                            propertyName = innerPath ? [innerPath, propertyName].join('.') : propertyName;
                            var request = getDisplayExpression ? _this.displayNameProvider.getDisplayNameByPath(path, propertyName) :
                                _this.displayNameProvider.getRealName(path, propertyName);
                            requests.push(request.done(function (data) {
                                var convertedName = isContainsParentRelationshipTraversalOperator ? "^." + data : data;
                                convertedName = innerPath ? convertedName.split('.').slice(innerPath.split('.').length).join('.') : convertedName;
                                result.push({
                                    operand: operator,
                                    convertedName: convertedName
                                });
                            }));
                        }
                    });
                    if (requests.length === 0) {
                        def.resolve(expression);
                    }
                    else {
                        var processedRequestsCount = 0;
                        var onAlways = function () {
                            if (++processedRequestsCount < requests.length)
                                return;
                            var lines = expression.split('\n');
                            for (var i = 0; i < lines.length; i++) {
                                var operands = result.filter(function (value) { return value.operand.startPosition.line === i; }).sort(function (a, b) {
                                    return a.operand.startPosition.column - b.operand.startPosition.column;
                                });
                                for (var j = 0, delta = 0; j < operands.length; j++) {
                                    var column = operands[j].operand.startPosition.column;
                                    var propertyName = operands[j].operand.propertyName;
                                    var deltaName = 0;
                                    if (operands[j].operand.originalPropertyLength !== propertyName.length) {
                                        deltaName = operands[j].operand.originalPropertyLength - serializer.serialize(operands[j].operand, false).length;
                                    }
                                    var convertedName = operands[j].convertedName;
                                    if (!propertyName || column < 0)
                                        continue;
                                    lines[i] = lines[i].substring(0, column + delta) + convertedName + lines[i].substring(column + propertyName.length + deltaName + delta);
                                    delta += convertedName.length - propertyName.length - deltaName;
                                }
                            }
                            def.resolve(lines.join('\n'));
                        };
                        requests.forEach(function (r) { return r.always(onAlways); });
                    }
                    return def.promise();
                };
                DisplayExpressionConverter.prototype.toDisplayExpression = function (path, expression) {
                    return this._replaceNames(path, expression, true);
                };
                DisplayExpressionConverter.prototype.toRealExpression = function (path, expression) {
                    return this._replaceNames(path, expression, false);
                };
                return DisplayExpressionConverter;
            }());
            Utils.DisplayExpressionConverter = DisplayExpressionConverter;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var CriteriaOperatorPreprocessor = (function () {
                function CriteriaOperatorPreprocessor() {
                    this._func = [];
                }
                CriteriaOperatorPreprocessor.prototype.CriteriaOperator = function () {
                    return new Criteria.CriteriaOperator();
                };
                CriteriaOperatorPreprocessor.prototype.BinaryOperator = function (options) {
                    return new Criteria.BinaryOperator(options.left, options.right, options.operatorType);
                };
                CriteriaOperatorPreprocessor.prototype.FunctionOperator = function (options) {
                    return new Criteria.FunctionOperator(options.operatorType, options.operands);
                };
                CriteriaOperatorPreprocessor.prototype.AggregateOperand = function (options) {
                    return new Criteria.AggregateOperand(options.property, options.aggregatedExpression, options.aggregateType, options.condition);
                };
                CriteriaOperatorPreprocessor.prototype.GroupOperator = function (options) {
                    return new Criteria.GroupOperator(options.operation, options.operands);
                };
                CriteriaOperatorPreprocessor.prototype.InOperator = function (options) {
                    return new Criteria.InOperator(options.criteriaOperator, options.operands);
                };
                CriteriaOperatorPreprocessor.prototype.ConstantValue = function (options) {
                    return new Criteria.ConstantValue(options.value);
                };
                CriteriaOperatorPreprocessor.prototype.OperandValue = function (options) {
                    return new Criteria.OperandValue(options.value);
                };
                CriteriaOperatorPreprocessor.prototype.OperandParameter = function (options) {
                    return new Criteria.OperandParameter(options.parameterName, options.value);
                };
                CriteriaOperatorPreprocessor.prototype.OperandProperty = function (options) {
                    return new Criteria.OperandProperty(options.propertyName, options.startColumn, options.startLine, options.originalPropertyLength);
                };
                CriteriaOperatorPreprocessor.prototype.UnaryOperator = function (options) {
                    return new Criteria.UnaryOperator(options.operatorType, options.operator);
                };
                CriteriaOperatorPreprocessor.prototype.BetweenOperator = function (options) {
                    return new Criteria.BetweenOperator(options.property, options.begin, options.end);
                };
                CriteriaOperatorPreprocessor.prototype.JoinOperator = function (options) {
                    return new Criteria.JoinOperand(options.joinTypeName, options.condition, options.type, options.aggregated);
                };
                CriteriaOperatorPreprocessor.prototype.addListener = function (func) {
                    var index = this._func.indexOf(func);
                    if (index === -1) {
                        this._func.push(func);
                    }
                };
                CriteriaOperatorPreprocessor.prototype.removeListener = function (func) {
                    var index = this._func.indexOf(func);
                    if (index !== -1) {
                        this._func.splice(index, 1);
                    }
                };
                CriteriaOperatorPreprocessor.prototype.process = function (operatorType, options) {
                    var operand = this.CriteriaOperator();
                    switch (operatorType) {
                        case "join":
                            operand = this.JoinOperator(options);
                            break;
                        case "between":
                            operand = this.BetweenOperator(options);
                            break;
                        case "property":
                            operand = this.OperandProperty(options);
                            break;
                        case "parameter":
                            operand = this.OperandParameter(options);
                            break;
                        case "value":
                            operand = this.OperandValue(options);
                            break;
                        case "in":
                            operand = this.InOperator(options);
                            break;
                        case "function":
                            operand = this.FunctionOperator(options);
                            break;
                        case "unary":
                            operand = this.UnaryOperator(options);
                            break;
                        case "group":
                            operand = this.GroupOperator(options);
                            break;
                        case "binary":
                            operand = this.BinaryOperator(options);
                            break;
                        case "const":
                            operand = this.ConstantValue(options);
                            break;
                        case "aggregate":
                            operand = this.AggregateOperand(options);
                            break;
                    }
                    this._func.forEach(function (func) { operand = func(operand, { operatorType: operatorType, options: options }); });
                    return operand;
                };
                return CriteriaOperatorPreprocessor;
            }());
            Criteria.CriteriaOperatorPreprocessor = CriteriaOperatorPreprocessor;
            Criteria.criteriaCreator = new CriteriaOperatorPreprocessor();
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var Aggregate;
            (function (Aggregate) {
                Aggregate[Aggregate["Count"] = 0] = "Count";
                Aggregate[Aggregate["Exists"] = 1] = "Exists";
                Aggregate[Aggregate["Min"] = 2] = "Min";
                Aggregate[Aggregate["Max"] = 3] = "Max";
                Aggregate[Aggregate["Avg"] = 4] = "Avg";
                Aggregate[Aggregate["Sum"] = 5] = "Sum";
                Aggregate[Aggregate["Single"] = 6] = "Single";
            })(Aggregate = Criteria.Aggregate || (Criteria.Aggregate = {}));
            var AggregateOperand = (function (_super) {
                __extends(AggregateOperand, _super);
                function AggregateOperand(property, aggregatedExpression, aggregateType, condition) {
                    var _this = _super.call(this) || this;
                    _this.change = function (operationType, item) {
                        var operator = null;
                        if (operationType.type === Criteria.GroupOperatorType) {
                            operator = Criteria.CriteriaOperator.create(operationType);
                            if (operationType.type !== operator.enumType) {
                                operator.leftPart.assignFrom(item);
                            }
                            else {
                                operator.assignFrom(item);
                            }
                            _this.condition = operator;
                        }
                        return operator;
                    };
                    _this.assignLeftPart = function (criteriaOperator) {
                        if (criteriaOperator.leftPart instanceof AggregateOperand) {
                            _this.assignFrom(criteriaOperator.leftPart);
                        }
                        else {
                            if (Criteria.CriteriaOperator instanceof AggregateOperand) {
                                _this.property = criteriaOperator.property;
                                if (_this.aggregatedExpression && criteriaOperator.aggregatedExpression) {
                                    _this.aggregatedExpression = criteriaOperator.aggregatedExpression;
                                }
                                _this.condition = criteriaOperator.property;
                            }
                            else {
                                _this.property = criteriaOperator.leftPart;
                            }
                        }
                    };
                    _this.type = "Aggregate";
                    _this.property = property;
                    if (condition instanceof Criteria.GroupOperator) {
                        _this.condition = condition;
                    }
                    else {
                        if (condition instanceof Criteria.UnaryOperator && condition.operatorType === Criteria.UnaryOperatorType.Not) {
                            if (condition.operand instanceof Criteria.GroupOperator) {
                                _this.condition = new Criteria.UnaryOperator(Criteria.UnaryOperatorType.Not, condition.operand);
                            }
                            else {
                                _this.condition = new Criteria.UnaryOperator(Criteria.UnaryOperatorType.Not, new Criteria.GroupOperator(Criteria.GroupOperatorType.And, condition.operand ? [condition.operand] : []));
                            }
                        }
                        else {
                            _this.condition = new Criteria.GroupOperator(Criteria.GroupOperatorType.And, condition ? [condition] : []);
                        }
                    }
                    _this.operatorType = aggregateType;
                    _this.aggregatedExpression = aggregatedExpression;
                    return _this;
                }
                Object.defineProperty(AggregateOperand.prototype, "displayType", {
                    get: function () {
                        return Aggregate[this.operatorType];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(AggregateOperand.prototype, "enumType", {
                    get: function () {
                        return Aggregate;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(AggregateOperand.prototype, "leftPart", {
                    get: function () {
                        return this.property;
                    },
                    enumerable: true,
                    configurable: true
                });
                AggregateOperand.prototype.children = function () {
                    var operands = [];
                    this.condition && operands.push(this.condition);
                    this.aggregatedExpression && operands.push(this.aggregatedExpression);
                    return operands;
                };
                AggregateOperand.prototype.accept = function (visitor) {
                    return visitor.visitAggregateOperand
                        ? visitor.visitAggregateOperand(this)
                        : new AggregateOperand(this.property && this.property.accept(visitor), this.aggregatedExpression && this.aggregatedExpression.accept(visitor), this.operatorType, this.condition && this.condition.accept(visitor));
                };
                return AggregateOperand;
            }(Criteria.CriteriaOperator));
            Criteria.AggregateOperand = AggregateOperand;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var BetweenOperator = (function (_super) {
                __extends(BetweenOperator, _super);
                function BetweenOperator(property, begin, end) {
                    var _this = _super.call(this) || this;
                    _this.resetRightPart = function (newVal) {
                        _this.begin = new Criteria.OperandValue(newVal);
                        _this.end = new Criteria.OperandValue(newVal);
                    };
                    _this.assignLeftPart = function (criteriaOperator) {
                        _this.property = criteriaOperator.leftPart;
                    };
                    _this.assignRightPart = function (criteriaOperator) {
                        if (criteriaOperator.rightPart.length !== null && criteriaOperator.rightPart.length !== undefined) {
                            if (criteriaOperator.rightPart.length) {
                                _this.begin = criteriaOperator.rightPart[0];
                                _this.end = criteriaOperator.rightPart.length > 1 ? criteriaOperator.rightPart[1] : new Criteria.OperandValue();
                            }
                            else {
                                _this.begin = new Criteria.OperandValue();
                                _this.end = new Criteria.OperandValue();
                            }
                        }
                        else {
                            _this.begin = criteriaOperator.rightPart;
                            _this.end = new Criteria.OperandValue();
                        }
                    };
                    _this.operatorType = "Between";
                    _this.type = "Between";
                    _this.property = property;
                    _this.begin = begin || new Criteria.OperandValue();
                    _this.end = end || new Criteria.OperandValue();
                    return _this;
                }
                Object.defineProperty(BetweenOperator.prototype, "leftPart", {
                    get: function () {
                        return this.property;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BetweenOperator.prototype, "rightPart", {
                    get: function () {
                        return [this.begin, this.end];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BetweenOperator.prototype, "displayType", {
                    get: function () {
                        return "Between";
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BetweenOperator.prototype, "enumType", {
                    get: function () {
                        return BetweenOperator;
                    },
                    enumerable: true,
                    configurable: true
                });
                BetweenOperator.prototype.accept = function (visitor) {
                    return visitor.visitBetweenOperator
                        ? visitor.visitBetweenOperator(this)
                        : new BetweenOperator(this.property && this.property.accept(visitor), this.begin && this.begin.accept(visitor), this.end && this.end.accept(visitor));
                };
                return BetweenOperator;
            }(Criteria.CriteriaOperator));
            Criteria.BetweenOperator = BetweenOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var BinaryOperatorType;
            (function (BinaryOperatorType) {
                BinaryOperatorType[BinaryOperatorType["Equal"] = 0] = "Equal";
                BinaryOperatorType[BinaryOperatorType["NotEqual"] = 1] = "NotEqual";
                BinaryOperatorType[BinaryOperatorType["Greater"] = 2] = "Greater";
                BinaryOperatorType[BinaryOperatorType["Less"] = 3] = "Less";
                BinaryOperatorType[BinaryOperatorType["LessOrEqual"] = 4] = "LessOrEqual";
                BinaryOperatorType[BinaryOperatorType["GreaterOrEqual"] = 5] = "GreaterOrEqual";
                BinaryOperatorType[BinaryOperatorType["Like"] = 6] = "Like";
                BinaryOperatorType[BinaryOperatorType["BitwiseAnd"] = 7] = "BitwiseAnd";
                BinaryOperatorType[BinaryOperatorType["BitwiseOr"] = 8] = "BitwiseOr";
                BinaryOperatorType[BinaryOperatorType["BitwiseXor"] = 9] = "BitwiseXor";
                BinaryOperatorType[BinaryOperatorType["Divide"] = 10] = "Divide";
                BinaryOperatorType[BinaryOperatorType["Modulo"] = 11] = "Modulo";
                BinaryOperatorType[BinaryOperatorType["Multiply"] = 12] = "Multiply";
                BinaryOperatorType[BinaryOperatorType["Plus"] = 13] = "Plus";
                BinaryOperatorType[BinaryOperatorType["Minus"] = 14] = "Minus";
            })(BinaryOperatorType = Criteria.BinaryOperatorType || (Criteria.BinaryOperatorType = {}));
            var BinaryOperator = (function (_super) {
                __extends(BinaryOperator, _super);
                function BinaryOperator(left, right, operatorType) {
                    var _this = _super.call(this) || this;
                    _this.assignLeftPart = function (criteriaOperator) {
                        _this.leftOperand = criteriaOperator.leftPart;
                    };
                    _this.assignRightPart = function (criteriaOperator) {
                        if (criteriaOperator.rightPart.length !== null && criteriaOperator.rightPart.length !== undefined) {
                            if (criteriaOperator.rightPart.length) {
                                _this.rightOperand = criteriaOperator.rightPart[0];
                            }
                        }
                        else {
                            _this.rightOperand = criteriaOperator.rightPart;
                        }
                    };
                    _this.type = "Binary";
                    _this.leftOperand = left || new Criteria.CriteriaOperator();
                    _this.rightOperand = right || new Criteria.CriteriaOperator();
                    _this.operatorType = operatorType;
                    return _this;
                }
                Object.defineProperty(BinaryOperator.prototype, "leftPart", {
                    get: function () {
                        return this.leftOperand;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BinaryOperator.prototype, "rightPart", {
                    get: function () {
                        return this.rightOperand;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BinaryOperator.prototype, "displayType", {
                    get: function () {
                        return Criteria.Utils.operatorTokens[BinaryOperatorType[this.operatorType]] || BinaryOperatorType[this.operatorType];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BinaryOperator.prototype, "enumType", {
                    get: function () {
                        return BinaryOperatorType;
                    },
                    enumerable: true,
                    configurable: true
                });
                BinaryOperator.prototype.accept = function (visitor) {
                    return visitor.visitBinaryOperator
                        ? visitor.visitBinaryOperator(this)
                        : new BinaryOperator(this.leftOperand && this.leftOperand.accept(visitor), this.rightOperand && this.rightOperand.accept(visitor), this.operatorType);
                };
                return BinaryOperator;
            }(Criteria.CriteriaOperator));
            Criteria.BinaryOperator = BinaryOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var OperandValue = (function (_super) {
                __extends(OperandValue, _super);
                function OperandValue(value) {
                    var _this = _super.call(this) || this;
                    _this.type = "Value";
                    var result = value !== null && value !== undefined ? value : "";
                    if (value && value["length"] && ((value[0] === "'" && value[value.length - 1] === "'") || Analytics.Widgets.validateGuid(value))) {
                        result = _this._processStringValue(value);
                    }
                    else if (value && value["length"] && value[0] === "#" && value[value.length - 1] === "#") {
                        result = value.slice(1, value.length - 1);
                        result = Analytics.Localization.parseDate(result);
                        if (!result) {
                            result = Analytics.Localization.parseDate(value.slice(1, value.length - 1));
                        }
                    }
                    else if (String(value).toLowerCase() === "true" || String(value).toLowerCase() === "false") {
                        result = String(value).toLowerCase() === "true" ? "True" : "False";
                    }
                    _this.value = result;
                    return _this;
                }
                OperandValue.prototype._processStringValue = function (value) {
                    var result = value.slice(1, value.length - 1);
                    if (result.indexOf("''") !== -1)
                        result = result.replace("''", "'");
                    return result;
                };
                Object.defineProperty(OperandValue.prototype, "displayType", {
                    get: function () {
                        return this.value || "?";
                    },
                    enumerable: true,
                    configurable: true
                });
                return OperandValue;
            }(Criteria.CriteriaOperator));
            Criteria.OperandValue = OperandValue;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var ConstantValue = (function (_super) {
                __extends(ConstantValue, _super);
                function ConstantValue(value) {
                    return _super.call(this, value) || this;
                }
                ConstantValue.prototype.accept = function (visitor) {
                    return visitor.visitConstantValue
                        ? visitor.visitConstantValue(this)
                        : new ConstantValue(this.value);
                };
                return ConstantValue;
            }(Criteria.OperandValue));
            Criteria.ConstantValue = ConstantValue;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var FunctionOperatorType;
            (function (FunctionOperatorType) {
                FunctionOperatorType[FunctionOperatorType["None"] = 0] = "None";
                FunctionOperatorType[FunctionOperatorType["Custom"] = 1] = "Custom";
                FunctionOperatorType[FunctionOperatorType["CustomNonDeterministic"] = 2] = "CustomNonDeterministic";
                FunctionOperatorType[FunctionOperatorType["Iif"] = 3] = "Iif";
                FunctionOperatorType[FunctionOperatorType["IsNull"] = 4] = "IsNull";
                FunctionOperatorType[FunctionOperatorType["IsNullOrEmpty"] = 5] = "IsNullOrEmpty";
                FunctionOperatorType[FunctionOperatorType["Trim"] = 6] = "Trim";
                FunctionOperatorType[FunctionOperatorType["Len"] = 7] = "Len";
                FunctionOperatorType[FunctionOperatorType["Substring"] = 8] = "Substring";
                FunctionOperatorType[FunctionOperatorType["Upper"] = 9] = "Upper";
                FunctionOperatorType[FunctionOperatorType["Lower"] = 10] = "Lower";
                FunctionOperatorType[FunctionOperatorType["Concat"] = 11] = "Concat";
                FunctionOperatorType[FunctionOperatorType["Ascii"] = 12] = "Ascii";
                FunctionOperatorType[FunctionOperatorType["Char"] = 13] = "Char";
                FunctionOperatorType[FunctionOperatorType["ToStr"] = 14] = "ToStr";
                FunctionOperatorType[FunctionOperatorType["Replace"] = 15] = "Replace";
                FunctionOperatorType[FunctionOperatorType["Reverse"] = 16] = "Reverse";
                FunctionOperatorType[FunctionOperatorType["Insert"] = 17] = "Insert";
                FunctionOperatorType[FunctionOperatorType["CharIndex"] = 18] = "CharIndex";
                FunctionOperatorType[FunctionOperatorType["Remove"] = 19] = "Remove";
                FunctionOperatorType[FunctionOperatorType["Abs"] = 20] = "Abs";
                FunctionOperatorType[FunctionOperatorType["Sqr"] = 21] = "Sqr";
                FunctionOperatorType[FunctionOperatorType["Cos"] = 22] = "Cos";
                FunctionOperatorType[FunctionOperatorType["Sin"] = 23] = "Sin";
                FunctionOperatorType[FunctionOperatorType["Atn"] = 24] = "Atn";
                FunctionOperatorType[FunctionOperatorType["Exp"] = 25] = "Exp";
                FunctionOperatorType[FunctionOperatorType["Log"] = 26] = "Log";
                FunctionOperatorType[FunctionOperatorType["Rnd"] = 27] = "Rnd";
                FunctionOperatorType[FunctionOperatorType["Tan"] = 28] = "Tan";
                FunctionOperatorType[FunctionOperatorType["Power"] = 29] = "Power";
                FunctionOperatorType[FunctionOperatorType["Sign"] = 30] = "Sign";
                FunctionOperatorType[FunctionOperatorType["Round"] = 31] = "Round";
                FunctionOperatorType[FunctionOperatorType["Ceiling"] = 32] = "Ceiling";
                FunctionOperatorType[FunctionOperatorType["Floor"] = 33] = "Floor";
                FunctionOperatorType[FunctionOperatorType["Max"] = 34] = "Max";
                FunctionOperatorType[FunctionOperatorType["Min"] = 35] = "Min";
                FunctionOperatorType[FunctionOperatorType["Acos"] = 36] = "Acos";
                FunctionOperatorType[FunctionOperatorType["Asin"] = 37] = "Asin";
                FunctionOperatorType[FunctionOperatorType["Atn2"] = 38] = "Atn2";
                FunctionOperatorType[FunctionOperatorType["BigMul"] = 39] = "BigMul";
                FunctionOperatorType[FunctionOperatorType["Cosh"] = 40] = "Cosh";
                FunctionOperatorType[FunctionOperatorType["Log10"] = 41] = "Log10";
                FunctionOperatorType[FunctionOperatorType["Sinh"] = 42] = "Sinh";
                FunctionOperatorType[FunctionOperatorType["Tanh"] = 43] = "Tanh";
                FunctionOperatorType[FunctionOperatorType["PadLeft"] = 44] = "PadLeft";
                FunctionOperatorType[FunctionOperatorType["PadRight"] = 45] = "PadRight";
                FunctionOperatorType[FunctionOperatorType["StartsWith"] = 46] = "StartsWith";
                FunctionOperatorType[FunctionOperatorType["EndsWith"] = 47] = "EndsWith";
                FunctionOperatorType[FunctionOperatorType["Contains"] = 48] = "Contains";
                FunctionOperatorType[FunctionOperatorType["ToInt"] = 49] = "ToInt";
                FunctionOperatorType[FunctionOperatorType["ToLong"] = 50] = "ToLong";
                FunctionOperatorType[FunctionOperatorType["ToFloat"] = 51] = "ToFloat";
                FunctionOperatorType[FunctionOperatorType["ToDouble"] = 52] = "ToDouble";
                FunctionOperatorType[FunctionOperatorType["ToDecimal"] = 53] = "ToDecimal";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeThisYear"] = 54] = "LocalDateTimeThisYear";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeThisMonth"] = 55] = "LocalDateTimeThisMonth";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeLastWeek"] = 56] = "LocalDateTimeLastWeek";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeThisWeek"] = 57] = "LocalDateTimeThisWeek";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeYesterday"] = 58] = "LocalDateTimeYesterday";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeToday"] = 59] = "LocalDateTimeToday";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeNow"] = 60] = "LocalDateTimeNow";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeTomorrow"] = 61] = "LocalDateTimeTomorrow";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeDayAfterTomorrow"] = 62] = "LocalDateTimeDayAfterTomorrow";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeNextWeek"] = 63] = "LocalDateTimeNextWeek";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeTwoWeeksAway"] = 64] = "LocalDateTimeTwoWeeksAway";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeNextMonth"] = 65] = "LocalDateTimeNextMonth";
                FunctionOperatorType[FunctionOperatorType["LocalDateTimeNextYear"] = 66] = "LocalDateTimeNextYear";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalBeyondThisYear"] = 67] = "IsOutlookIntervalBeyondThisYear";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalLaterThisYear"] = 68] = "IsOutlookIntervalLaterThisYear";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalLaterThisMonth"] = 69] = "IsOutlookIntervalLaterThisMonth";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalNextWeek"] = 70] = "IsOutlookIntervalNextWeek";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalLaterThisWeek"] = 71] = "IsOutlookIntervalLaterThisWeek";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalTomorrow"] = 72] = "IsOutlookIntervalTomorrow";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalToday"] = 73] = "IsOutlookIntervalToday";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalYesterday"] = 74] = "IsOutlookIntervalYesterday";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalEarlierThisWeek"] = 75] = "IsOutlookIntervalEarlierThisWeek";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalLastWeek"] = 76] = "IsOutlookIntervalLastWeek";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalEarlierThisMonth"] = 77] = "IsOutlookIntervalEarlierThisMonth";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalEarlierThisYear"] = 78] = "IsOutlookIntervalEarlierThisYear";
                FunctionOperatorType[FunctionOperatorType["IsOutlookIntervalPriorThisYear"] = 79] = "IsOutlookIntervalPriorThisYear";
                FunctionOperatorType[FunctionOperatorType["IsThisWeek"] = 80] = "IsThisWeek";
                FunctionOperatorType[FunctionOperatorType["IsThisMonth"] = 81] = "IsThisMonth";
                FunctionOperatorType[FunctionOperatorType["IsThisYear"] = 82] = "IsThisYear";
                FunctionOperatorType[FunctionOperatorType["DateDiffTick"] = 83] = "DateDiffTick";
                FunctionOperatorType[FunctionOperatorType["DateDiffSecond"] = 84] = "DateDiffSecond";
                FunctionOperatorType[FunctionOperatorType["DateDiffMilliSecond"] = 85] = "DateDiffMilliSecond";
                FunctionOperatorType[FunctionOperatorType["DateDiffMinute"] = 86] = "DateDiffMinute";
                FunctionOperatorType[FunctionOperatorType["DateDiffHour"] = 87] = "DateDiffHour";
                FunctionOperatorType[FunctionOperatorType["DateDiffDay"] = 88] = "DateDiffDay";
                FunctionOperatorType[FunctionOperatorType["DateDiffMonth"] = 89] = "DateDiffMonth";
                FunctionOperatorType[FunctionOperatorType["DateDiffYear"] = 90] = "DateDiffYear";
                FunctionOperatorType[FunctionOperatorType["GetDate"] = 91] = "GetDate";
                FunctionOperatorType[FunctionOperatorType["GetMilliSecond"] = 92] = "GetMilliSecond";
                FunctionOperatorType[FunctionOperatorType["GetSecond"] = 93] = "GetSecond";
                FunctionOperatorType[FunctionOperatorType["GetMinute"] = 94] = "GetMinute";
                FunctionOperatorType[FunctionOperatorType["GetHour"] = 95] = "GetHour";
                FunctionOperatorType[FunctionOperatorType["GetDay"] = 96] = "GetDay";
                FunctionOperatorType[FunctionOperatorType["GetMonth"] = 97] = "GetMonth";
                FunctionOperatorType[FunctionOperatorType["GetYear"] = 98] = "GetYear";
                FunctionOperatorType[FunctionOperatorType["GetDayOfWeek"] = 99] = "GetDayOfWeek";
                FunctionOperatorType[FunctionOperatorType["GetDayOfYear"] = 100] = "GetDayOfYear";
                FunctionOperatorType[FunctionOperatorType["GetTimeOfDay"] = 101] = "GetTimeOfDay";
                FunctionOperatorType[FunctionOperatorType["Now"] = 102] = "Now";
                FunctionOperatorType[FunctionOperatorType["UtcNow"] = 103] = "UtcNow";
                FunctionOperatorType[FunctionOperatorType["Today"] = 104] = "Today";
                FunctionOperatorType[FunctionOperatorType["AddTimeSpan"] = 105] = "AddTimeSpan";
                FunctionOperatorType[FunctionOperatorType["AddTicks"] = 106] = "AddTicks";
                FunctionOperatorType[FunctionOperatorType["AddMilliSeconds"] = 107] = "AddMilliSeconds";
                FunctionOperatorType[FunctionOperatorType["AddSeconds"] = 108] = "AddSeconds";
                FunctionOperatorType[FunctionOperatorType["AddMinutes"] = 109] = "AddMinutes";
                FunctionOperatorType[FunctionOperatorType["AddHours"] = 110] = "AddHours";
                FunctionOperatorType[FunctionOperatorType["AddDays"] = 111] = "AddDays";
                FunctionOperatorType[FunctionOperatorType["AddMonths"] = 112] = "AddMonths";
                FunctionOperatorType[FunctionOperatorType["AddYears"] = 113] = "AddYears";
                FunctionOperatorType[FunctionOperatorType["OrderDescToken"] = 114] = "OrderDescToken";
            })(FunctionOperatorType = Criteria.FunctionOperatorType || (Criteria.FunctionOperatorType = {}));
            var FunctionOperator = (function (_super) {
                __extends(FunctionOperator, _super);
                function FunctionOperator(operatorType, operands) {
                    var _this = _super.call(this) || this;
                    _this.toString = function (reverse) {
                        var result = (Criteria.Utils.operatorTokens[_this.displayType] || _this.displayType) + '(' + _this.operands.map(function (operand) {
                            return operand.toString();
                        }).join(", ") + ')';
                        return reverse ? "Not " + result : result;
                    };
                    _this.assignLeftPart = function (criteriaOperator) {
                        _this.operands = [criteriaOperator.leftPart];
                    };
                    _this.assignRightPart = function (criteriaOperator) {
                        if (_this.operatorType !== FunctionOperatorType.IsNullOrEmpty &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalBeyondThisYear &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalLaterThisYear &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalLaterThisMonth &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalNextWeek &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalLaterThisWeek &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalTomorrow &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalToday &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalYesterday &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalEarlierThisWeek &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalLastWeek &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalEarlierThisMonth &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalEarlierThisYear &&
                            _this.operatorType !== FunctionOperatorType.IsOutlookIntervalPriorThisYear) {
                            if (criteriaOperator.rightPart.length !== null && criteriaOperator.rightPart.length !== undefined) {
                                if (criteriaOperator.rightPart.length) {
                                    _this.operands.push(criteriaOperator.rightPart[0]);
                                }
                                else {
                                    _this.operands.push(new Criteria.OperandValue());
                                }
                            }
                            else {
                                _this.operands.push(criteriaOperator.rightPart);
                            }
                        }
                    };
                    _this.operands = [];
                    _this.type = "Function";
                    _this.operatorType = operatorType;
                    operands = operands || [new Criteria.CriteriaOperator()];
                    operands.forEach(function (operand) { return _this.operands.push(operand); });
                    return _this;
                }
                Object.defineProperty(FunctionOperator.prototype, "leftPart", {
                    get: function () {
                        return this.operands[0];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FunctionOperator.prototype, "rightPart", {
                    get: function () {
                        return this.operands.filter(function (_, index) { return index !== 0; });
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FunctionOperator.prototype, "displayType", {
                    get: function () {
                        return FunctionOperatorType[this.operatorType] || this.operatorType.toString();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FunctionOperator.prototype, "enumType", {
                    get: function () {
                        return FunctionOperatorType;
                    },
                    enumerable: true,
                    configurable: true
                });
                FunctionOperator.prototype.accept = function (visitor) {
                    return visitor.visitFunctionOperator
                        ? visitor.visitFunctionOperator(this)
                        : new FunctionOperator(this.operatorType, this.operands && this.operands.map(function (op) { return op.accept(visitor); }));
                };
                return FunctionOperator;
            }(Criteria.CriteriaOperator));
            Criteria.FunctionOperator = FunctionOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var GroupOperatorType;
            (function (GroupOperatorType) {
                GroupOperatorType[GroupOperatorType["And"] = 0] = "And";
                GroupOperatorType[GroupOperatorType["Or"] = 1] = "Or";
            })(GroupOperatorType = Criteria.GroupOperatorType || (Criteria.GroupOperatorType = {}));
            var GroupOperator = (function (_super) {
                __extends(GroupOperator, _super);
                function GroupOperator(operation, operands) {
                    var _this = _super.call(this) || this;
                    _this.create = function (isGroup, property, specifics) {
                        var operator = new Criteria.BinaryOperator(property, new Criteria.OperandValue(""), Criteria.BinaryOperatorType.Equal);
                        if (isGroup) {
                            operator = new GroupOperator(GroupOperatorType.And, []);
                        }
                        else if (specifics && specifics === "list") {
                            operator = new Criteria.AggregateOperand(property, null, Criteria.Aggregate.Exists, new GroupOperator(GroupOperatorType.And, []));
                        }
                        _this.operands.push(operator);
                        return _this.operands[_this.operands.indexOf(operator)];
                    };
                    _this.change = function (operationType, item, incorrectSpecificsForAggregate) {
                        if (incorrectSpecificsForAggregate === void 0) { incorrectSpecificsForAggregate = false; }
                        var position = _this.operands.indexOf(item);
                        if (position !== -1) {
                            var operator = Criteria.CriteriaOperator.create(operationType);
                            if (operationType.type !== operator.enumType) {
                                operator.leftPart.assignFrom(item);
                            }
                            else {
                                operator.assignFrom(item, incorrectSpecificsForAggregate);
                            }
                            _this.operands[position] = operator;
                        }
                        else {
                            throw Error("dont have this element in operands collection");
                        }
                        item = null;
                        return _this.operands[position];
                    };
                    _this.remove = function (operator) {
                        _this.operands.splice(_this.operands.indexOf(operator), 1);
                    };
                    _this.assignLeftPart = function (operator) {
                        _this.operands = operator.operands;
                    };
                    _this.operands = [];
                    _this.type = "Group";
                    _this.operatorType = operation;
                    operands = operands || [new Criteria.CriteriaOperator(), new Criteria.CriteriaOperator()];
                    operands.forEach(function (operand) { return _this.operands.push(operand); });
                    return _this;
                }
                GroupOperator.combine = function (operation, operands) {
                    var combinedOperands = [];
                    (operands || []).forEach(function (operand) {
                        if (operand instanceof GroupOperator && operand.operatorType === operation) {
                            combinedOperands.push.apply(combinedOperands, operand.operands);
                        }
                        else {
                            combinedOperands.push(operand);
                        }
                    });
                    if (combinedOperands.length === 1) {
                        return combinedOperands[0];
                    }
                    return Criteria.criteriaCreator.process("group", { operands: combinedOperands, operation: operation });
                };
                GroupOperator.prototype.children = function () {
                    return this.operands;
                };
                Object.defineProperty(GroupOperator.prototype, "displayType", {
                    get: function () {
                        return GroupOperatorType[this.operatorType];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(GroupOperator.prototype, "enumType", {
                    get: function () {
                        return GroupOperatorType;
                    },
                    enumerable: true,
                    configurable: true
                });
                GroupOperator.prototype.accept = function (visitor) {
                    return visitor.visitGroupOperator
                        ? visitor.visitGroupOperator(this)
                        : new GroupOperator(this.operatorType, this.operands && this.operands.map(function (op) { return op.accept(visitor); }));
                };
                return GroupOperator;
            }(Criteria.CriteriaOperator));
            Criteria.GroupOperator = GroupOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var InOperator = (function (_super) {
                __extends(InOperator, _super);
                function InOperator(criteriaOperator, operands) {
                    var _this = _super.call(this) || this;
                    _this.assignLeftPart = function (criteriaOperator) {
                        _this.criteriaOperator = criteriaOperator.leftPart;
                    };
                    _this.assignRightPart = function (criteriaOperator) {
                        _this.operands = [].concat(criteriaOperator.rightPart);
                    };
                    _this.operatorType = "In";
                    _this.type = "In";
                    _this.operands = [];
                    _this.criteriaOperator = criteriaOperator || new Criteria.CriteriaOperator();
                    (operands || []).forEach(function (operand) { return _this.operands.push(operand); });
                    return _this;
                }
                Object.defineProperty(InOperator.prototype, "leftPart", {
                    get: function () {
                        return this.criteriaOperator;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(InOperator.prototype, "rightPart", {
                    get: function () {
                        return this.operands;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(InOperator.prototype, "displayType", {
                    get: function () {
                        return "In";
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(InOperator.prototype, "enumType", {
                    get: function () {
                        return InOperator;
                    },
                    enumerable: true,
                    configurable: true
                });
                InOperator.prototype.accept = function (visitor) {
                    return visitor.visitInOperator
                        ? visitor.visitInOperator(this)
                        : new InOperator(this.criteriaOperator && this.criteriaOperator.accept(visitor), this.operands && this.operands.map(function (op) { return op.accept(visitor); }));
                };
                return InOperator;
            }(Criteria.CriteriaOperator));
            Criteria.InOperator = InOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var JoinOperand = (function (_super) {
                __extends(JoinOperand, _super);
                function JoinOperand(joinTypeName, condition, type, aggregated) {
                    var _this = _super.call(this) || this;
                    _this.type = "Join";
                    _this.joinTypeName = joinTypeName;
                    _this.condition = condition;
                    _this.operatorType = type;
                    _this.aggregatedExpression = aggregated;
                    return _this;
                }
                JoinOperand.joinOrAggregate = function (collectionProperty, condition, type, aggregated) {
                    if (collectionProperty === null || collectionProperty.propertyName.length < 2 || collectionProperty.propertyName[0] != '<' || collectionProperty.propertyName[collectionProperty.propertyName.length - 1] != '>') {
                        return Criteria.criteriaCreator.process("aggregate", {
                            property: collectionProperty,
                            aggregatedExpression: aggregated,
                            aggregateType: type,
                            condition: condition
                        });
                    }
                    else {
                        return Criteria.criteriaCreator.process("join", {
                            joinTypeName: collectionProperty.propertyName.substring(1, collectionProperty.propertyName.length - 2),
                            condition: condition,
                            type: type,
                            aggregated: aggregated
                        });
                    }
                };
                JoinOperand.prototype.accept = function (visitor) {
                    return visitor.visitJoinOperand
                        ? visitor.visitJoinOperand(this)
                        : new JoinOperand(this.joinTypeName, this.condition && this.condition.accept(visitor), this.operatorType, this.aggregatedExpression && this.aggregatedExpression.accept(visitor));
                };
                return JoinOperand;
            }(Criteria.CriteriaOperator));
            Criteria.JoinOperand = JoinOperand;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var OperandParameter = (function (_super) {
                __extends(OperandParameter, _super);
                function OperandParameter(parameterName, value) {
                    var _this = _super.call(this, value) || this;
                    _this.type = "Parameter";
                    _this.parameterName = parameterName || "";
                    return _this;
                }
                Object.defineProperty(OperandParameter.prototype, "displayType", {
                    get: function () {
                        return '?' + this.parameterName;
                    },
                    enumerable: true,
                    configurable: true
                });
                OperandParameter.prototype.accept = function (visitor) {
                    return visitor.visitOperandParameter
                        ? visitor.visitOperandParameter(this)
                        : new OperandParameter(this.parameterName, this.value);
                };
                return OperandParameter;
            }(Criteria.OperandValue));
            Criteria.OperandParameter = OperandParameter;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Criteria;
        (function (Criteria) {
            var UnaryOperatorType;
            (function (UnaryOperatorType) {
                UnaryOperatorType[UnaryOperatorType["Minus"] = 0] = "Minus";
                UnaryOperatorType[UnaryOperatorType["Plus"] = 1] = "Plus";
                UnaryOperatorType[UnaryOperatorType["BitwiseNot"] = 2] = "BitwiseNot";
                UnaryOperatorType[UnaryOperatorType["Not"] = 3] = "Not";
                UnaryOperatorType[UnaryOperatorType["IsNull"] = 4] = "IsNull";
            })(UnaryOperatorType = Criteria.UnaryOperatorType || (Criteria.UnaryOperatorType = {}));
            var UnaryOperator = (function (_super) {
                __extends(UnaryOperator, _super);
                function UnaryOperator(operatorType, operand) {
                    var _this = _super.call(this) || this;
                    _this.type = "Unary";
                    _this.operand = operand || new Criteria.CriteriaOperator();
                    _this.operatorType = operatorType;
                    return _this;
                }
                Object.defineProperty(UnaryOperator.prototype, "leftPart", {
                    get: function () {
                        return this.operand;
                    },
                    enumerable: true,
                    configurable: true
                });
                UnaryOperator.prototype.assignFrom = function (criteriaOperator) {
                    if (this.operatorType === UnaryOperatorType.Not) {
                        if (criteriaOperator instanceof UnaryOperator) {
                            this.operand.assignFrom(criteriaOperator.operand);
                        }
                        else {
                            this.operand.assignFrom(criteriaOperator);
                        }
                    }
                    else {
                        if (criteriaOperator instanceof UnaryOperator) {
                            this.operand = criteriaOperator.operand.leftPart;
                        }
                        else {
                            this.operand = criteriaOperator.leftPart || criteriaOperator;
                        }
                    }
                };
                Object.defineProperty(UnaryOperator.prototype, "displayType", {
                    get: function () {
                        return UnaryOperatorType[this.operatorType];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(UnaryOperator.prototype, "enumType", {
                    get: function () {
                        return UnaryOperatorType;
                    },
                    enumerable: true,
                    configurable: true
                });
                UnaryOperator.prototype.accept = function (visitor) {
                    return visitor.visitUnaryOperator
                        ? visitor.visitUnaryOperator(this)
                        : new UnaryOperator(this.operatorType, this.operand && this.operand.accept(visitor));
                };
                return UnaryOperator;
            }(Criteria.CriteriaOperator));
            Criteria.UnaryOperator = UnaryOperator;
        })(Criteria = Analytics.Criteria || (Analytics.Criteria = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var Tools = (function (_super) {
                    __extends(Tools, _super);
                    function Tools(onClick, parametersOptions, options, fieldListOptions) {
                        var _this = _super.call(this) || this;
                        _this.searchPlaceholder = function () { return Analytics.getLocalization("Enter text to search...", "ASPxReportsStringId.ReportDesigner_QueryBuilder_SearchBox_EmptyText"); };
                        _this._categories = ko.observableArray([]);
                        _this.toolBox = [];
                        _this.description = ko.observable();
                        _this._defaultClick = onClick;
                        Internal.operatorNames.filter(function (item) { return !!item.descriptionStringId; }).forEach(function (item) { return _this._initDescription(item); });
                        var functionGroups = ko.computed(function () {
                            return options() && ko.unwrap(options().functions) || Internal.functionDisplay;
                        }), functions = ko.computed(function () {
                            return functionGroups().map(function (funtionGroup) {
                                return _this._createFunctionsCategoryItem(funtionGroup.items, Analytics.getLocalization(funtionGroup.display, funtionGroup.localizationId));
                            });
                        }), createDefaultCategories = function () {
                            return [
                                _this._createFieldsCategory(fieldListOptions, parametersOptions),
                                _this._createConstantCategory(),
                                _this._createFunctionsCategory(functions),
                                _this._createOperatorsCategory(Internal.operatorNames)
                            ];
                        }, selectedContent = ko.observable(null), resetCategoriesSelection = function () {
                            var firstItem = _this._categories()[0].content;
                            selectedContent() && selectedContent().isSelected(false);
                            selectedContent(firstItem);
                            firstItem.isSelected(true);
                        }, updateCategories = function (newOptions) {
                            _this._disposeCategories();
                            var defaultCategories = createDefaultCategories();
                            newOptions && newOptions.customizeCategories && newOptions.customizeCategories(_this, defaultCategories, onClick);
                            _this._categories(defaultCategories);
                            resetCategoriesSelection();
                        };
                        _this.resetCategoriesSelection = resetCategoriesSelection;
                        [functionGroups, functions].forEach(function (x) { return _this._disposables.push(x); });
                        _this._disposables.push(options.subscribe(function (newOptions) {
                            updateCategories(newOptions);
                        }));
                        updateCategories(options());
                        _this._disposables.push(_this.showDescription = ko.computed(function () { return selectedContent() && selectedContent().showDescription; }));
                        _this.toolBox = [
                            _this._generateTab(_this._categories, "dx-expressioneditor-categories", "170px", function (item) {
                                if (item.data && item.data.selectedItem && item.data.selectedItem() && item.data.items.indexOf(item.data.selectedItem()) !== -1) {
                                    var contentItem = item.data.selectedItem();
                                    _this.description(_this._localizedExpressionEditorItem(contentItem));
                                }
                                else {
                                    _this.description(undefined);
                                }
                                if (selectedContent() === item)
                                    return;
                                selectedContent().isSelected(false);
                                item.isSelected(true);
                                selectedContent(item);
                            }),
                            _this._generateTab(selectedContent, "dx-expressioneditor-selectedcontent", ko.computed(function () { return _this.showDescription() ? "248px" : "435px"; }), function (item) { _this.description(_this._localizedExpressionEditorItem(item)); }, _this._defaultClick),
                            _this._generateTab(_this.description, "dx-expressioneditor-description", undefined, undefined, undefined, _this.showDescription)
                        ];
                        return _this;
                    }
                    Tools.prototype._generateTab = function (content, templateName, width, click, dblclick, visible) {
                        if (templateName === void 0) { templateName = null; }
                        return {
                            templateName: templateName,
                            width: width || "30%",
                            content: content,
                            click: click,
                            dblclick: dblclick,
                            visible: visible || true
                        };
                    };
                    Tools.prototype._localizedExpressionEditorItem = function (item) {
                        return Analytics.getLocalization(item.text, item.descriptionStringId);
                    };
                    Tools.prototype._initDescription = function (expressionEditorItem) {
                        expressionEditorItem.description = this._localizedExpressionEditorItem(expressionEditorItem);
                    };
                    Tools.prototype._createFieldsCategory = function (fields, parameters) {
                        var category = {
                            displayName: Analytics.getLocalization("Fields", "ReportStringId.ExpressionEditor_ItemInfo_Fields"),
                            content: {
                                showDescription: false,
                                isSelected: ko.observable(false),
                                data: { fields: fields, parameters: parameters },
                                name: "dx-expressioneditor-fields"
                            },
                            dispose: function () { return void 0; }
                        };
                        return category;
                    };
                    Tools.prototype._createConstantCategory = function () {
                        var items = [
                            { text: "?", descriptionStringId: 'ExpressionEditorStringId.Constant_Null' },
                            { text: "False", descriptionStringId: 'ExpressionEditorStringId.Constant_False' },
                            { text: "True", descriptionStringId: 'ExpressionEditorStringId.Constant_True' }
                        ];
                        return Widgets.createExpressionEditorCollectionToolOptions(items, "Constants", "DataAccessStringId.ExpressionEditor_DocumentationCategory_Constants", true);
                    };
                    Tools.prototype._createOperatorsCategory = function (data) {
                        return Widgets.createExpressionEditorCollectionToolOptions(data, "Operators", "DataAccessStringId.ExpressionEditor_DocumentationCategory_Operators", true);
                    };
                    Tools.prototype._createFunctionsCategoryContent = function (textToSearch, isSelected, items) {
                        return {
                            showDescription: true,
                            isSelected: isSelected,
                            data: {
                                textToSearch: textToSearch,
                                items: items,
                                availableItems: ko.observableArray(items),
                                selectedItem: ko.observable(null)
                            },
                            name: "dx-expressioneditor-collection-function",
                        };
                    };
                    Tools.prototype._createFunctionsCategoryItem = function (functions, display) {
                        var _this = this;
                        var result = {
                            display: display,
                            isSelected: ko.observable(false),
                            data: [],
                            name: "dx-expressioneditor-collection-function",
                        };
                        $.map(functions, (function (item) {
                            if (item) {
                                item.forEach(function (functionItem) {
                                    _this._initDescription(functionItem);
                                    result.data.push(functionItem);
                                });
                            }
                        }));
                        return result;
                    };
                    Tools.prototype._createFunctionsCategory = function (items) {
                        var textToSearch = ko.observable(""), disposables = [], isSelected = ko.observable(false), timeout = null, allItems = ko.computed(function () { return [].concat.apply([], items().map(function (x) { return x.data; })); }), content = this._createFunctionsCategoryContent(textToSearch, isSelected, allItems()), category = {
                            displayName: Analytics.getLocalization("Functions", "DataAccessStringId.ExpressionEditor_DocumentationCategory_Functions"),
                            items: items, allItems: allItems, isSelected: isSelected, content: content,
                            collapsed: ko.observable(true),
                            updateContent: function (items, isSelected) {
                                content.isSelected && content.isSelected(false);
                                content.isSelected = isSelected;
                                content.isSelected(true);
                                content.data.items = items;
                                content.data.availableItems(content.data.items.filter(function (x) { return !!Analytics.Utils.findMatchesInString(x.text, textToSearch()); }));
                            },
                            templateName: "dx-expressioneditor-category-accordion",
                            dispose: function () {
                                disposables.forEach(function (x) { return x.dispose(); });
                                disposables.splice(0, disposables.length);
                            }
                        };
                        disposables.push(allItems);
                        disposables.push(textToSearch.subscribe(function (newVal) {
                            timeout && clearTimeout(timeout);
                            timeout = setTimeout(function () {
                                category.content.data.availableItems(category.content.data.items.filter(function (x) { return !!Analytics.Utils.findMatchesInString(x.text, newVal); }));
                            }, 150);
                        }));
                        return category;
                    };
                    Tools.prototype._disposeCategories = function () {
                        this._categories().forEach(function (category) { return category.dispose && category.dispose(); });
                    };
                    Tools.prototype.dispose = function () {
                        _super.prototype.dispose.call(this);
                        this._disposeCategories();
                    };
                    return Tools;
                }(Analytics.Utils.Disposable));
                Internal.Tools = Tools;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            Widgets.treeListEditAction = {
                templateName: "dx-treelist-edit-action",
                imageClassName: "",
                text: "Edit",
                clickAction: $.noop,
                displayText: function () { return DevExpress.Analytics.getLocalization("Edit", "ReportStringId.UD_Group_Edit"); }
            };
            var TreeListEllipsisButton = (function () {
                function TreeListEllipsisButton(_availableItemsCount, padding, pageSize) {
                    this._availableItemsCount = _availableItemsCount;
                    this.padding = padding;
                    this.pageSize = pageSize;
                    this.templateName = "dx-treelist-item-ellipsis";
                    this.collapsed = function () { return true; };
                    this.visibleItems = function () { return []; };
                    this.text = function () { return Analytics.getLocalization("Show more...", "AnalyticsCoreStringId.QueryBuilder_Tables_ShowMore"); };
                }
                TreeListEllipsisButton.prototype.renderNext = function () {
                    this._availableItemsCount(this._availableItemsCount() + this.pageSize);
                };
                return TreeListEllipsisButton;
            }());
            Widgets.TreeListEllipsisButton = TreeListEllipsisButton;
            var TreeListItemViewModel = (function (_super) {
                __extends(TreeListItemViewModel, _super);
                function TreeListItemViewModel(options, path, onItemsVisibilityChanged, rtl, resolver) {
                    if (path === void 0) { path = []; }
                    if (onItemsVisibilityChanged === void 0) { onItemsVisibilityChanged = $.noop; }
                    if (rtl === void 0) { rtl = false; }
                    if (resolver === void 0) { resolver = new Analytics.Internal.CodeResolver(); }
                    var _this = _super.call(this) || this;
                    _this.resolver = resolver;
                    _this._rtl = false;
                    _this._data = ko.observable(null);
                    _this._actions = ko.observable([]);
                    _this._pageSize = -1;
                    _this._actionsSubscription = null;
                    _this._iconName = function () { return (ko.unwrap((_this.data && _this.data.icon) || (_this.data && _this.data.specifics)) || "default").toLowerCase(); };
                    _this.level = -1;
                    _this.items = ko.observableArray();
                    _this.collapsed = ko.observable(true);
                    _this.isSelected = ko.observable(false);
                    _this.isHovered = ko.observable(false);
                    _this.isMultiSelected = ko.observable(false);
                    _this._pageSize = options.pageSize || -1;
                    _this._path = path;
                    _this._rtl = rtl;
                    _this._treeListController = options.treeListController;
                    _this._templateName = options.templateName;
                    _this._onItemsVisibilityChanged = onItemsVisibilityChanged;
                    _this.dragDropHandler = options.treeListController.dragDropHandler;
                    _this.getItems = function () {
                        return _this._loadItems(options);
                    };
                    _this._initPaginate();
                    _this.toggleSelected = function (_, event) {
                        if ((event.shiftKey || event.ctrlKey) && _this.selectedItems().length > 0 && _this._treeListController.canMultiSelect && _this._treeListController.canMultiSelect(_this)) {
                            options.selectedPath("");
                            _this._treeListController.multiSelect(_this, event.shiftKey, event.ctrlKey);
                        }
                        else if (_this._treeListController.canSelect(_this)) {
                            options.treeListController.clickHandler && options.treeListController.clickHandler(_this);
                            options.selectedPath(_this.path);
                        }
                    };
                    if (options.treeListController.dblClickHandler) {
                        _this.dblClickHandler = function (item) {
                            options.treeListController.dblClickHandler && options.treeListController.dblClickHandler(item);
                        };
                    }
                    _this.toggleCollapsed = function () {
                        if (_this.hasItems) {
                            _this.collapsed(!_this.collapsed.peek());
                            if (!_this.collapsed.peek() && _this.items().length === 0) {
                                _this._loadItems(options).always(function () { onItemsVisibilityChanged(); });
                            }
                            else {
                                onItemsVisibilityChanged();
                            }
                        }
                    };
                    _this.nodeImageClass = _this._getNodeImageClassName();
                    return _this;
                }
                TreeListItemViewModel.prototype._equal = function (obj1, obj2) {
                    var ignore = ["innerActions", "noDragable", "dragData"];
                    if (obj2 === obj1)
                        return true;
                    return Object.keys(obj2).filter(function (key) { return ignore.indexOf(key) === -1; }).every(function (key) {
                        return obj2[key] === obj1[key];
                    });
                };
                TreeListItemViewModel.prototype._getImageClassName = function (showIcon) {
                    var _this = this;
                    return ko.computed(function () {
                        return "dx-image-fieldlist-"
                            + _this._iconName()
                            + (!showIcon ? " dx-treelist-image-empty" : "");
                    });
                };
                TreeListItemViewModel.prototype._getImageTemplateName = function () {
                    var _this = this;
                    return ko.computed(function () {
                        var _templateName = "dxrd-svg-fieldlist-" + _this._iconName();
                        return Widgets.Internal.SvgTemplatesEngine.getExistingTemplate(_templateName);
                    });
                };
                TreeListItemViewModel.prototype._getNodeImageClassName = function () {
                    var _this = this;
                    var imageClassName = ko.observable("dx-collapsing-image");
                    return ko.computed({
                        read: function () {
                            if (!_this.hasItems) {
                                return 'dx-image-leaf-node';
                            }
                            return _this.collapsed() ? 'dx-collapsing-image' : imageClassName();
                        },
                        write: function (newValue) {
                            imageClassName(newValue);
                        }
                    });
                };
                TreeListItemViewModel.prototype._createItemsObj = function (items) {
                    var obj = {};
                    for (var i = 0; i < items.length; i++) {
                        obj[items[i].name] = { item: items[i], index: i };
                    }
                    return obj;
                };
                TreeListItemViewModel.prototype._loadItems = function (options) {
                    var _this = this;
                    var deferred = $.Deferred();
                    if (this._loader) {
                        this._loader.dispose();
                    }
                    this._disposables.reverse().forEach(function (x) { return x.dispose && x.dispose(); });
                    this._disposables.splice(0);
                    var promise = ko.observable();
                    var subscription = promise.subscribe(function (value) {
                        if (!value)
                            return;
                        value.done(function (data) {
                            if (_this.isDisposing) {
                                deferred.reject();
                                return;
                            }
                            var _data = data;
                            var items = _this.items.peek();
                            var dataObj = _this._createItemsObj(_data);
                            var isMutated = false;
                            var splicedItems = 0;
                            var tempItems = [].concat.apply([], items);
                            for (var i = 0; i < tempItems.length; i++) {
                                if (!dataObj[tempItems[i].data.name]) {
                                    tempItems[i].dispose();
                                    items.splice(i - splicedItems, 1);
                                    splicedItems++;
                                    isMutated = true;
                                }
                            }
                            var itemsObj = _this._createItemsObj(items);
                            var resorted = false;
                            var showIconsForChildItems = !_this._treeListController.showIconsForChildItems || _this._treeListController.showIconsForChildItems(_this);
                            _data.forEach(function (d, index) {
                                var currentItem = itemsObj[d.name];
                                if (!currentItem) {
                                    isMutated = true;
                                    var newItem = new TreeListItemViewModel(options, _this.pathParts, _this._onItemsVisibilityChanged, _this._rtl, _this.resolver);
                                    newItem.data = d;
                                    newItem.level = _this.level + 1;
                                    newItem.parent = _this;
                                    newItem.padding = _this._applyPadding(_this._rtl ? "right" : "left", 20 * newItem.level + 12);
                                    newItem.imageClassName = newItem._getImageClassName(showIconsForChildItems);
                                    newItem.imageTemplateName = newItem._getImageTemplateName();
                                    items.splice(index, 0, newItem);
                                    itemsObj[d.name] = { item: newItem, index: index };
                                }
                                else {
                                    if (!_this._equal(d, currentItem.item.data))
                                        currentItem.item.data = d;
                                    if (!resorted)
                                        resorted = currentItem.index !== index;
                                }
                            });
                            if (resorted) {
                                var index = items.reduce(function (acc, x, index) {
                                    var max = Math.abs(index - (dataObj[x.data.name] ? dataObj[x.data.name].index : -1));
                                    if (!acc || acc.max < max) {
                                        return { max: max, index: index };
                                    }
                                    return acc;
                                }, null).index;
                                var curItem = items[index];
                                items.splice(index, 1);
                                items.splice(dataObj[curItem.data.name] ? dataObj[curItem.data.name].index : -1, 0, curItem);
                                isMutated = true;
                            }
                            isMutated && _this.items.valueHasMutated();
                            _this.items().forEach(function (item) {
                                if (!item.collapsed() && item.hasItems) {
                                    item._loadItems(options);
                                }
                            });
                            _this.nodeImageClass(_this.items.peek().some(function (x) { return x.visible; }) ? "dx-collapsing-image dx-image-expanded" : "dx-image-leaf-node");
                            deferred.resolve(_this.items.peek());
                            var selectedPath = options.selectedPath.peek();
                            if (selectedPath) {
                                var item2Select = _this.items.peek().filter(function (item) { return selectedPath.indexOf(item.path) === 0; })[0];
                                if (item2Select) {
                                    _this._selectItem(item2Select.name + selectedPath.substring(item2Select.path.length));
                                }
                            }
                        });
                    });
                    this._disposables.push({
                        dispose: function () {
                            subscription.dispose();
                            promise(null);
                        }
                    });
                    this._disposables.push(this._loader = ko.computed(function () {
                        promise(options.itemsProvider.getItems(new Analytics.Utils.PathRequest(_this.path, _this.pathParts)));
                    }));
                    return deferred.promise();
                };
                TreeListItemViewModel.prototype._selectItem = function (itemPath) {
                    var _this = this;
                    if (!this.hasItems) {
                        return;
                    }
                    var selectItemDelegate = function () {
                        _this._find(itemPath);
                        if (_this.collapsed.peek()) {
                            _this.toggleCollapsed();
                        }
                    };
                    if (this.items.peek().length === 0) {
                        this.getItems().done(function (items) {
                            selectItemDelegate();
                        });
                    }
                    else {
                        selectItemDelegate();
                    }
                };
                TreeListItemViewModel.prototype._find = function (itemPath) {
                    var item = itemPath && this.items.peek().filter(function (childItem) {
                        return itemPath === childItem.name
                            || itemPath.indexOf(childItem.name) === 0 && itemPath[childItem.name.length] === '.';
                    })[0];
                    if (item) {
                        if (itemPath.length > item.name.length) {
                            item._selectItem(itemPath.substr(item.name.length + 1));
                        }
                        else {
                            this._treeListController.select(item);
                        }
                    }
                };
                TreeListItemViewModel.prototype._applyPadding = function (position, value) {
                    var padding = {};
                    padding["padding-" + position] = value;
                    return padding;
                };
                TreeListItemViewModel.prototype._initPaginate = function () {
                    var _this = this;
                    if (this._pageSize === -1)
                        return;
                    this.maxItemsCount = ko.observable(this._pageSize);
                    this.visibleItems = ko.computed(function () {
                        if (_this.items().length === 0)
                            return [];
                        var result = _this.items().filter(function (x) { return x.visible; });
                        if (result.length > _this.maxItemsCount()) {
                            result = result.slice(0, _this.maxItemsCount());
                            result.push(new TreeListEllipsisButton(_this.maxItemsCount, result[0].padding, _this._pageSize));
                        }
                        return result;
                    });
                };
                Object.defineProperty(TreeListItemViewModel.prototype, "hasItems", {
                    get: function () {
                        if (!this.data) {
                            return true;
                        }
                        return this._treeListController.hasItems(this.data);
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "data", {
                    get: function () {
                        return this._data();
                    },
                    set: function (newVal) {
                        var _this = this;
                        this._data(newVal);
                        this._actionsSubscription && this._actionsSubscription.dispose();
                        this._actionsSubscription = ko.computed(function () {
                            _this._actions(_this._treeListController && _this._treeListController.getActions ? _this._treeListController.getActions(_this) : []);
                        });
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "name", {
                    get: function () {
                        return ko.unwrap(this.data && this.data.name);
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "path", {
                    get: function () {
                        return this.pathParts.join(".");
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "pathParts", {
                    get: function () {
                        if (this.name) {
                            return (ko.unwrap(this._path) || []).concat([this.name]);
                        }
                        else {
                            return ko.unwrap(this._path);
                        }
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "text", {
                    get: function () {
                        return this.data && this.data.displayName;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "templateName", {
                    get: function () {
                        return this._templateName || this.data && this.data.templateName || "dx-treelist-item";
                    },
                    enumerable: true,
                    configurable: true
                });
                TreeListItemViewModel.prototype.actionsTemplate = function () {
                    return this.data && ko.unwrap(this.data["actionsTemplate"]) || "dx-treelist-item-actions-with-edit";
                };
                TreeListItemViewModel.prototype.treeListEditAction = function () {
                    return Widgets.treeListEditAction;
                };
                Object.defineProperty(TreeListItemViewModel.prototype, "hasContent", {
                    get: function () {
                        return this.data && this.data["contenttemplate"];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "actions", {
                    get: function () {
                        return this._actions();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "isDraggable", {
                    get: function () {
                        if (this.data && this.data["dragData"]) {
                            return !this.data["dragData"].noDragable;
                        }
                        if (this._treeListController.isDraggable) {
                            return this._treeListController.isDraggable(this);
                        }
                        return false;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(TreeListItemViewModel.prototype, "treeListController", {
                    get: function () {
                        return this._treeListController;
                    },
                    enumerable: true,
                    configurable: true
                });
                TreeListItemViewModel.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this._actions([]);
                    this.visibleItems && this.visibleItems.dispose();
                    this._actionsSubscription && this._actionsSubscription.dispose();
                    this.disposeObservableArray(this.items);
                    this.resetObservableArray(this.items);
                    this.parent = null;
                };
                Object.defineProperty(TreeListItemViewModel.prototype, "visible", {
                    get: function () {
                        return !this._treeListController.itemsFilter || (this.data && this._treeListController.itemsFilter(this.data, this.path));
                    },
                    enumerable: true,
                    configurable: true
                });
                TreeListItemViewModel.prototype.mouseenter = function () {
                    this.isHovered(true);
                };
                TreeListItemViewModel.prototype.mouseleave = function () {
                    this.isHovered(false);
                };
                TreeListItemViewModel.prototype.selectedItems = function () {
                    return this._treeListController.selectedItems && this._treeListController.selectedItems() || [];
                };
                return TreeListItemViewModel;
            }(Analytics.Utils.Disposable));
            Widgets.TreeListItemViewModel = TreeListItemViewModel;
            var TreeListRootItemViewModel = (function (_super) {
                __extends(TreeListRootItemViewModel, _super);
                function TreeListRootItemViewModel(options, path, onItemsVisibilityChanged, rtl) {
                    if (path === void 0) { path = []; }
                    if (onItemsVisibilityChanged === void 0) { onItemsVisibilityChanged = $.noop; }
                    if (rtl === void 0) { rtl = false; }
                    var _this = _super.call(this, options, path, onItemsVisibilityChanged, rtl) || this;
                    _this._selectedPathSubscription = null;
                    _this.resolver.done(function () {
                        onItemsVisibilityChanged();
                    });
                    _this._selectedPathSubscription = options.selectedPath.subscribe(function (newPath) {
                        _this._selectItem(!!_this.path ? newPath.substr(_this.path.length + 1) : newPath);
                    });
                    _this._selectItem(!!_this.path ? _this.path + "." + options.selectedPath() : options.selectedPath());
                    return _this;
                }
                TreeListRootItemViewModel.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this._selectedPathSubscription.dispose();
                    this._selectedPathSubscription = null;
                };
                return TreeListRootItemViewModel;
            }(TreeListItemViewModel));
            Widgets.TreeListRootItemViewModel = TreeListRootItemViewModel;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var TreeListController = (function () {
                function TreeListController() {
                    this.selectedItem = null;
                }
                TreeListController.prototype.dispose = function () {
                    this.selectedItem = null;
                };
                TreeListController.prototype.itemsFilter = function (item) {
                    return true;
                };
                TreeListController.prototype.hasItems = function (item) {
                    return item.specifics !== "none" && (item.specifics === "List" || item.specifics === "ListSource" || item.isList === true);
                };
                TreeListController.prototype.canSelect = function (value) {
                    return !value.hasItems;
                };
                TreeListController.prototype.select = function (value) {
                    if (this.canSelect(value)) {
                        this.selectedItem && this.selectedItem.isSelected(false);
                        this.selectedItem = value;
                        value.isSelected(true);
                    }
                };
                return TreeListController;
            }());
            Widgets.TreeListController = TreeListController;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var ExpressionEditorTreeListController = (function (_super) {
                __extends(ExpressionEditorTreeListController, _super);
                function ExpressionEditorTreeListController(fieldName, putSelectionHandler, selectionHandler) {
                    var _this = _super.call(this) || this;
                    _this.fieldName = fieldName;
                    _this.putSelectionHandler = putSelectionHandler;
                    _this.selectionHandler = selectionHandler;
                    return _this;
                }
                ExpressionEditorTreeListController.prototype.itemsFilter = function (item) {
                    return item.specifics !== "none" && item.name !== "ReportItems";
                };
                ExpressionEditorTreeListController.prototype.select = function (value) {
                    if (this.selectionHandler)
                        this.selectionHandler(value);
                    else
                        _super.prototype.select.call(this, value);
                };
                ExpressionEditorTreeListController.prototype.getActions = function (item) {
                    var _this = this;
                    return [{ clickAction: function (element) { return _this.putSelectionHandler(item, $(element)); } }];
                };
                ExpressionEditorTreeListController.prototype.canSelect = function (value) {
                    return true;
                };
                return ExpressionEditorTreeListController;
            }(Widgets.TreeListController));
            Widgets.ExpressionEditorTreeListController = ExpressionEditorTreeListController;
            var ExpressionEditorParametersTreeListController = (function (_super) {
                __extends(ExpressionEditorParametersTreeListController, _super);
                function ExpressionEditorParametersTreeListController(customFilter, putSelectionHandler, selectionHandler) {
                    var _this = _super.call(this) || this;
                    _this.customFilter = customFilter;
                    _this.putSelectionHandler = putSelectionHandler;
                    _this.selectionHandler = selectionHandler;
                    return _this;
                }
                ExpressionEditorParametersTreeListController.prototype.itemsFilter = function (item) {
                    return item.specifics !== "none" && (!this.customFilter || this.customFilter(item));
                };
                ExpressionEditorParametersTreeListController.prototype.select = function (value) {
                    this.selectionHandler(value);
                };
                ExpressionEditorParametersTreeListController.prototype.getActions = function (item) {
                    var _this = this;
                    return [{
                            clickAction: function (element) {
                                if (item && item.text !== "Parameters")
                                    _this.putSelectionHandler(item.path, $(element));
                            }
                        }];
                };
                ExpressionEditorParametersTreeListController.prototype.canSelect = function (value) {
                    return true;
                };
                return ExpressionEditorParametersTreeListController;
            }(Widgets.TreeListController));
            Widgets.ExpressionEditorParametersTreeListController = ExpressionEditorParametersTreeListController;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            function createExpressionEditorCollectionToolOptions(collectionItems, toolName, displayToolName, showDescription) {
                return {
                    displayName: Analytics.getLocalization(toolName, displayToolName),
                    content: {
                        showDescription: showDescription,
                        isSelected: ko.observable(false),
                        data: {
                            items: collectionItems,
                            selectedItem: ko.observable(null)
                        },
                        name: "dx-expressioneditor-collection"
                    },
                    dispose: function () { return void 0; }
                };
            }
            Widgets.createExpressionEditorCollectionToolOptions = createExpressionEditorCollectionToolOptions;
            function createExpressionEditorFieldListProvider(originalProvider, fieldName) {
                return ko.computed(function () {
                    var provider = ko.unwrap(originalProvider);
                    var unwrappedFieldName = ko.unwrap(fieldName);
                    return !unwrappedFieldName ? provider : {
                        getItems: function (path) {
                            var $deferred = $.Deferred();
                            provider.getItems(path)
                                .done(function (data) {
                                $deferred.resolve(data.filter(function (field) { return field.name !== unwrappedFieldName; }));
                            })
                                .fail(function () { return $deferred.reject(); });
                            return $deferred.promise();
                        },
                        getValues: function (path) {
                            return provider.getValues(path);
                        }
                    };
                });
            }
            function wrapExpressionValue(path, value, converter, subscriptions) {
                if (!(converter && path))
                    return value;
                var _displayValue = ko.observable(value());
                converter.toDisplayExpression(path(), value()).done(function (result) {
                    _displayValue(result);
                }).fail(function () {
                    _displayValue(value());
                });
                var valueSubscription = value.subscribe(function (newValue) {
                    converter.toDisplayExpression(path(), newValue).done(function (result) {
                        _displayValue(result);
                    }).fail(function () {
                        _displayValue(newValue);
                    });
                });
                var pathSubscription = path.subscribe(function (newPath) {
                    converter.toDisplayExpression(newPath, value())
                        .done(function (result) { _displayValue(result); })
                        .fail(function (_) { _displayValue(value()); });
                });
                var displayValue = ko.pureComputed({
                    read: function () { return _displayValue(); },
                    write: function (newValue) {
                        _displayValue(newValue);
                        converter.toRealExpression(path(), newValue).done(function (result) {
                            value(result);
                        }).fail(function () {
                            value(newValue);
                        });
                    }
                });
                if (subscriptions)
                    [displayValue, valueSubscription, pathSubscription].forEach(function (x) { return subscriptions.push(x); });
                return displayValue;
            }
            Widgets.wrapExpressionValue = wrapExpressionValue;
            var ExpressionEditor = (function (_super) {
                __extends(ExpressionEditor, _super);
                function ExpressionEditor(options, fieldListProvider, disabled, rtl, _displayNameProvider) {
                    if (disabled === void 0) { disabled = ko.observable(false); }
                    if (rtl === void 0) { rtl = false; }
                    var _this = _super.call(this) || this;
                    _this.options = options;
                    _this._displayNameProvider = _displayNameProvider;
                    _this._updateTextAreaValue = function (item, element) {
                        var textArea = _this._getTextArea(element), textAreaValue = _this.textAreaValue().toString(), cursorPosition = textArea && textArea.selectionStart || textAreaValue.length, newAddedText = textAreaValue[cursorPosition - 1] == " " ? (item.val || item.text || item) + " " : " " + (item.val || item.text || item) + " ";
                        _this.textAreaValue([textAreaValue.slice(0, cursorPosition), newAddedText, textAreaValue.slice(cursorPosition)].join(''));
                        if (textArea && textArea.setSelectionRange) {
                            textArea.focus();
                            var posisition = cursorPosition + (newAddedText.indexOf("(") !== -1 ? newAddedText.indexOf("(") + 1 : newAddedText.length);
                            textArea.setSelectionRange(posisition, posisition);
                        }
                    };
                    _this._updateAceValue = function (item, element) {
                        var editor = _this.editorContainer(), _a = editor.getCursorPosition(), row = _a.row, col = _a.column, insertion = (item.val || item.text || item) + " ";
                        if (col && editor.getSession().getValue().split("\n")[row][col - 1] !== " ")
                            insertion = " " + insertion;
                        editor.insert(insertion);
                        editor.focus();
                        Analytics.Utils.setCursorInFunctionParameter(item.paramCount, editor, insertion);
                    };
                    _this._updateValue = function (item, element) {
                        _this.aceAvailable ? _this._updateAceValue(item, $(element)) : _this._updateTextAreaValue(item, $(element));
                    };
                    _this.patchFieldName = function (fieldName) { return fieldName; };
                    _this._parametersPutSelectionHandler = function (selectedItemPath, element) {
                        var parentPath = "Parameters";
                        var proposedFieldName = selectedItemPath.substring(parentPath.length + 1);
                        var newAddedString = '?' + _this.patchFieldName(proposedFieldName);
                        _this._updateValue(newAddedString, element);
                    };
                    _this._fieldsPutSelectionHandler = function (selectedItemPath, element) {
                        var path = _this.koOptions.peek().path.peek();
                        var proposedFieldName = selectedItemPath.substring(path.length + 1);
                        var newAddedString = '[' + _this.patchFieldName(proposedFieldName) + ']';
                        if (_this._displayNameProvider) {
                            _this.displayExpressionConverter.toDisplayExpression(path, newAddedString)
                                .done(function (result) { _this._updateValue(result, element); })
                                .fail(function () { _this._updateValue(newAddedString, element); });
                        }
                        else {
                            _this._updateValue(newAddedString, element);
                        }
                    };
                    _this.aceAvailable = Widgets.aceAvailable;
                    _this.popupVisible = ko.observable(false);
                    _this.title = function () { return DevExpress.Analytics.getLocalization('Expression Editor', 'ReportStringId.ExpressionEditor_ExpressionCaption'); };
                    _this.value = ko.observable("");
                    _this.textAreaValue = ko.observable("");
                    _this.languageHelper = {
                        getLanguageMode: function () { return "ace/mode/criteria"; },
                        createCompleters: function (editor, bindingContext, viewModel) {
                            var path = ko.computed(function () { return viewModel.koOptions() && ko.unwrap(viewModel.koOptions().path) || ""; }), functions = ko.computed(function () { return viewModel.koOptions() && ko.unwrap(viewModel.koOptions().functions) || []; }), completor = new Widgets.CodeCompletor({
                                editor: editor,
                                bindingContext: bindingContext,
                                fieldListProvider: viewModel.fieldListProvider,
                                path: path,
                                functions: functions,
                                rootItems: viewModel.options.rootItems,
                                getRealExpression: function (path, member) {
                                    return _this.displayExpressionConverter && _this.displayExpressionConverter.toRealExpression(path, member) || $.Deferred().resolve(member).promise();
                                }
                            });
                            [path, functions].forEach(function (x) { return completor._disposables.push(x); });
                            return [completor];
                        }
                    };
                    _this.aceOptions = {
                        showLineNumbers: false,
                        showPrintMargin: false,
                        enableBasicAutocompletion: true,
                        enableLiveAutocompletion: true,
                        showFoldWidgets: false,
                        highlightActiveLine: false
                    };
                    _this.additionalOptions = {
                        onChange: function (session) {
                            var value = session.getValue();
                            try {
                                var operator = Analytics.Criteria.CriteriaOperator.parse(value);
                                if (_this.koOptions().validate) {
                                    _this.isValid(_this.koOptions().validate(operator));
                                }
                                session.clearAnnotations();
                            }
                            catch (exception) {
                                var row = exception.hash && exception.hash.line || 0;
                                var column = 0;
                                var lines = exception.message.split('\n');
                                var text = lines[1] + "\n" + lines[2];
                                session.setAnnotations([{ row: row, column: column, text: text, "type": "error" }]);
                            }
                        }
                    };
                    _this.callbacks = {
                        focus: $.noop
                    };
                    _this.koOptions = ko.observable(null);
                    _this.editorContainer = ko.observable();
                    _this.isValid = ko.observable(true);
                    _this.buttonItems = [];
                    _this.rtl = false;
                    _this.modelValueValid = ko.computed(function () {
                        if (_this.koOptions() && _this.koOptions().isValid) {
                            return _this.koOptions().isValid();
                        }
                        return true;
                    });
                    _this.getPopupContainer = Analytics.Utils.getParentContainer;
                    _this.koOptions(options);
                    _this.patchFieldName = function (fieldName) {
                        return _this.koOptions().patchFieldName && _this.koOptions().patchFieldName(fieldName) || fieldName;
                    };
                    _this.theme = _this.koOptions() && _this.koOptions().theme;
                    _this._disposables.push(_this.value = ko.computed({
                        read: function () {
                            var value = _this.koOptions() && ko.unwrap(_this.koOptions().value);
                            return (value && value.toString()) || "";
                        },
                        write: function (newVal) { return _this.koOptions() && _this.koOptions().value(newVal); }
                    }));
                    if (_displayNameProvider && options.path) {
                        _this.displayExpressionConverter = new Analytics.Utils.DisplayExpressionConverter(_displayNameProvider);
                        var pathFunc = ko.pureComputed(function () { return _this.koOptions() && _this.koOptions().path && _this.koOptions().path(); });
                        _this.displayValue = wrapExpressionValue(pathFunc, _this.value, _this.displayExpressionConverter, _this._disposables);
                        _this._disposables.push(pathFunc);
                    }
                    else {
                        _this.displayValue = _this.value;
                    }
                    _this.rtl = rtl;
                    var validate = function (value, sender) {
                        try {
                            Analytics.Criteria.CriteriaOperator.parse(value);
                            _this.isValid(true);
                            return true;
                        }
                        catch (exception) {
                            var result = Analytics.Criteria.CriteriaOperator.getNotValidRange(value, exception.message);
                            var textArea = _this._getTextArea(sender && sender.element);
                            textArea && textArea.setSelectionRange(result.start, result.end);
                            _this.isValid(false);
                        }
                    };
                    _this._disposables.push(_this.popupVisible.subscribe(function (newVal) {
                        if (!newVal)
                            return;
                        _this.tools.resetCategoriesSelection && _this.tools.resetCategoriesSelection();
                        _this.textAreaValue(_this.displayValue());
                        if (!_this.aceAvailable) {
                            validate(_this.value());
                        }
                        else {
                            var editor = _this.editorContainer();
                            var session = editor && editor.getSession();
                            session && session.setValue(_this.textAreaValue());
                        }
                    }));
                    var fieldName = ko.computed(function () { return _this.koOptions() && _this.koOptions().fieldName && _this.koOptions().fieldName(); });
                    _this._disposables.push(_this.fieldListProvider = createExpressionEditorFieldListProvider(fieldListProvider, fieldName));
                    _this.disabled = disabled;
                    var self = _this;
                    _this.save = function (sender) {
                        var value = _this.textAreaValue();
                        if (_this.aceAvailable) {
                            var editor = _this.editorContainer();
                            var session = editor && editor.getSession();
                            value = session && session.getValue();
                        }
                        if (validate(value, sender)) {
                            _this.displayValue(value);
                            _this.popupVisible(false);
                        }
                    };
                    var selectedItem = null;
                    var selectionHandler = function (item) {
                        var selectedItemType = ko.unwrap(item.data["type"]);
                        if (selectedItem)
                            selectedItem.isSelected(false);
                        selectedItem = item;
                        item.isSelected(true);
                    };
                    var fieldsTreeListOptions = ko.pureComputed(function () {
                        return _this.koOptions() && _this.koOptions().path && _this.koOptions().path() && _this._createToolsOptions(_this.koOptions().path(), _this.fieldListProvider(), new Widgets.ExpressionEditorTreeListController(fieldName, function (data, element) { _this._fieldsPutSelectionHandler(data.path, element); }, selectionHandler));
                    });
                    _this.parametersTreeListController = new Widgets.ExpressionEditorParametersTreeListController(function (item) { return item.specifics === "parameters" || !Analytics.Utils.isList(item); }, _this._parametersPutSelectionHandler, selectionHandler);
                    var parametersTreeListOptions = ko.pureComputed(function () {
                        return _this._createToolsOptions("", _this.fieldListProvider(), _this.parametersTreeListController);
                    });
                    _this._disposables.push(_this.tools = new Widgets.Internal.Tools(_this._updateValue, parametersTreeListOptions, _this.koOptions, fieldsTreeListOptions));
                    _this._createMainPopupButtons();
                    [fieldName, fieldsTreeListOptions, parametersTreeListOptions].forEach(function (x) { return _this._disposables.push(x); });
                    return _this;
                }
                ExpressionEditor.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.koOptions(null);
                    this.options = null;
                };
                ExpressionEditor.prototype._createMainPopupButtons = function () {
                    var self = this;
                    this.buttonItems = [
                        { toolbar: 'bottom', location: 'after', widget: 'dxButton', options: { text: DevExpress.Analytics.getLocalization('Save', DevExpress.Analytics.StringId.DataAccessBtnOK), onClick: function (sender) { self.save(sender); } } },
                        { toolbar: 'bottom', location: 'after', widget: 'dxButton', options: { text: DevExpress.Analytics.getLocalization('Cancel', DevExpress.Analytics.StringId.DataAccessBtnCancel), onClick: function () { self.popupVisible(false); } } }
                    ];
                };
                ExpressionEditor.prototype._getTextArea = function (element) {
                    return element && element.parents(".dx-expressioneditor").find(":input")[0];
                };
                ExpressionEditor.prototype._createToolsOptions = function (path, fieldListProvider, treeListController) {
                    return {
                        itemsProvider: fieldListProvider,
                        selectedPath: ko.observable(""),
                        path: path,
                        templateName: "dx-ee-treelist-item",
                        treeListController: treeListController,
                        rtl: this.rtl
                    };
                };
                ExpressionEditor.prototype.onShown = function () {
                    this.callbacks.focus();
                };
                return ExpressionEditor;
            }(Analytics.Utils.Disposable));
            Widgets.ExpressionEditor = ExpressionEditor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers['dxExpressionEditor'] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var $element = $(element);
                    $element.children().remove();
                    $(element).addClass("dx-popup-general");
                    var templateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate('dx-expressioneditor'), $element = $element.append(templateHtml), values = valueAccessor();
                    var optionSubscription = null;
                    var editor = new Widgets.ExpressionEditor(ko.unwrap(values.options), values.fieldListProvider, viewModel.disabled, $(element).closest('.dx-rtl').length > 0, values.displayNameProvider);
                    if (ko.isSubscribable(values.options)) {
                        optionSubscription = values.options.subscribe(function (newOptions) {
                            newOptions && editor.koOptions(newOptions);
                        });
                    }
                    var child = $element.children()[0];
                    ko.applyBindings(editor, child);
                    var callback = function () {
                        editor.dispose();
                        editor = null;
                        optionSubscription && optionSubscription.dispose();
                        ko.utils.domNodeDisposal.removeDisposeCallback(element, callback);
                        callback = null;
                    };
                    ko.utils.domNodeDisposal.addDisposeCallback(element, callback);
                    return { controlsDescendantBindings: true };
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var CriteriaOperatorSurface = (function (_super) {
                __extends(CriteriaOperatorSurface, _super);
                function CriteriaOperatorSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this) || this;
                    _this.canRemove = true;
                    _this.operatorType = ko.observable(null);
                    _this.templateName = "dx-filtereditor-common";
                    _this.isSelected = ko.observable(false);
                    _this.operatorClass = "criteria-operator-item-operator dxd-filter-editor-operator-back-color dxd-filter-editor-text-color";
                    _this.popupService = parent.popupService || { visible: ko.observable(false) };
                    _this.model = operator;
                    _this.helper = parent.helper;
                    _this.fieldListProvider = fieldListProvider;
                    _this.path = path;
                    _this.parent = parent;
                    _this.operatorType(operator.operatorType);
                    _this._disposables.push(_this.operatorType.subscribe(function (newVal) {
                        _this.model.assignType(newVal);
                    }));
                    return _this;
                }
                CriteriaOperatorSurface.prototype._createLeftPartProperty = function (value) {
                    var _this = this;
                    if (value instanceof Analytics.Criteria.OperandProperty) {
                        var surface = this.createChildSurface(value);
                    }
                    else {
                        var surface = this.createChildSurface(value);
                        var specifics = Object.keys(this.helper.filterEditorOperators).reduce(function (key, value) {
                            if (value !== "_common" && key === "integer"
                                && _this.helper.filterEditorOperators[value].filter(function (item) { return _this.operatorType() === item.value && _this.reverse === item.reverse && _this.model.enumType === item.type; }).length > 0) {
                                key = value;
                            }
                            return key;
                        }, "integer");
                        surface.specifics = surface.specifics || ko.observable(specifics);
                    }
                    surface["canChange"] = false;
                    surface.canRemove = false;
                    if (surface instanceof Widgets.AggregateOperandSurface) {
                        this.specifics = ko.computed(function () {
                            return surface["aggregatedExpression"]() && surface["aggregatedExpression"]().specifics() || "integer";
                        });
                        this.dataType = ko.computed(function () {
                            return surface["aggregatedExpression"]() && surface["aggregatedExpression"]().dataType() || "integer";
                        });
                        this._disposables.push(this.specifics);
                        this._disposables.push(this.dataType);
                    }
                    else {
                        this.specifics = surface.specifics;
                        this.dataType = surface.dataType;
                    }
                    return surface;
                };
                CriteriaOperatorSurface.prototype.createChildSurface = function (item, path, actions) {
                    return new this.helper.mapper[item.type](item, this, this.fieldListProvider, path || this.path);
                };
                Object.defineProperty(CriteriaOperatorSurface.prototype, "items", {
                    get: function () {
                        return this.helper.filterEditorOperators[this.specifics()] || this.helper.filterEditorOperators._common;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperatorSurface.prototype, "displayType", {
                    get: function () {
                        var _this = this;
                        var item = this.items.filter(function (item) { return _this.operatorType() === item.value && _this.reverse === item.reverse && _this.model.enumType === item.type; })[0];
                        return item && item.name && (item.displayText || DevExpress.Analytics.getLocalization(item.name, item.localizationId)) || this.operatorType && this.operatorType() || "";
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperatorSurface.prototype, "leftPart", {
                    get: function () {
                        return null;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperatorSurface.prototype, "rightPart", {
                    get: function () {
                        return null;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(CriteriaOperatorSurface.prototype, "css", {
                    get: function () {
                        return this.operatorClass + (this.isSelected() ? " selected" : "");
                    },
                    enumerable: true,
                    configurable: true
                });
                CriteriaOperatorSurface.prototype.change = function (type, surface) {
                    if (!surface && type && this.model.enumType === type.type && this.reverse === type.reverse && type.type !== Analytics.Criteria.FunctionOperatorType) {
                        this.operatorType(type.value);
                    }
                    else {
                        this.parent.change(type, this);
                    }
                    this.helper.onChange();
                };
                CriteriaOperatorSurface.prototype.remove = function (surface) {
                    this.parent.remove(this);
                    this.helper.onChange();
                };
                return CriteriaOperatorSurface;
            }(Analytics.Utils.Disposable));
            Widgets.CriteriaOperatorSurface = CriteriaOperatorSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var FilterEditorAddOn = (function () {
                    function FilterEditorAddOn(criteria, popupService, action, propertyName, templateName) {
                        var _this = this;
                        this.showPopup = function (args) {
                            if (_this._popupService["subscription"]) {
                                _this._popupService["subscription"].dispose();
                            }
                            _this._popupService.title("");
                            _this.target.isSelected(true);
                            _this._updateActions(_this.target);
                            _this._popupService.target(args.element);
                            setTimeout(function () {
                                _this._popupService.visible(true);
                            }, 10);
                        };
                        this.popupContentTemplate = "dx-filtereditor-popup-common";
                        this.target = criteria;
                        this._action = action;
                        this.propertyName = propertyName;
                        this._popupService = popupService;
                        this.popupContentTemplate = templateName || this.popupContentTemplate;
                    }
                    FilterEditorAddOn.prototype._updateActions = function (viewModel) {
                        var _this = this;
                        this._popupService.data(null);
                        if (viewModel) {
                            this._popupService["subscription"] = this._popupService.visible.subscribe(function (newVal) {
                                _this.target.isSelected(newVal);
                            });
                            this._popupService["viewModel"] = viewModel;
                            this._popupService.data({
                                data: ko.unwrap(viewModel[this.propertyName]),
                                template: this.popupContentTemplate,
                                click: function (data) {
                                    viewModel[_this._action](data);
                                    _this._popupService.visible(false);
                                },
                            });
                        }
                    };
                    return FilterEditorAddOn;
                }());
                Internal.FilterEditorAddOn = FilterEditorAddOn;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var CriteriaSurfaceValidatorState;
                (function (CriteriaSurfaceValidatorState) {
                    CriteriaSurfaceValidatorState[CriteriaSurfaceValidatorState["Left"] = 0] = "Left";
                    CriteriaSurfaceValidatorState[CriteriaSurfaceValidatorState["Right"] = 1] = "Right";
                    CriteriaSurfaceValidatorState[CriteriaSurfaceValidatorState["Unary"] = 2] = "Unary";
                })(CriteriaSurfaceValidatorState = Internal.CriteriaSurfaceValidatorState || (Internal.CriteriaSurfaceValidatorState = {}));
                var CriteriaSurfaceValidator = (function () {
                    function CriteriaSurfaceValidator() {
                    }
                    CriteriaSurfaceValidator.prototype.customValidate = function (operator, from) {
                        return false;
                    };
                    CriteriaSurfaceValidator.prototype.checkLeftPart = function (leftPart) {
                        return leftPart instanceof Analytics.Criteria.OperandProperty || this.customValidate(leftPart, CriteriaSurfaceValidatorState.Left);
                    };
                    CriteriaSurfaceValidator.prototype._checkRightPart = function (criteriaOperator) {
                        return criteriaOperator instanceof Analytics.Criteria.OperandProperty
                            || criteriaOperator instanceof Analytics.Criteria.OperandParameter
                            || criteriaOperator instanceof Analytics.Criteria.OperandValue
                            || criteriaOperator instanceof Analytics.Criteria.ConstantValue
                            || (criteriaOperator instanceof Analytics.Criteria.UnaryOperator && this._checkRightPart(criteriaOperator.operand))
                            || this.customValidate(criteriaOperator, CriteriaSurfaceValidatorState.Right);
                    };
                    CriteriaSurfaceValidator.prototype.checkRightPart = function (rigthPart) {
                        if (Array.isArray(rigthPart)) {
                            for (var i = 0; i < rigthPart.length; i++) {
                                if (!this._checkRightPart(rigthPart[i])) {
                                    return false;
                                }
                            }
                            return true;
                        }
                        else {
                            return this._checkRightPart(rigthPart);
                        }
                    };
                    CriteriaSurfaceValidator.prototype.aggregateIsValid = function (criteriaOperator) {
                        return this.checkLeftPart(criteriaOperator.leftPart)
                            && this.validateModel(criteriaOperator.condition)
                            && (!!criteriaOperator.aggregatedExpression ?
                                (criteriaOperator.aggregatedExpression instanceof Analytics.Criteria.OperandProperty ||
                                    this.validateModel(criteriaOperator.aggregatedExpression))
                                : true);
                    };
                    CriteriaSurfaceValidator.prototype.commonOperandValid = function (criteriaOperator) {
                        return criteriaOperator.leftPart instanceof Analytics.Criteria.AggregateOperand ?
                            this.validateModel(criteriaOperator.leftPart) : this.checkLeftPart(criteriaOperator.leftPart)
                            && this.checkRightPart(criteriaOperator.rightPart);
                    };
                    CriteriaSurfaceValidator.prototype.groupIsValid = function (criteriaOperator) {
                        for (var i = 0; i < criteriaOperator.operands.length; i++) {
                            if (!this.validateModel(criteriaOperator.operands[i])) {
                                return false;
                            }
                        }
                        return true;
                    };
                    CriteriaSurfaceValidator.prototype.unaryIsValid = function (criteriaOperator) {
                        return criteriaOperator.operand instanceof Analytics.Criteria.OperandProperty || this.validateModel(criteriaOperator.operand) || this.customValidate(criteriaOperator.operand, CriteriaSurfaceValidatorState.Unary);
                    };
                    CriteriaSurfaceValidator.prototype.validateModel = function (criteriaOperator) {
                        if (criteriaOperator instanceof Analytics.Criteria.AggregateOperand) {
                            return this.aggregateIsValid(criteriaOperator);
                        }
                        else if (criteriaOperator instanceof Analytics.Criteria.GroupOperator) {
                            return this.groupIsValid(criteriaOperator);
                        }
                        else if (criteriaOperator instanceof Analytics.Criteria.UnaryOperator) {
                            return this.unaryIsValid(criteriaOperator);
                        }
                        else {
                            return this.commonOperandValid(criteriaOperator);
                        }
                    };
                    return CriteriaSurfaceValidator;
                }());
                Internal.CriteriaSurfaceValidator = CriteriaSurfaceValidator;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var FilterEditorSerializer = (function () {
                    function FilterEditorSerializer(operatorTokens, custom) {
                        if (operatorTokens === void 0) { operatorTokens = Analytics.Criteria.Utils.operatorTokens; }
                        this.custom = custom;
                        this.operatorTokens = operatorTokens;
                    }
                    FilterEditorSerializer.prototype.serializeGroupOperand = function (groupOperator, reverse) {
                        var _this = this;
                        var result = groupOperator.operands.map(function (operand) {
                            if (operand instanceof Analytics.Criteria.GroupOperator) {
                                return "(" + _this.serialize(operand) + ")";
                            }
                            else {
                                return _this.serialize(operand);
                            }
                        }).filter(function (serialize) { return serialize !== "" && serialize !== "()"; }).join(' ' + (this.operatorTokens[groupOperator.displayType] || groupOperator.displayType) + ' ');
                        return reverse && result ? "Not(" + result + ")" : result;
                    };
                    FilterEditorSerializer.prototype.serializeAggregateOperand = function (aggregateOperand, reverse) {
                        var operatorTypeSuffix = aggregateOperand.operatorType === Analytics.Criteria.Aggregate.Exists ? "" : "." + Analytics.Criteria.Aggregate[aggregateOperand.operatorType];
                        var condition = aggregateOperand.condition ? this.serialize(aggregateOperand.condition) : "";
                        var result = this.serialize(aggregateOperand.property) + '[' + condition + ']';
                        var aggregateSuffix = aggregateOperand.operatorType !== Analytics.Criteria.Aggregate.Exists ?
                            '(' + (aggregateOperand.aggregatedExpression && this.serialize(aggregateOperand.aggregatedExpression) || "") + ')' : '';
                        return result + operatorTypeSuffix + aggregateSuffix;
                    };
                    FilterEditorSerializer.prototype.serializeOperandProperty = function (operandProperty) {
                        return operandProperty.displayType;
                    };
                    FilterEditorSerializer.prototype.serializeOperandValue = function (operandValue) {
                        var result = operandValue.value;
                        if (result !== null && result !== undefined && ($.isNumeric(result) || String(result).toLowerCase() === "true" || String(result).toLowerCase() === "false")) {
                            if (operandValue.specifics === "string")
                                return "'" + result + "'";
                            if (operandValue.specifics === "guid" && Widgets.validateGuid(result))
                                return '{' + result + '}';
                            return result;
                        }
                        else if (result && operandValue.value instanceof Date) {
                            return "#" + Analytics.Utils.serializeDate(result) + "#";
                        }
                        else if (operandValue.specifics === "integer" || operandValue.specifics === "integer") {
                            return result || "?";
                        }
                        else if (Widgets.validateGuid(result)) {
                            return '{' + result + '}';
                        }
                        if (result.indexOf("'") !== -1) {
                            result = result.replace("'", "''");
                        }
                        return result ? "'" + result + "'" : "?";
                    };
                    FilterEditorSerializer.prototype.serializeOperandParameter = function (operandParameter) {
                        return operandParameter.displayType;
                    };
                    FilterEditorSerializer.prototype.serializeBetweenOperator = function (betweenOperator, reverse) {
                        var result = this.serialize(betweenOperator.property) + " " + betweenOperator.displayType +
                            "(" + this.serialize(betweenOperator.begin) + ", " + this.serialize(betweenOperator.end) + ")";
                        return reverse ? "Not " + result : result;
                    };
                    FilterEditorSerializer.prototype.serializeInOperator = function (inOperator, reverse) {
                        var _this = this;
                        var result = this.serialize(inOperator.criteriaOperator) + " " + inOperator.displayType + "(" +
                            inOperator.operands.map(function (operand) { return _this.serialize(operand); }).join(', ') + ")";
                        return reverse ? "Not " + result : result;
                    };
                    FilterEditorSerializer.prototype.serializeBinaryOperator = function (binaryOperator, reverse) {
                        if (binaryOperator.operatorType === Analytics.Criteria.BinaryOperatorType.Like) {
                            var separator = reverse ? " Not " : " ";
                            return this.serialize(binaryOperator.leftOperand) + separator + (this.operatorTokens[binaryOperator.displayType] || binaryOperator.displayType) + ' ' + this.serialize(binaryOperator.rightOperand);
                        }
                        return (reverse ? "Not " : "") + this.serialize(binaryOperator.leftOperand) + " " + (this.operatorTokens[binaryOperator.displayType] || binaryOperator.displayType) + ' ' + this.serialize(binaryOperator.rightOperand);
                    };
                    FilterEditorSerializer.prototype.serializeUnaryOperator = function (unaryOperator, reverse) {
                        if (unaryOperator.operatorType === Analytics.Criteria.UnaryOperatorType.IsNull) {
                            var separator = reverse ? " Not " : " ";
                            return this.serialize(unaryOperator.operand) + " Is" + separator + "Null";
                        }
                        else if (unaryOperator.operatorType === Analytics.Criteria.UnaryOperatorType.Not) {
                            return this.serialize(unaryOperator.operand, true);
                        }
                        var result = (this.operatorTokens[unaryOperator.displayType] || unaryOperator.displayType) + this.serialize(unaryOperator.operand);
                        return reverse ? "Not " + result : result;
                    };
                    FilterEditorSerializer.prototype.serializeFunctionOperator = function (functionOperator, reverse) {
                        var _this = this;
                        var result = (this.operatorTokens[functionOperator.displayType] || functionOperator.displayType) + '(' + functionOperator.operands.map(function (operand) {
                            return _this.serialize(operand);
                        }).join(", ") + ')';
                        return reverse ? "Not " + result : result;
                    };
                    FilterEditorSerializer.prototype.serialize = function (criteriaOperator, reverse) {
                        if (reverse === void 0) { reverse = false; }
                        if (criteriaOperator instanceof Analytics.Criteria.AggregateOperand) {
                            return this.serializeAggregateOperand(criteriaOperator, reverse);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.BetweenOperator) {
                            return this.serializeBetweenOperator(criteriaOperator, reverse);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.BinaryOperator) {
                            return this.serializeBinaryOperator(criteriaOperator, reverse);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.ConstantValue) {
                            return this.serializeOperandValue(criteriaOperator);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.FunctionOperator) {
                            return this.serializeFunctionOperator(criteriaOperator, reverse);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.GroupOperator) {
                            return this.serializeGroupOperand(criteriaOperator, reverse);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.InOperator) {
                            return this.serializeInOperator(criteriaOperator, reverse);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.OperandParameter) {
                            return this.serializeOperandParameter(criteriaOperator);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.OperandProperty) {
                            return this.serializeOperandProperty(criteriaOperator);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.OperandValue) {
                            return this.serializeOperandValue(criteriaOperator);
                        }
                        if (criteriaOperator instanceof Analytics.Criteria.UnaryOperator) {
                            return this.serializeUnaryOperator(criteriaOperator, reverse);
                        }
                        if (this.custom) {
                            return this.custom(criteriaOperator, reverse);
                        }
                        throw Error("Undefined type criteria operator");
                    };
                    FilterEditorSerializer.prototype.deserialize = function (stringCriteria) {
                        return this.deserializeOperand(Analytics.Criteria.CriteriaOperator.parse(stringCriteria));
                    };
                    FilterEditorSerializer.prototype.deserializeOperand = function (operand) {
                        if (operand instanceof Analytics.Criteria.GroupOperator) {
                            return operand;
                        }
                        else if (operand instanceof Analytics.Criteria.UnaryOperator && operand.operatorType === Analytics.Criteria.UnaryOperatorType.Not) {
                            var child = operand["operand"];
                            if (child instanceof Analytics.Criteria.GroupOperator) {
                                return operand;
                            }
                            return new Analytics.Criteria.UnaryOperator(Analytics.Criteria.UnaryOperatorType.Not, new Analytics.Criteria.GroupOperator(Analytics.Criteria.GroupOperatorType.And, child ? [child] : []));
                        }
                        return new Analytics.Criteria.GroupOperator(Analytics.Criteria.GroupOperatorType.And, operand ? [operand] : []);
                    };
                    return FilterEditorSerializer;
                }());
                Internal.FilterEditorSerializer = FilterEditorSerializer;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FilterEditorTreeListController = (function (_super) {
                __extends(FilterEditorTreeListController, _super);
                function FilterEditorTreeListController(selectedItem) {
                    var _this = _super.call(this) || this;
                    _this.selectedItem = selectedItem;
                    return _this;
                }
                FilterEditorTreeListController.prototype.itemsFilter = function (item) {
                    return true;
                };
                FilterEditorTreeListController.prototype.hasItems = function (item) {
                    return item.specifics !== "none" && (item.specifics !== "List" && item.isList === true);
                };
                FilterEditorTreeListController.prototype.canSelect = function (value) {
                    return !value.data.isList || (value.data.isList === true && value.data.specifics === "List");
                };
                FilterEditorTreeListController.prototype.select = function (value) {
                    if (this.canSelect(value)) {
                        this.selectedItem(value.data);
                        value.isSelected(true);
                    }
                };
                return FilterEditorTreeListController;
            }(Widgets.TreeListController));
            Widgets.FilterEditorTreeListController = FilterEditorTreeListController;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var AggregateOperandSurface = (function (_super) {
                __extends(AggregateOperandSurface, _super);
                function AggregateOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.contentTemplateName = "dx-filtereditor-aggregate";
                    _this.property = ko.observable(null);
                    _this.aggregatedExpression = ko.observable(null);
                    _this.condition = ko.observable(null);
                    _this.property(_this._createLeftPartProperty(operator.property));
                    var childPath = ko.computed(function () {
                        return _this.path() + "." + _this.property().propertyName();
                    });
                    _this._disposables.push(childPath);
                    if (operator.aggregatedExpression) {
                        _this.aggregatedExpression(_this.createChildSurface(operator.aggregatedExpression, childPath));
                        _this.templateName = "dx-filtereditor-aggregate-common";
                    }
                    if (operator.operatorType === Analytics.Criteria.Aggregate.Count) {
                        _this.templateName = "dx-filtereditor-aggregate-common";
                    }
                    var surface = _this.createChildSurface(operator.condition, childPath);
                    surface.canRemove = false;
                    if (surface instanceof Widgets.UnaryOperandSurface) {
                        surface.operand().canRemove = false;
                    }
                    _this.condition(surface);
                    _this.change = function (type, surface) {
                        if (surface) {
                            var newModel = _this.model.change(type, surface.model);
                            var condition = _this.createChildSurface(newModel, childPath);
                            condition.canRemove = false;
                            if (condition instanceof Widgets.UnaryOperandSurface) {
                                condition.operand().canRemove = false;
                            }
                            _this.condition(condition);
                        }
                        else {
                            if (_this.operatorType() === Analytics.Criteria.Aggregate.Exists || _this.operatorType() === Analytics.Criteria.Aggregate.Count) {
                                _this.parent.change(type, _this);
                            }
                            else {
                                if (type && (type.value === Analytics.Criteria.Aggregate.Exists || type.value === Analytics.Criteria.Aggregate.Count)) {
                                    _this.parent.change(type, _this);
                                }
                                else {
                                    _super.prototype.change.call(_this, type, surface);
                                }
                            }
                        }
                        _this.helper.onChange();
                    };
                    return _this;
                }
                Object.defineProperty(AggregateOperandSurface.prototype, "leftPart", {
                    get: function () {
                        return this.property && this.property();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(AggregateOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return this.aggregatedExpression();
                    },
                    enumerable: true,
                    configurable: true
                });
                AggregateOperandSurface.prototype.dispose = function () {
                    this.property().dispose();
                    this.condition().dispose();
                    this.aggregatedExpression() && this.aggregatedExpression().dispose();
                    _super.prototype.dispose.call(this);
                };
                return AggregateOperandSurface;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.AggregateOperandSurface = AggregateOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var BetweenOperandSurface = (function (_super) {
                __extends(BetweenOperandSurface, _super);
                function BetweenOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.property = ko.observable(null);
                    _this.end = ko.observable(null);
                    _this.begin = ko.observable(null);
                    _this.contentTemplateName = "dx-filtereditor-between";
                    _this.property(_this._createLeftPartProperty(operator.property));
                    _this.begin(_this.createChildSurface(operator.begin));
                    _this.end(_this.createChildSurface(operator.end));
                    return _this;
                }
                Object.defineProperty(BetweenOperandSurface.prototype, "leftPart", {
                    get: function () {
                        return this.property && this.property();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BetweenOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return [this.begin(), this.end()];
                    },
                    enumerable: true,
                    configurable: true
                });
                BetweenOperandSurface.prototype.dispose = function () {
                    this.property().dispose();
                    this.begin().dispose();
                    this.end().dispose();
                    _super.prototype.dispose.call(this);
                };
                return BetweenOperandSurface;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.BetweenOperandSurface = BetweenOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var BinaryOperandSurface = (function (_super) {
                __extends(BinaryOperandSurface, _super);
                function BinaryOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.contentTemplateName = "dx-filtereditor-binary";
                    _this.leftOperand = ko.observable(null);
                    _this.rightOperand = ko.observable(null);
                    _this.leftOperand(_this._createLeftPartProperty(operator.leftOperand));
                    _this.rightOperand(_this.createChildSurface(operator.rightOperand));
                    return _this;
                }
                Object.defineProperty(BinaryOperandSurface.prototype, "leftPart", {
                    get: function () {
                        return this.leftOperand();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(BinaryOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return this.rightOperand();
                    },
                    enumerable: true,
                    configurable: true
                });
                BinaryOperandSurface.prototype.dispose = function () {
                    this.leftOperand().dispose();
                    this.rightOperand().dispose();
                    _super.prototype.dispose.call(this);
                };
                return BinaryOperandSurface;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.BinaryOperandSurface = BinaryOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var OperandSurfaceBase = (function (_super) {
                __extends(OperandSurfaceBase, _super);
                function OperandSurfaceBase(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.canChange = true;
                    _this.canRemove = false;
                    _this.changeValueType = function (type) {
                        var parent = _this.getRealParent(_this.parent);
                        var property = _this.getRealProperty(_this);
                        var propertyLocation = _this.getPropertyName(parent, property);
                        var model = parent.model.changeValueType(type.instance, propertyLocation);
                        if (propertyLocation.index !== null) {
                            parent[propertyLocation.name]()[propertyLocation.index].dispose();
                            parent[propertyLocation.name].splice(propertyLocation.index, 1, parent.createChildSurface(model));
                        }
                        else {
                            parent[propertyLocation.name]().dispose();
                            parent[propertyLocation.name](parent.createChildSurface(model));
                        }
                        _this.helper.onChange();
                    };
                    return _this;
                }
                OperandSurfaceBase.prototype.getRealParent = function (parent) {
                    if (parent instanceof Widgets.UnaryOperandSurface) {
                        return this.getRealParent(parent.parent);
                    }
                    else {
                        return parent;
                    }
                };
                OperandSurfaceBase.prototype.getRealProperty = function (property) {
                    if (property.parent instanceof Widgets.UnaryOperandSurface) {
                        return this.getRealProperty(property.parent);
                    }
                    else {
                        return property;
                    }
                };
                OperandSurfaceBase.prototype.getPropertyName = function (parent, searchProperty) {
                    var position = null;
                    var name = null;
                    $.each(parent, function (propertyName, property) {
                        if (Array.isArray(ko.unwrap(property)) && ko.isObservable(property)) {
                            var index = ko.unwrap(property).indexOf(searchProperty);
                            if (index > -1) {
                                position = index;
                                name = propertyName;
                                return;
                            }
                        }
                        else if (searchProperty === ko.unwrap(property) && ko.isObservable(property)) {
                            name = propertyName;
                            return;
                        }
                    });
                    return { index: position, name: name };
                };
                OperandSurfaceBase.prototype.getConvertableParameters = function (destinationSpecifics) {
                    if (!this.helper.parameters())
                        return [];
                    return this.helper.parameters().filter(function (item) {
                        var sourceSpecifics = item.specifics && item.specifics.toLocaleLowerCase();
                        if (sourceSpecifics == null || destinationSpecifics == null)
                            return false;
                        if (sourceSpecifics === destinationSpecifics)
                            return true;
                        if (destinationSpecifics === "default")
                            return true;
                        if (destinationSpecifics === "string")
                            return true;
                        if (destinationSpecifics === "float")
                            return sourceSpecifics === "integer";
                        return false;
                    });
                };
                Object.defineProperty(OperandSurfaceBase.prototype, "changeTypeItems", {
                    get: function () {
                        var items = [{ name: "Value", instance: Analytics.Criteria.OperandValue, localizationId: "ASPxReportsStringId.FilterEditor_Operand_Type_Value" }];
                        if (this.helper.canChoiceProperty) {
                            items.push({ name: "Property", instance: Analytics.Criteria.OperandProperty, localizationId: "ASPxReportsStringId.FilterEditor_Operand_Type_Property" });
                        }
                        if (this.helper.canChoiceParameters && (this.getConvertableParameters(this.parent.specifics()).length > 0 || this.helper.canCreateParameters)) {
                            items.push({ name: "Parameter", instance: Analytics.Criteria.OperandParameter, localizationId: "ASPxReportsStringId.FilterEditor_Operand_Type_Parameter" });
                        }
                        items.forEach(Widgets.initDisplayText);
                        return items;
                    },
                    enumerable: true,
                    configurable: true
                });
                return OperandSurfaceBase;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.OperandSurfaceBase = OperandSurfaceBase;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FunctionOperandSurface = (function (_super) {
                __extends(FunctionOperandSurface, _super);
                function FunctionOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.canRemove = true;
                    _this.contentTemplateName = "dx-filtereditor-function";
                    _this.operands = ko.observableArray([]);
                    if (operator.operands.length === 0) {
                        if (parent instanceof Widgets.UnaryOperandSurface) {
                            _this.specifics = parent.parent.specifics;
                        }
                        else {
                            _this.specifics = parent.specifics;
                        }
                        _this.contentTemplateName = "dx-filtereditor-function-lightweight";
                        _this.canRemove = false;
                    }
                    else {
                        _this.operands.push(_this._createLeftPartProperty(operator.operands[0]));
                        for (var i = 1; i < operator.operands.length; i++) {
                            _this.operands.push(_this.createChildSurface(operator.operands[i]));
                        }
                    }
                    return _this;
                }
                Object.defineProperty(FunctionOperandSurface.prototype, "leftPart", {
                    get: function () {
                        return this.operands && this.operands()[0];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FunctionOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return this.operands && this.operands().filter(function (_, index) { return index !== 0; });
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FunctionOperandSurface.prototype, "displayType", {
                    get: function () {
                        var _this = this;
                        var item = this.items.filter(function (item) { return _this.operatorType() === item.value && _this.reverse === item.reverse && _this.model.enumType === item.type; })[0];
                        if (item && item.name) {
                            return item.displayText || DevExpress.Analytics.getLocalization(item.name, item.localizationId);
                        }
                        else {
                            if (!isNaN(parseInt(this.operatorType()))) {
                                return Analytics.Criteria.FunctionOperatorType[this.operatorType()];
                            }
                            else {
                                return this.operatorType() || "";
                            }
                        }
                    },
                    enumerable: true,
                    configurable: true
                });
                FunctionOperandSurface.prototype.dispose = function () {
                    this.operands().forEach(function (x) { return x.dispose(); });
                    _super.prototype.dispose.call(this);
                };
                return FunctionOperandSurface;
            }(Widgets.OperandSurfaceBase));
            Widgets.FunctionOperandSurface = FunctionOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var GroupOperandSurface = (function (_super) {
                __extends(GroupOperandSurface, _super);
                function GroupOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.templateName = "dx-filtereditor-group";
                    _this.operatorClass = "criteria-operator-item-group dxd-filter-editor-group-back-color dxd-filter-editor-text-color";
                    _this.operands = ko.observableArray([]);
                    _this.createItems = null;
                    _this.createItems = [
                        { name: "Add group", value: true, localizationId: "StringId.FilterMenuGroupAdd" },
                        { name: "Add condition", value: false, localizationId: "StringId.FilterMenuConditionAdd" }
                    ];
                    _this.createItems.forEach(Widgets.initDisplayText);
                    _this.operands((operator.operands || []).map(function (operand) {
                        return _this.createChildSurface(operand);
                    }));
                    _this.specifics = ko.observable("group");
                    return _this;
                }
                GroupOperandSurface.prototype.change = function (type, surface) {
                    if (surface) {
                        var specifics = surface.specifics() || "integer";
                        var operators = this.helper.filterEditorOperators[specifics] || this.helper.filterEditorOperators._common;
                        if (!type) {
                            var item = operators.filter(function (item) {
                                return surface.operatorType() === item.value && surface.reverse === item.reverse && surface.model.enumType === item.type;
                            })[0];
                            if (item) {
                                type = item;
                            }
                            else {
                                type = operators[0];
                            }
                        }
                        var newModel = this.model.change(type, surface.model, surface.leftPart instanceof Widgets.AggregateOperandSurface && surface.leftPart.leftPart.specifics() !== "list");
                        var position = this.operands().indexOf(surface);
                        var operand = this.createChildSurface(newModel);
                        this.operands()[position].dispose();
                        this.operands.splice(position, 1, operand);
                    }
                    else {
                        _super.prototype.change.call(this, type, surface);
                    }
                    this.helper.onChange();
                };
                GroupOperandSurface.prototype.remove = function (surface) {
                    if (surface) {
                        this.model.remove(surface.model);
                        this.operands.remove(surface);
                        surface.dispose();
                    }
                    else {
                        this.parent.remove(this);
                        this.dispose();
                    }
                    this.helper.onChange();
                };
                GroupOperandSurface.prototype.create = function (type) {
                    var newModel = this.model.create(type.value, new Analytics.Criteria.OperandProperty());
                    this.operands.push(this.createChildSurface(newModel));
                    this.helper.onChange();
                };
                Object.defineProperty(GroupOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return this.operands();
                    },
                    enumerable: true,
                    configurable: true
                });
                GroupOperandSurface.prototype.dispose = function () {
                    this.operands().forEach(function (x) { return x.dispose(); });
                    _super.prototype.dispose.call(this);
                };
                return GroupOperandSurface;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.GroupOperandSurface = GroupOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var InOperandSurface = (function (_super) {
                __extends(InOperandSurface, _super);
                function InOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.contentTemplateName = "dx-filtereditor-in";
                    _this.operands = ko.observableArray([]);
                    _this.criteriaOperator = ko.observable(null);
                    _this.criteriaOperator(_this._createLeftPartProperty(operator.criteriaOperator));
                    _this.operands((operator.operands || []).map(function (operand) {
                        return _this.createChildSurface(operand);
                    }));
                    _this.addValue = function () {
                        var value = new Analytics.Criteria.OperandValue(null);
                        _this.model.operands.push(value);
                        _this.operands.push(_this.createChildSurface(value));
                    };
                    return _this;
                }
                Object.defineProperty(InOperandSurface.prototype, "leftPart", {
                    get: function () {
                        return this.criteriaOperator();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(InOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return this.operands();
                    },
                    enumerable: true,
                    configurable: true
                });
                InOperandSurface.prototype.dispose = function () {
                    this.criteriaOperator().dispose();
                    this.operands().forEach(function (x) { return x.dispose(); });
                    _super.prototype.dispose.call(this);
                };
                return InOperandSurface;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.InOperandSurface = InOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var OperandParameterSurface = (function (_super) {
                __extends(OperandParameterSurface, _super);
                function OperandParameterSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.changeParameter = function (item) {
                        _this.model.parameterName = item.name;
                        _this.parameterName(item.name);
                        _this.helper.onChange();
                    };
                    _this.operatorClass = "criteria-operator-item-parameter dxd-filter-editor-parameter-back-color dxd-filter-editor-text-color";
                    _this.parameterName = ko.observable("");
                    _this.templateName = "dx-filtereditor-parameter";
                    _this.specifics = parent.specifics;
                    _this.parameterName(operator.parameterName);
                    return _this;
                }
                Object.defineProperty(OperandParameterSurface.prototype, "items", {
                    get: function () {
                        return this.getConvertableParameters(this.specifics());
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(OperandParameterSurface.prototype, "displayType", {
                    get: function () {
                        return null;
                    },
                    enumerable: true,
                    configurable: true
                });
                return OperandParameterSurface;
            }(Widgets.OperandSurfaceBase));
            Widgets.OperandParameterSurface = OperandParameterSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var OperandPropertySurface = (function (_super) {
                __extends(OperandPropertySurface, _super);
                function OperandPropertySurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this._displayName = ko.observable("");
                    _this.propertyName = ko.observable("");
                    _this.specifics = ko.observable("integer");
                    _this.dataType = ko.observable("");
                    _this.valueType = ko.observable("");
                    _this.changeProperty = function (item) {
                        _this.fieldsOptions().selected(item);
                    };
                    _this.templateName = "dx-filtereditor-property";
                    _this.operatorClass = "criteria-operator-item-field dxd-filter-editor-field-back-color dxd-filter-editor-field-back-color dxd-filter-editor-text-color";
                    _this.propertyName(operator.propertyName);
                    var options = _this.helper.generateTreelistOptions(fieldListProvider, path);
                    if (options.options && options.subscription) {
                        _this.fieldsOptions = options.options;
                        _this._disposables.push(options.subscription);
                    }
                    else {
                        _this.fieldsOptions = options;
                    }
                    _this._disposables.push(_this.fieldsOptions().selectedPath.subscribe(function (newVal) {
                        var realName = _this.fieldsOptions().selectedPath().substr(_this.path && _this.path().length > 0 ? _this.path().length + 1 : 0);
                        _this.propertyName(realName);
                        _this.model.propertyName = realName;
                        _this.popupService.visible(false);
                    }));
                    _this._disposables.push(_this.fieldsOptions().selected.subscribe(function (newVal) {
                        _this._updateDisplayName(path, _this.propertyName(), newVal.displayName);
                        var specifics = newVal.specifics.toLowerCase();
                        if (specifics.indexOf("calc") === 0) {
                            specifics = specifics.split("calc")[1];
                        }
                        if (_this.specifics() !== specifics || _this.dataType() !== newVal.dataType) {
                            _this.specifics(specifics);
                            _this.dataType(newVal.dataType);
                            _this.parent.change();
                        }
                        _this.helper.onChange();
                    }));
                    _this.fieldsOptions().selectedPath(_this.path && !!ko.unwrap(_this.path) ? [ko.unwrap(_this.path), _this.propertyName()].join('.') : _this.propertyName());
                    _this._updateSpecifics();
                    _this._disposables.push(_this.displayName = ko.computed(function () {
                        return _this._displayName() || _this.propertyName();
                    }));
                    return _this;
                }
                OperandPropertySurface.prototype._updateDisplayName = function (path, propertyName, displayName) {
                    var _this = this;
                    if (!!this.helper.getDisplayPropertyName) {
                        this.helper.getDisplayPropertyName(ko.unwrap(path), propertyName).done(function (newVal) {
                            _this._displayName(newVal);
                        });
                    }
                    else {
                        this._displayName(displayName);
                    }
                };
                OperandPropertySurface.prototype._updateSpecifics = function () {
                    var _this = this;
                    var self = this;
                    var propertyPath = this.propertyName().split('.');
                    var realPropertyName = propertyPath.pop();
                    if (ko.unwrap(this.fieldsOptions).itemsProvider) {
                        ko.unwrap(this.fieldsOptions).itemsProvider.getItems(new Analytics.Utils.PathRequest([this.path()].concat(propertyPath).join('.'))).done(function (result) {
                            var notListProperties = result.filter(function (item) { return item.specifics !== "List" && !item.isList; });
                            if (!_this.propertyName() && notListProperties.length > 0) {
                                _this.model.propertyName = notListProperties[0].name;
                                _this.propertyName(notListProperties[0].name);
                                realPropertyName = notListProperties[0].name;
                            }
                            var item = result.filter(function (item) { return item.name === realPropertyName; })[0];
                            if (item) {
                                var specifics = item.specifics.toLowerCase();
                                if (specifics.indexOf("calc") === 0) {
                                    specifics = specifics.split("calc")[1];
                                }
                                _this.specifics(specifics);
                                _this.dataType(item.dataType);
                                _this._updateDisplayName(_this.path, _this.propertyName(), item.displayName);
                            }
                        });
                    }
                };
                Object.defineProperty(OperandPropertySurface.prototype, "items", {
                    get: function () {
                        return this.fieldsOptions;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(OperandPropertySurface.prototype, "displayType", {
                    get: function () {
                        return null;
                    },
                    enumerable: true,
                    configurable: true
                });
                return OperandPropertySurface;
            }(Widgets.OperandSurfaceBase));
            Widgets.OperandPropertySurface = OperandPropertySurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var OperandValueSurface = (function (_super) {
                __extends(OperandValueSurface, _super);
                function OperandValueSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this._value = ko.observable(null);
                    _this._updateDate = function (specifics) {
                        if (specifics === "date") {
                            if (!(this._value() instanceof Date)) {
                                this._value(new Date(new Date().setHours(0, 0, 0, 0)));
                            }
                        }
                        else {
                            this._value("");
                        }
                    };
                    _this.changeValue = function () {
                        var parent = _this.getRealParent(_this.parent);
                        var property = _this.getRealProperty(_this);
                        var propertyLocation = _this.getPropertyName(parent, property);
                        var model = parent.model.changeValue(_this.model, _this.reverse, propertyLocation);
                        if (propertyLocation.index !== null) {
                            parent[propertyLocation.name]()[propertyLocation.index].dispose();
                            parent[propertyLocation.name].splice(propertyLocation.index, 1, parent.createChildSurface(model));
                        }
                        else {
                            parent[propertyLocation.name]().dispose();
                            parent[propertyLocation.name](parent.createChildSurface(model));
                        }
                    };
                    _this.dataType = ko.observable("");
                    _this.values = ko.observable([]);
                    _this.isEditable = ko.observable(false);
                    _this.templateName = "dx-filtereditor-value";
                    _this.getNumberEditorOptions = function () {
                        return DevExpress.Analytics.Widgets.Internal.ValueEditorHelper.getNumberEditorOptions(_this.dataType(), _this.specifics(), { value: _this._value, onFocusOut: function () { _this.isEditable(false); } });
                    };
                    var dataSource = null;
                    _this._disposables.push(_this.dataSource = ko.computed(function () {
                        dataSource && dataSource.dispose();
                        dataSource = new DevExpress.data.DataSource({
                            store: _this.values(),
                            paginate: _this.values().length > 200,
                            pageSize: 100
                        });
                        return dataSource;
                    }));
                    if (parent instanceof Widgets.UnaryOperandSurface) {
                        _this.specifics = parent.parent.specifics;
                        _this.dataType = parent.parent.dataType;
                        if (parent.model.operatorType === Analytics.Criteria.UnaryOperatorType.Minus) {
                            _this.reverse = true;
                        }
                    }
                    else {
                        _this.specifics = parent.specifics;
                        _this.dataType = parent.dataType;
                    }
                    _this._disposables.push(_this.specifics.subscribe(function (newVal) {
                        operator.specifics = newVal;
                        _this._updateDate(newVal);
                    }));
                    _this._value(operator.value);
                    _this._disposables.push(_this._value.subscribe(function (newVal) {
                        _this.model.value = newVal;
                        _this.helper.onChange();
                    }));
                    if (_this._value() === null || _this._value() === undefined || _this._value() === "") {
                        _this._updateDate(_this.specifics());
                    }
                    _this._disposables.push(_this.value = ko.computed({
                        read: function () {
                            var value = _this._value();
                            if (value instanceof Date) {
                                value = DevExpress.Analytics.Localization.formatDate(value);
                            }
                            if (_this.items.length > 0) {
                                var result = _this.items.filter(function (item) { return item.value === value; })[0];
                                if (result) {
                                    return result.display;
                                }
                            }
                            if (_this.reverse) {
                                value = "-" + value;
                            }
                            return value !== null && value !== undefined && value !== "" ? value : _this.getDefaultValue();
                        },
                        write: function (newVal) {
                            if (newVal > 0 && !_this.reverse || newVal < 0 && _this.reverse) {
                                _this._value(newVal);
                            }
                            else if (newVal > 0 && _this.reverse || newVal < 0 && !_this.reverse) {
                                _this.reverse = !_this.reverse;
                                _this._value(newVal < 0 ? ("" + newVal).substring(1) : newVal);
                                _this.changeValue();
                            }
                        }
                    }));
                    _this._disposables.push(ko.computed(function () {
                        var itemsProvider = ko.unwrap(fieldListProvider);
                        if (itemsProvider && itemsProvider.getValues && _this.parent.leftPart instanceof Widgets.OperandPropertySurface) {
                            if (_this.parent.leftPart.propertyName()) {
                                itemsProvider.getValues(new Analytics.Utils.PathRequest(ko.unwrap(_this.path) + "." + _this.parent.leftPart.propertyName())).done(function (result) {
                                    _this.values(result);
                                });
                            }
                        }
                    }));
                    operator.specifics = _this.specifics();
                    return _this;
                }
                Object.defineProperty(OperandValueSurface.prototype, "items", {
                    get: function () {
                        return this.values();
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(OperandValueSurface.prototype, "displayType", {
                    get: function () {
                        return null;
                    },
                    enumerable: true,
                    configurable: true
                });
                OperandValueSurface.prototype.isDefaultDisplay = function () {
                    return this.value() === this.getDefaultValue();
                };
                OperandValueSurface.prototype.getDefaultValue = function () {
                    return OperandValueSurface._defaultValue ? OperandValueSurface._defaultValue :
                        OperandValueSurface._defaultValue = Analytics.getLocalization("Enter a value", "StringId.FilterEmptyEnter");
                };
                return OperandValueSurface;
            }(Widgets.OperandSurfaceBase));
            Widgets.OperandValueSurface = OperandValueSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var UnaryOperandSurface = (function (_super) {
                __extends(UnaryOperandSurface, _super);
                function UnaryOperandSurface(operator, parent, fieldListProvider, path) {
                    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;
                    _this.contentTemplateName = "dx-filtereditor-unary";
                    _this.operand = ko.observable(null);
                    var operand = _this.createChildSurface(operator.operand);
                    if (operator.operatorType === Analytics.Criteria.UnaryOperatorType.Not) {
                        _this.templateName = "dx-filtereditor-not";
                        operand.reverse = true;
                        _this.specifics = operand.specifics;
                    }
                    else {
                        operand.dispose();
                        operand = _this._createLeftPartProperty(operator.operand);
                    }
                    _this.operand(operand);
                    return _this;
                }
                Object.defineProperty(UnaryOperandSurface.prototype, "leftPart", {
                    get: function () {
                        var leftPart = this.operand();
                        if (this.operand() && this.operand().reverse && this.operand().leftPart) {
                            leftPart = this.operand().leftPart;
                        }
                        return leftPart;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(UnaryOperandSurface.prototype, "rightPart", {
                    get: function () {
                        return this.operand() && this.operand().reverse ? this.operand().rightPart : null;
                    },
                    enumerable: true,
                    configurable: true
                });
                UnaryOperandSurface.prototype.dispose = function () {
                    this.operand().dispose();
                    _super.prototype.dispose.call(this);
                };
                return UnaryOperandSurface;
            }(Widgets.CriteriaOperatorSurface));
            Widgets.UnaryOperandSurface = UnaryOperandSurface;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            function initDisplayText(object) {
                object.displayText = DevExpress.Analytics.getLocalization(object.name, object.localizationId);
            }
            Widgets.initDisplayText = initDisplayText;
            var FilterEditorHelper = (function () {
                function FilterEditorHelper(serializer) {
                    this.rtl = false;
                    this.parameters = ko.observable([]);
                    this.canSelectLists = true;
                    this.canCreateParameters = false;
                    this.canChoiceParameters = true;
                    this.canChoiceProperty = true;
                    this.criteriaTreeValidator = new Widgets.Internal.CriteriaSurfaceValidator();
                    this.filterEditorOperators = {
                        _common: [
                            { name: "Equals", insertVal: "==", value: Analytics.Criteria.BinaryOperatorType.Equal, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseEquals" },
                            { name: "Does not equal", hidden: true, reverse: true, value: Analytics.Criteria.BinaryOperatorType.Equal, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseDoesNotEqual" },
                            { name: "Does not equal", insertVal: "!=", value: Analytics.Criteria.BinaryOperatorType.NotEqual, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseDoesNotEqual" },
                            { name: "Equals", reverse: true, hidden: true, value: Analytics.Criteria.BinaryOperatorType.NotEqual, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseEquals" },
                            { name: "Is greater than", insertVal: ">", value: Analytics.Criteria.BinaryOperatorType.Greater, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseGreater" },
                            { name: "Is less than or equal to", hidden: true, reverse: true, value: Analytics.Criteria.BinaryOperatorType.Greater, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseGreater" },
                            { name: "Is greater than or equal to", insertVal: ">=", value: Analytics.Criteria.BinaryOperatorType.GreaterOrEqual, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseGreaterOrEqual" },
                            { name: "Is less than", hidden: true, reverse: true, value: Analytics.Criteria.BinaryOperatorType.GreaterOrEqual, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseLess" },
                            { name: "Is less than", insertVal: "<", value: Analytics.Criteria.BinaryOperatorType.Less, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseLess" },
                            { name: "Is greater than or equal to", reverse: true, hidden: true, value: Analytics.Criteria.BinaryOperatorType.Less, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseGreaterOrEqual" },
                            { name: "Is less than or equal to", insertVal: "<=", value: Analytics.Criteria.BinaryOperatorType.LessOrEqual, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseLessOrEqual" },
                            { name: "Is greater than", reverse: true, hidden: true, value: Analytics.Criteria.BinaryOperatorType.LessOrEqual, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseGreater" },
                            { name: "Is between", value: "Between", insertVal: "Between(, )", paramCount: 1, type: Analytics.Criteria.BetweenOperator, localizationId: "StringId.FilterClauseBetween" },
                            { name: "Is not between", value: "Between", insertVal: "Between(, )", paramCount: 1, type: Analytics.Criteria.BetweenOperator, reverse: true, localizationId: "StringId.FilterClauseNotBetween" }
                        ],
                        string: [],
                        guid: [],
                        integer: [],
                        float: [],
                        date: [],
                        list: [],
                        group: [],
                    };
                    this.onChange = function () { };
                    this.onEditorFocusOut = function (criteria) { };
                    this.onSave = function (criteria) { };
                    this.onClosing = function () { };
                    this.handlers = {
                        create: function (criteria, popupService) {
                            return {
                                data: new Widgets.Internal.FilterEditorAddOn(criteria, popupService, "create", "createItems"),
                                templateName: "dx-filtereditor-create"
                            };
                        },
                        change: function (criteria, popupService) {
                            return {
                                data: new Widgets.Internal.FilterEditorAddOn(criteria, popupService, "change", "items"),
                                templateName: "dx-filtereditor-change"
                            };
                        },
                        changeProperty: function (criteria, popupService) {
                            return {
                                data: new Widgets.Internal.FilterEditorAddOn(criteria, popupService, "changeProperty", "items", "dx-filtereditor-popup-treelist"),
                                templateName: "dx-filtereditor-changeProperty"
                            };
                        },
                        changeValueType: function (criteria, popupService) {
                            return {
                                data: new Widgets.Internal.FilterEditorAddOn(criteria, popupService, "changeValueType", "changeTypeItems"),
                                templateName: "dx-filtereditor-changeValueType"
                            };
                        },
                        changeParameter: function (criteria, popupService) {
                            return {
                                data: new Widgets.Internal.FilterEditorAddOn(criteria, popupService, "changeParameter", "items"),
                                templateName: "dx-filtereditor-changeParameter"
                            };
                        }
                    };
                    this.mapper = {
                        Aggregate: Widgets.AggregateOperandSurface,
                        Property: Widgets.OperandPropertySurface,
                        Parameter: Widgets.OperandParameterSurface,
                        Value: Widgets.OperandValueSurface,
                        Group: Widgets.GroupOperandSurface,
                        Between: Widgets.BetweenOperandSurface,
                        Binary: Widgets.BinaryOperandSurface,
                        Function: Widgets.FunctionOperandSurface,
                        In: Widgets.InOperandSurface,
                        Unary: Widgets.UnaryOperandSurface,
                        Default: Widgets.CriteriaOperatorSurface
                    };
                    this.serializer = serializer || new Widgets.Internal.FilterEditorSerializer();
                    this.filterEditorOperators.string = [].concat(this.filterEditorOperators._common, [
                        { name: "Contains", insertVal: "Contains(, )", value: Analytics.Criteria.FunctionOperatorType.Contains, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterClauseContains" },
                        { name: "Does not contain", value: Analytics.Criteria.FunctionOperatorType.Contains, type: Analytics.Criteria.FunctionOperatorType, reverse: true, localizationId: "StringId.FilterClauseDoesNotContain" },
                        { name: "Begins with", insertVal: "StartsWith(, )", value: Analytics.Criteria.FunctionOperatorType.StartsWith, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterClauseBeginsWith" },
                        { name: "Ends with", insertVal: "StartsWith(, )", value: Analytics.Criteria.FunctionOperatorType.EndsWith, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterClauseEndsWith" },
                        { name: "Is like", insertVal: "Like", value: Analytics.Criteria.BinaryOperatorType.Like, type: Analytics.Criteria.BinaryOperatorType, localizationId: "StringId.FilterClauseLike" },
                        { name: "Is not like", insertVal: "Not Like", value: Analytics.Criteria.BinaryOperatorType.Like, type: Analytics.Criteria.BinaryOperatorType, reverse: true, localizationId: "StringId.FilterClauseNotLike" },
                        { name: "Is any of", value: "In", insertVal: "In()", paramCount: 1, type: Analytics.Criteria.InOperator, localizationId: "StringId.FilterClauseAnyOf" },
                        { name: "Is none of", value: "In", type: Analytics.Criteria.InOperator, reverse: true, localizationId: "StringId.FilterClauseNoneOf" },
                        { name: "Is blank", insertVal: "IsNullOrEmpty()", value: Analytics.Criteria.FunctionOperatorType.IsNullOrEmpty, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterClauseIsNullOrEmpty" },
                        { name: "Is not blank", insertVal: "Not IsNullOrEmpty()", value: Analytics.Criteria.FunctionOperatorType.IsNullOrEmpty, type: Analytics.Criteria.FunctionOperatorType, reverse: true, localizationId: "StringId.FilterClauseIsNotNullOrEmpty" }
                    ]);
                    this.filterEditorOperators.guid = this.filterEditorOperators.string;
                    this.filterEditorOperators.integer = [].concat(this.filterEditorOperators._common, [
                        { name: "Is null", insertVal: "Is Null", value: Analytics.Criteria.UnaryOperatorType.IsNull, type: Analytics.Criteria.UnaryOperatorType, localizationId: "StringId.FilterClauseIsNull" },
                        { name: "Is not null", insertVal: "Is Not Null", value: Analytics.Criteria.UnaryOperatorType.IsNull, type: Analytics.Criteria.UnaryOperatorType, reverse: true, localizationId: "StringId.FilterClauseIsNotNull" },
                        { name: "Is any of", value: "In", insertVal: "In()", paramCount: 1, type: Analytics.Criteria.InOperator, localizationId: "StringId.FilterClauseAnyOf" },
                        { name: "Is none of", value: "In", type: Analytics.Criteria.InOperator, reverse: true, localizationId: "StringId.FilterClauseNoneOf" },
                    ]);
                    this.filterEditorOperators.float = this.filterEditorOperators.integer;
                    this.filterEditorOperators.date = [].concat(this.filterEditorOperators._common, [
                        { name: "Is null", insertVal: "Is Null", value: Analytics.Criteria.UnaryOperatorType.IsNull, type: Analytics.Criteria.UnaryOperatorType, localizationId: "StringId.FilterClauseIsNull" },
                        { name: "Is not null", insertVal: "Is Not Null", value: Analytics.Criteria.UnaryOperatorType.IsNull, type: Analytics.Criteria.UnaryOperatorType, reverse: true, localizationId: "StringId.FilterClauseIsNotNull" },
                        { name: "Is any of", value: "In", insertVal: "In()", type: Analytics.Criteria.InOperator, localizationId: "StringId.FilterClauseAnyOf" },
                        { name: "Is none of", value: "In", type: Analytics.Criteria.InOperator, reverse: true, localizationId: "StringId.FilterClauseNoneOf" },
                        { name: "Is beyond this year", insertVal: "IsOutlookIntervalBeyondThisYear()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalBeyondThisYear, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalBeyondThisYear" },
                        { name: "Is later this year", insertVal: "IsOutlookIntervalLaterThisYear()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalLaterThisYear, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalLaterThisYear" },
                        { name: "Is later this month", insertVal: "IsOutlookIntervalLaterThisMonth()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalLaterThisMonth, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalLaterThisMonth" },
                        { name: "Is next week", insertVal: "IsOutlookIntervalNextWeek()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalNextWeek, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalNextWeek" },
                        { name: "Is later this week", insertVal: "IsOutlookIntervalLaterThisWeek()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalLaterThisWeek, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalLaterThisWeek" },
                        { name: "Is tomorrow", insertVal: "IsOutlookIntervalTomorrow()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalTomorrow, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalTomorrow" },
                        { name: "Is today", insertVal: "IsOutlookIntervalToday()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalToday, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalToday" },
                        { name: "Is yesterday", insertVal: "IsOutlookIntervalYesterday()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalYesterday, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalYesterday" },
                        { name: "Is earlier this week", insertVal: "IsOutlookIntervalEarlierThisWeek()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalEarlierThisWeek, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalEarlierThisWeek" },
                        { name: "Is last week", insertVal: "IsOutlookIntervalLastWeek()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalLastWeek, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalLastWeek" },
                        { name: "Is earlier this month", insertVal: "IsOutlookIntervalEarlierThisMonth()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalEarlierThisMonth, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalEarlierThisMonth" },
                        { name: "Is earlier this year", insertVal: "IsOutlookIntervalEarlierThisYear()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalEarlierThisYear, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalEarlierThisYear" },
                        { name: "Is prior this year", insertVal: "IsOutlookIntervalPriorThisYear()", value: Analytics.Criteria.FunctionOperatorType.IsOutlookIntervalPriorThisYear, type: Analytics.Criteria.FunctionOperatorType, localizationId: "StringId.FilterCriteriaToStringFunctionIsOutlookIntervalPriorThisYear" },
                    ]);
                    this.filterEditorOperators.list = [
                        { name: "Exists", value: Analytics.Criteria.Aggregate.Exists, insertVal: "Exists()", type: Analytics.Criteria.Aggregate, localizationId: "StringId.FilterAggregateExists" },
                        { name: "Count", value: Analytics.Criteria.Aggregate.Count, insertVal: "Count()", type: Analytics.Criteria.Aggregate, localizationId: "StringId.FilterAggregateCount" },
                        { name: "Max", value: Analytics.Criteria.Aggregate.Max, insertVal: "Max()", type: Analytics.Criteria.Aggregate, localizationId: "StringId.FilterAggregateMax" },
                        { name: "Min", value: Analytics.Criteria.Aggregate.Min, insertVal: "Min()", type: Analytics.Criteria.Aggregate, localizationId: "StringId.FilterAggregateMin" },
                        { name: "Sum", value: Analytics.Criteria.Aggregate.Sum, insertVal: "Sum()", type: Analytics.Criteria.Aggregate, localizationId: "StringId.FilterAggregateSum" },
                        { name: "Avg", value: Analytics.Criteria.Aggregate.Avg, insertVal: "Avg()", type: Analytics.Criteria.Aggregate, localizationId: "StringId.FilterAggregateAvg" }
                    ];
                    this.filterEditorOperators.group = [
                        { name: "And", insertVal: "And", value: Analytics.Criteria.GroupOperatorType.And, type: Analytics.Criteria.GroupOperatorType, localizationId: "StringId.FilterGroupAnd" },
                        { name: "Or", insertVal: "Or", value: Analytics.Criteria.GroupOperatorType.Or, type: Analytics.Criteria.GroupOperatorType, localizationId: "StringId.FilterGroupOr" },
                        { name: "Not And", value: Analytics.Criteria.GroupOperatorType.And, reverse: true, type: Analytics.Criteria.GroupOperatorType, localizationId: "StringId.FilterGroupNotAnd" },
                        { name: "Not Or", value: Analytics.Criteria.GroupOperatorType.Or, reverse: true, type: Analytics.Criteria.GroupOperatorType, localizationId: "StringId.FilterGroupNotOr" },
                    ];
                    this._initDisplayText();
                }
                FilterEditorHelper.prototype._initDisplayText = function () {
                    var _this = this;
                    Object.keys(this.filterEditorOperators).forEach(function (specific) {
                        _this.filterEditorOperators[specific].forEach(initDisplayText);
                    });
                };
                FilterEditorHelper.prototype.registrateOperator = function (specific, targetEnum, value, name, reverse, localizationId) {
                    if (reverse === void 0) { reverse = false; }
                    if (this.filterEditorOperators[specific]) {
                        if (!targetEnum[value]) {
                            var maxNumber = 0;
                            var index = 0;
                            $.each(targetEnum, function (name, _) {
                                index = parseInt(name);
                                if (!isNaN(index) && maxNumber < index) {
                                    maxNumber = index;
                                }
                            });
                            maxNumber++;
                            targetEnum[maxNumber] = value;
                            targetEnum[value] = maxNumber;
                        }
                        var newOperator = { name: name, value: targetEnum[value], type: targetEnum, reverse: reverse, displayText: DevExpress.Analytics.getLocalization(name, localizationId) };
                        this.filterEditorOperators[specific].push(newOperator);
                    }
                };
                FilterEditorHelper.prototype.generateTreelistOptions = function (fieldListProvider, path) {
                    var _this = this;
                    var treeListOptions = ko.observable(null);
                    var selected = ko.observable(null);
                    return {
                        subscription: ko.computed(function () {
                            treeListOptions({
                                itemsProvider: ko.unwrap(fieldListProvider),
                                selectedPath: ko.observable(""),
                                selected: selected,
                                path: ko.unwrap(path),
                                treeListController: new Widgets.FilterEditorTreeListController(selected),
                                rtl: _this.rtl
                            });
                        }),
                        options: treeListOptions
                    };
                };
                return FilterEditorHelper;
            }());
            Widgets.FilterEditorHelper = FilterEditorHelper;
            Widgets.DefaultFilterEditorHelper = FilterEditorHelper;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var FilterEditorCodeCompletor = (function (_super) {
                    __extends(FilterEditorCodeCompletor, _super);
                    function FilterEditorCodeCompletor(options) {
                        var _this = _super.call(this, options) || this;
                        var helper = new Widgets.FilterEditorHelper();
                        var functions = [];
                        var aggregate = [];
                        var operators = [];
                        var groups = Object.keys(helper.filterEditorOperators);
                        groups.forEach(function (groupName) {
                            helper.filterEditorOperators[groupName].forEach(function (operator) {
                                if (operator.insertVal) {
                                    var name = operator.name, insertVal = operator.insertVal, paramCount = operator.paramCount;
                                    if (operator.type === Analytics.Criteria.FunctionOperatorType && functions.filter(function (x) { return x.name === name; }).length === 0) {
                                        functions.push({ name: name, insertVal: insertVal });
                                    }
                                    else if (operator.type === Analytics.Criteria.Aggregate && aggregate.filter(function (x) { return x.name === name; }).length === 0) {
                                        aggregate.push({ name: name, insertVal: insertVal });
                                    }
                                    else if (operator.type !== Analytics.Criteria.Aggregate && operator.type !== Analytics.Criteria.FunctionOperatorType && operators.filter(function (x) { return x.name === name; }).length === 0) {
                                        operators.push({ name: name, insertVal: insertVal, paramCount: paramCount });
                                    }
                                }
                            });
                        });
                        _this.filterEditorAvailable = { operators: operators, aggregate: aggregate, functions: functions };
                        return _this;
                    }
                    FilterEditorCodeCompletor.prototype.getFunctionsCompletions = function () {
                        var functions = [];
                        this.filterEditorAvailable.functions.forEach(function (funcItem) {
                            functions.push(Widgets.createFunctionCompletion({ text: funcItem.name, paramCount: funcItem.insertVal.split(',').length }, funcItem.insertVal, funcItem.insertVal));
                        });
                        return functions;
                    };
                    FilterEditorCodeCompletor.prototype.getAggregateCompletions = function () {
                        var functions = [];
                        this.filterEditorAvailable.aggregate.forEach(function (funcItem) {
                            functions.push(Widgets.createFunctionCompletion({ text: funcItem.name, paramCount: 0 }, funcItem.insertVal, funcItem.insertVal));
                        });
                        return functions;
                    };
                    FilterEditorCodeCompletor.prototype.getOperatorCompletions = function (prefix) {
                        var operators = [];
                        this.filterEditorAvailable.operators.forEach(function (operator) {
                            operators.push((operator.insertVal.match(new RegExp("[\(][^\(\)]*[\)]", "g"))) ?
                                Widgets.createFunctionCompletion({ text: operator.name, paramCount: operator.paramCount || operator.insertVal.split(',').length }, operator.insertVal, operator.insertVal) :
                                { caption: operator.insertVal, snippet: prefix + operator.insertVal, meta: "operator" });
                        });
                        return operators;
                    };
                    return FilterEditorCodeCompletor;
                }(Widgets.CodeCompletor));
                Internal.FilterEditorCodeCompletor = FilterEditorCodeCompletor;
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FilterEditor = (function (_super) {
                __extends(FilterEditor, _super);
                function FilterEditor(options, fieldListProvider, rtl, _displayNameProvider) {
                    if (rtl === void 0) { rtl = false; }
                    var _this = _super.call(this) || this;
                    _this._displayNameProvider = _displayNameProvider;
                    _this._advancedMode = ko.observable(false);
                    _this.textFocused = ko.observable(false);
                    _this.aceAvailable = Widgets.aceAvailable;
                    _this.languageHelper = {
                        getLanguageMode: function () { return "ace/mode/criteria"; },
                        createCompleters: function (editor, bindingContext, viewModel) {
                            var path = ko.computed(function () { return _this.path && _this.path(); }), completor = new Widgets.Internal.FilterEditorCodeCompletor({
                                editor: editor,
                                bindingContext: bindingContext,
                                fieldListProvider: viewModel.fieldListProvider(),
                                path: path,
                                getRealExpression: function (path, expression) {
                                    return _this.displayExpressionConverter && _this.displayExpressionConverter.toRealExpression(path, expression) || $.Deferred().resolve(expression).promise();
                                }
                            });
                            completor._disposables.push(path);
                            return [completor];
                        }
                    };
                    _this.aceOptions = {
                        showLineNumbers: false,
                        showPrintMargin: false,
                        enableBasicAutocompletion: true,
                        enableLiveAutocompletion: true,
                        showGutter: false
                    };
                    _this.additionalOptions = {
                        onChange: function (session) { return _this.onValueChange(session.getValue()); },
                        changeTimeout: 200,
                        onFocus: function (_) { return _this.onFocus(); },
                        onBlur: function (_) { return _this.onBlur(); }
                    };
                    _this.editorContainer = ko.observable();
                    _this.textVisible = ko.observable(false);
                    _this.getPopupContainer = function (el) {
                        return Analytics.Utils.getParentContainer(el, _this.options()["popupContainer"]);
                    };
                    _this.timeout = null;
                    _this.animationTimeout = null;
                    _this.advancedMode = ko.computed({
                        read: function () {
                            return _this._advancedMode();
                        },
                        write: function (newVal) {
                            _this.timeout && clearTimeout(_this.timeout);
                            _this.animationTimeout && clearTimeout(_this.animationTimeout);
                            if (newVal) {
                                _this.textVisible(true);
                                _this.timeout = setTimeout(function () {
                                    _this._advancedMode(true);
                                    _this.focusText();
                                }, 1);
                                _this.animationTimeout = setTimeout(function () {
                                    _this.editorContainer() && _this.editorContainer().resize && _this.editorContainer().resize();
                                }, 210);
                            }
                            else {
                                _this._advancedMode(false);
                                _this.timeout = setTimeout(function () {
                                    _this.textVisible(false);
                                }, 200);
                            }
                        },
                    });
                    _this.invalidMessage = function () { return DevExpress.Analytics.getLocalization("Cannot create a tree for this expression", "ASPxReportsStringId.FilterEditor_TreeCreationError"); };
                    _this.advancedModeText = function () { return DevExpress.Analytics.getLocalization("Advanced Mode", "ASPxReportsStringId.FilterEditor_AdvancedMode"); };
                    _this.operandSurface = ko.observable(null);
                    _this.operand = null;
                    _this.popupVisible = ko.observable(false);
                    _this.buttonItems = [];
                    _this.popupService = new Analytics.Internal.PopupService();
                    _this.rtl = rtl;
                    options() && options().helper && (options().helper.rtl = rtl);
                    _this.options = options;
                    _this._disposables.push(_this.disabled = ko.computed(function () {
                        return ko.unwrap(_this.options() && _this.options().disabled());
                    }));
                    _this.value = ko.observable("");
                    _this.displayExpressionConverter = _displayNameProvider && new Analytics.Utils.DisplayExpressionConverter(_displayNameProvider);
                    _this.save = function () {
                        _this.helper.onSave(_this.value());
                        if (_this.operandSurface() && _this.isSurfaceValid()) {
                            var value = options().helper.serializer.serialize(_this.operand, false);
                            _this.options().value(value);
                        }
                        else {
                            _this.options().value(_this.value());
                        }
                        _this.popupVisible(false);
                    };
                    _this.displayValue = Widgets.wrapExpressionValue(_this.path, _this.value, _this.displayExpressionConverter, _this._disposables);
                    var modelValue = ko.computed({
                        read: function () {
                            var options = _this.options();
                            return options && options.value();
                        },
                        write: function (newVal) {
                            var options = _this.options();
                            options && options.value(newVal);
                        }
                    });
                    _this.modelDisplayValue = Widgets.wrapExpressionValue(_this.path, modelValue, _this.displayExpressionConverter, _this._disposables);
                    _this.fieldListProvider = fieldListProvider;
                    _this.modelValueIsValid = ko.computed(function () {
                        return options() && _this._validateValue(options().value());
                    });
                    _this.isValid = ko.computed(function () {
                        return _this._validateValue(_this.value());
                    });
                    _this.isSurfaceValid = ko.computed(function () {
                        try {
                            return _this.options() && _this.isValid() && _this.options().helper.criteriaTreeValidator.validateModel(_this.options().helper.serializer.deserialize(_this.value()));
                        }
                        catch (e) {
                            return false;
                        }
                    });
                    _this._disposables.push(modelValue);
                    _this._disposables.push(_this.modelValueIsValid);
                    _this._disposables.push(_this.isValid);
                    _this._disposables.push(_this.isSurfaceValid);
                    _this._disposables.push(_this.popupVisible.subscribe(function (newVal) {
                        if (newVal) {
                            _this.value(_this.options().value());
                            if (_this.isSurfaceValid()) {
                                _this.operand = _this._generateOperand(_this.value());
                                _this.operandSurface(_this._generateSurface(_this.operand));
                            }
                            else {
                                _this.textVisible(true);
                                _this._advancedMode(true);
                                _this.editorContainer() && _this.focusText();
                            }
                            options().helper.onChange = function () {
                                _this.value(options().helper.serializer.serialize(_this.operand, false));
                            };
                        }
                        else {
                            _this.helper.onClosing();
                            _this.value(null);
                            _this.operandSurface() && _this.operandSurface().dispose();
                            _this.operandSurface(null);
                            _this.operand = null;
                        }
                    }));
                    _this.createAddButton = function (criteria) { return options().helper.handlers.create(criteria, _this.popupService); };
                    _this.createChangeType = function (criteria) { return options().helper.handlers.change(criteria, _this.popupService); };
                    _this.createChangeProperty = function (criteria) { return options().helper.handlers.changeProperty(criteria, _this.popupService); };
                    _this.createChangeParameter = function (criteria) { return options().helper.handlers.changeParameter(criteria, _this.popupService); };
                    _this.createChangeValueType = function (criteria) { return options().helper.handlers.changeValueType(criteria, _this.popupService); };
                    var saveDisabled = ko.computed(function () { return !_this.isValid(); });
                    _this._disposables.push(saveDisabled);
                    _this._disposables.push(_this.advancedMode);
                    _this._createMainPopupButtons(saveDisabled);
                    return _this;
                }
                FilterEditor.prototype._createMainPopupButtons = function (saveDisabled) {
                    var self = this;
                    this.buttonItems = [
                        { toolbar: 'bottom', location: 'after', widget: 'dxButton', options: { text: DevExpress.Analytics.getLocalization("Save", "StringId.OK"), disabled: saveDisabled, onClick: function () { self.save(); } } },
                        {
                            toolbar: 'bottom', location: 'after', widget: 'dxButton', options: {
                                text: DevExpress.Analytics.getLocalization("Cancel", "StringId.Cancel"), onClick: function () {
                                    self.popupVisible(false);
                                }
                            }
                        },
                        { toolbar: 'bottom', location: 'before', widget: 'dxCheckBox', options: { value: self.advancedMode, text: self.advancedModeText() } }
                    ];
                };
                FilterEditor.prototype._generateOperand = function (value) {
                    return this.options().helper.serializer.deserialize(value);
                };
                FilterEditor.prototype._generateSurface = function (operand) {
                    var type = null;
                    if (operand instanceof Analytics.Criteria.UnaryOperator) {
                        type = this.options().helper.mapper.Unary;
                    }
                    else {
                        type = this.options().helper.mapper.Group;
                    }
                    var surface = new type(operand, this, this.fieldListProvider, this.path);
                    surface.canRemove = false;
                    if (surface instanceof Widgets.UnaryOperandSurface) {
                        surface.operand().canRemove = false;
                    }
                    return surface;
                };
                FilterEditor.prototype._validateValue = function (value) {
                    try {
                        if (this.options() && this.options().helper) {
                            this.options().helper.serializer.deserialize(value);
                            return true;
                        }
                        else {
                            return false;
                        }
                    }
                    catch (e) {
                        return false;
                    }
                };
                FilterEditor.prototype.change = function (type, surface) {
                    this.operand = Analytics.Criteria.CriteriaOperator.create(type);
                    this.operand.assignFrom(surface.model);
                    var type = null;
                    if (this.operand instanceof Analytics.Criteria.UnaryOperator) {
                        type = this.options().helper.mapper.Unary;
                    }
                    else {
                        type = this.options().helper.mapper.Group;
                    }
                    var surface = new type(this.operand, this, this.fieldListProvider, this.path);
                    surface.canRemove = false;
                    if (surface instanceof Widgets.UnaryOperandSurface) {
                        surface.operand().canRemove = false;
                    }
                    this.operandSurface(surface);
                };
                Object.defineProperty(FilterEditor.prototype, "helper", {
                    get: function () {
                        return this.options() && this.options().helper;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FilterEditor.prototype, "path", {
                    get: function () {
                        return this.options() && this.options().path;
                    },
                    enumerable: true,
                    configurable: true
                });
                FilterEditor.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.operandSurface() && this.operandSurface().dispose();
                };
                FilterEditor.prototype.onInput = function (s, e) {
                    var self = this;
                    this.timeout && clearTimeout(this.timeout);
                    this.timeout = setTimeout(function () {
                        self.onValueChange(s.component.option("text"));
                    }, 200);
                };
                FilterEditor.prototype.onFocus = function () {
                    this.textFocused(true);
                };
                FilterEditor.prototype.onBlur = function () {
                    this.textFocused(false);
                    this.helper.onEditorFocusOut(this.operand);
                };
                FilterEditor.prototype.cacheElement = function ($element) {
                    this.editorContainer(DevExpress.ui.dxTextArea["getInstance"]($element.get(0)));
                };
                FilterEditor.prototype.updateCriteria = function () {
                    if (this.isSurfaceValid()) {
                        this.operand = this._generateOperand(this.value());
                        this.operandSurface() && this.operandSurface().dispose();
                        this.operandSurface(this._generateSurface(this.operand));
                    }
                };
                FilterEditor.prototype.onValueChange = function (value) {
                    var _this = this;
                    if (this.displayValue() === value)
                        return;
                    this.displayValue(value);
                    if (this.displayExpressionConverter) {
                        this.displayExpressionConverter.toRealExpression(this.path(), value).done(function (result) {
                            _this.value(result);
                            _this.updateCriteria();
                        }).fail(function () {
                            _this.value(value);
                            _this.updateCriteria();
                        });
                    }
                    else {
                        this.updateCriteria();
                    }
                };
                FilterEditor.prototype.focusText = function () {
                    var focusFn = function (editor) {
                        setTimeout(function (_) {
                            if (editor.renderer)
                                editor.renderer.updateText();
                            editor.focus();
                        }, 1);
                    };
                    if (!this.editorContainer())
                        var subscription = this.editorContainer.subscribe(function (editor) {
                            subscription.dispose();
                            focusFn(editor);
                        });
                    else
                        focusFn(this.editorContainer());
                };
                return FilterEditor;
            }(Analytics.Utils.Disposable));
            Widgets.FilterEditor = FilterEditor;
            ko.bindingHandlers['dxFilterEditor'] = {
                init: function (element, valueAccessor) {
                    $(element).children().remove();
                    $(element).addClass("dx-popup-general");
                    var templateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate('dx-filtereditor'), $element = $(element).append(templateHtml), values = valueAccessor();
                    var itemsProvider = ko.observable(ko.unwrap(values.fieldListProvider));
                    var subscriptions = [];
                    subscriptions.push(ko.computed(function () {
                        if (values.options() && values.options().itemsProvider) {
                            itemsProvider(ko.unwrap(values.options().itemsProvider));
                        }
                        else {
                            itemsProvider(ko.unwrap(values.fieldListProvider));
                        }
                    }));
                    subscriptions.push(ko.computed(function () {
                        if (values.getDisplayNameByPath && values.options() && values.options().helper && !values.options().helper.getDisplayPropertyName) {
                            values.options().helper.getDisplayPropertyName = values.getDisplayNameByPath;
                        }
                    }));
                    var editor = new FilterEditor(values.options, itemsProvider, $(element).closest('.dx-rtl').length > 0, values.displayNameProvider);
                    ko.applyBindingsToDescendants(editor, $element.children()[0]);
                    ko.utils.domNodeDisposal.addDisposeCallback($element.children()[0], function () {
                        subscriptions.forEach(function (x) { return x.dispose(); });
                        editor.dispose();
                    });
                    return { controlsDescendantBindings: true };
                }
            };
            var FilterEditorPlain = (function (_super) {
                __extends(FilterEditorPlain, _super);
                function FilterEditorPlain(element, options, fieldListProvider, rtl, _displayNameProvider) {
                    if (rtl === void 0) { rtl = false; }
                    var _this = _super.call(this, options, fieldListProvider, rtl, _displayNameProvider) || this;
                    _this.element = element;
                    _this._contentMargins = 20;
                    _this._topOffset = 30;
                    _this._defaultActiveTextContentHeightPerc = 25;
                    _this._defaultActiveTreeContentHeightPerc = 75;
                    _this._currentActiveTextContentHeightPerc = _this._defaultActiveTextContentHeightPerc;
                    _this._currentActiveTreeContentHeightPerc = _this._defaultActiveTreeContentHeightPerc;
                    _this.plainContentHeightPerc = ko.observable("100%");
                    _this.textContentHeightPerc = ko.observable(null);
                    _this.treeContentHeightPerc = ko.observable(null);
                    var $element = $(element);
                    var updateHeight = function () {
                        var currentHeight = $element.height();
                        _this.plainContentHeightPerc((1 - _this._topOffset / currentHeight) * 100 + "%");
                        var diffPerc = (_this._contentMargins / (currentHeight - _this._topOffset)) * 100 / 2;
                        _this._currentActiveTextContentHeightPerc = _this._defaultActiveTextContentHeightPerc - diffPerc;
                        _this._currentActiveTreeContentHeightPerc = _this._defaultActiveTreeContentHeightPerc - diffPerc;
                        if (_this.advancedMode()) {
                            _this.treeContentHeightPerc(_this._currentActiveTreeContentHeightPerc);
                            _this.textContentHeightPerc(_this._currentActiveTextContentHeightPerc);
                        }
                    };
                    updateHeight();
                    _this._disposables.push(_this.advancedMode.subscribe(function (newVal) {
                        if (newVal) {
                            _this.treeContentHeightPerc(_this._currentActiveTreeContentHeightPerc + "%");
                            _this.textContentHeightPerc(_this._currentActiveTextContentHeightPerc + "%");
                        }
                        else {
                            _this.treeContentHeightPerc(null);
                            _this.textContentHeightPerc(null);
                        }
                    }));
                    window.addEventListener("resize", updateHeight);
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                        window.removeEventListener("resize", updateHeight);
                        _this.dispose();
                    });
                    return _this;
                }
                return FilterEditorPlain;
            }(FilterEditor));
            Widgets.FilterEditorPlain = FilterEditorPlain;
            ko.components.register("dx-filtereditor-plain", {
                viewModel: {
                    createViewModel: function (params, componentInfo) {
                        var viewModel = new FilterEditorPlain(componentInfo.element, params.options, ko.observable(params.fieldListProvider), undefined, params.displayNameProvider);
                        viewModel.popupVisible(true);
                        params.options().value.subscribe(function () {
                            viewModel.popupVisible(false);
                            viewModel.popupVisible(true);
                        });
                        return viewModel;
                    }
                },
                template: { element: 'dx-filtereditor-plain' }
            });
            ko.components.register("dx-filtereditor-advanced", {
                viewModel: {
                    createViewModel: function (params, componentInfo) {
                        var viewModel = new FilterEditor(params.options, ko.observable(params.fieldListProvider), undefined, params.displayNameProvider);
                        viewModel.advancedMode(true);
                        viewModel.popupVisible(true);
                        params.options().value.subscribe(function () {
                            viewModel.popupVisible(false);
                            viewModel.popupVisible(true);
                        });
                        return viewModel;
                    }
                },
                template: { element: 'dx-filtereditor-advanced' }
            });
            ko.bindingHandlers["cacheElement"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var value = valueAccessor();
                    value.action($(element));
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FilterStringOptions = (function () {
                function FilterStringOptions(filterString, dataMember, disabled, title) {
                    var _this = this;
                    this.popupContainer = ".dx-designer-viewport";
                    this.itemsProvider = null;
                    this.resetValue = function () {
                        _this.value("");
                    };
                    this.title = ko.pureComputed({
                        read: function () {
                            var title = _this._title();
                            return DevExpress.Analytics.getLocalization(title.text, title.localizationId);
                        },
                        write: function (value) {
                            _this._title({ text: value });
                        }
                    });
                    this.value = filterString;
                    this.path = dataMember || ko.observable("");
                    this.disabled = disabled || ko.observable(false);
                    this.helper = new Widgets.DefaultFilterEditorHelper();
                    this._title = ko.observable(title || { text: DevExpress.Analytics.getLocalization("Filter Editor", "DataAccessUIStringId.FiltersView") });
                }
                return FilterStringOptions;
            }());
            Widgets.FilterStringOptions = FilterStringOptions;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                Internal.formatStringStandardPatterns = {
                    'DateTime': { type: 'System.DateTime', value: new Date(Date.now()), patterns: [] },
                    'Number': { type: 'System.Int32', value: '123456789', patterns: ['#.00', '#,#', '0.E+0.0', '0.e+0.0', 'n', 'n1', 'n2', 'e', 'e1', 'f', 'f1'] },
                    'Percent': { type: 'System.Int32', value: '100', patterns: ['0.00%', '0%'] },
                    'Currency': { type: 'System.Int32', value: '100', patterns: ['$0.00', '$0', 'c', 'c1', 'c2'] },
                    'Special': { type: 'System.Int32', value: '123456789', patterns: ['(###) ### - ####', '### - ## - ####'] },
                    'General': { type: 'System.String', value: '', patterns: ['General format have no specific number format'] }
                };
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FormatStringEditor = (function (_super) {
                __extends(FormatStringEditor, _super);
                function FormatStringEditor(value, disabled, defaultPatterns, customPatterns, actions, rtl, popupContainer) {
                    var _this = _super.call(this) || this;
                    _this.currentType = ko.observable();
                    _this.patternList = ko.observableArray([]);
                    _this.canAddCustomFormat = ko.observable(false);
                    _this.formatPrefix = ko.observable("");
                    _this.formatSuffix = ko.observable("");
                    _this.previewString = ko.observable("Preview string");
                    _this.formatResult = ko.observable("");
                    _this.selectedFormats = ko.observable([]);
                    _this.selectedTypes = ko.observable([]);
                    _this.popupVisible = ko.observable(false);
                    _this.localizationIdMap = {
                        'title': { text: 'FormatString Editor', localizationId: 'ASPxReportsStringId.ReportDesigner_FormatStringEditor_Title' },
                        'category': { text: 'Category', localizationId: 'DevExpress.XtraPrinting.XlDocumentOptions.Category' },
                        'preview': { text: 'Preview', localizationId: 'ASPxReportsStringId.ReportDesigner_TooltipButtons_Preview' },
                        'types': { text: 'Types', localizationId: 'ASPxReportsStringId.ReportDesigner_FormatStringEditor_Types' },
                        'add': { text: 'Add', localizationId: 'ChartStringId.MenuItemAdd' },
                        'prefix': { text: 'Prefix', localizationId: 'DevExpress.XtraPrinting.Recipient.Prefix' },
                        'suffix': { text: 'Suffix', localizationId: 'ASPxReportsStringId.ReportDesigner_FormatStringEditor_Suffix' }
                    };
                    _this.option("value", value);
                    _this.option("disabled", disabled || false);
                    _this.option("rtl", rtl || false);
                    _this.option("popupContainer", popupContainer || ".dx-designer-viewport");
                    var self = _this;
                    _this.popupService = new Analytics.Internal.PopupService();
                    _this._standardPatternSource = defaultPatterns || Widgets.Internal.formatStringStandardPatterns;
                    _this._customPatternSource = customPatterns || {};
                    _this.types = _this._convertArray(Object.keys(_this._standardPatternSource));
                    _this._disposables.push(_this.currentType.subscribe(function (newVal) {
                        if (self.isGeneralType) {
                            self.formatResult("");
                            self.selectedFormats([]);
                        }
                        else {
                            self._updateFormatList();
                        }
                    }));
                    _this.currentType(_this.types[0].name);
                    _this._disposables.push(_this.formatResult.subscribe(function (newVal) {
                        self._updateCanAddCustomFormat(newVal);
                        self._updatePreview();
                    }));
                    _this._disposables.push(_this.formatPrefix.subscribe(function (newVal) {
                        self._updatePreview();
                    }));
                    _this._disposables.push(_this.formatSuffix.subscribe(function (newVal) {
                        self._updatePreview();
                    }));
                    _this._disposables.push(_this.popupVisible.subscribe(function (newVal) {
                        if (!newVal)
                            return;
                        self._initEditor(value());
                        self.selectedTypes(self.types.filter(function (item) { return item.name === self.currentType(); }));
                    }));
                    _this._createMainPopupButtons();
                    actions && actions.updatePreview && (_this.updatePreview = actions.updatePreview);
                    _this.setType = function (e) {
                        self.currentType(e.itemData.name);
                        self._updateSelection();
                    };
                    _this.setFormat = function (e) {
                        self.formatResult(e.itemData.name);
                    };
                    _this.addCustomFormat = function () {
                        if (self.formatResult() && self.canAddCustomFormat()) {
                            self.customPatterns.push(self.formatResult());
                            self._updateFormatList();
                            self._scrollToBottom();
                            actions && actions.saveCustomPattern(self.currentType(), self.formatResult());
                            self._updateSelection(self.patternList().length - 1);
                            self.canAddCustomFormat(false);
                        }
                    };
                    _this.removeCustomFormat = function (data) {
                        var currentSelection = self.selectedFormats()[0];
                        var patternList = self.patternList();
                        var removedItemIndex = patternList.map(function (item) { return item.name; }).indexOf(data.name);
                        self.customPatterns.splice(self.customPatterns.indexOf(data.name), 1);
                        self._updateFormatList();
                        actions && actions.removeCustomPattern(self.currentType(), data.name);
                        if (currentSelection.name === data.name) {
                            self._updateSelection(removedItemIndex === (patternList.length - 1) ? (self.patternList().length - 1) : removedItemIndex);
                        }
                        else {
                            self.selectedFormats(self.patternList().filter(function (item) { return item.name === currentSelection.name; }));
                        }
                    };
                    return _this;
                }
                FormatStringEditor.prototype.okAction = function () {
                    var result = this.isGeneralType ? this._getGeneralPreview('{0}') : this._wrapFormat();
                    this.option("value", result);
                    this.popupVisible(false);
                };
                FormatStringEditor.prototype._createMainPopupButtons = function () {
                    var self = this;
                    this.buttonItems = [
                        { toolbar: 'bottom', location: 'after', widget: 'dxButton', options: { text: DevExpress.Analytics.getLocalization('OK', DevExpress.Analytics.StringId.DataAccessBtnOK), onClick: function () { self.okAction(); } } },
                        { toolbar: 'bottom', location: 'after', widget: 'dxButton', options: { text: DevExpress.Analytics.getLocalization('Cancel', DevExpress.Analytics.StringId.DataAccessBtnCancel), onClick: function () { self.popupVisible(false); } } }
                    ];
                };
                FormatStringEditor.prototype._convertArray = function (array, canRemove) {
                    return array.map(function (item) { return { name: item, displayName: DevExpress.Analytics.getLocalization(item), canRemove: !!canRemove }; });
                };
                FormatStringEditor.prototype._scrollToBottom = function () {
                    var $scrollView = $(".dx-format-string .dx-format-string-formats").find(".dx-scrollview").filter(":visible");
                    var scrollViewInstance = DevExpress.ui.dxScrollView["getInstance"]($scrollView.get(0));
                    scrollViewInstance && scrollViewInstance["scrollTo"] && scrollViewInstance["scrollTo"](scrollViewInstance["scrollHeight"]());
                };
                FormatStringEditor.prototype._updateFormatList = function () {
                    this.selectedFormats([]);
                    var currentTypeInfo = this._standardPatternSource[this.currentType()];
                    this.patternList(this._convertArray(currentTypeInfo.patterns).concat(this._convertArray(this.customPatterns, true)));
                };
                FormatStringEditor.prototype._updateSelection = function (selectedItemIndex) {
                    var currectFormat = this.patternList()[selectedItemIndex || 0];
                    if (currectFormat) {
                        this.selectedFormats([currectFormat]);
                        this.formatResult(currectFormat.name);
                    }
                };
                FormatStringEditor.prototype._updatePreview = function () {
                    var _this = this;
                    if (this.isGeneralType) {
                        this.previewString(this._getGeneralPreview(undefined));
                        return;
                    }
                    var category = this._standardPatternSource[this.currentType()];
                    var updatedPreviewPromise = this.updatePreview(category.value, category.type, this._wrapFormat());
                    this._lastUpdatePreviewPromise = updatedPreviewPromise;
                    updatedPreviewPromise
                        .done(function (previewString) {
                        if (_this._lastUpdatePreviewPromise === updatedPreviewPromise)
                            _this.previewString(previewString);
                    }).fail(function (error) {
                        if (_this._lastUpdatePreviewPromise === updatedPreviewPromise)
                            _this.previewString(Analytics.getLocalization("Preview string is not available", "ASPxReportsStringId.ReportDesigner_FormatStringEditor_PreviewNotAvailable_Text"));
                    });
                };
                FormatStringEditor.prototype._getGeneralPreview = function (value) {
                    if (value === void 0) { value = '###'; }
                    return this.formatPrefix() + value + this.formatSuffix();
                };
                FormatStringEditor.prototype._wrapFormat = function (format) {
                    var pattern = format || this.formatResult();
                    if (pattern && pattern.indexOf("{0:") !== -1) {
                        return pattern;
                    }
                    return pattern ? "{0:" + pattern + "}" : "";
                };
                FormatStringEditor.prototype._updateCanAddCustomFormat = function (newFormat) {
                    if (!newFormat) {
                        this.canAddCustomFormat(false);
                        return;
                    }
                    var canAddCustomFormat = true;
                    for (var name in this._standardPatternSource) {
                        canAddCustomFormat = this._standardPatternSource[name].patterns.indexOf(newFormat) === -1;
                        if (!canAddCustomFormat) {
                            break;
                        }
                    }
                    this.canAddCustomFormat(canAddCustomFormat ? this.customPatterns.indexOf(newFormat) === -1 : canAddCustomFormat);
                };
                FormatStringEditor.prototype._initEditor = function (formatStringValue) {
                    var _this = this;
                    if (!formatStringValue) {
                        this.setType({ itemData: this.types[0] });
                        return;
                    }
                    if (formatStringValue.indexOf("{0}") !== -1) {
                        this.currentType("General");
                        this.formatPrefix(formatStringValue.substring(0, formatStringValue.indexOf("{0}")));
                        this.formatSuffix(formatStringValue.substring(formatStringValue.indexOf("{0}") + 3));
                        return;
                    }
                    var startIndex = formatStringValue.indexOf("{0:"), closingBracketIndex = formatStringValue.indexOf("}", startIndex), formatPattern = formatStringValue.substring(startIndex + 3, closingBracketIndex), isFormatPatternFind;
                    var selectTypePatternPair = function () {
                        _this.currentType(name);
                        if (startIndex === 0 && closingBracketIndex === (formatStringValue.length - 1)) {
                            _this.selectedFormats(_this.patternList().filter(function (item) { return item.name === formatPattern; }));
                            _this.formatResult(formatPattern);
                            isFormatPatternFind = true;
                        }
                    };
                    for (var name in this._standardPatternSource) {
                        if (this._standardPatternSource[name].patterns.indexOf(formatPattern) !== -1) {
                            selectTypePatternPair();
                            break;
                        }
                        var customPatterns = this._customPatternSource[this._standardPatternSource[name].type];
                        if (customPatterns && customPatterns.indexOf(formatPattern) !== -1) {
                            selectTypePatternPair();
                            break;
                        }
                    }
                    if (!isFormatPatternFind) {
                        this.currentType(this.types[0].name);
                        this.selectedFormats([]);
                        this.formatResult(formatStringValue);
                    }
                };
                FormatStringEditor.prototype.updateInputText = function (propertyName, componentInstance) {
                    this[propertyName](componentInstance.option("text"));
                };
                FormatStringEditor.prototype.option = function (name, value) {
                    if (value !== void 0) {
                        if (ko.isObservable(this[name])) {
                            this[name](value);
                        }
                        else {
                            this[name] = value;
                        }
                    }
                    return ko.unwrap(this[name]);
                };
                FormatStringEditor.prototype.updatePreview = function (value, category, pattern) {
                    return $.Deferred().resolve(value || "preview string").promise();
                };
                Object.defineProperty(FormatStringEditor.prototype, "customPatterns", {
                    get: function () {
                        var currentTypeInfo = this._standardPatternSource[this.currentType()];
                        return this._customPatternSource[currentTypeInfo.type] = this._customPatternSource[currentTypeInfo.type] || [];
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(FormatStringEditor.prototype, "isGeneralType", {
                    get: function () {
                        return this.currentType() === "General";
                    },
                    enumerable: true,
                    configurable: true
                });
                FormatStringEditor.prototype.getDisplayText = function (key) {
                    return DevExpress.Analytics.getLocalization(this.localizationIdMap[key].text, this.localizationIdMap[key].localizationId);
                };
                FormatStringEditor.prototype.getPopupContainer = function (el) {
                    return $(el).closest(this.option("popupContainer"));
                };
                return FormatStringEditor;
            }(Analytics.Utils.Disposable));
            Widgets.FormatStringEditor = FormatStringEditor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers['dxFormatEditor'] = {
                init: function (element, valueAccessor) {
                    $(element).children().remove();
                    $(element).addClass("dx-popup-general");
                    var templateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate('dx-format-string'), $element = $(element).append(templateHtml), values = valueAccessor();
                    var formatEditor = new Widgets.FormatStringEditor(values.value, values['disabled'], values['standardPatterns'], values['customPatterns'] || DevExpress.Designer["Report"] && DevExpress.Designer["Report"]["formatStringEditorCustomSet"], values['actions'] || DevExpress.Designer["Report"] && DevExpress.Designer["Report"]["FormatStringService"].actions, values['rtl'], values['popupContainer']);
                    ko.applyBindings(formatEditor, $element.children()[0]);
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                        formatEditor.dispose();
                    });
                    return { controlsDescendantBindings: true };
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Internal;
            (function (Internal) {
                var dxPopupWithAutoHeight = (function (_super) {
                    __extends(dxPopupWithAutoHeight, _super);
                    function dxPopupWithAutoHeight(element, options) {
                        return _super.call(this, element, options) || this;
                    }
                    dxPopupWithAutoHeight.prototype._setContentHeight = function () {
                        this["_$popupContent"].css({
                            height: "100%"
                        });
                    };
                    return dxPopupWithAutoHeight;
                }(DevExpress.ui.dxPopup));
                Internal.dxPopupWithAutoHeight = dxPopupWithAutoHeight;
                DevExpress.registerComponent("dxPopupWithAutoHeight", dxPopupWithAutoHeight);
            })(Internal = Widgets.Internal || (Widgets.Internal = {}));
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function cloneHtmlBinding(data, element, allBindings, viewModel, bindingContext) {
                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                    data.dispose();
                });
                setTimeout(function () {
                    var isInitialized = false;
                    ko.computed({
                        read: function () {
                            if (!isInitialized && ko.bindingHandlers["html"].init) {
                                ko.bindingHandlers["html"].init(element, function () { return data.content; }, allBindings, viewModel, bindingContext);
                                isInitialized = true;
                            }
                            if (ko.bindingHandlers["html"].update) {
                                ko.bindingHandlers["html"].update(element, function () { return data.content; }, allBindings, viewModel, bindingContext);
                            }
                        },
                        disposeWhenNodeIsRemoved: element
                    });
                }, 1);
            }
            Internal.cloneHtmlBinding = cloneHtmlBinding;
            var HighlightEngine = (function (_super) {
                __extends(HighlightEngine, _super);
                function HighlightEngine(options) {
                    var _this = _super.call(this) || this;
                    _this._$spanProtect = $("<span>");
                    _this._$spanSearch = $("<span>").addClass('dx-datagrid-search-text');
                    _this.content = ko.observable("");
                    if (ko.isSubscribable(options.text)) {
                        _this._disposables.push(options.text.subscribe(function (newText) {
                            _this.content(_this._getHighlightContent(newText, ko.unwrap(options.textToSearch)));
                        }));
                    }
                    _this._disposables.push(options.textToSearch.subscribe(function (newFind) {
                        _this.content(_this._getHighlightContent(ko.unwrap(options.text), newFind));
                    }));
                    _this.content(_this._getHighlightContent(ko.unwrap(options.text), ko.unwrap(options.textToSearch)));
                    return _this;
                }
                HighlightEngine.prototype._getHighlightContent = function (text, textToSearch) {
                    var _this = this;
                    var searchPattern = textToSearch;
                    var result = text;
                    if (searchPattern) {
                        var match = Analytics.Utils.findMatchesInString(result, searchPattern);
                        if (match) {
                            var newResult = "", curIndex = 0, subString = result;
                            match.forEach(function (item, index) {
                                var itemIndex = subString.indexOf(item);
                                var textBeforeMath = result.substr(curIndex, itemIndex);
                                subString = subString.substr(itemIndex + item.length);
                                if (textBeforeMath) {
                                    _this._$spanProtect.text(textBeforeMath);
                                    newResult += _this._$spanProtect[0].outerHTML;
                                }
                                _this._$spanSearch.text(item);
                                newResult += _this._$spanSearch[0].outerHTML;
                                curIndex = result.length - subString.length;
                                if (index === match.length - 1) {
                                    if (subString) {
                                        _this._$spanProtect.text(subString);
                                        newResult += _this._$spanProtect[0].outerHTML;
                                    }
                                }
                            });
                            return newResult;
                        }
                    }
                    this._$spanProtect.text(result);
                    result = this._$spanProtect[0].outerHTML;
                    return result;
                };
                return HighlightEngine;
            }(Analytics.Utils.Disposable));
            Internal.HighlightEngine = HighlightEngine;
            ko.bindingHandlers["searchHighlighting"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    cloneHtmlBinding(new HighlightEngine(valueAccessor()), element, allBindings, viewModel, bindingContext);
                }
            };
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers['treelist'] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var treeListViewModel = null;
                    var childContext = null;
                    var callback = null;
                    var values = valueAccessor(), options = ko.unwrap(values), pathArray, updateScrollBar = function () {
                        var $scrollView = $(element).closest(".dx-scrollview");
                        var scrollView = DevExpress.ui.dxScrollView["getInstance"]($scrollView.get(0));
                        scrollView && scrollView["update"]();
                        if (options.onItemsVisibilityChanged) {
                            options.onItemsVisibilityChanged();
                        }
                    }, updateTreeList = function (options) {
                        pathArray && pathArray.dispose();
                        options.treeListController = options.treeListController ? options.treeListController : new Widgets.TreeListController();
                        if (!options.treeListController.dragDropHandler) {
                            options.treeListController.dragDropHandler = bindingContext.$root.fieldDragHandler;
                        }
                        options.itemsProvider = ko.unwrap(options.itemsProvider);
                        options.pageSize = options.pageSize || -1;
                        treeListViewModel && treeListViewModel.dispose();
                        if (!options || !options.itemsProvider)
                            return;
                        if (!options.rtl) {
                            options.rtl = $(element).closest('.dx-rtl').length > 0;
                        }
                        pathArray = ko.computed(function () {
                            var result = ko.unwrap(options.path);
                            if (!Array.isArray(result)) {
                                return !!result ? result.split('.') : [];
                            }
                            return result;
                        });
                        treeListViewModel = new Widgets.TreeListRootItemViewModel(options, pathArray, updateScrollBar, options.rtl);
                        if (options.expandRootItems) {
                            treeListViewModel.items().forEach(function (item) { return item.toggleCollapsed(); });
                        }
                        var templateHtml = options.templateHtml || DevExpress.Analytics.Widgets.Internal.getTemplate('dx-treelist'), $element = $(element).html(templateHtml);
                        childContext = bindingContext.createChildContext(treeListViewModel);
                        ko.applyBindings(childContext, $element.children()[0]);
                        callback && ko.utils.domNodeDisposal.removeDisposeCallback(element, callback);
                        callback = function () {
                            treeListViewModel && treeListViewModel.dispose();
                            treeListViewModel = null;
                            subscription && subscription.dispose();
                            pathArray && pathArray.dispose();
                            callback = null;
                            ko.utils.domNodeDisposal.removeDisposeCallback(element, callback);
                        };
                        ko.utils.domNodeDisposal.addDisposeCallback(element, callback);
                    };
                    updateTreeList($.extend({}, options));
                    var subscription = null;
                    if (ko.isSubscribable(values)) {
                        subscription = values.subscribe(function (newValue) {
                            newValue && updateTreeList($.extend({}, newValue));
                        });
                    }
                    else if (ko.isSubscribable(values.itemsProvider)) {
                        subscription = values.itemsProvider.subscribe(function (newValue) {
                            newValue && updateTreeList($.extend({}, values));
                        });
                    }
                    return { controlsDescendantBindings: true };
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Utils;
        (function (Utils) {
            var DisplayExpressionConverter = (function (_super) {
                __extends(DisplayExpressionConverter, _super);
                function DisplayExpressionConverter() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return DisplayExpressionConverter;
            }(DevExpress.Analytics.Utils.DisplayExpressionConverter));
            Utils.DisplayExpressionConverter = DisplayExpressionConverter;
            var HighlightEngine = (function (_super) {
                __extends(HighlightEngine, _super);
                function HighlightEngine() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return HighlightEngine;
            }(DevExpress.Analytics.Internal.HighlightEngine));
            Utils.HighlightEngine = HighlightEngine;
            var Disposable = (function (_super) {
                __extends(Disposable, _super);
                function Disposable() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return Disposable;
            }(DevExpress.Analytics.Utils.Disposable));
            Utils.Disposable = Disposable;
            Utils.integerValueConverter = DevExpress.Analytics.Utils.integerValueConverter;
            Utils.floatValueConverter = DevExpress.Analytics.Utils.floatValueConverter;
            Utils.setCursorInFunctionParameter = DevExpress.Analytics.Utils.setCursorInFunctionParameter;
            Utils.isList = DevExpress.Analytics.Utils.isList;
            ;
            ;
            ;
            ;
            ;
            ;
        })(Utils = JS.Utils || (JS.Utils = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "DisplayExpressionConverter");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Internal, "HighlightEngine");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "Disposable");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "integerValueConverter");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "floatValueConverter");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "setCursorInFunctionParameter");
DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Utils, DevExpress.Analytics.Utils, "isList");
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Widgets;
        (function (Widgets) {
            ;
            ;
            ;
            var PathRequest = (function (_super) {
                __extends(PathRequest, _super);
                function PathRequest() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return PathRequest;
            }(DevExpress.Analytics.Utils.PathRequest));
            Widgets.PathRequest = PathRequest;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Utils, "PathRequest");
            Widgets.ace = DevExpress.Analytics.Widgets.ace;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "ace");
            Widgets.aceAvailable = DevExpress.Analytics.Widgets.aceAvailable;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "aceAvailable");
            var CodeCompletor = (function (_super) {
                __extends(CodeCompletor, _super);
                function CodeCompletor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CodeCompletor;
            }(DevExpress.Analytics.Widgets.CodeCompletor));
            Widgets.CodeCompletor = CodeCompletor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "CodeCompletor");
            Widgets.createFunctionCompletion = DevExpress.Analytics.Widgets.createFunctionCompletion;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "createFunctionCompletion");
            Widgets.functionDisplay = DevExpress.Analytics.Widgets.Internal.functionDisplay;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "functionDisplay");
            Widgets.operatorNames = DevExpress.Analytics.Widgets.Internal.operatorNames;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "operatorNames");
            var Tools = (function (_super) {
                __extends(Tools, _super);
                function Tools() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return Tools;
            }(DevExpress.Analytics.Widgets.Internal.Tools));
            Widgets.Tools = Tools;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "Tools");
            var ExpressionEditorTreeListController = (function (_super) {
                __extends(ExpressionEditorTreeListController, _super);
                function ExpressionEditorTreeListController() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ExpressionEditorTreeListController;
            }(DevExpress.Analytics.Widgets.ExpressionEditorTreeListController));
            Widgets.ExpressionEditorTreeListController = ExpressionEditorTreeListController;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "ExpressionEditorTreeListController");
            var ExpressionEditorParametersTreeListController = (function (_super) {
                __extends(ExpressionEditorParametersTreeListController, _super);
                function ExpressionEditorParametersTreeListController() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ExpressionEditorParametersTreeListController;
            }(DevExpress.Analytics.Widgets.ExpressionEditorParametersTreeListController));
            Widgets.ExpressionEditorParametersTreeListController = ExpressionEditorParametersTreeListController;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "ExpressionEditorParametersTreeListController");
            Widgets.wrapExpressionValue = DevExpress.Analytics.Widgets.wrapExpressionValue;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "wrapExpressionValue");
            var ExpressionEditor = (function (_super) {
                __extends(ExpressionEditor, _super);
                function ExpressionEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ExpressionEditor;
            }(DevExpress.Analytics.Widgets.ExpressionEditor));
            Widgets.ExpressionEditor = ExpressionEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "ExpressionEditor");
            var FilterEditorAddOn = (function (_super) {
                __extends(FilterEditorAddOn, _super);
                function FilterEditorAddOn() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterEditorAddOn;
            }(DevExpress.Analytics.Widgets.Internal.FilterEditorAddOn));
            Widgets.FilterEditorAddOn = FilterEditorAddOn;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "FilterEditorAddOn");
            var FilterEditorCodeCompletor = (function (_super) {
                __extends(FilterEditorCodeCompletor, _super);
                function FilterEditorCodeCompletor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterEditorCodeCompletor;
            }(DevExpress.Analytics.Widgets.Internal.FilterEditorCodeCompletor));
            Widgets.FilterEditorCodeCompletor = FilterEditorCodeCompletor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "FilterEditorCodeCompletor");
            Widgets.initDisplayText = DevExpress.Analytics.Widgets.initDisplayText;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "initDisplayText");
            var FilterEditorHelper = (function (_super) {
                __extends(FilterEditorHelper, _super);
                function FilterEditorHelper() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterEditorHelper;
            }(DevExpress.Analytics.Widgets.FilterEditorHelper));
            Widgets.FilterEditorHelper = FilterEditorHelper;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FilterEditorHelper");
            Widgets.DefaultFilterEditorHelper = DevExpress.Analytics.Widgets.DefaultFilterEditorHelper;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "DefaultFilterEditorHelper");
            var FilterEditorSerializer = (function (_super) {
                __extends(FilterEditorSerializer, _super);
                function FilterEditorSerializer() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterEditorSerializer;
            }(DevExpress.Analytics.Widgets.Internal.FilterEditorSerializer));
            Widgets.FilterEditorSerializer = FilterEditorSerializer;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "FilterEditorSerializer");
            var FilterEditorTreeListController = (function (_super) {
                __extends(FilterEditorTreeListController, _super);
                function FilterEditorTreeListController() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterEditorTreeListController;
            }(DevExpress.Analytics.Widgets.FilterEditorTreeListController));
            Widgets.FilterEditorTreeListController = FilterEditorTreeListController;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FilterEditorTreeListController");
            Widgets.CriteriaSurfaceValidatorState = DevExpress.Analytics.Widgets.Internal.CriteriaSurfaceValidatorState;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "CriteriaSurfaceValidatorState");
            var CriteriaSurfaceValidator = (function (_super) {
                __extends(CriteriaSurfaceValidator, _super);
                function CriteriaSurfaceValidator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CriteriaSurfaceValidator;
            }(DevExpress.Analytics.Widgets.Internal.CriteriaSurfaceValidator));
            Widgets.CriteriaSurfaceValidator = CriteriaSurfaceValidator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "CriteriaSurfaceValidator");
            var AggregateOperandSurface = (function (_super) {
                __extends(AggregateOperandSurface, _super);
                function AggregateOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return AggregateOperandSurface;
            }(DevExpress.Analytics.Widgets.AggregateOperandSurface));
            Widgets.AggregateOperandSurface = AggregateOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "AggregateOperandSurface");
            var BetweenOperandSurface = (function (_super) {
                __extends(BetweenOperandSurface, _super);
                function BetweenOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return BetweenOperandSurface;
            }(DevExpress.Analytics.Widgets.BetweenOperandSurface));
            Widgets.BetweenOperandSurface = BetweenOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "BetweenOperandSurface");
            var BinaryOperandSurface = (function (_super) {
                __extends(BinaryOperandSurface, _super);
                function BinaryOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return BinaryOperandSurface;
            }(DevExpress.Analytics.Widgets.BinaryOperandSurface));
            Widgets.BinaryOperandSurface = BinaryOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "BinaryOperandSurface");
            var CriteriaOperatorSurface = (function (_super) {
                __extends(CriteriaOperatorSurface, _super);
                function CriteriaOperatorSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CriteriaOperatorSurface;
            }(DevExpress.Analytics.Widgets.CriteriaOperatorSurface));
            Widgets.CriteriaOperatorSurface = CriteriaOperatorSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "CriteriaOperatorSurface");
            var FunctionOperandSurface = (function (_super) {
                __extends(FunctionOperandSurface, _super);
                function FunctionOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FunctionOperandSurface;
            }(DevExpress.Analytics.Widgets.FunctionOperandSurface));
            Widgets.FunctionOperandSurface = FunctionOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FunctionOperandSurface");
            var GroupOperandSurface = (function (_super) {
                __extends(GroupOperandSurface, _super);
                function GroupOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return GroupOperandSurface;
            }(DevExpress.Analytics.Widgets.GroupOperandSurface));
            Widgets.GroupOperandSurface = GroupOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "GroupOperandSurface");
            var InOperandSurface = (function (_super) {
                __extends(InOperandSurface, _super);
                function InOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return InOperandSurface;
            }(DevExpress.Analytics.Widgets.InOperandSurface));
            Widgets.InOperandSurface = InOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "InOperandSurface");
            var OperandParameterSurface = (function (_super) {
                __extends(OperandParameterSurface, _super);
                function OperandParameterSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandParameterSurface;
            }(DevExpress.Analytics.Widgets.OperandParameterSurface));
            Widgets.OperandParameterSurface = OperandParameterSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "OperandParameterSurface");
            var OperandPropertySurface = (function (_super) {
                __extends(OperandPropertySurface, _super);
                function OperandPropertySurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandPropertySurface;
            }(DevExpress.Analytics.Widgets.OperandPropertySurface));
            Widgets.OperandPropertySurface = OperandPropertySurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "OperandPropertySurface");
            var OperandSurfaceBase = (function (_super) {
                __extends(OperandSurfaceBase, _super);
                function OperandSurfaceBase() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandSurfaceBase;
            }(DevExpress.Analytics.Widgets.OperandSurfaceBase));
            Widgets.OperandSurfaceBase = OperandSurfaceBase;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "OperandSurfaceBase");
            var OperandValueSurface = (function (_super) {
                __extends(OperandValueSurface, _super);
                function OperandValueSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandValueSurface;
            }(DevExpress.Analytics.Widgets.OperandValueSurface));
            Widgets.OperandValueSurface = OperandValueSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "OperandValueSurface");
            var UnaryOperandSurface = (function (_super) {
                __extends(UnaryOperandSurface, _super);
                function UnaryOperandSurface() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return UnaryOperandSurface;
            }(DevExpress.Analytics.Widgets.UnaryOperandSurface));
            Widgets.UnaryOperandSurface = UnaryOperandSurface;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "UnaryOperandSurface");
            var FilterEditor = (function (_super) {
                __extends(FilterEditor, _super);
                function FilterEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterEditor;
            }(DevExpress.Analytics.Widgets.FilterEditor));
            Widgets.FilterEditor = FilterEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FilterEditor");
            var FilterStringOptions = (function (_super) {
                __extends(FilterStringOptions, _super);
                function FilterStringOptions() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FilterStringOptions;
            }(DevExpress.Analytics.Widgets.FilterStringOptions));
            Widgets.FilterStringOptions = FilterStringOptions;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FilterStringOptions");
            var FormatStringEditor = (function (_super) {
                __extends(FormatStringEditor, _super);
                function FormatStringEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FormatStringEditor;
            }(DevExpress.Analytics.Widgets.FormatStringEditor));
            Widgets.FormatStringEditor = FormatStringEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "FormatStringEditor");
            Widgets.formatStringStandardPatterns = DevExpress.Analytics.Widgets.Internal.formatStringStandardPatterns;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "formatStringStandardPatterns");
            var dxPopupWithAutoHeight = (function (_super) {
                __extends(dxPopupWithAutoHeight, _super);
                function dxPopupWithAutoHeight() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return dxPopupWithAutoHeight;
            }(DevExpress.Analytics.Widgets.Internal.dxPopupWithAutoHeight));
            Widgets.dxPopupWithAutoHeight = dxPopupWithAutoHeight;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "dxPopupWithAutoHeight");
            var ValueEditorHelper = (function (_super) {
                __extends(ValueEditorHelper, _super);
                function ValueEditorHelper() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ValueEditorHelper;
            }(DevExpress.Analytics.Widgets.Internal.ValueEditorHelper));
            Widgets.ValueEditorHelper = ValueEditorHelper;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets.Internal, "ValueEditorHelper");
            var TreeListController = (function (_super) {
                __extends(TreeListController, _super);
                function TreeListController() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return TreeListController;
            }(DevExpress.Analytics.Widgets.TreeListController));
            Widgets.TreeListController = TreeListController;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "TreeListController");
            Widgets.treeListEditAction = DevExpress.Analytics.Widgets.treeListEditAction;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "treeListEditAction");
            var TreeListItemViewModel = (function (_super) {
                __extends(TreeListItemViewModel, _super);
                function TreeListItemViewModel() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return TreeListItemViewModel;
            }(DevExpress.Analytics.Widgets.TreeListItemViewModel));
            Widgets.TreeListItemViewModel = TreeListItemViewModel;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "TreeListItemViewModel");
            var TreeListRootItemViewModel = (function (_super) {
                __extends(TreeListRootItemViewModel, _super);
                function TreeListRootItemViewModel() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return TreeListRootItemViewModel;
            }(DevExpress.Analytics.Widgets.TreeListRootItemViewModel));
            Widgets.TreeListRootItemViewModel = TreeListRootItemViewModel;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Widgets, DevExpress.Analytics.Widgets, "TreeListRootItemViewModel");
        })(Widgets = JS.Widgets || (JS.Widgets = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var JS;
    (function (JS) {
        var Data;
        (function (Data) {
            Data.Aggregate = DevExpress.Analytics.Criteria.Aggregate;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "Aggregate");
            var AggregateOperand = (function (_super) {
                __extends(AggregateOperand, _super);
                function AggregateOperand() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return AggregateOperand;
            }(DevExpress.Analytics.Criteria.AggregateOperand));
            Data.AggregateOperand = AggregateOperand;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "AggregateOperand");
            var BetweenOperator = (function (_super) {
                __extends(BetweenOperator, _super);
                function BetweenOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return BetweenOperator;
            }(DevExpress.Analytics.Criteria.BetweenOperator));
            Data.BetweenOperator = BetweenOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "BetweenOperator");
            Data.BinaryOperatorType = DevExpress.Analytics.Criteria.BinaryOperatorType;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "BinaryOperatorType");
            var BinaryOperator = (function (_super) {
                __extends(BinaryOperator, _super);
                function BinaryOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return BinaryOperator;
            }(DevExpress.Analytics.Criteria.BinaryOperator));
            Data.BinaryOperator = BinaryOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "BinaryOperator");
            var ConstantValue = (function (_super) {
                __extends(ConstantValue, _super);
                function ConstantValue() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ConstantValue;
            }(DevExpress.Analytics.Criteria.ConstantValue));
            Data.ConstantValue = ConstantValue;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "ConstantValue");
            var CriteriaOperator = (function (_super) {
                __extends(CriteriaOperator, _super);
                function CriteriaOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CriteriaOperator;
            }(DevExpress.Analytics.Criteria.CriteriaOperator));
            Data.CriteriaOperator = CriteriaOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "CriteriaOperator");
            Data.FunctionOperatorType = DevExpress.Analytics.Criteria.FunctionOperatorType;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "FunctionOperatorType");
            var FunctionOperator = (function (_super) {
                __extends(FunctionOperator, _super);
                function FunctionOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FunctionOperator;
            }(DevExpress.Analytics.Criteria.FunctionOperator));
            Data.FunctionOperator = FunctionOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "FunctionOperator");
            Data.GroupOperatorType = DevExpress.Analytics.Criteria.GroupOperatorType;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "GroupOperatorType");
            var GroupOperator = (function (_super) {
                __extends(GroupOperator, _super);
                function GroupOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return GroupOperator;
            }(DevExpress.Analytics.Criteria.GroupOperator));
            Data.GroupOperator = GroupOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "GroupOperator");
            var InOperator = (function (_super) {
                __extends(InOperator, _super);
                function InOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return InOperator;
            }(DevExpress.Analytics.Criteria.InOperator));
            Data.InOperator = InOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "InOperator");
            var JoinOperand = (function (_super) {
                __extends(JoinOperand, _super);
                function JoinOperand() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return JoinOperand;
            }(DevExpress.Analytics.Criteria.JoinOperand));
            Data.JoinOperand = JoinOperand;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "JoinOperand");
            var OperandParameter = (function (_super) {
                __extends(OperandParameter, _super);
                function OperandParameter() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandParameter;
            }(DevExpress.Analytics.Criteria.OperandParameter));
            Data.OperandParameter = OperandParameter;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "OperandParameter");
            var OperandProperty = (function (_super) {
                __extends(OperandProperty, _super);
                function OperandProperty() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandProperty;
            }(DevExpress.Analytics.Criteria.OperandProperty));
            Data.OperandProperty = OperandProperty;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "OperandProperty");
            Data.UnaryOperatorType = DevExpress.Analytics.Criteria.UnaryOperatorType;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "UnaryOperatorType");
            var UnaryOperator = (function (_super) {
                __extends(UnaryOperator, _super);
                function UnaryOperator() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return UnaryOperator;
            }(DevExpress.Analytics.Criteria.UnaryOperator));
            Data.UnaryOperator = UnaryOperator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "UnaryOperator");
            var OperandValue = (function (_super) {
                __extends(OperandValue, _super);
                function OperandValue() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return OperandValue;
            }(DevExpress.Analytics.Criteria.OperandValue));
            Data.OperandValue = OperandValue;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "OperandValue");
            var CriteriaOperatorPreprocessor = (function (_super) {
                __extends(CriteriaOperatorPreprocessor, _super);
                function CriteriaOperatorPreprocessor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return CriteriaOperatorPreprocessor;
            }(DevExpress.Analytics.Criteria.CriteriaOperatorPreprocessor));
            Data.CriteriaOperatorPreprocessor = CriteriaOperatorPreprocessor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "CriteriaOperatorPreprocessor");
            Data.criteriaCreator = DevExpress.Analytics.Criteria.criteriaCreator;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria, "criteriaCreator");
            Data.operatorTokens = DevExpress.Analytics.Criteria.Utils.operatorTokens;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria.Utils, "operatorTokens");
            Data.criteriaForEach = DevExpress.Analytics.Criteria.Utils.criteriaForEach;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.JS.Data, DevExpress.Analytics.Criteria.Utils, "criteriaForEach");
        })(Data = JS.Data || (JS.Data = {}));
    })(JS = DevExpress.JS || (DevExpress.JS = {}));
})(DevExpress || (DevExpress = {}));

/* parser generated by jison 0.4.18 */
/*
  Returns a Parser object of the following structure:

  Parser: {
    yy: {}
  }

  Parser.prototype: {
    yy: {},
    trace: function(),
    symbols_: {associative list: name ==> number},
    terminals_: {associative list: number ==> name},
    productions_: [...],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),
    table: [...],
    defaultActions: {...},
    parseError: function(str, hash),
    parse: function(input),

    lexer: {
        EOF: 1,
        parseError: function(str, hash),
        setInput: function(input),
        input: function(),
        unput: function(str),
        more: function(),
        less: function(n),
        pastInput: function(),
        upcomingInput: function(),
        showPosition: function(),
        test_match: function(regex_match_array, rule_index),
        next: function(),
        lex: function(),
        begin: function(condition),
        popState: function(),
        _currentRules: function(),
        topState: function(),
        pushState: function(condition),

        options: {
            ranges: boolean           (optional: true ==> token location info will include a .range[] member)
            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)
            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)
        },

        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),
        rules: [...],
        conditions: {associative list: name ==> set},
    }
  }


  token location info (@$, _$, etc.): {
    first_line: n,
    last_line: n,
    first_column: n,
    last_column: n,
    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)
  }


  the parseError function receives a 'hash' object with these members for lexer and parser errors: {
    text:        (matched text)
    token:       (the produced terminal token, if any)
    line:        (yylineno)
  }
  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {
    loc:         (yylloc)
    expected:    (string describing the set of expected tokens)
    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)
  }
*/
var criteriaparser = (function(){
var o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,7],$V1=[1,6],$V2=[1,29],$V3=[1,8],$V4=[1,9],$V5=[1,10],$V6=[1,24],$V7=[1,11],$V8=[1,12],$V9=[1,13],$Va=[1,14],$Vb=[1,15],$Vc=[1,16],$Vd=[1,17],$Ve=[1,18],$Vf=[1,19],$Vg=[1,20],$Vh=[1,21],$Vi=[1,22],$Vj=[1,23],$Vk=[1,26],$Vl=[1,28],$Vm=[1,27],$Vn=[1,31],$Vo=[1,32],$Vp=[1,33],$Vq=[1,34],$Vr=[1,35],$Vs=[1,36],$Vt=[1,37],$Vu=[1,38],$Vv=[1,39],$Vw=[1,40],$Vx=[1,41],$Vy=[1,42],$Vz=[1,43],$VA=[1,44],$VB=[1,45],$VC=[1,46],$VD=[1,47],$VE=[1,48],$VF=[1,49],$VG=[1,50],$VH=[1,51],$VI=[5,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,51],$VJ=[5,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,50,51,52,54,55,56],$VK=[1,58],$VL=[5,14,15,16,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,51],$VM=[5,26,27,29,35,51],$VN=[1,111],$VO=[1,112],$VP=[1,106],$VQ=[1,108],$VR=[1,109],$VS=[1,107],$VT=[1,110],$VU=[5,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,36,51,59],$VV=[5,11,12,14,15,16,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,51],$VW=[5,18,19,24,25,26,27,29,30,35,51],$VX=[5,18,19,20,21,22,23,24,25,26,27,29,30,35,51],$VY=[29,35];
var parser = {trace: function trace () { },
yy: {},
symbols_: {"error":2,"expressions":3,"exp":4,"EOF":5,"const":6,"propertyWithAgg":7,"parameter":8,"*":9,"/":10,"+":11,"-":12,"%":13,"|":14,"&":15,"^":16,"~":17,"OP_EQ":18,"OP_NE":19,"OP_GT":20,"OP_LT":21,"OP_GE":22,"OP_LE":23,"OP_LIKE":24,"NOT":25,"AND":26,"OR":27,"(":28,")":29,"IS":30,"NULL":31,"OP_IN":32,"arguments":33,"OP_BETWEEN":34,",":35,"NAME_LATIN":36,"AGG_MIN":37,"AGG_MAX":38,"AGG_COUNT":39,"AGG_AVG":40,"AGG_SUM":41,"AGG_EXISTS":42,"AGG_SINGLE":43,"STRING":44,"NUMBER":45,"OBJECT":46,"BOOLEAN":47,"GUID":48,"property":49,"[":50,"]":51,".":52,"agg":53,"FIELD_END":54,"CH":55,"ESC_CH":56,"FIELD_START":57,"paramName":58,"NAME_SOFT":59,"?":60,"commaseparated":61,"$accept":0,"$end":1},
terminals_: {2:"error",5:"EOF",9:"*",10:"/",11:"+",12:"-",13:"%",14:"|",15:"&",16:"^",17:"~",18:"OP_EQ",19:"OP_NE",20:"OP_GT",21:"OP_LT",22:"OP_GE",23:"OP_LE",24:"OP_LIKE",25:"NOT",26:"AND",27:"OR",28:"(",29:")",30:"IS",31:"NULL",32:"OP_IN",34:"OP_BETWEEN",35:",",36:"NAME_LATIN",37:"AGG_MIN",38:"AGG_MAX",39:"AGG_COUNT",40:"AGG_AVG",41:"AGG_SUM",42:"AGG_EXISTS",43:"AGG_SINGLE",44:"STRING",45:"NUMBER",46:"OBJECT",47:"BOOLEAN",48:"GUID",50:"[",51:"]",52:".",54:"FIELD_END",55:"CH",56:"ESC_CH",57:"FIELD_START",59:"NAME_SOFT",60:"?"},
productions_: [0,[3,2],[4,1],[4,1],[4,1],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,4],[4,2],[4,3],[4,3],[4,3],[4,3],[4,4],[4,3],[4,7],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[7,6],[7,5],[7,3],[7,4],[7,3],[7,1],[7,4],[53,3],[53,1],[53,3],[53,1],[53,4],[53,4],[53,3],[53,4],[53,4],[53,4],[49,2],[49,2],[49,2],[49,3],[49,3],[49,1],[49,1],[49,1],[58,1],[58,1],[58,2],[58,2],[8,2],[8,1],[33,2],[33,3],[61,1],[61,3]],
performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {
/* this == yyval */

var $0 = $$.length - 1;
switch (yystate) {
case 1:
 return $$[$0-1]; 
break;
case 2:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("const", { value: $$[$0] }); 
break;
case 3: case 4: case 40: case 41: case 42: case 43: case 44:
 this.$ = $$[$0]; 
break;
case 5:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Multiply }); 
break;
case 6:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Divide }); 
break;
case 7:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Plus }); 
break;
case 8:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Minus }); 
break;
case 9:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Modulo }); 
break;
case 10:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.BitwiseOr }); 
break;
case 11:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.BitwiseAnd }); 
break;
case 12:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.BitwiseXor }); 
break;
case 13:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.Minus, operator: $$[$0] }); 
break;
case 14:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.Plus, operator: $$[$0] }); 
break;
case 15:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.BitwiseNot, operator: $$[$0] }); 
break;
case 16:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Equal }); 
break;
case 17:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.NotEqual }); 
break;
case 18:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Greater }); 
break;
case 19:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Less }); 
break;
case 20:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.GreaterOrEqual }); 
break;
case 21:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.LessOrEqual }); 
break;
case 22:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("binary",  { left: $$[$0-2], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Like }); 
break;
case 23:

            this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { 
                operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.Not, 
                operator: DevExpress.Analytics.Criteria.criteriaCreator.process("binary", { left: $$[$0-3], right: $$[$0], operatorType: DevExpress.Analytics.Criteria.BinaryOperatorType.Like }) 
            });
        
break;
case 24:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.Not, operator: $$[$0] }); 
break;
case 25:
 this.$ = DevExpress.Analytics.Criteria.GroupOperator.combine(DevExpress.Analytics.Criteria.GroupOperatorType.And, [$$[$0-2], $$[$0]]); 
break;
case 26:
 this.$ = DevExpress.Analytics.Criteria.GroupOperator.combine(DevExpress.Analytics.Criteria.GroupOperatorType.Or, [$$[$0-2], $$[$0]]); 
break;
case 27: case 63: case 78:
 this.$ = $$[$0-1]; 
break;
case 28:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.IsNull, operator: $$[$0-2] }); 
break;
case 29:
 
            this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { 
                operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.Not,
                operator: DevExpress.Analytics.Criteria.criteriaCreator.process("unary", { operatorType: DevExpress.Analytics.Criteria.UnaryOperatorType.IsNull, operator: $$[$0-3] })
            }); 
        
break;
case 30:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("in", { criteriaOperator: $$[$0-2], operands: $$[$0] }); 
break;
case 31:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("between", { property: $$[$0-6], begin: $$[$0-3], end: $$[$0-1] }); 
break;
case 32:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType[$$[$0-1]] || $$[$0-1], operands: $$[$0] }); 
break;
case 33:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType.Min, operands: $$[$0] }); 
break;
case 34:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType.Max, operands: $$[$0] }); 
break;
case 35:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType["Count"] || "Count", operands: $$[$0] }); 
break;
case 36:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType["Avg"] || "Avg", operands: $$[$0] }); 
break;
case 37:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType["Sum"] || "Sum", operands: $$[$0] }); 
break;
case 38:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType["Exists"] || "Exists", operands: $$[$0] }); 
break;
case 39:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("function", { operatorType: DevExpress.Analytics.Criteria.FunctionOperatorType["Single"] || "Single", operands: $$[$0] }); 
break;
case 45:
 this.$ = null; 
break;
case 46:
 
            this.$ = DevExpress.Analytics.Criteria.JoinOperand.joinOrAggregate(
                DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: $$[$0-5].name, startColumn: $$[$0-5].col, startLine: $$[$0-5].line, originalPropertyLength: _$[$0-5].last_column - _$[$0-5].first_column + 1 }), 
                $$[$0-3], $$[$0].type, $$[$0].expr
            );
        
break;
case 47:
 
            this.$ = DevExpress.Analytics.Criteria.JoinOperand.joinOrAggregate(
                DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: $$[$0-4].name, startColumn: $$[$0-4].col, startLine: $$[$0-4].line, originalPropertyLength: _$[$0-4].last_column - _$[$0-4].first_column + 1 }), 
                null, $$[$0].type, $$[$0].expr
            );
        
break;
case 48:
 
            this.$ = DevExpress.Analytics.Criteria.JoinOperand.joinOrAggregate(
                DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: $$[$0-2].name, startColumn: $$[$0-2].col, startLine: $$[$0-2].line, originalPropertyLength: _$[$0-2].last_column - _$[$0-2].first_column }), 
                null, $$[$0].type, $$[$0].expr
            );
        
break;
case 49:
 
            this.$ = DevExpress.Analytics.Criteria.JoinOperand.joinOrAggregate(
                DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: $$[$0-3].name, startColumn: $$[$0-3].col, startLine: $$[$0-3].line, originalPropertyLength: _$[$0-3].last_column - _$[$0-3].first_column + 1 }), 
                $$[$0-1], DevExpress.Analytics.Criteria.Aggregate.Exists, null
            );
        
break;
case 50:
 
            this.$ = DevExpress.Analytics.Criteria.JoinOperand.joinOrAggregate(
                DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: $$[$0-2].name, startColumn: $$[$0-2].col, startLine: $$[$0-2].line, originalPropertyLength: _$[$0-2].last_column - _$[$0-2].first_column + 1 }), 
                null, DevExpress.Analytics.Criteria.Aggregate.Exists, null);
        
break;
case 51:
 
            this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: $$[$0].name, startColumn: $$[$0].col, startLine: $$[$0].line, originalPropertyLength: _$[$0].last_column - _$[$0].first_column });
        
break;
case 52:
 
            this.$ = DevExpress.Analytics.Criteria.JoinOperand.joinOrAggregate(
                DevExpress.Analytics.Criteria.criteriaCreator.process("property", { }), 
                null, $$[$0].type, $$[$0].expr
            ); 
        
break;
case 53:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Count  };  
break;
case 54:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Count };   
break;
case 55: case 56:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Exists }; 
break;
case 57:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Avg, expr: $$[$0-1] }; 
break;
case 58:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Sum, expr: $$[$0-1] }; 
break;
case 59:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Single, expr: DevExpress.Analytics.Criteria.criteriaCreator.process("property", { propertyName: "This" }) }; 
break;
case 60:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Single, expr: $$[$0-1] }; 
break;
case 61:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Min, expr: $$[$0-1] }; 
break;
case 62:
 this.$ = { type:  DevExpress.Analytics.Criteria.Aggregate.Max, expr: $$[$0-1] }; 
break;
case 64:
 this.$ = { name: $$[$0-1].name + $$[$0], line: $$[$0-1].line, col: $$[$0-1].col }; 
break;
case 65:
 this.$ = { name: $$[$0-1].name +$$[$0].substr(1), line: $$[$0-1].line, col: $$[$0-1].col }; 
break;
case 66:
 this.$ = { name: $$[$0-2].name + ".", line: $$[$0-2].line, col: $$[$0-2].col }; 
break;
case 67:
 this.$ = { name: $$[$0-2].name + "." + $$[$0], line: $$[$0-2].line, col: $$[$0-2].col }; 
break;
case 68:
 this.$ = { name: "", line: _$[$0].first_line - 1, col: _$[$0].first_column + 1 }; 
break;
case 69:
 this.$ = { name: $$[$0], line: _$[$0].first_line - 1, col: _$[$0].first_column }; 
break;
case 70:
 this.$ = { name: "^", line: _$[$0].first_line - 1, col: _$[$0].first_column }; 
break;
case 71: case 72:
 this.$ = $$[$0] 
break;
case 73: case 74:
 this.$ = $$[$0-1] + $$[$0] 
break;
case 75:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("parameter", { parameterName: $$[$0] }); 
break;
case 76:
 this.$ = DevExpress.Analytics.Criteria.criteriaCreator.process("value", { }); 
break;
case 77:
 this.$ = []; 
break;
case 79:
 this.$ = [$$[$0]]; 
break;
case 80:
 this.$ = $$[$0-2].concat($$[$0]); 
break;
}
},
table: [{3:1,4:2,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{1:[3]},{5:[1,30],9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,30:$VF,32:$VG,34:$VH},o($VI,[2,2]),o($VI,[2,3]),o($VI,[2,4]),{4:52,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:53,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:54,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:55,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:56,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},o($VJ,[2,69],{33:57,28:$VK}),{28:$VK,33:59},{28:$VK,33:60},{28:$VK,33:61},{28:$VK,33:62},{28:$VK,33:63},{28:$VK,33:64},{28:$VK,33:65},o($VI,[2,40]),o($VI,[2,41]),o($VI,[2,42]),o($VI,[2,43]),o($VI,[2,44]),o($VI,[2,45]),o($VI,[2,51],{50:[1,66],52:[1,67],54:[1,68],55:[1,69],56:[1,70]}),{51:[1,71]},o($VI,[2,76],{58:72,36:[1,73],59:[1,74]}),o($VJ,[2,68]),o($VJ,[2,70]),{1:[2,1]},{4:75,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:76,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:77,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:78,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:79,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:80,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:81,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:82,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:83,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:84,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:85,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:86,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:87,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:88,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:89,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{24:[1,90]},{4:91,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:92,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{25:[1,94],31:[1,93]},{28:$VK,33:95},{28:[1,96]},o($VI,[2,13]),o($VI,[2,14]),o($VL,[2,15],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr}),o($VM,[2,24],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,30:$VF,32:$VG,34:$VH}),{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,97],30:$VF,32:$VG,34:$VH},o($VI,[2,32]),{4:100,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,29:[1,98],31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm,61:99},o($VI,[2,33]),o($VI,[2,34]),o($VI,[2,35]),o($VI,[2,36]),o($VI,[2,37]),o($VI,[2,38]),o($VI,[2,39]),{4:101,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,51:[1,102],57:$Vl,60:$Vm},{36:[1,105],37:$VN,38:$VO,39:$VP,40:$VQ,41:$VR,42:$VS,43:$VT,53:103,57:[1,104]},o($VJ,[2,63]),o($VJ,[2,64]),o($VJ,[2,65]),{52:[1,113]},o($VI,[2,75],{36:[1,114],59:[1,115]}),o($VU,[2,71]),o($VU,[2,72]),o($VI,[2,5]),o($VI,[2,6]),o($VV,[2,7],{9:$Vn,10:$Vo,13:$Vr}),o($VV,[2,8],{9:$Vn,10:$Vo,13:$Vr}),o($VI,[2,9]),o([5,14,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,51],[2,10],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,15:$Vt,16:$Vu}),o($VL,[2,11],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr}),o([5,14,16,18,19,20,21,22,23,24,25,26,27,29,30,32,34,35,51],[2,12],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,15:$Vt}),o($VW,[2,16],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,20:$Vx,21:$Vy,22:$Vz,23:$VA,32:$VG,34:$VH}),o($VW,[2,17],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,20:$Vx,21:$Vy,22:$Vz,23:$VA,32:$VG,34:$VH}),o($VX,[2,18],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,32:$VG,34:$VH}),o($VX,[2,19],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,32:$VG,34:$VH}),o($VX,[2,20],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,32:$VG,34:$VH}),o($VX,[2,21],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,32:$VG,34:$VH}),o($VW,[2,22],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,20:$Vx,21:$Vy,22:$Vz,23:$VA,32:$VG,34:$VH}),{4:116,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},o($VM,[2,25],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,30:$VF,32:$VG,34:$VH}),o([5,27,29,35,51],[2,26],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,30:$VF,32:$VG,34:$VH}),o($VI,[2,28]),{31:[1,117]},o($VI,[2,30]),{4:118,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},o($VI,[2,27]),o($VI,[2,77]),{29:[1,119],35:[1,120]},o($VY,[2,79],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,30:$VF,32:$VG,34:$VH}),{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,30:$VF,32:$VG,34:$VH,51:[1,121]},o($VI,[2,50],{52:[1,122]}),o($VI,[2,48]),o($VJ,[2,66]),o($VJ,[2,67]),o($VI,[2,54],{28:[1,123]}),o($VI,[2,56],{28:[1,124]}),{28:[1,125]},{28:[1,126]},{28:[1,127]},{28:[1,128]},{28:[1,129]},{37:$VN,38:$VO,39:$VP,40:$VQ,41:$VR,42:$VS,43:$VT,53:130},o($VU,[2,73]),o($VU,[2,74]),o($VW,[2,23],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,20:$Vx,21:$Vy,22:$Vz,23:$VA,32:$VG,34:$VH}),o($VI,[2,29]),{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,30:$VF,32:$VG,34:$VH,35:[1,131]},o($VI,[2,78]),{4:132,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},o($VI,[2,49],{52:[1,133]}),{37:$VN,38:$VO,39:$VP,40:$VQ,41:$VR,42:$VS,43:$VT,53:134},{29:[1,135]},{29:[1,136]},{4:137,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:138,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:140,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,29:[1,139],31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:141,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},{4:142,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},o($VI,[2,52]),{4:143,6:3,7:4,8:5,11:$V0,12:$V1,16:$V2,17:$V3,25:$V4,28:$V5,31:$V6,36:$V7,37:$V8,38:$V9,39:$Va,40:$Vb,41:$Vc,42:$Vd,43:$Ve,44:$Vf,45:$Vg,46:$Vh,47:$Vi,48:$Vj,49:25,50:$Vk,57:$Vl,60:$Vm},o($VY,[2,80],{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,30:$VF,32:$VG,34:$VH}),{37:$VN,38:$VO,39:$VP,40:$VQ,41:$VR,42:$VS,43:$VT,53:144},o($VI,[2,47]),o($VI,[2,53]),o($VI,[2,55]),{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,145],30:$VF,32:$VG,34:$VH},{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,146],30:$VF,32:$VG,34:$VH},o($VI,[2,59]),{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,147],30:$VF,32:$VG,34:$VH},{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,148],30:$VF,32:$VG,34:$VH},{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,149],30:$VF,32:$VG,34:$VH},{9:$Vn,10:$Vo,11:$Vp,12:$Vq,13:$Vr,14:$Vs,15:$Vt,16:$Vu,18:$Vv,19:$Vw,20:$Vx,21:$Vy,22:$Vz,23:$VA,24:$VB,25:$VC,26:$VD,27:$VE,29:[1,150],30:$VF,32:$VG,34:$VH},o($VI,[2,46]),o($VI,[2,57]),o($VI,[2,58]),o($VI,[2,60]),o($VI,[2,61]),o($VI,[2,62]),o($VI,[2,31])],
defaultActions: {30:[2,1]},
parseError: function parseError (str, hash) {
    if (hash.recoverable) {
        this.trace(str);
    } else {
        var error = new Error(str);
        error.hash = hash;
        throw error;
    }
},
parse: function parse(input) {
    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
    var args = lstack.slice.call(arguments, 1);
    var lexer = Object.create(this.lexer);
    var sharedState = { yy: {} };
    for (var k in this.yy) {
        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {
            sharedState.yy[k] = this.yy[k];
        }
    }
    lexer.setInput(input, sharedState.yy);
    sharedState.yy.lexer = lexer;
    sharedState.yy.parser = this;
    if (typeof lexer.yylloc == 'undefined') {
        lexer.yylloc = {};
    }
    var yyloc = lexer.yylloc;
    lstack.push(yyloc);
    var ranges = lexer.options && lexer.options.ranges;
    if (typeof sharedState.yy.parseError === 'function') {
        this.parseError = sharedState.yy.parseError;
    } else {
        this.parseError = Object.getPrototypeOf(this).parseError;
    }
    function popStack(n) {
        stack.length = stack.length - 2 * n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }
    _token_stack:
        var lex = function () {
            var token;
            token = lexer.lex() || EOF;
            if (typeof token !== 'number') {
                token = self.symbols_[token] || token;
            }
            return token;
        };
    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
    while (true) {
        state = stack[stack.length - 1];
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol === null || typeof symbol == 'undefined') {
                symbol = lex();
            }
            action = table[state] && table[state][symbol];
        }
                    if (typeof action === 'undefined' || !action.length || !action[0]) {
                var errStr = '';
                expected = [];
                for (p in table[state]) {
                    if (this.terminals_[p] && p > TERROR) {
                        expected.push('\'' + this.terminals_[p] + '\'');
                    }
                }
                if (lexer.showPosition) {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\n' + lexer.showPosition() + '\nExpecting ' + expected.join(', ') + ', got \'' + (this.terminals_[symbol] || symbol) + '\'';
                } else {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\'' + (this.terminals_[symbol] || symbol) + '\'');
                }
                this.parseError(errStr, {
                    text: lexer.match,
                    token: this.terminals_[symbol] || symbol,
                    line: lexer.yylineno,
                    loc: yyloc,
                    expected: expected
                });
            }
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);
        }
        switch (action[0]) {
        case 1:
            stack.push(symbol);
            vstack.push(lexer.yytext);
            lstack.push(lexer.yylloc);
            stack.push(action[1]);
            symbol = null;
            if (!preErrorSymbol) {
                yyleng = lexer.yyleng;
                yytext = lexer.yytext;
                yylineno = lexer.yylineno;
                yyloc = lexer.yylloc;
                if (recovering > 0) {
                    recovering--;
                }
            } else {
                symbol = preErrorSymbol;
                preErrorSymbol = null;
            }
            break;
        case 2:
            len = this.productions_[action[1]][1];
            yyval.$ = vstack[vstack.length - len];
            yyval._$ = {
                first_line: lstack[lstack.length - (len || 1)].first_line,
                last_line: lstack[lstack.length - 1].last_line,
                first_column: lstack[lstack.length - (len || 1)].first_column,
                last_column: lstack[lstack.length - 1].last_column
            };
            if (ranges) {
                yyval._$.range = [
                    lstack[lstack.length - (len || 1)].range[0],
                    lstack[lstack.length - 1].range[1]
                ];
            }
            r = this.performAction.apply(yyval, [
                yytext,
                yyleng,
                yylineno,
                sharedState.yy,
                action[1],
                vstack,
                lstack
            ].concat(args));
            if (typeof r !== 'undefined') {
                return r;
            }
            if (len) {
                stack = stack.slice(0, -1 * len * 2);
                vstack = vstack.slice(0, -1 * len);
                lstack = lstack.slice(0, -1 * len);
            }
            stack.push(this.productions_[action[1]][0]);
            vstack.push(yyval.$);
            lstack.push(yyval._$);
            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
            stack.push(newState);
            break;
        case 3:
            return true;
        }
    }
    return true;
}};
/* generated by jison-lex 0.3.4 */
var lexer = (function(){
var lexer = ({

EOF:1,

parseError:function parseError(str, hash) {
        if (this.yy.parser) {
            this.yy.parser.parseError(str, hash);
        } else {
            throw new Error(str);
        }
    },

// resets the lexer, sets new input
setInput:function (input, yy) {
        this.yy = yy || this.yy || {};
        this._input = input;
        this._more = this._backtrack = this.done = false;
        this.yylineno = this.yyleng = 0;
        this.yytext = this.matched = this.match = '';
        this.conditionStack = ['INITIAL'];
        this.yylloc = {
            first_line: 1,
            first_column: 0,
            last_line: 1,
            last_column: 0
        };
        if (this.options.ranges) {
            this.yylloc.range = [0,0];
        }
        this.offset = 0;
        return this;
    },

// consumes and returns one char from the input
input:function () {
        var ch = this._input[0];
        this.yytext += ch;
        this.yyleng++;
        this.offset++;
        this.match += ch;
        this.matched += ch;
        var lines = ch.match(/(?:\r\n?|\n).*/g);
        if (lines) {
            this.yylineno++;
            this.yylloc.last_line++;
        } else {
            this.yylloc.last_column++;
        }
        if (this.options.ranges) {
            this.yylloc.range[1]++;
        }

        this._input = this._input.slice(1);
        return ch;
    },

// unshifts one char (or a string) into the input
unput:function (ch) {
        var len = ch.length;
        var lines = ch.split(/(?:\r\n?|\n)/g);

        this._input = ch + this._input;
        this.yytext = this.yytext.substr(0, this.yytext.length - len);
        //this.yyleng -= len;
        this.offset -= len;
        var oldLines = this.match.split(/(?:\r\n?|\n)/g);
        this.match = this.match.substr(0, this.match.length - 1);
        this.matched = this.matched.substr(0, this.matched.length - 1);

        if (lines.length - 1) {
            this.yylineno -= lines.length - 1;
        }
        var r = this.yylloc.range;

        this.yylloc = {
            first_line: this.yylloc.first_line,
            last_line: this.yylineno + 1,
            first_column: this.yylloc.first_column,
            last_column: lines ?
                (lines.length === oldLines.length ? this.yylloc.first_column : 0)
                 + oldLines[oldLines.length - lines.length].length - lines[0].length :
              this.yylloc.first_column - len
        };

        if (this.options.ranges) {
            this.yylloc.range = [r[0], r[0] + this.yyleng - len];
        }
        this.yyleng = this.yytext.length;
        return this;
    },

// When called from action, caches matched text and appends it on next action
more:function () {
        this._more = true;
        return this;
    },

// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.
reject:function () {
        if (this.options.backtrack_lexer) {
            this._backtrack = true;
        } else {
            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n' + this.showPosition(), {
                text: "",
                token: null,
                line: this.yylineno
            });

        }
        return this;
    },

// retain first n characters of the match
less:function (n) {
        this.unput(this.match.slice(n));
    },

// displays already matched input, i.e. for error messages
pastInput:function () {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\n/g, "");
    },

// displays upcoming input, i.e. for error messages
upcomingInput:function () {
        var next = this.match;
        if (next.length < 20) {
            next += this._input.substr(0, 20-next.length);
        }
        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\n/g, "");
    },

// displays the character position where the lexing error occurred, i.e. for error messages
showPosition:function () {
        var pre = this.pastInput();
        var c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c + "^";
    },

// test the lexed token: return FALSE when not a match, otherwise return token
test_match:function(match, indexed_rule) {
        var token,
            lines,
            backup;

        if (this.options.backtrack_lexer) {
            // save context
            backup = {
                yylineno: this.yylineno,
                yylloc: {
                    first_line: this.yylloc.first_line,
                    last_line: this.last_line,
                    first_column: this.yylloc.first_column,
                    last_column: this.yylloc.last_column
                },
                yytext: this.yytext,
                match: this.match,
                matches: this.matches,
                matched: this.matched,
                yyleng: this.yyleng,
                offset: this.offset,
                _more: this._more,
                _input: this._input,
                yy: this.yy,
                conditionStack: this.conditionStack.slice(0),
                done: this.done
            };
            if (this.options.ranges) {
                backup.yylloc.range = this.yylloc.range.slice(0);
            }
        }

        lines = match[0].match(/(?:\r\n?|\n).*/g);
        if (lines) {
            this.yylineno += lines.length;
        }
        this.yylloc = {
            first_line: this.yylloc.last_line,
            last_line: this.yylineno + 1,
            first_column: this.yylloc.last_column,
            last_column: lines ?
                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\r?\n?/)[0].length :
                         this.yylloc.last_column + match[0].length
        };
        this.yytext += match[0];
        this.match += match[0];
        this.matches = match;
        this.yyleng = this.yytext.length;
        if (this.options.ranges) {
            this.yylloc.range = [this.offset, this.offset += this.yyleng];
        }
        this._more = false;
        this._backtrack = false;
        this._input = this._input.slice(match[0].length);
        this.matched += match[0];
        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);
        if (this.done && this._input) {
            this.done = false;
        }
        if (token) {
            return token;
        } else if (this._backtrack) {
            // recover context
            for (var k in backup) {
                this[k] = backup[k];
            }
            return false; // rule action called reject() implying the next rule should be tested instead.
        }
        return false;
    },

// return next match in input
next:function () {
        if (this.done) {
            return this.EOF;
        }
        if (!this._input) {
            this.done = true;
        }

        var token,
            match,
            tempMatch,
            index;
        if (!this._more) {
            this.yytext = '';
            this.match = '';
        }
        var rules = this._currentRules();
        for (var i = 0; i < rules.length; i++) {
            tempMatch = this._input.match(this.rules[rules[i]]);
            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {
                match = tempMatch;
                index = i;
                if (this.options.backtrack_lexer) {
                    token = this.test_match(tempMatch, rules[i]);
                    if (token !== false) {
                        return token;
                    } else if (this._backtrack) {
                        match = false;
                        continue; // rule action called reject() implying a rule MISmatch.
                    } else {
                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)
                        return false;
                    }
                } else if (!this.options.flex) {
                    break;
                }
            }
        }
        if (match) {
            token = this.test_match(match, rules[index]);
            if (token !== false) {
                return token;
            }
            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)
            return false;
        }
        if (this._input === "") {
            return this.EOF;
        } else {
            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\n' + this.showPosition(), {
                text: "",
                token: null,
                line: this.yylineno
            });
        }
    },

// return next match that has a token
lex:function lex () {
        var r = this.next();
        if (r) {
            return r;
        } else {
            return this.lex();
        }
    },

// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)
begin:function begin (condition) {
        this.conditionStack.push(condition);
    },

// pop the previously active lexer condition state off the condition stack
popState:function popState () {
        var n = this.conditionStack.length - 1;
        if (n > 0) {
            return this.conditionStack.pop();
        } else {
            return this.conditionStack[0];
        }
    },

// produce the lexer rule set which is active for the currently active lexer condition state
_currentRules:function _currentRules () {
        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {
            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
        } else {
            return this.conditions["INITIAL"].rules;
        }
    },

// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available
topState:function topState (n) {
        n = this.conditionStack.length - 1 - Math.abs(n || 0);
        if (n >= 0) {
            return this.conditionStack[n];
        } else {
            return "INITIAL";
        }
    },

// alias for begin(condition)
pushState:function pushState (condition) {
        this.begin(condition);
    },

// return the number of states currently on the stack
stateStackSize:function stateStackSize() {
        return this.conditionStack.length;
    },
options: {"case-insensitive":true},
performAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {
var YYSTATE=YY_START;
switch($avoiding_name_collisions) {
case 0: this.begin('INITIAL'); return 50; 
break;
case 1: this.begin('INITIAL'); return 54; 
break;
case 2:return 56;
break;
case 3:return 55;
break;
case 4:return 'INVALID';
break;
case 5:return 44
break;
case 6:return 48
break;
case 7:return 46
break;
case 8:return 45
break;
case 9:return 47
break;
case 10:return 47
break;
case 11:/* skip whitespace */
break;
case 12:return 34
break;
case 13:return 32
break;
case 14:return 25
break;
case 15:return 30
break;
case 16:return 31
break;
case 17:return 9
break;
case 18:return 10
break;
case 19:return 12
break;
case 20:return 11
break;
case 21:return 16
break;
case 22:return 17
break;
case 23:return 19
break;
case 24:return '!'
break;
case 25:return 13
break;
case 26:return 19
break;
case 27:return 22
break;
case 28:return 23
break;
case 29:return 20
break;
case 30:return 21
break;
case 31:return 27
break;
case 32:return 26
break;
case 33:return 40
break;
case 34:return 38
break;
case 35:return 37
break;
case 36:return 43
break;
case 37:return 39
break;
case 38:return 42
break;
case 39:return 41
break;
case 40:return 18
break;
case 41:return 18
break;
case 42:return 24
break;
case 43:return 26
break;
case 44:return 27
break;
case 45:return 15
break;
case 46:return 14
break;
case 47: this.begin('fieldname'); return 57; 
break;
case 48:return 51;
break;
case 49:return 28
break;
case 50:return 29
break;
case 51:return 52
break;
case 52:return 35
break;
case 53:return 60
break;
case 54:return 36
break;
case 55:return 59
break;
case 56:return 'INVALID'
break;
case 57:return 5
break;
}
},
rules: [/^(?:\]\s*\[)/i,/^(?:\])/i,/^(?:\\.)/i,/^(?:.)/i,/^(?:$)/i,/^(?:'(?:[^\']|(?:('').))*')/i,/^(?:\{[0-9A-Fa-f]{8}[-]?(?:[0-9A-Fa-f]{4}[-]?){3}[0-9A-Fa-f]{12}\})/i,/^(?:#(?:[^\\\#]|(?:\\.))*#)/i,/^(?:[0-9]+(\.[0-9]+([mfMF]{1})?|[bsiluBSILU]{1})?)/i,/^(?:True\b)/i,/^(?:False\b)/i,/^(?:\s+)/i,/^(?:Between\b)/i,/^(?:In\b)/i,/^(?:Not\b)/i,/^(?:Is\b)/i,/^(?:Null\b)/i,/^(?:\*)/i,/^(?:\/)/i,/^(?:-)/i,/^(?:\+)/i,/^(?:\^)/i,/^(?:~)/i,/^(?:!=)/i,/^(?:!)/i,/^(?:%)/i,/^(?:<>)/i,/^(?:>=)/i,/^(?:<=)/i,/^(?:>)/i,/^(?:<)/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:Avg\b)/i,/^(?:Max\b)/i,/^(?:Min\b)/i,/^(?:Single\b)/i,/^(?:Count\b)/i,/^(?:Exists\b)/i,/^(?:Sum\b)/i,/^(?:==)/i,/^(?:=)/i,/^(?:Like\b)/i,/^(?:And\b)/i,/^(?:Or\b)/i,/^(?:&)/i,/^(?:\|)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\()/i,/^(?:\))/i,/^(?:\.)/i,/^(?:,)/i,/^(?:\?)/i,/^(?:\w[\w\d]*)/i,/^(?:[_\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183-\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3006\u3031-\u3035\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC][\d_\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183-\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3006\u3031-\u3035\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]*)/i,/^(?:.)/i,/^(?:$)/i],
conditions: {"fieldname":{"rules":[0,1,2,3,4],"inclusive":false},"INITIAL":{"rules":[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],"inclusive":true}}
});
return lexer;
})();
parser.lexer = lexer;
function Parser () {
  this.yy = {};
}
Parser.prototype = parser;parser.Parser = Parser;
return new Parser;
})();
DevExpress.JS.Data.criteriaparser = criteriaparser;
DevExpress.Analytics.Criteria.criteriaparser = criteriaparser
if(window["ace"]) {
    var _define = window["ace"].define || define;
    _define("ace/mode/criteria", ["require", "exports", "module", "ace/lib/oop", "ace/mode/text"], function (require, exports, module) {
        "use strict";
        var oop = require("../lib/oop");
        // defines the parent mode
        var TextMode = require("./text").Mode;

        // defines the language specific highlighters and folding rules
        var CriteriaHighlightRules = require("./criteria_highlight_rules").CriteriaHighlightRules;

        var Mode = function() {
            // set everything up
            this.HighlightRules = CriteriaHighlightRules;
        };
        oop.inherits(Mode, TextMode);

        /*(function () {
            // create worker for live syntax checking
            this.createWorker = function (session) {
                var worker = new WorkerClient(["ace"], "ace/mode/xpo_worker", "NewWorker");
                worker.attachToDocument(session.getDocument());
                worker.on("errors", function (e) {
                    session.setAnnotations(e.data);
                });
                return worker;
            };
    
        }).call(Mode.prototype);*/

        exports.Mode = Mode;
    });

    _define("ace/mode/criteria_highlight_rules", ["require", "exports", "module", "ace/lib/oop", "ace/mode/text_highlight_rules"], function (require, exports, module) {
        "use strict";
        var oop = require("../lib/oop");
        var TextHighlightRules = require("./text_highlight_rules").TextHighlightRules;

        var CriteriaHighlightRules = function() {

            // regexp must not have capturing parentheses. Use (?:) instead.
            // regexps are ordered -> the first match is used
            this.$rules = {
                "start": [
                    {
                        token: "constant.other",
                        regex: /(?:#(?:[^\\\#]|(?:\\.))*#?)|(?:\{[-0-9A-Fa-f]*\}?)/
                    },
                    {
                        token: "string.quoted.single",
                        regex: /N?'(?:\\.|[^'\\])*'?/,
                    },
                    {
                        token: "constant.numeric",
                        regex: /[+\-]?\.?\d[\d.]*/i
                    },
                    {
                        token: "support.other.aggregate",
                        regex: /\.([a-zA-Z_]\w*)?/
                    },
                    {
                        token: "keyword.operator",
                        regex: /[+\-*/%|&^<>]|==|!=|<=|>=|In|Like|Between|And|Or|Not/i
                    },
                    {
                        token: "constant.language",
                        regex: /True|False/i
                    },
                    {
                        token: "support.context.start",
                        regex: /\[(?:[^\]\)])*\]\[/
                    },
                    {
                        token: "support.variable.other",
                        regex: /\[(?:[^\]\)\,])*\]?/
                    },
                    {
                        token: "support.variable.parameter",
                        regex: /\?\w+/
                    },
                    {
                        token: "support.context.end",
                        regex: /\]/
                    },
                    {
                        token: "support.function",
                        regex: /[_\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183-\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3006\u3031-\u3035\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC][\d_\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183-\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3006\u3031-\u3035\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]*/
                    }
                ]
            };
        };

        oop.inherits(CriteriaHighlightRules, TextHighlightRules);

        exports.CriteriaHighlightRules = CriteriaHighlightRules;
    });
}


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var BaseActionsProvider = (function () {
                function BaseActionsProvider() {
                }
                BaseActionsProvider.prototype.initActions = function (actions) {
                    this.actions = actions;
                    this.actions.forEach(function (action) {
                        if (!action.disabled)
                            action.disabled = ko.observable(false);
                    });
                };
                BaseActionsProvider.prototype.getActions = function (context) {
                    if (this.condition(context)) {
                        this.setDisabled && this.setDisabled(context);
                        return this.actions;
                    }
                    return [];
                };
                BaseActionsProvider.prototype.condition = function (context) {
                    return true;
                };
                return BaseActionsProvider;
            }());
            Internal.BaseActionsProvider = BaseActionsProvider;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Rectangle = (function () {
            function Rectangle(left, top, width, height) {
                if (left === void 0) { left = 0; }
                if (top === void 0) { top = 0; }
                if (width === void 0) { width = 0; }
                if (height === void 0) { height = 0; }
                this.left = ko.observable(0);
                this.top = ko.observable(0);
                this.width = ko.observable(0);
                this.height = ko.observable(0);
                this.className = "dxrd-drag-helper-item";
                this.left(left);
                this.top(top);
                this.width(width);
                this.height(height);
            }
            return Rectangle;
        }());
        Analytics.Rectangle = Rectangle;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var DragDropHandler = (function (_super) {
                __extends(DragDropHandler, _super);
                function DragDropHandler(surface, selection, undoEngine, snapHelper, dragHelperContent) {
                    var _this = _super.call(this) || this;
                    _this._size = new Analytics.Size(0, 0);
                    _this.alwaysAlt = false;
                    _this.surface = surface;
                    _this.selection = selection;
                    _this.snapHelper = snapHelper;
                    _this.dragHelperContent = dragHelperContent;
                    _this.stopDrag = function (ui, draggable, event) {
                        undoEngine().start();
                        _this.doStopDrag(ui, draggable, event);
                        undoEngine().end();
                        snapHelper && snapHelper.deactivateSnapLines();
                    };
                    return _this;
                }
                DragDropHandler.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.surface = null;
                    this.selection = null;
                    this.snapHelper = null;
                    this.dragHelperContent = null;
                };
                DragDropHandler.prototype._getAbsoluteSurfacePosition = function (ui) {
                    return { left: ui.position.left - ui["delta"].left, top: ui.position.top - ui["delta"].top };
                };
                DragDropHandler.prototype.addControl = function (control, dropTargetSurface, size) {
                    var targetWidth = (dropTargetSurface["width"] && dropTargetSurface["width"]()) || (dropTargetSurface["_width"] && dropTargetSurface["_width"]());
                    var underCursor = dropTargetSurface.underCursor();
                    if (underCursor.x < targetWidth) {
                        dropTargetSurface.getControlModel().addChild(control);
                        var controlSurface = Internal.findSurface(control);
                        if (!controlSurface)
                            return;
                        var width = size.width(), height = size.height();
                        var left = (underCursor.x + width > targetWidth) ? (targetWidth - width - 1) : underCursor.x;
                        controlSurface.rect({ left: left, top: Math.max(underCursor.y, 0), width: width, height: height });
                        this.selection.initialize(controlSurface);
                    }
                };
                DragDropHandler.prototype.recalculateSize = function (size) {
                    var surface = ko.unwrap(this.surface);
                    this._size.width(Analytics.Utils.unitsToPixel(ko.unwrap(size.width) * surface.dpi() / 100, surface.measureUnit(), surface.zoom()));
                    this._size.height(Analytics.Utils.unitsToPixel(ko.unwrap(size.height) * surface.dpi() / 100, surface.measureUnit(), surface.zoom()));
                };
                DragDropHandler.prototype.helper = function (draggable, event) {
                    this.snapHelper && this.snapHelper.updateSnapLines();
                };
                DragDropHandler.prototype.startDrag = function (draggable) { };
                DragDropHandler.prototype.drag = function (event, ui) {
                    var needToActivateSnapLines = event.altKey !== true;
                    if (this.selection.dropTarget) {
                        var dropTarget = this.selection.dropTarget.getControlModel().getMetaData().isContainer ? this.selection.dropTarget : (this.selection.dropTarget.parent || this.selection.dropTarget), locked = dropTarget.locked;
                        var controlModel = ko.dataFor(event.target).getControlModel && ko.dataFor(event.target).getControlModel();
                        var metaData = controlModel && controlModel.getMetaData() || ko.dataFor(event.target).info;
                        if (metaData && metaData.canDrop) {
                            locked = locked || !metaData.canDrop(dropTarget, controlModel);
                        }
                        if (locked) {
                            this.snapHelper && this.snapHelper.deactivateSnapLines();
                            needToActivateSnapLines = false;
                            this.dragHelperContent && this.dragHelperContent.isLocked(true);
                        }
                        else {
                            this.dragHelperContent && this.dragHelperContent.isLocked(false);
                        }
                    }
                    if (needToActivateSnapLines) {
                        var position = this._getAbsoluteSurfacePosition(ui);
                        var snapDelta = this.snapHelper && this.snapHelper.activateSnapLines({
                            left: position.left,
                            top: position.top,
                            right: position.left + this._size.width(),
                            bottom: position.top + this._size.height()
                        });
                        ui.position.left -= snapDelta.left;
                        ui.position.top -= snapDelta.top;
                    }
                };
                DragDropHandler.prototype.doStopDrag = function (ui, draggable, event) { };
                DragDropHandler.started = ko.observable(false);
                return DragDropHandler;
            }(Analytics.Utils.Disposable));
            Internal.DragDropHandler = DragDropHandler;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var KeyboardHelper = (function () {
                function KeyboardHelper(selection, undoEngine) {
                    var _this = this;
                    this._selection = selection;
                    this._undoEngine = undoEngine;
                    this.shortcutMap = {
                        27: function (e) { _this.processEsc(); return true; },
                        37: function (e) { _this.moveSelectedControls(true, true, -1); return true; },
                        38: function (e) { _this.moveSelectedControls(true, false, -1); return true; },
                        39: function (e) { _this.moveSelectedControls(false, true, 1); return true; },
                        40: function (e) { _this.moveSelectedControls(false, false, 1); return true; },
                    };
                }
                KeyboardHelper.prototype.processShortcut = function (e) {
                    var method = this.shortcutMap[e.keyCode];
                    if (method) {
                        return method(e);
                    }
                    return false;
                };
                KeyboardHelper.prototype.processEsc = function () {
                    var parent = this._selection.focused() && this._selection.focused().parent;
                    parent && this._selection.focused(parent);
                };
                KeyboardHelper.prototype.moveSelectedControls = function (leftUp, isHoriz, sign) {
                    var focusedControl = this._selection.focused();
                    if (!focusedControl || focusedControl && focusedControl.getControlModel().getMetaData().isCopyDeny) {
                        return;
                    }
                    this._undoEngine && this._undoEngine().start();
                    var distance = 1, axisProperty = isHoriz ? "left" : "top", lengthProperty = isHoriz ? "width" : "height", minAxis, maxSide, newAxis;
                    if (focusedControl.rect) {
                        minAxis = focusedControl.rect()[axisProperty];
                        maxSide = focusedControl.rect()[axisProperty] + focusedControl.rect()[lengthProperty];
                    }
                    else {
                        return;
                    }
                    this._selection.selectedItems.filter(function (item) { return !item.locked; }).forEach(function (item) {
                        var axis = item.rect()[axisProperty];
                        if (axis < minAxis) {
                            minAxis = axis;
                        }
                    });
                    this._selection.selectedItems.filter(function (item) { return !item.locked; }).forEach(function (item) {
                        var side = item.rect()[axisProperty] + item.rect()[lengthProperty];
                        if (side > maxSide) {
                            maxSide = side;
                        }
                    });
                    if ((leftUp && minAxis <= 0) || (!focusedControl.parent.rect || (!leftUp && maxSide.toFixed(5) >= focusedControl.parent.rect()[lengthProperty]))) {
                        return;
                    }
                    else {
                        this._selection.selectedItems.filter(function (item) { return !item.locked; })
                            .filter(function (item) { return !!item.rect; })
                            .forEach(function (item) {
                            var newVal = {}, itemAxisProperty = item.rect()[axisProperty], itemLengthProperty = item.rect()[lengthProperty], parentLengthProperty = item.parent.rect()[lengthProperty];
                            newAxis = itemAxisProperty + sign * distance;
                            if ((leftUp && newAxis >= 0) || (!leftUp && (newAxis + itemLengthProperty) <= parentLengthProperty)) {
                                newVal[axisProperty] = newAxis;
                            }
                            if (!leftUp && (newAxis + itemLengthProperty) > parentLengthProperty) {
                                newVal[axisProperty] = parentLengthProperty - itemLengthProperty;
                            }
                            if (leftUp && newAxis < 0 && itemAxisProperty > 0) {
                                newVal[axisProperty] = 0;
                            }
                            item.rect(newVal);
                        });
                    }
                    this._undoEngine && this._undoEngine().end();
                };
                return KeyboardHelper;
            }());
            Internal.KeyboardHelper = KeyboardHelper;
            var KeyDownHandlersManager = (function () {
                function KeyDownHandlersManager(targetElement) {
                    this._handlers = [];
                    this._targetElement = targetElement;
                }
                Object.defineProperty(KeyDownHandlersManager.prototype, "_activeHandler", {
                    get: function () {
                        return this._handlers.length > 0 ? this._handlers[this._handlers.length - 1] : null;
                    },
                    enumerable: true,
                    configurable: true
                });
                KeyDownHandlersManager.prototype._removeHandler = function (handler) {
                    var index = this._handlers.indexOf(handler);
                    if (index < 0)
                        return;
                    this._handlers.splice(index, 1);
                    if (index === this._handlers.length) {
                        this._targetElement.off("keydown", handler);
                        if (this._activeHandler)
                            this._targetElement.on("keydown", this._activeHandler);
                    }
                };
                KeyDownHandlersManager.prototype.bindHandler = function (element, handler) {
                    var _this = this;
                    if (this._activeHandler)
                        this._targetElement.off("keydown", this._activeHandler);
                    this._handlers.push(handler);
                    this._targetElement.on("keydown", handler);
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () { _this._removeHandler(handler); });
                };
                return KeyDownHandlersManager;
            }());
            Internal.KeyDownHandlersManager = KeyDownHandlersManager;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        ko.bindingHandlers['cssArray'] = {
            'update': function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                var value = ko.utils.unwrapObservable(valueAccessor());
                for (var i = 0; i < value.length; i++) {
                    ko.bindingHandlers['css'].update(element, function () { return value[i]; });
                }
            }
        };
        ko.bindingHandlers["selectable"] = {
            init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                var values = valueAccessor(), isUpdate = false, $element = $(element), selection = ko.unwrap(values.selection), options = $.extend({ filter: '.dxd-selectable', distance: 1 }, ko.unwrap(values), {
                    selecting: function (event, ui) {
                        var _event = { control: ko.dataFor(ui.selecting), cancel: false, ctrlKey: event.ctrlKey };
                        selection.selecting(_event);
                        if (_event.cancel) {
                            $(ui.selecting).removeClass('ui-selecting');
                        }
                    },
                    start: function (event, ui) {
                        selection.clickHandler(null, event);
                        selection.started = true;
                        event.stopPropagation();
                    },
                    stop: function () {
                        selection.started = false;
                        selection.applySelection();
                    },
                    unselecting: function (event, ui) {
                        selection.unselecting(ko.dataFor(ui.unselecting));
                    }
                });
                $element.selectable(options);
                var subscriptions = [];
                var subscribeProperty = function (property, optionName) {
                    if (property && ko.isSubscribable(property)) {
                        subscriptions.push(property.subscribe(function (newVal) {
                            $element.selectable("option", optionName, newVal);
                        }));
                    }
                };
                subscribeProperty(selection.disabled, "disabled");
                subscribeProperty(values.zoom, "zoom");
                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                    if ($element.data("ui-selectable")) {
                        $element.selectable("destroy");
                    }
                    $element = null;
                    subscribeProperty = null;
                    subscriptions.forEach(function (x) { return x.dispose(); });
                });
            }
        };
        ko.bindingHandlers["updateTop"] = {
            init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                var value = valueAccessor();
                var $element = $(element);
                var updateTop = function (value) {
                    var scaleY = element.getBoundingClientRect().height / element.offsetHeight;
                    var top = (value === 0 || !!value) ? value : ($element.prev().position().top / scaleY) + $element.prev().outerHeight();
                    $element.css('top', top + "px");
                };
                var subscription = value.subscribe(function (newVal) {
                    updateTop(newVal);
                });
                updateTop(value());
                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                    subscription.dispose();
                });
            }
        };
        ko.bindingHandlers["draggable"] = {
            init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var values = valueAccessor();
                if (!values)
                    return;
                var $element = $(element), $parent = $element.closest(".dx-designer"), containment = values.containment || ".dxrd-ghost-container", $viewport, $ghostContainerOffset, $containmentOffset, initialScroll = { left: 0, top: 0 }, attachDelta = function (ui) {
                    ui["delta"] = {
                        left: $ghostContainerOffset.left - $containmentOffset.left,
                        top: $ghostContainerOffset.top - $containmentOffset.top
                    };
                    ui["scroll"] = {
                        left: $viewport.scrollLeft() - initialScroll.left,
                        top: $viewport.scrollTop() - initialScroll.top
                    };
                }, options = $.extend({}, ko.unwrap(values), {
                    start: function (event, ui) {
                        Analytics.Internal.DragDropHandler.started(true);
                        var draggable = $element.data("ui-draggable");
                        $viewport = $parent.find(".dxrd-viewport");
                        $ghostContainerOffset = $parent.find(".dxrd-ghost-container").offset();
                        $containmentOffset = $parent.find(containment).offset();
                        initialScroll.left = $viewport.scrollLeft();
                        initialScroll.top = $viewport.scrollTop();
                        values.startDrag && values.startDrag(ko.dataFor(event.currentTarget || event.toElement));
                    },
                    stop: function (event, ui) {
                        attachDelta(ui);
                        values.stopDrag(ui, ko.dataFor(event.target), event);
                        Analytics.Internal.DragDropHandler.started(false);
                    },
                    drag: function (event, ui) {
                        attachDelta(ui);
                        values.drag && values.drag(event, ui);
                    },
                    helper: function (event) {
                        values.helper && values.helper(ko.dataFor(event.currentTarget || event["toElement"]), event);
                        var $container = $parent.find('.dxrd-drag-helper-source').clone().css({ 'display': 'block' });
                        $container.prependTo($parent.find(options.containment));
                        ko.applyBindings(bindingContext.$root, $container[0]);
                        return $container;
                    }
                });
                options.containment = $parent.find(options.containment);
                $element.draggable(options);
            }
        };
        var trackCursorData = "dxd-track-cursor-data";
        var trackCursorClass = "dxd-track-cursor";
        var trackCursorSelector = "." + trackCursorClass;
        var dragHelperLineClass = "dxrd-drag-helper-item";
        ko.bindingHandlers["trackCursor"] = {
            init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var $element = $(element);
                $element.addClass(trackCursorClass);
                var value = valueAccessor();
                var bounds = null;
                var selection = valueAccessor().dropTarget, subscriptionTarget = valueAccessor().subscriptionTarget || '.dx-designer', body = document.body, docElem = document.documentElement, overHandler = function (event) {
                    if (!(bindingContext.$root.selection.started && bindingContext.$root.resizeHandler.started)) {
                        bounds = element.getBoundingClientRect();
                        if (!value().isNotDropTarget) {
                            bindingContext.$root.selection.dropTarget = ko.dataFor(element);
                            event.stopPropagation();
                        }
                    }
                }, enterHandler = function (event) {
                    value($.extend(value(), { isOver: true }));
                }, leaveHandler = function (event) {
                    bindingContext.$root.selection.dropTarget = null;
                    value($.extend(value(), { isOver: false }));
                }, handler = function (event) {
                    if (!(bindingContext.$root.selection.started && bindingContext.$root.resizeHandler.started)) {
                        bounds = element.getBoundingClientRect();
                        var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop, scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft, clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0, y = event.pageY - (bounds.top + scrollTop - clientTop), x = event.pageX - (bounds.left + scrollLeft - clientLeft);
                        value($.extend(value(), { x: x, y: y }));
                    }
                };
                $element.bind("mousemove", handler);
                $element.bind("mouseenter", enterHandler);
                $element.bind("mouseover", overHandler);
                $element.bind("mouseleave", leaveHandler);
                $element.bind("dragover", function (event) { handler(event.originalEvent); });
                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                    $element.unbind("dragover", function (event) { handler(event.originalEvent); });
                    $element.unbind("mousemove", handler);
                    $element.unbind("mouseover", overHandler);
                    $element.unbind("mouseleave", leaveHandler);
                    $element.unbind("mouseenter", enterHandler);
                    $element.removeClass(trackCursorClass);
                });
            }
        };
        ko.bindingHandlers["templates"] = {
            init: function (element, valueAccessor) {
                var templateHtml = $(valueAccessor()).text(), $templateHtml = $(templateHtml);
                $(element).append($templateHtml);
                return { controlsDescendantBindings: true };
            }
        };
        ko.bindingHandlers["zoom"] = {
            update: function (element, valueAccessor) {
                var value = ko.unwrap(valueAccessor() || {});
                for (var i = 0; i < Analytics.Utils.cssTransform.length; i++) {
                    element.style[Analytics.Utils.cssTransform[i]] = "scale(" + (value) + ")";
                }
                $(element).addClass("dxrd-transform-origin-left-top");
            }
        };
        ko.bindingHandlers["keyDownActions"] = (function () {
            var handlersManager = new Analytics.Internal.KeyDownHandlersManager($(window));
            return {
                init: function (element, valueAccessor) {
                    var actionLists = valueAccessor(), handler = function (e) { actionLists.processShortcut(ko.unwrap(actionLists.toolbarItems), e); };
                    if (ko.isSubscribable(actionLists.enabled)) {
                        var subscribe = actionLists.enabled.subscribe(function (newVal) {
                            if (newVal)
                                handlersManager.bindHandler(element, handler);
                        });
                        ko.utils.domNodeDisposal.addDisposeCallback(element, function () { return subscribe.dispose(); });
                    }
                    if (ko.unwrap(actionLists.enabled))
                        handlersManager.bindHandler(element, handler);
                }
            };
        })();
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var DragHelperContent = (function (_super) {
                __extends(DragHelperContent, _super);
                function DragHelperContent(selectionProvider) {
                    var _this = _super.call(this) || this;
                    _this.controls = ko.observableArray([]);
                    _this.customData = ko.observable({});
                    _this.isLocked = ko.observable(false);
                    _this._selectionProvider = selectionProvider;
                    return _this;
                }
                DragHelperContent.prototype.update = function (surface) {
                    var _this = this;
                    this.controls([]);
                    this.customData({});
                    this.left(surface.absolutePosition.x());
                    this.top(surface.absolutePosition.y());
                    this.width(surface.rect().width);
                    this.height(surface.rect().height);
                    this._selectionProvider.selectedItems.filter(function (item) { return !item.locked; }).forEach(function (controlSurface) {
                        if (controlSurface.parent === surface.parent) {
                            _this.controls.push(new Analytics.Rectangle(controlSurface.absolutePosition.x() - _this.left(), controlSurface.absolutePosition.y() - _this.top(), controlSurface.rect().width, controlSurface.rect().height));
                        }
                    });
                };
                DragHelperContent.prototype.setContent = function (area, customData) {
                    if (customData === void 0) { customData = null; }
                    this.controls([]);
                    this.customData({});
                    this.left(area.left());
                    this.top(area.top());
                    this.width(area.width());
                    this.height(area.height());
                    this.controls.push(area);
                    this.customData(customData);
                };
                return DragHelperContent;
            }(Analytics.Rectangle));
            Internal.DragHelperContent = DragHelperContent;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var SelectionDragDropHandler = (function (_super) {
                __extends(SelectionDragDropHandler, _super);
                function SelectionDragDropHandler(surface, selection, undoEngine, snapHelper, dragHelperContent) {
                    var _this = _super.call(this, surface, selection, undoEngine, snapHelper, dragHelperContent) || this;
                    _this.ajustLocation = function (adjustedTarget, item) {
                        var left = adjustedTarget.underCursor().x + item.underCursor().offsetX, top = adjustedTarget.underCursor().y + item.underCursor().offsetY;
                        item.rect({ left: left > 0 ? left : 0, top: top > 0 ? top : 0 });
                    };
                    _this.cursor = 'move';
                    _this.containment = '.dxrd-ghost-container';
                    _this["helper"] = function (draggable) {
                        _super.prototype.helper.call(_this, draggable);
                        if (_this.selection.selectedItems.indexOf(draggable) === -1) {
                            _this.selection.updateSelection(draggable);
                        }
                        dragHelperContent.update(draggable);
                        _this._size.width(dragHelperContent.width());
                        _this._size.height(dragHelperContent.height());
                    };
                    return _this;
                }
                SelectionDragDropHandler.prototype.adjustDropTarget = function (dropTargetSurface) {
                    var selectedItemInTree = dropTargetSurface;
                    while (selectedItemInTree != null) {
                        if (selectedItemInTree.selected && selectedItemInTree.selected()) {
                            dropTargetSurface = selectedItemInTree.parent;
                            break;
                        }
                        selectedItemInTree = selectedItemInTree.parent;
                    }
                    return dropTargetSurface;
                };
                SelectionDragDropHandler.prototype.startDrag = function (control) {
                    this.selection.swapFocusedItem(control);
                    var focusedSurface = this.selection.focused();
                    var baseOffsetX = focusedSurface.rect().left + focusedSurface.underCursor().x;
                    var baseOffsetY = focusedSurface.rect().top + focusedSurface.underCursor().y;
                    this.selection.selectedItems.filter(function (item) { return !item.locked; }).forEach(function (item) {
                        if (item.parent === focusedSurface.parent) {
                            item.underCursor().offsetX = item.rect().left - baseOffsetX;
                            item.underCursor().offsetY = item.rect().top - baseOffsetY;
                        }
                    });
                };
                SelectionDragDropHandler.prototype.drag = function (event, ui) {
                    ui.position.left += ui["scroll"].left;
                    ui.position.top += ui["scroll"].top;
                    _super.prototype.drag.call(this, event, ui);
                };
                SelectionDragDropHandler.prototype.doStopDrag = function (ui, _) {
                    if (this.selection.dropTarget) {
                        var dropTarget = this.selection.dropTarget.getControlModel(), dropTargetSurface = dropTarget.getNearestParent(dropTarget).surface;
                        var focusedSurface = this.selection.focused();
                        var adjustedTarget = this.adjustDropTarget(dropTargetSurface), focusedModel = focusedSurface.getControlModel(), parent = focusedModel.getNearestParent(adjustedTarget.getControlModel()), adjustedTarget = parent && Internal.findSurface(parent), changeParent = adjustedTarget !== focusedSurface.parent;
                        if (!adjustedTarget || !adjustedTarget.canDrop()) {
                            return;
                        }
                        var position = this._getAbsoluteSurfacePosition(ui);
                        adjustedTarget.underCursor().x = position.left - (adjustedTarget["absolutePosition"] && adjustedTarget["absolutePosition"].x() || 0) - focusedSurface.underCursor().offsetX;
                        adjustedTarget.underCursor().y = position.top - (adjustedTarget["absolutePosition"] && adjustedTarget["absolutePosition"].y() || 0) - focusedSurface.underCursor().offsetY;
                        var dropPointRelativeX = ui.position.left;
                        var dropPointRelativeY = ui.position.top;
                        var itemsToDrop = this.selection.selectedItems
                            .filter(function (item) { return !item.locked && item.parent === focusedSurface.parent; })
                            .map(function (item) {
                            return item.getControlModel();
                        })
                            .filter(function (item) {
                            return item.getMetaData().canDrop(adjustedTarget, item);
                        });
                        if (changeParent) {
                            for (var i = 0; i < itemsToDrop.length; i++) {
                                itemsToDrop[i].surface.rect({ top: 0, left: 0 });
                            }
                            focusedModel.parentModel().removeChilds(itemsToDrop);
                            parent["addChilds"](itemsToDrop);
                            for (var i = 0; i < itemsToDrop.length; i++) {
                                this.ajustLocation(adjustedTarget, itemsToDrop[i].surface);
                            }
                            this.selection.focused(focusedSurface);
                            this.selection.selectItems(itemsToDrop.map(function (item) { return item.surface; }));
                        }
                        else {
                            for (var i = 0; i < itemsToDrop.length; i++) {
                                this.ajustLocation(adjustedTarget, itemsToDrop[i].surface);
                            }
                            this.selection.expectClick = true;
                        }
                    }
                };
                SelectionDragDropHandler.prototype.create = function (event, ui) {
                    if (ko.dataFor(event.target).locked) {
                        $(this).draggable("disable");
                    }
                };
                return SelectionDragDropHandler;
            }(Internal.DragDropHandler));
            Internal.SelectionDragDropHandler = SelectionDragDropHandler;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var ToolboxDragDropHandler = (function (_super) {
                __extends(ToolboxDragDropHandler, _super);
                function ToolboxDragDropHandler(surface, selection, undoEngine, snapHelper, dragHelperContent, controlsFactory) {
                    var _this = _super.call(this, surface, selection, undoEngine, snapHelper, dragHelperContent) || this;
                    _this.cursor = 'arrow';
                    _this._controlsFactory = controlsFactory;
                    _this.containment = '.dxrd-designer';
                    _this["cursorAt"] = {
                        top: 0,
                        left: 0
                    };
                    return _this;
                }
                ToolboxDragDropHandler.prototype.helper = function (draggable) {
                    _super.prototype.helper.call(this, draggable);
                    var toolboxItem = draggable;
                    var size = Analytics.Size.fromString(toolboxItem.info["@SizeF"] || toolboxItem.info["size"] || "100,23");
                    this.recalculateSize(size);
                    this.dragHelperContent.setContent(new Analytics.Rectangle(0, 0, this._size.width(), this._size.height()));
                };
                ToolboxDragDropHandler.prototype.doStopDrag = function (ui, draggable) {
                    if (this.selection.dropTarget) {
                        var toolboxItem = draggable, control = this._controlsFactory.createControl($.extend({}, toolboxItem.info), null), parent = control.getNearestParent(this.selection.dropTarget.getControlModel()), dropTargetSurface = Internal.findSurface(parent);
                        if (!dropTargetSurface || !dropTargetSurface.canDrop()) {
                            return;
                        }
                        var position = this._getAbsoluteSurfacePosition(ui);
                        dropTargetSurface.underCursor().x = position.left - (dropTargetSurface["absolutePosition"] && dropTargetSurface["absolutePosition"].x() || 0);
                        dropTargetSurface.underCursor().y = position.top - (dropTargetSurface["absolutePosition"] && dropTargetSurface["absolutePosition"].y() || 0);
                        if (this.surface().isFit && this.surface().isFit(dropTargetSurface) || dropTargetSurface.underCursor().isOver) {
                            this.addControl(control, dropTargetSurface, this._size);
                        }
                    }
                };
                return ToolboxDragDropHandler;
            }(Internal.DragDropHandler));
            Internal.ToolboxDragDropHandler = ToolboxDragDropHandler;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        ;
        var SurfaceElementArea = (function (_super) {
            __extends(SurfaceElementArea, _super);
            function SurfaceElementArea(control, context, unitProperties) {
                var _this = _super.call(this) || this;
                _this._createSurface = function (item) {
                    return item["surface"] || new (item.getControlFactory()).controlsMap[item.controlType].surfaceType(item, _this._context);
                };
                _this.preInitProperties(control, context, unitProperties);
                _this._control = control;
                _this._context = context;
                control["surface"] = _this;
                if (_this._context) {
                    Analytics.Utils.createUnitProperties(control, _this, unitProperties, _this._context.measureUnit, _this._context.zoom, function (property) { _this._disposables.push(property); });
                }
                _this._x = _this._x || ko.observable(0);
                _this._y = _this._y || ko.observable(0);
                _this._width = _this._width || ko.observable(0);
                _this._height = _this._height || ko.observable(0);
                var container = ko.pureComputed(function () { return _this.container(); });
                _this._disposables.push(container);
                _this._container = container();
                _this._disposables.push(container.subscribe(function (value) {
                    if (_this._container !== value && _this.rtlLayout()) {
                        var x = _this._getX();
                        _this._container = value;
                        _this._setX(x);
                    }
                    else {
                        _this._container = value;
                    }
                }));
                var x = ko.computed({
                    read: function () { return _this._getX(); },
                    write: function (value) {
                        _this._setX(value);
                    }
                }), y = _this._y, width = _this._width, height = _this._height;
                _this["position"] = {
                    top: y,
                    left: x,
                    width: width,
                    height: height,
                    lineHeight: height
                };
                _this._disposables.push(x);
                var _rect = ko.observable();
                _this._disposables.push(ko.computed(function () {
                    if (!_this._control.update()) {
                        _rect({ top: y(), left: x(), right: x() + width(), bottom: y() + height(), width: width(), height: height() });
                    }
                }));
                _this._disposables.push(_this.rect = ko.pureComputed({
                    read: function () {
                        return _rect();
                    },
                    write: function (newRect) {
                        newRect = _this.beforeRectUpdated(newRect);
                        _this._control.update(true);
                        try {
                            if (newRect.left !== undefined) {
                                _this._setX(newRect.left, newRect.width);
                            }
                            else if (newRect.width !== undefined) {
                                _this._setX(x(), newRect.width);
                            }
                            if (newRect.top !== undefined) {
                                y(newRect.top);
                            }
                            if (newRect.right !== undefined && newRect.left === undefined && newRect.width === undefined) {
                                width(newRect.right - x());
                            }
                            if (newRect.bottom !== undefined && newRect.top === undefined) {
                                height(newRect.bottom - y());
                            }
                            if (newRect.right !== undefined && newRect.left !== undefined && newRect.width === undefined) {
                                width(newRect.right - newRect.left);
                            }
                            if (newRect.bottom !== undefined && newRect.top !== undefined) {
                                height(newRect.bottom - newRect.top);
                            }
                            if (newRect.width !== undefined) {
                                width(newRect.width);
                            }
                            if (newRect.height !== undefined) {
                                height(newRect.height);
                            }
                        }
                        finally {
                            _this._control.update(false);
                        }
                    }
                }));
                return _this;
            }
            SurfaceElementArea.prototype._getX = function () {
                if (this.rtlLayout() && this._container) {
                    return this._container.rect().width - this._x() - this._width();
                }
                else {
                    return this._x();
                }
            };
            SurfaceElementArea.prototype._setX = function (value, width) {
                width = width || this._width();
                if (this.rtlLayout() && this._container) {
                    this._x(this._container.rect().width - value - width);
                }
                else {
                    this._x(value);
                }
            };
            SurfaceElementArea.prototype.getRoot = function () {
                return this._context;
            };
            SurfaceElementArea.prototype.preInitProperties = function (control, context, unitProperties) { };
            SurfaceElementArea.prototype.container = function () {
                return this["parent"];
            };
            SurfaceElementArea.prototype.beforeRectUpdated = function (rect) {
                rect.left = rect.left < 0 ? 0 : rect.left;
                rect.top = rect.top < 0 ? 0 : rect.top;
                return rect;
            };
            SurfaceElementArea.prototype.rtlLayout = function () {
                return !!ko.unwrap(this._context.rtl);
            };
            SurfaceElementArea.prototype.getControlModel = function () {
                return this._control;
            };
            return SurfaceElementArea;
        }(Analytics.Utils.Disposable));
        Analytics.SurfaceElementArea = SurfaceElementArea;
        var SurfaceElementBase = (function (_super) {
            __extends(SurfaceElementBase, _super);
            function SurfaceElementBase(control, context, unitProperties) {
                var _this = _super.call(this, control, context, unitProperties) || this;
                _this._countSelectedChildren = ko.observable(0);
                _this.focused = ko.observable(false);
                _this.selected = ko.observable(false);
                _this.underCursor = ko.observable(new Analytics.Internal.HoverInfo());
                _this.allowMultiselect = true;
                _this.absolutePosition = new Analytics.Point(0, 0);
                _this.getControlModel = function () {
                    return control;
                };
                _this.cssCalculator = new Analytics.Internal.CssCalculator(control, context.rtl);
                if (_this._getChildrenHolderName() && control[_this._getChildrenHolderName()]) {
                    var collection = ko.observableArray();
                    if (_this._getChildrenHolderName() === "controls") {
                        _this._disposables.push(Analytics.Utils.createObservableReverseArrayMapCollection(control[_this._getChildrenHolderName()], collection, _this._createSurface));
                    }
                    else {
                        _this._disposables.push(Analytics.Utils.createObservableArrayMapCollection(control[_this._getChildrenHolderName()], collection, _this._createSurface));
                    }
                    _this[_this._getChildrenHolderName()] = collection;
                    _this._disposables.push(_this.isSelected = ko.pureComputed(function () {
                        if (!(_this.focused() || _this.selected())) {
                            return collection().some(function (item) {
                                return item.isSelected();
                            });
                        }
                        return true;
                    }));
                }
                else {
                    _this._disposables.push(_this.isSelected = ko.pureComputed(function () {
                        return _this.focused() || _this.selected();
                    }));
                }
                _this._disposables.push(_this.css = ko.pureComputed(function () {
                    return $.extend({}, _this.cssCalculator.fontCss(), _this.cssCalculator.foreColorCss(), _this.cssCalculator.backGroundCss(), _this.cssCalculator.textAlignmentCss());
                }));
                _this._disposables.push(_this.contentCss = ko.pureComputed(function () {
                    return $.extend({}, _this.cssCalculator.fontCss(), _this.cssCalculator.foreColorCss(), _this.cssCalculator.textAlignmentCss(), _this.cssCalculator.angle(), _this.cssCalculator.wordWrapCss(), _this.cssCalculator.paddingsCss());
                }));
                _this._disposables.push(ko.computed(function () {
                    _this.updateAbsolutePosition();
                }));
                _this._disposables.push(_this.absoluteRect = ko.pureComputed(function () {
                    var controlRect = _this.rect(), absolutePositionY = _this.absolutePosition.y(), absolutePositionX = _this.absolutePosition.x();
                    return { top: absolutePositionY, left: absolutePositionX, right: absolutePositionX + controlRect.width, bottom: absolutePositionY + controlRect.height, width: controlRect.width, height: controlRect.height };
                }));
                _this.locked = control["lockedInUserDesigner"] ? control["lockedInUserDesigner"]() : false;
                return _this;
            }
            Object.defineProperty(SurfaceElementBase.prototype, "parent", {
                get: function () {
                    return this.getControlModel().parentModel() && this.getControlModel().parentModel().surface;
                },
                enumerable: true,
                configurable: true
            });
            SurfaceElementBase.prototype.checkParent = function (surfaceParent) {
                return this.parent === surfaceParent;
            };
            SurfaceElementBase.prototype._getChildrenHolderName = function () { return "controls"; };
            SurfaceElementBase.prototype.getChildrenCollection = function () {
                return this._getChildrenHolderName() && this[this._getChildrenHolderName()] || ko.observableArray([]);
            };
            SurfaceElementBase.prototype.updateAbsolutePosition = function () {
                if (this.parent && this.parent.absolutePosition) {
                    var parentX = this.parent.absolutePosition.x(), parentY = this.parent.absolutePosition.y(), newX = parentX + this.rect().left, newY = parentY + this.rect().top;
                    this.absolutePosition.x(newX);
                    this.absolutePosition.y(newY);
                }
                else {
                    this.absolutePosition.x(0);
                    this.absolutePosition.y(0);
                }
                this.afterUpdateAbsolutePosition();
            };
            SurfaceElementBase.prototype.canDrop = function () { return !this.locked && this._control.getMetaData().isContainer; };
            SurfaceElementBase.prototype.afterUpdateAbsolutePosition = function () {
            };
            return SurfaceElementBase;
        }(SurfaceElementArea));
        Analytics.SurfaceElementBase = SurfaceElementBase;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var ElementViewModel = (function (_super) {
            __extends(ElementViewModel, _super);
            function ElementViewModel(model, parent, serializer) {
                var _this = _super.call(this) || this;
                _this.actions = [];
                _this.update = ko.observable(false);
                _this.preInitProperties(model, parent, serializer);
                _this.parentModel = ko.observable(parent);
                _this.controlType = _this.controlType || _this.getControlFactory().getControlType(model);
                serializer = serializer || new Analytics.Utils.ModelSerializer();
                serializer.deserialize(_this, model);
                _this._disposables.push(_this["displayName"] = ko.pureComputed(function () {
                    var result = _this.name && _this.name();
                    if (!result) {
                        result = "unnamed " + _this.controlType;
                    }
                    return result;
                }));
                _this.resetValue = function (propertyName) {
                    if (_this[propertyName].resetValue) {
                        _this[propertyName].resetValue();
                    }
                    else {
                        var defaultValue = _this.getPropertyDefaultValue(propertyName);
                        if (ko.isObservable(_this[propertyName])) {
                            _this[propertyName](defaultValue);
                        }
                        else {
                            Analytics.Utils.copyObservables(defaultValue, _this[propertyName]);
                        }
                    }
                };
                _this.actions.push({ action: _this.resetValue, title: Analytics.getLocalization("Reset", "ASPxReportsStringId.ReportDesigner_PropertyGrid_PopupMenu_Reset"), visible: _this.isResettableProperty });
                return _this;
            }
            ElementViewModel.prototype.getPropertyDefaultValue = function (propertyName) {
                var info = this.getPropertyInfo(propertyName);
                return ko.unwrap(info && new Analytics.Utils.ModelSerializer().deserializeProperty(info, {}));
            };
            ElementViewModel.prototype.getPropertyInfo = function (propertyName) {
                return this.getInfo().filter(function (info) { return info.propertyName === propertyName; })[0];
            };
            ElementViewModel.prototype.getInfo = function () {
                return this.getControlFactory().controlsMap[this.controlType].info;
            };
            ElementViewModel.prototype.createControl = function (model, serializer) {
                return this.getControlFactory().createControl(model, this, serializer);
            };
            ElementViewModel.prototype.dispose = function () {
                _super.prototype.dispose.call(this);
                this.surface && this.surface.dispose();
            };
            ElementViewModel.prototype.preInitProperties = function (model, parent, serializer) { };
            ElementViewModel.prototype.getNearestParent = function (target) {
                return target.getMetaData().isContainer ? target : target.getNearestParent(target.parentModel());
            };
            ElementViewModel.prototype.getControlInfo = function () {
                return this.getControlFactory().controlsMap[this.controlType || "Unknown"];
            };
            ElementViewModel.prototype.getMetaData = function () {
                var controlType = this.controlType ? this.controlType : "Unknown", data = this.getControlFactory().controlsMap[controlType];
                return {
                    isContainer: data.isContainer || false,
                    isCopyDeny: data.isCopyDeny || false,
                    isDeleteDeny: data.isDeleteDeny || false,
                    canDrop: data.canDrop || (function () { return true; }),
                    isPasteDeny: data.isPasteDeny || !data.isContainer
                };
            };
            ElementViewModel.prototype._hasModifiedValue = function (name) {
                return this["_" + name] && this["_" + name]() && this.isPropertyModified(name);
            };
            ElementViewModel.prototype.createChild = function (info) {
                var newControl = this.getControlFactory().createControl(info, this);
                this.addChild(newControl);
                return newControl;
            };
            ElementViewModel.prototype.removeChilds = function (controls) {
                if (this["controls"]) {
                    var childs = this["controls"]();
                    for (var i = 0; i < controls.length; i++) {
                        childs.splice(childs.indexOf(controls[i]), 1);
                    }
                    this["controls"].valueHasMutated();
                }
            };
            ElementViewModel.prototype.addChilds = function (controls) {
                if (this["controls"]) {
                    var childs = this["controls"]();
                    for (var i = 0; i < controls.length; i++) {
                        childs.splice(0, 0, controls[i]);
                    }
                    this["controls"].valueHasMutated();
                }
            };
            ElementViewModel.prototype.removeChild = function (control) {
                if (this["controls"]) {
                    this["controls"].splice(this["controls"]().indexOf(control), 1);
                }
            };
            ElementViewModel.prototype.addChild = function (control) {
                if (this["controls"] && this["controls"]().indexOf(control) === -1) {
                    control.parentModel(this);
                    this["controls"].splice(0, 0, control);
                }
            };
            ElementViewModel.prototype.isPropertyVisible = function (name) {
                return true;
            };
            ElementViewModel.prototype.isPropertyDisabled = function (name) {
                return false;
            };
            ElementViewModel.prototype.isPropertyModified = function (name) {
                var needName = this["_" + name] ? "_" + name : name;
                if (this[needName].isPropertyModified) {
                    return this[needName].isPropertyModified();
                }
                else if (this[needName].isEmpty) {
                    return !this[needName].isEmpty();
                }
                else {
                    var defaultValue = this.getPropertyDefaultValue(name), propertyValue = ko.unwrap(this[needName]);
                    if (defaultValue instanceof Object) {
                        return !Analytics.Utils.compareObjects(defaultValue, propertyValue);
                    }
                    else {
                        return defaultValue !== propertyValue;
                    }
                }
            };
            ElementViewModel.prototype.getControlFactory = function () {
                throw Error("Virtual method getControlFactory");
            };
            ElementViewModel.prototype.isResettableProperty = function (propertyName) {
                return ["name", "size", "location"].indexOf(propertyName) === -1;
            };
            Object.defineProperty(ElementViewModel.prototype, "root", {
                get: function () {
                    var root = this;
                    while (root && root.parentModel()) {
                        root = root.parentModel();
                    }
                    return root;
                },
                enumerable: true,
                configurable: true
            });
            ElementViewModel.prototype.rtl = function () {
                return false;
            };
            return ElementViewModel;
        }(Analytics.Utils.Disposable));
        Analytics.ElementViewModel = ElementViewModel;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Margins = (function () {
            function Margins(left, right, top, bottom) {
                this.bottom = ko.observable(bottom);
                this.left = ko.observable(left);
                this.right = ko.observable(right);
                this.top = ko.observable(top);
            }
            Margins.prototype.getInfo = function () {
                return Analytics.paddingSerializationsInfo;
            };
            Margins.prototype.isEmpty = function () {
                return this.toString() === Margins.defaultVal;
            };
            Margins.fromString = function (value) {
                if (value === void 0) { value = Margins.defaultVal; }
                var components = value.split(',');
                return new Margins(parseInt(components[0]), parseInt(components[1]), parseInt(components[2]), parseInt(components[3]));
            };
            Margins.prototype.toString = function () {
                var result = Math.round(this.left()) + ", " + Math.round(this.right()) + ", " + Math.round(this.top()) + ", " + Math.round(this.bottom());
                return result;
            };
            Margins.defaultVal = "100, 100, 100, 100";
            Margins.unitProperties = ["left", "right"];
            return Margins;
        }());
        Analytics.Margins = Margins;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        Analytics.left = {
            propertyName: "left", modelName: "@Left", localizationId: "DevExpress.XtraPrinting.PaddingInfo.Left", displayName: "Left", editor: Analytics.Widgets.editorTemplates.numeric
        }, Analytics.right = { propertyName: "right", localizationId: "DevExpress.XtraPrinting.PaddingInfo.Right", modelName: "@Right", displayName: "Right", editor: Analytics.Widgets.editorTemplates.numeric }, Analytics.top = { propertyName: "top", localizationId: "DevExpress.XtraPrinting.PaddingInfo.Top", modelName: "@Top", displayName: "Top", editor: Analytics.Widgets.editorTemplates.numeric }, Analytics.bottom = { propertyName: "bottom", localizationId: "DevExpress.XtraPrinting.PaddingInfo.Bottom", modelName: "@Bottom", displayName: "Bottom", editor: Analytics.Widgets.editorTemplates.numeric }, Analytics.all = { propertyName: "all", localizationId: "DevExpress.XtraPrinting.PaddingInfo.All", displayName: "All", editor: Analytics.Widgets.editorTemplates.numeric };
        Analytics.paddingSerializationsInfo = [Analytics.all, Analytics.left, Analytics.right, Analytics.top, Analytics.bottom];
        var PaddingModel = (function (_super) {
            __extends(PaddingModel, _super);
            function PaddingModel(left, right, top, bottom, dpi) {
                if (left === void 0) { left = ko.observable(null); }
                if (right === void 0) { right = ko.observable(null); }
                if (top === void 0) { top = ko.observable(null); }
                if (bottom === void 0) { bottom = ko.observable(null); }
                if (dpi === void 0) { dpi = ko.observable(100); }
                var _this = _super.call(this) || this;
                _this.left = left;
                _this.right = right;
                _this.top = top;
                _this.bottom = bottom;
                _this.dpi = dpi;
                ["left", "right", "top", "bottom"].forEach(function (propertyName) {
                    _this['_' + propertyName] = ko.observable(_this[propertyName]());
                    _this._disposables.push(_this[propertyName] = ko.computed({
                        read: function () {
                            return _this['_' + propertyName]() || 0;
                        },
                        write: function (newVal) {
                            _this['_' + propertyName](newVal);
                        }
                    }));
                });
                var isUpdating = ko.observable(false);
                var oldValue = null;
                _this._disposables.push(_this.all = ko.computed({
                    read: function () {
                        if (isUpdating())
                            return oldValue;
                        if (["right", "top", "bottom"].every(function (propertyName) { return _this[propertyName]() === _this.left(); }))
                            oldValue = _this.left();
                        else
                            oldValue = null;
                        return oldValue;
                    },
                    write: function (newVal) {
                        isUpdating(true);
                        ["left", "right", "top", "bottom"].forEach(function (propertyName) { return _this[propertyName](newVal); });
                        isUpdating(false);
                    }
                }));
                return _this;
            }
            PaddingModel.prototype.getInfo = function () {
                return Analytics.paddingSerializationsInfo;
            };
            PaddingModel.prototype.resetValue = function () {
                var _this = this;
                ["left", "right", "top", "bottom"].forEach(function (name) { return _this['_' + name](null); });
            };
            PaddingModel.prototype.isEmpty = function () {
                var _this = this;
                return ["left", "right", "top", "bottom"].map(function (x) { return ko.unwrap(_this['_' + x]); }).every(function (x) { return x === null; });
            };
            PaddingModel.prototype.applyFromString = function (value) {
                if (value) {
                    var components = (value || "").split(',');
                    this.left(parseInt(components[0]) || 0);
                    this.right(parseInt(components[1]) || 0);
                    this.top(parseInt(components[2]) || 0);
                    this.bottom(parseInt(components[3]) || 0);
                }
                return this;
            };
            PaddingModel.from = function (val) {
                return new PaddingModel().applyFromString(val);
            };
            PaddingModel.prototype.toString = function () {
                if (this.isEmpty())
                    return;
                return this._toString();
            };
            PaddingModel.prototype._toString = function (inner) {
                var _this = this;
                if (inner === void 0) { inner = false; }
                return ["left", "right", "top", "bottom"].map(function (x) { return parseInt(ko.unwrap(_this[x])); }).concat(this.dpi()).join(', ');
            };
            PaddingModel.defaultVal = "0, 0, 0, 0, 100";
            PaddingModel.unitProperties = ["left", "right", "top", "bottom"];
            return PaddingModel;
        }(Analytics.Utils.Disposable));
        Analytics.PaddingModel = PaddingModel;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Point = (function () {
            function Point(x, y) {
                this.x = ko.observable(x);
                this.y = ko.observable(y);
            }
            Point.prototype.getInfo = function () {
                return Analytics.Internal.locationFake;
            };
            Point.fromString = function (value) {
                if (value === void 0) { value = "0, 0"; }
                var components = value.split(',');
                return new Point(parseFloat(components[0]), parseFloat(components[1]));
            };
            Point.prototype.toString = function () {
                return this.x() + ", " + this.y();
            };
            Point.unitProperties = ["x", "y"];
            return Point;
        }());
        Analytics.Point = Point;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var SerializableModel = (function (_super) {
            __extends(SerializableModel, _super);
            function SerializableModel(model, serializer, info) {
                var _this = _super.call(this) || this;
                _this.preInitProperties(model, serializer, info);
                if (info) {
                    _this.getInfo = function () {
                        return info;
                    };
                }
                serializer = serializer || new Analytics.Utils.ModelSerializer();
                serializer.deserialize(_this, model, info);
                return _this;
            }
            SerializableModel.prototype.preInitProperties = function (model, serializer, info) { };
            return SerializableModel;
        }(Analytics.Utils.Disposable));
        Analytics.SerializableModel = SerializableModel;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Size = (function () {
            function Size(width, height) {
                this.isPropertyDisabled = function (name) { return void 0; };
                this.width = ko.observable(width);
                this.height = ko.observable(height);
            }
            Size.prototype.getInfo = function () {
                return Analytics.Internal.sizeFake;
            };
            Size.fromString = function (value) {
                if (value === void 0) { value = "0, 0"; }
                var components = value.split(',');
                return new Size(parseFloat(components[0]), parseFloat(components[1]));
            };
            Size.prototype.toString = function () {
                return this.width() + ", " + this.height();
            };
            Size.unitProperties = ["width", "height"];
            return Size;
        }());
        Analytics.Size = Size;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var AjaxSetup = (function () {
                function AjaxSetup() {
                    this.ajaxSettings = {};
                }
                AjaxSetup.prototype.sendRequest = function (settings) {
                    return $.ajax($.extend({}, this.ajaxSettings, settings));
                };
                return AjaxSetup;
            }());
            Internal.AjaxSetup = AjaxSetup;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var DesignControlsHelper = (function (_super) {
                __extends(DesignControlsHelper, _super);
                function DesignControlsHelper(target, handlers, collectionNames) {
                    var _this = _super.call(this) || this;
                    _this.target = target;
                    _this.collectionNames = collectionNames;
                    _this._handlers = [];
                    _this._setText = false;
                    _this._visitedCollections = [];
                    _this._subscriptions = [];
                    _this.added = function (value) {
                        _this._setText = true;
                        _this._collectControls(value);
                        _this._setText = false;
                    };
                    _this.deleted = function (value) {
                        var allControls = _this.allControls();
                        var index = allControls.indexOf(value);
                        allControls.splice(index, 1);
                        Analytics.Utils.collectionsVisitor(value, function (collection) {
                            collection().forEach(function (item) {
                                allControls.splice(allControls.indexOf(item), 1);
                            });
                        });
                        _this.allControls.valueHasMutated();
                    };
                    _this.allControls = ko.observableArray();
                    var unwrappedTarget = target;
                    if (ko.isSubscribable(target)) {
                        _this._disposables.push(target.subscribe(function (newTarget) {
                            _this._visitedCollections = [];
                            for (var i = 0, len = _this._subscriptions.length; i < len; i++) {
                                _this._subscriptions[i].dispose();
                            }
                            _this._subscriptions = [];
                            _this.allControls([]);
                            if (newTarget) {
                                _this._collectControls(newTarget);
                            }
                        }));
                        unwrappedTarget = target.peek();
                    }
                    _this._disposables.push(_this.allControls.subscribe(function (args) {
                        var addedItems = args.filter(function (x) { return x.status === "added"; });
                        for (var i = 0; i < addedItems.length; i++) {
                            _this._setName(addedItems[i].value);
                        }
                        ;
                    }, null, "arrayChange"));
                    unwrappedTarget && _this._collectControls(unwrappedTarget);
                    _this._handlers.push.apply(_this._handlers, handlers);
                    return _this;
                }
                DesignControlsHelper.prototype.getNameProperty = function (model) {
                    return model.name;
                };
                DesignControlsHelper.prototype._setName = function (value) {
                    var _this = this;
                    var names = this.allControls().map(function (item) { return ko.unwrap(_this.getNameProperty(item)); });
                    if (!this.getNameProperty(value)() || names.filter(function (x) { return x === _this.getNameProperty(value)(); }).length > 1) {
                        var controlType = value.controlType || "Unknown", initialText = value.getControlInfo && value.getControlInfo().defaultVal && value.getControlInfo().defaultVal["@Text"];
                        var newName = Internal.getUniqueNameForNamedObjectsArray(this.allControls(), controlType.split('.').pop(), names);
                        this.getNameProperty(value)(newName);
                        if (this._setText && value["text"] && !value["text"]() && (initialText === null || initialText === undefined)) {
                            value["text"](this.getNameProperty(value)());
                        }
                    }
                };
                DesignControlsHelper.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this._subscriptions.forEach(function (subscription) { return subscription.dispose(); });
                    this._subscriptions.splice(0);
                    this._visitedCollections.splice(0);
                    this._handlers.splice(0);
                    this.target = null;
                    this.allControls([]);
                };
                DesignControlsHelper.prototype._collectControls = function (target) {
                    var _this = this;
                    var array = [target];
                    Analytics.Utils.collectionsVisitor(target, function (collection, owner) {
                        if (_this._visitedCollections.indexOf(collection) === -1) {
                            _this._visitedCollections.push(collection);
                            var subscriptionsArray = _this._subscriptions;
                            if (owner instanceof DevExpress.Analytics.Utils.Disposable) {
                                subscriptionsArray = owner._disposables;
                            }
                            var subscription = collection.subscribe(function (args) {
                                args.forEach(function (changeSet) {
                                    _this[changeSet.status] && _this[changeSet.status](changeSet.value);
                                    _this._handlers.forEach(function (handler) {
                                        handler[changeSet.status] && handler[changeSet.status](changeSet.value);
                                    });
                                });
                            }, null, "arrayChange");
                            subscriptionsArray.push({
                                dispose: function () {
                                    subscription.dispose();
                                    subscription = null;
                                    _this._visitedCollections.splice(_this._visitedCollections.indexOf(collection), 1);
                                }
                            });
                        }
                        array.push.apply(array, collection());
                    }, this.collectionNames);
                    this.allControls.push.apply(this.allControls, array);
                };
                DesignControlsHelper.prototype.getControls = function (target) {
                    var controls = ko.observableArray();
                    Analytics.Utils.collectionsVisitor(target, function (collection) {
                        controls.push.apply(controls, collection());
                    });
                    return controls;
                };
                return DesignControlsHelper;
            }(Analytics.Utils.Disposable));
            Internal.DesignControlsHelper = DesignControlsHelper;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function patchPositionByRTL(position, rtl) {
                if (rtl) {
                    if (position === "Left")
                        return "Right";
                    else if (position === "Right")
                        return "Left";
                }
                return position;
            }
            Internal.patchPositionByRTL = patchPositionByRTL;
            var CssCalculator = (function () {
                function CssCalculator(control, _rtlLayout) {
                    var _this = this;
                    this._rtlLayout = _rtlLayout;
                    this._control = control;
                    this.borderCss = function (zoom) {
                        var borderWidth = _this._getBorderWidth(control, zoom);
                        var borderDefault = control["borderDefault"] && control["borderDefault"]();
                        var borderColor = control["borderColor"] && control["borderColor"]() || "";
                        var borders = control["borders"] && control["borders"]() || "";
                        var borderStyle = control["borderDashStyle"] && control["borderDashStyle"]() || "";
                        return borderDefault ? _this.createBorders(borderStyle, borderWidth, borderColor, borders, borderDefault) :
                            _this.createBorders(borderStyle, borderWidth, borderColor, borders);
                    };
                    this.backGroundCss = function () {
                        return { backgroundColor: control["backColor"] && control["backColor"]() || "transparent" };
                    };
                    this.foreColorCss = function () {
                        var color = (control["foreColor"] && control["foreColor"]() || "transparent") === "transparent" ? "black" : control["foreColor"]();
                        return { color: color };
                    };
                    this.fontCss = function () {
                        return _this.createFont(control["font"] && control["font"]() || "");
                    };
                    this.wordWrapCss = function () {
                        return _this.createWordWrap(ko.unwrap(control["wordWrap"]), ko.unwrap(control["multiline"]));
                    };
                    this.paddingsCss = function () {
                        var controlPaddings = ko.unwrap(control["paddingObj"] || control["padding"]) || Analytics.PaddingModel.from(Analytics.PaddingModel.defaultVal);
                        var paddings = {};
                        paddings["paddingLeft"] = _this._getPixelValueFromUnit(controlPaddings.left(), control) + "px";
                        paddings["paddingTop"] = _this._getPixelValueFromUnit(controlPaddings.top(), control) + "px";
                        paddings["paddingRight"] = _this._getPixelValueFromUnit(controlPaddings.right(), control) + "px";
                        paddings["paddingBottom"] = _this._getPixelValueFromUnit(controlPaddings.bottom(), control) + "px";
                        return paddings;
                    };
                    this.textAlignmentCss = function () {
                        var align = control["textAlignment"] && control["textAlignment"]() || "";
                        return $.extend(_this.createVerticalAlignment(align), _this.createHorizontalAlignment(align));
                    };
                    this.stroke = function () {
                        var color = (control["foreColor"] && control["foreColor"]() || "transparent") === "transparent" ? "black" : control["foreColor"]();
                        return { 'stroke': color };
                    };
                    this.strokeWidth = function () {
                        var lineWidth = control["lineWidth"] && control["lineWidth"]() || "";
                        return { 'strokeWidth': lineWidth };
                    };
                    this.strokeWidthWithWidth = function () {
                        var lineWidth = control["width"] && control["width"]() || "";
                        return { 'strokeWidth': lineWidth };
                    };
                    this.strokeDashArray = function () {
                        var dashArray = _this.createStrokeDashArray(control["lineStyle"] && control["lineStyle"]() || "", control["lineWidth"] && control["lineWidth"]() || "");
                        return { 'strokeDasharray': dashArray };
                    };
                    this.strokeDashArrayWithWidth = function () {
                        var dashArray = _this.createStrokeDashArray(control["lineStyle"] && control["lineStyle"]() || "", control["width"] && control["width"]() || "");
                        return { 'strokeDasharray': dashArray };
                    };
                    this.crossBandBorder = function (position) {
                        return _this.createBorder(control["borderDashStyleCrossband"] && control["borderDashStyleCrossband"]() || "solid", _this._getBorderWidth(control), control["borderColor"] && control["borderColor"]() || "", control["borders"] && control["borders"]() || "", position);
                    };
                    this.angle = function () {
                        return _this.createAngle(control["angle"] && control["angle"]() || 0);
                    };
                    this.cellBorder = function (position, zoom) {
                        return _this.createControlBorder(control["borderDashStyle"] && control["borderDashStyle"]() || "solid", _this._getBorderWidth(control, zoom), control["borderColor"] && control["borderColor"]() || "", control["borders"] && control["borders"]() || "", position);
                    };
                    this.zipCodeFontCss = function (fontSize) {
                        return _this.createZipCodeFont(fontSize || control["size"]["height"]());
                    };
                    this.zipCodeAlignment = function () {
                        var align = "TopLeft";
                        return $.extend(_this.createVerticalAlignment(align), _this.createHorizontalAlignment(align));
                    };
                }
                CssCalculator.prototype._getPixelValueFromUnit = function (value, control) {
                    if (control["root"] && control["root"].measureUnit) {
                        return Analytics.Utils.unitsToPixel(value, control["root"].measureUnit());
                    }
                    return value;
                };
                CssCalculator.prototype._patchPosition = function (position) {
                    return patchPositionByRTL(position, this._rtlLayout());
                };
                CssCalculator.prototype._getBorderWidth = function (control, zoom) {
                    return control["borderWidth"] && Math.floor(control["borderWidth"]() * (zoom || 1)) || "";
                };
                CssCalculator.prototype.createBorder = function (dashStyle, width, color, positions, position) {
                    var line = {};
                    positions = positions || "All";
                    line = { stroke: "Silver", strokeWidth: 2 };
                    var dash = this.createStrokeDashArray(dashStyle, width);
                    if (positions.indexOf(position) !== -1 || positions.indexOf("All") !== -1) {
                        line["stroke"] = color;
                        line["strokeWidth"] = width;
                        line["strokeDasharray"] = dash;
                    }
                    return line;
                };
                CssCalculator.prototype.createControlBorder = function (borderStyle, width, color, positions, position, defaultColor) {
                    if (defaultColor === void 0) { defaultColor = "solid 1px Silver"; }
                    var border = {};
                    positions = positions || "";
                    if (borderStyle === "Dash") {
                        borderStyle = "dashed";
                    }
                    else if (borderStyle === "Dot") {
                        borderStyle = "dotted";
                    }
                    else if (borderStyle === "Double") {
                        borderStyle = "double";
                    }
                    else {
                        borderStyle = "solid";
                    }
                    if (positions.indexOf(position) !== -1 || positions.indexOf("All") !== -1) {
                        border["border" + this._patchPosition(position)] = borderStyle + " " + width + "px " + color;
                    }
                    else {
                        border["border" + this._patchPosition(position)] = defaultColor;
                    }
                    return border;
                };
                CssCalculator.prototype.createBorders = function (borderStyle, width, color, positions, defaultColor) {
                    if (defaultColor === void 0) { defaultColor = CssCalculator.DEFAULT_BORDER; }
                    var left = this.createControlBorder(borderStyle, width, color, positions, "Left", defaultColor);
                    var right = this.createControlBorder(borderStyle, width, color, positions, "Right", defaultColor);
                    var top = this.createControlBorder(borderStyle, width, color, positions, "Top", defaultColor);
                    var bottom = this.createControlBorder(borderStyle, width, color, positions, "Bottom", defaultColor);
                    var border = $.extend({}, left, right, top, bottom);
                    return border;
                };
                CssCalculator.prototype.createZipCodeFont = function (height) {
                    var fontStyles = {};
                    fontStyles["fontFamily"] = "Impact";
                    fontStyles["fontSize"] = height + "px";
                    return fontStyles;
                };
                CssCalculator.prototype.createFont = function (fontString) {
                    var fontStyles = {};
                    fontString = fontString || "";
                    var components = fontString.split(',');
                    fontStyles["fontFamily"] = components[0] ? '"' + components[0] + '"' : "";
                    fontStyles["fontSize"] = components[1];
                    if (components.length > 2) {
                        for (var i = 2; i < components.length; i++) {
                            if (components[i].indexOf("Bold") !== -1)
                                fontStyles["fontWeight"] = "Bold";
                            if (components[i].indexOf("Italic") !== -1)
                                fontStyles["fontStyle"] = "Italic";
                            if (components[i].indexOf("Underline") != -1)
                                fontStyles["textDecoration"] = "Underline";
                            if (components[i].indexOf("Strikeout") != -1)
                                fontStyles["textDecoration"] = (fontStyles["textDecoration"] ? fontStyles["textDecoration"] + " " : "") + "Line-through";
                        }
                    }
                    if (!fontStyles["fontWeight"]) {
                        fontStyles["fontWeight"] = "";
                    }
                    if (!fontStyles["fontStyle"]) {
                        fontStyles["fontStyle"] = "";
                    }
                    if (!fontStyles["textDecoration"]) {
                        fontStyles["textDecoration"] = "";
                    }
                    return fontStyles;
                };
                CssCalculator.prototype.createVerticalAlignment = function (alignment) {
                    var result = {};
                    if (alignment.indexOf("Top") !== -1) {
                        result["verticalAlign"] = "top";
                    }
                    if (alignment.indexOf("Middle") !== -1) {
                        result["verticalAlign"] = "middle";
                    }
                    if (alignment.indexOf("Bottom") !== -1) {
                        result["verticalAlign"] = "bottom";
                    }
                    return result;
                };
                CssCalculator.prototype.createHorizontalAlignment = function (alignment) {
                    var result = {};
                    if (alignment.indexOf("Left") !== -1) {
                        result["textAlign"] = patchPositionByRTL("Left", this._control.rtl()).toLowerCase();
                    }
                    if (alignment.indexOf("Right") !== -1) {
                        result["textAlign"] = patchPositionByRTL("Right", this._control.rtl()).toLowerCase();
                    }
                    if (alignment.indexOf("Center") !== -1) {
                        result["textAlign"] = "center";
                    }
                    if (alignment.indexOf("Justify") !== -1) {
                        result["textAlign"] = "justify";
                    }
                    return result;
                };
                CssCalculator.prototype.createStrokeDashArray = function (style, width) {
                    if (style === "Solid") {
                        return "";
                    }
                    else if (style === "Dot") {
                        return [width, width * 2].join("px, ") + "px";
                    }
                    else if (style === "Dash") {
                        return [width * 4, width * 4].join("px, ") + "px";
                    }
                    else if (style === "DashDot") {
                        return [width * 4, width * 2, width, width * 2].join("px, ") + "px";
                    }
                    else if (style === "DashDotDot") {
                        return [width * 4, width * 2, width, width * 2, width, width * 2].join("px, ") + "px";
                    }
                    else {
                        return "";
                    }
                };
                CssCalculator.prototype.createWordWrap = function (wordwrap, multiline) {
                    var result = {};
                    if (wordwrap === false && multiline === false) {
                        result["white-space"] = "nowrap";
                        result["word-wrap"] = "normal";
                    }
                    else if (wordwrap === true && multiline === false) {
                        result["word-wrap"] = "break-word";
                        result["white-space"] = "";
                    }
                    else if (wordwrap === false && multiline === true) {
                        result["word-wrap"] = "normal";
                        result["white-space"] = 'pre';
                    }
                    else if (wordwrap === true && multiline === true) {
                        result["white-space"] = 'pre-wrap';
                        result["word-wrap"] = "break-word";
                    }
                    return result;
                };
                CssCalculator.prototype.createAngle = function (angle) {
                    angle = -angle;
                    return {
                        '-webkit-transform': "rotate(" + angle + "deg)",
                        '-moz-transform': "rotate(" + angle + "deg)",
                        '-o-transform': "rotate(" + angle + "deg)",
                        '-ms-transform': "rotate(" + angle + "deg)",
                        'transform': "rotate(" + angle + "deg)"
                    };
                };
                CssCalculator.prototype.contentSizeCss = function (controlSurfaceWidth, controlSurfaceHeight, zoom, borders, paddings) {
                    var _this = this;
                    var result = { top: 1, left: 1, right: 1, bottom: 1, width: 1, height: 1 };
                    borders = borders || this._control["borders"] && this._control["borders"]() || "";
                    var borderWidth = this._getBorderWidth(this._control, zoom);
                    ["Left", "Top", "Right", "Bottom"].forEach(function (item) {
                        var value = 0;
                        if (borderWidth != "" && (borders.indexOf(item) !== -1 || borders.indexOf("All") !== -1)) {
                            value += borderWidth;
                        }
                        if (paddings) {
                            value += _this._getPixelValueFromUnit(ko.unwrap(paddings[item.toLowerCase()]), _this._control) * (zoom || 1);
                        }
                        if (value)
                            result[_this._patchPosition(item).toLowerCase()] = value;
                    });
                    result.width = controlSurfaceWidth - result.left - result.right;
                    result.height = controlSurfaceHeight - result.top - result.bottom;
                    return result;
                };
                CssCalculator.DEFAULT_BORDER = "none";
                return CssCalculator;
            }());
            Internal.CssCalculator = CssCalculator;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var ColorPickerEditor = (function (_super) {
                __extends(ColorPickerEditor, _super);
                function ColorPickerEditor(info, level, parentDisabled, textToSearch) {
                    var _this = _super.call(this, info, level, parentDisabled, textToSearch) || this;
                    _this._disposables.push(_this.displayValue = ko.pureComputed({
                        read: function () {
                            var value = ko.unwrap(_this.value);
                            if (value && value.toLowerCase() === "transparent") {
                                return "rgba(0,0,0,0)";
                            }
                            if ((/^rgba\s*\((\s*[a-f\d]+\s*,){3}\s*[a-f\d]+\s*\)$/i).test(value))
                                return value;
                            var div = document.createElement("div");
                            div.style.backgroundColor = value;
                            return div.style.backgroundColor || "rgba(0,0,0,1)";
                        },
                        write: function (val) {
                            _this.value(val);
                        }
                    }));
                    return _this;
                }
                return ColorPickerEditor;
            }(Widgets.Editor));
            Widgets.ColorPickerEditor = ColorPickerEditor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var FieldListEditor = (function (_super) {
                __extends(FieldListEditor, _super);
                function FieldListEditor(modelPropertyInfo, level, parentDisabled, textToSearch) {
                    var _this = _super.call(this, modelPropertyInfo, level, parentDisabled, textToSearch) || this;
                    _this.path = ko.pureComputed(function () {
                        return _this._model() && _this._model()["getPath"] && _this._model()["getPath"](_this.name) || "";
                    });
                    _this.treeListController = new Widgets.TreeListController();
                    _this._disposables.push(_this.path);
                    _this._disposables.push(_this.treeListController);
                    return _this;
                }
                return FieldListEditor;
            }(Widgets.Editor));
            Widgets.FieldListEditor = FieldListEditor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var DataMemberTreeListController = (function () {
                function DataMemberTreeListController() {
                    this.selectedItem = null;
                    this.suppressActions = true;
                }
                DataMemberTreeListController.prototype.dispose = function () {
                    this.selectedItem = null;
                };
                DataMemberTreeListController.prototype.itemsFilter = function (item) {
                    return item.specifics !== "parameters" && (item.specifics === "List" || item.specifics === "ListSource" || item.isList === true || item.specifics === "none");
                };
                DataMemberTreeListController.prototype.hasItems = function (item) {
                    return item.specifics !== "none";
                };
                DataMemberTreeListController.prototype.canSelect = function (value) {
                    return (value.hasItems && !!value.path && (value.data.specifics === "List" || value.data.specifics === "ListSource")) || value.data.specifics === "none";
                };
                DataMemberTreeListController.prototype.select = function (value) {
                    if (this.canSelect(value)) {
                        this.selectedItem && this.selectedItem.isSelected(false);
                        this.selectedItem = value;
                        value.isSelected(true);
                    }
                };
                return DataMemberTreeListController;
            }());
            Widgets.DataMemberTreeListController = DataMemberTreeListController;
            var DataMemberEditor = (function (_super) {
                __extends(DataMemberEditor, _super);
                function DataMemberEditor(modelPropertyInfo, level, parentDisabled, textToSearch) {
                    var _this = _super.call(this, modelPropertyInfo, level, parentDisabled, textToSearch) || this;
                    _this.treeListController = new DataMemberTreeListController();
                    _this._disposables.push(_this.treeListController);
                    return _this;
                }
                return DataMemberEditor;
            }(Widgets.FieldListEditor));
            Widgets.DataMemberEditor = DataMemberEditor;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var RequiredNullableEditor = (function (_super) {
                __extends(RequiredNullableEditor, _super);
                function RequiredNullableEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                RequiredNullableEditor.prototype.getValidationRules = function () {
                    return (_super.prototype.getValidationRules.call(this) || []).concat(this.editorOptions.showClearButton && ko.unwrap(this.editorOptions.showClearButton) ? [] : Widgets.requiredValidationRules);
                };
                return RequiredNullableEditor;
            }(Widgets.Editor));
            Widgets.RequiredNullableEditor = RequiredNullableEditor;
            function createNumericEditor(dotNetTypeFullName, specifics) {
                var DynamicNumberEditor = (function (_super) {
                    __extends(DynamicNumberEditor, _super);
                    function DynamicNumberEditor(info, level, parentDisabled, textToSearch) {
                        return _super.call(this, info, level, parentDisabled, textToSearch) || this;
                    }
                    DynamicNumberEditor.prototype.getOptions = function (templateOptions) {
                        var options = _super.prototype.getOptions.call(this, templateOptions);
                        return Widgets.Internal.ValueEditorHelper.getNumberEditorOptions(dotNetTypeFullName, specifics, options);
                    };
                    return DynamicNumberEditor;
                }(RequiredNullableEditor));
                return {
                    header: "dx-number-editor",
                    editorType: DynamicNumberEditor
                };
            }
            Widgets.createNumericEditor = createNumericEditor;
            Widgets.coreEditorTemplates = {
                guid: { header: "dxrd-guid", editorType: Widgets.GuidEditor },
                date: { header: "dx-date", editorType: RequiredNullableEditor },
                borders: { header: "dxrd-borders" },
                controls: { header: "dxrd-controls" },
                objecteditorCustom: { custom: "dxrd-objectEditorContent", editorType: Widgets.PropertyGridEditor },
                treelist: { custom: "dxrd-treelistContent", editorType: Widgets.Editor },
                field: { header: "dxrd-field", editorType: Widgets.FieldListEditor },
                dataMember: { header: "dxrd-field", editorType: Widgets.DataMemberEditor },
                filterEditor: { header: "dxrd-filterstring" },
                formatEditor: { header: "dxrd-formatstring" },
                expressionEditor: { header: "dxrd-expressionstring" },
                multiValue: { header: "dxrd-multivalue" },
                multiValueEditable: { custom: "dxrd-multivalue-editable" },
                customColorEditor: { header: "dxrd-colorpicker", editorType: Widgets.ColorPickerEditor },
                sbyte: createNumericEditor("System.SByte", "integer"),
                decimal: createNumericEditor("System.Decimal", "float"),
                int64: createNumericEditor("System.Int64", "integer"),
                int32: createNumericEditor("System.Int32", "integer"),
                int16: createNumericEditor("System.Int16", "integer"),
                single: createNumericEditor("System.Single", "float"),
                double: createNumericEditor("System.Double", "float"),
                byte: createNumericEditor("System.Byte", "integer"),
                uint16: createNumericEditor("System.UInt16", "integer"),
                uint32: createNumericEditor("System.UInt32", "integer"),
                uint64: createNumericEditor("System.UInt64", "integer")
            };
            Widgets.editorTemplates = Analytics.Utils.extend(Widgets.editorTemplates, Widgets.coreEditorTemplates);
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            Internal.editorTypeMapper = {
                "Enum": Analytics.Widgets.editorTemplates.combobox,
                "System.String": Analytics.Widgets.editorTemplates.text,
                "System.Guid": Analytics.Widgets.coreEditorTemplates.guid,
                "System.SByte": Analytics.Widgets.coreEditorTemplates.sbyte,
                "System.Decimal": Analytics.Widgets.coreEditorTemplates.decimal,
                "System.Int64": Analytics.Widgets.coreEditorTemplates.int64,
                "System.Int32": Analytics.Widgets.coreEditorTemplates.int32,
                "System.Int16": Analytics.Widgets.coreEditorTemplates.int16,
                "System.Single": Analytics.Widgets.coreEditorTemplates.single,
                "System.Double": Analytics.Widgets.coreEditorTemplates.double,
                "System.Byte": Analytics.Widgets.coreEditorTemplates.byte,
                "System.UInt16": Analytics.Widgets.coreEditorTemplates.uint16,
                "System.UInt32": Analytics.Widgets.coreEditorTemplates.uint32,
                "System.UInt64": Analytics.Widgets.coreEditorTemplates.uint64,
                "System.Boolean": Analytics.Widgets.editorTemplates.boolSelect,
                "System.DateTime": Analytics.Widgets.editorTemplates.date,
                "DevExpress.DataAccess.Expression": Analytics.Widgets.coreEditorTemplates.expressionEditor
            };
            function getEditorType(typeString) {
                return Internal.editorTypeMapper[typeString] || Analytics.Widgets.editorTemplates.text;
            }
            Internal.getEditorType = getEditorType;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function getTypeNameFromFullName(controlType) {
                return controlType.split(',')[0].trim();
            }
            Internal.getTypeNameFromFullName = getTypeNameFromFullName;
            function getShortTypeName(controlType) {
                var fullTypeName = getTypeNameFromFullName(controlType), typeNameParts = fullTypeName.split('.');
                return typeNameParts[typeNameParts.length - 1];
            }
            Internal.getShortTypeName = getShortTypeName;
            function getControlFullName(value) {
                if (!value)
                    return "";
                var displayName = ko.unwrap(value.name) || ko.unwrap(value.displayName), controlType = value.displayType && value.displayType() || value.controlType;
                if (value.getControlFactory) {
                    var info = value.getControlFactory().getControlInfo(controlType);
                    if (info.displayName)
                        controlType = info.displayName;
                }
                return displayName + (controlType ? (' (' + Analytics.getLocalization(getShortTypeName(controlType)) + ')') : '');
            }
            Internal.getControlFullName = getControlFullName;
            function getImageClassName(controlType, isTemplate) {
                if (isTemplate === void 0) { isTemplate = false; }
                var controlType = getTypeNameFromFullName(controlType || "").split(".").join("_"), name;
                if (controlType.indexOf("XR") === 0) {
                    name = controlType.slice(2).toLowerCase();
                }
                else if (controlType === "DevExpress_XtraReports_UI_XtraReport") {
                    name = "master_report";
                }
                return (isTemplate ? "dxrd-svg-toolbox-" : "dxrd-image-") + (name ? name : controlType.toLowerCase());
            }
            Internal.getImageClassName = getImageClassName;
            function getUniqueNameForNamedObjectsArray(objects, prefix, names) {
                if (prefix.indexOf("XR") === 0) {
                    prefix = prefix[2].toLowerCase() + prefix.slice(3);
                }
                else {
                    var indexBand = prefix.indexOf("Band");
                    if (indexBand !== -1 && prefix !== "SubBand") {
                        prefix = prefix.slice(0, indexBand) + prefix.slice(indexBand + 4);
                    }
                }
                return getUniqueName(names || objects.map(function (item) { return ko.unwrap(item.name); }), prefix);
            }
            Internal.getUniqueNameForNamedObjectsArray = getUniqueNameForNamedObjectsArray;
            function getUniqueName(names, prefix) {
                var i = 1, result = prefix + i;
                while (names.filter(function (item) { return item === result; }).length > 0) {
                    i++;
                    result = prefix + i;
                }
                ;
                return result;
            }
            Internal.getUniqueName = getUniqueName;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function initGlobalize(settings) {
                var globalize = Analytics.Localization.Globalize;
                if (globalize && settings) {
                    settings.cldrSupplemental && globalize.load(settings.cldrSupplemental);
                    settings.cldrData && globalize.load(settings.cldrData);
                    settings.currentCulture && globalize.locale(settings.currentCulture);
                }
            }
            Internal.initGlobalize = initGlobalize;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var HoverInfo = (function () {
                function HoverInfo() {
                    this._x = 0;
                    this._y = 0;
                    this.isOver = false;
                }
                Object.defineProperty(HoverInfo.prototype, "x", {
                    get: function () {
                        return this._x;
                    },
                    set: function (newX) {
                        this._x = newX;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(HoverInfo.prototype, "y", {
                    get: function () {
                        return this._y;
                    },
                    set: function (newY) {
                        this._y = newY;
                    },
                    enumerable: true,
                    configurable: true
                });
                return HoverInfo;
            }());
            Internal.HoverInfo = HoverInfo;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function processTextEditorHotKeys(event, delegates) {
                if (!event || !delegates)
                    return;
                if (event.keyCode === 27 && !!delegates["esc"]) {
                    delegates["esc"]();
                }
                if (event.keyCode === 13 && event.ctrlKey && !!delegates["ctrlEnter"]) {
                    delegates["ctrlEnter"]();
                }
            }
            Internal.processTextEditorHotKeys = processTextEditorHotKeys;
            var InlineTextEdit = (function (_super) {
                __extends(InlineTextEdit, _super);
                function InlineTextEdit(selection) {
                    var _this = _super.call(this) || this;
                    _this._showInline = ko.observable(false);
                    _this.text = ko.observable();
                    var _controlText;
                    _this._disposables.push(selection.focused.subscribe(function () {
                        if (_this._showInline() && _controlText) {
                            _controlText(_this.text());
                            _this._showInline(false);
                        }
                        var controlModel = selection.focused() && selection.focused().getControlModel();
                        _controlText = controlModel && (controlModel.textEditableProperty || controlModel.text);
                    }));
                    _this._disposables.push(_this.visible = ko.pureComputed(function () {
                        return _this._showInline();
                    }));
                    _this.show = function (element) {
                        if (_this._showInline()) {
                            return;
                        }
                        var isSingleControlSelected = !!selection.selectedItems ? selection.selectedItems.length === 1 : !!selection.focused();
                        if (isSingleControlSelected && _controlText && !selection.focused().locked) {
                            _this.text(_controlText());
                            _this._showInline(true);
                            if (element) {
                                var textarea = $(element).find('textarea')[0];
                                textarea && textarea["select"]();
                            }
                        }
                        else {
                            _this._showInline(false);
                        }
                    };
                    _this.keypressAction = function (args) {
                        processTextEditorHotKeys(args.event, {
                            esc: function () { _this._showInline(false); },
                            ctrlEnter: function () {
                                _controlText(_this.text());
                                _this._showInline(false);
                            }
                        });
                    };
                    return _this;
                }
                return InlineTextEdit;
            }(Analytics.Utils.Disposable));
            Internal.InlineTextEdit = InlineTextEdit;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var ObjectStructureTreeListController = (function () {
                function ObjectStructureTreeListController(propertyNames, listPropertyNames) {
                    var _this = this;
                    this.selectedItem = null;
                    this.itemsFilter = function (item) {
                        var realPropertyName = item.name.split('.')[0];
                        return propertyNames ? propertyNames.indexOf(realPropertyName) !== -1 || $.isNumeric(realPropertyName) : true;
                    };
                    this.hasItems = function (item) {
                        var realPropertyName = item.name.split('.')[0];
                        return item.isList || (listPropertyNames ? listPropertyNames.indexOf(realPropertyName) !== -1 : false);
                    };
                    this.getActions = function (item) {
                        return item.data && item.data["innerActions"] || [];
                    };
                    this.select = function (value) {
                        _this.selectedItem && _this.selectedItem.isSelected(false);
                        _this.selectedItem = value;
                        value.isSelected(true);
                    };
                    this.showIconsForChildItems = function () { return true; };
                }
                ObjectStructureTreeListController.prototype.dispose = function () {
                    this.selectedItem = null;
                };
                ObjectStructureTreeListController.prototype.canSelect = function (value) {
                    return true;
                };
                return ObjectStructureTreeListController;
            }());
            Internal.ObjectStructureTreeListController = ObjectStructureTreeListController;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var ObjectStructureProviderBase = (function (_super) {
                __extends(ObjectStructureProviderBase, _super);
                function ObjectStructureProviderBase() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this.selectedPath = ko.observable("");
                    _this.selectedMember = ko.observable();
                    return _this;
                }
                ObjectStructureProviderBase.prototype.getClassName = function (instance) {
                    if (instance.className && instance.className()) {
                        return instance.className();
                    }
                    var funcNameRegex = /function (.{1,})\(/;
                    var results = (funcNameRegex).exec((instance).constructor.toString());
                    return (results && results.length > 1) ? results[1] : "";
                };
                ObjectStructureProviderBase.prototype.createItem = function (currentTarget, propertyName, propertyValue, result) {
                    var targetInfo = currentTarget.getInfo && currentTarget.getInfo();
                    var propertyInfo = targetInfo && targetInfo.filter(function (propertyInfo) { return propertyInfo.propertyName === propertyName; })[0], unwrapPropertyValue = ko.unwrap(propertyValue);
                    if (propertyInfo && unwrapPropertyValue !== null && typeof unwrapPropertyValue === 'object') {
                        result.push({
                            name: propertyName,
                            displayName: Analytics.getLocalization(propertyInfo.displayName, propertyInfo.localizationId),
                            specifics: propertyName,
                            innerActions: unwrapPropertyValue["innerActions"],
                            isList: !!unwrapPropertyValue.push
                        });
                    }
                };
                ObjectStructureProviderBase.prototype.getMemberByPath = function (target, path) {
                    var pathComponents = path.split("."), currentTarget = target;
                    pathComponents.splice(0, 1);
                    pathComponents.forEach(function (member) {
                        if (currentTarget && currentTarget[member]) {
                            currentTarget = ko.unwrap(currentTarget[member]);
                        }
                    });
                    return currentTarget;
                };
                ObjectStructureProviderBase.prototype.getObjectPropertiesForPath = function (target, path, propertyName) {
                    var currentTarget = this.getMemberByPath(target, path), result = [];
                    if (currentTarget) {
                        if (currentTarget.push) {
                            this.createArrayItem(currentTarget, result, propertyName);
                        }
                        else {
                            for (var name in currentTarget) {
                                this.createItem(currentTarget, name, currentTarget[name], result);
                            }
                        }
                    }
                    return result;
                };
                ObjectStructureProviderBase.prototype.createArrayItem = function (currentTarget, result, propertyName) {
                    for (var i = 0; i < currentTarget.length; i++) {
                        var unwrapArrayValue = ko.unwrap(currentTarget[i]);
                        result.push({
                            name: propertyName ? propertyName + "." + i.toString() : i.toString(),
                            displayName: ko.unwrap(unwrapArrayValue["displayName"] || unwrapArrayValue["name"]),
                            specifics: this.getClassName(unwrapArrayValue),
                            innerActions: unwrapArrayValue["innerActions"],
                            isList: !!unwrapArrayValue.push
                        });
                    }
                };
                return ObjectStructureProviderBase;
            }(Analytics.Utils.Disposable));
            Internal.ObjectStructureProviderBase = ObjectStructureProviderBase;
            var ObjectExplorerProvider = (function (_super) {
                __extends(ObjectExplorerProvider, _super);
                function ObjectExplorerProvider(rootITems, listPropertyNames, member, getPathByMember) {
                    var _this = _super.call(this) || this;
                    _this.path = ko.observable("");
                    _this.getPathByMember = getPathByMember;
                    _this.listPropertyNames = listPropertyNames || [];
                    _this.getItems = function (pathRequest) {
                        var result = $.Deferred();
                        if (!pathRequest.fullPath) {
                            result.resolve((rootITems || []).map(function (item) {
                                return { name: item.name, displayName: Analytics.getLocalization(item.displayName) || item.name, isList: true, specifics: item.className, dragData: { noDragable: true }, data: ko.unwrap(item.data) };
                            }));
                        }
                        else {
                            var target = rootITems.filter(function (item) { return item.name === pathRequest.fullPath.split('.')[0]; })[0];
                            result.resolve(_this.getObjectPropertiesForPath(ko.unwrap(target.model), pathRequest.fullPath, target.name));
                        }
                        return result.promise();
                    };
                    _this._disposables.push(_this.selectedPath = ko.computed({
                        read: function () {
                            if (member()) {
                                if (_this.path.peek()) {
                                    return _this.getPathByMember(member()).substr(_this.path.peek().length + 1);
                                }
                                else {
                                    return _this.getPathByMember(member());
                                }
                            }
                            else {
                                return null;
                            }
                        },
                        write: function (newVal) {
                            if (!!newVal) {
                                var root = !!_this.path() ? _this.path().split('.')[0] : newVal.split('.')[0];
                                var rootItem = rootITems.filter(function (x) { return x.name === root; })[0];
                                if (!!rootItem) {
                                    member(_this.getMemberByPath(ko.unwrap(rootItem.model), _this.path() ? [_this.path(), newVal].join('.') : newVal));
                                }
                            }
                            else {
                                member(null);
                            }
                        }
                    }));
                    return _this;
                }
                ObjectExplorerProvider.prototype.createArrayItem = function (currentTarget, result, propertyName) {
                    for (var i = 0; i < currentTarget.length; i++) {
                        var unwrapArrayValue = ko.unwrap(currentTarget[i]), isList = false;
                        this.listPropertyNames.forEach(function (name) {
                            if (!isList && unwrapArrayValue[name] && ko.unwrap(unwrapArrayValue[name]).length > 0) {
                                isList = true;
                            }
                        });
                        var specifics = this.getClassName(unwrapArrayValue);
                        result.push({
                            name: propertyName ? propertyName + "." + i.toString() : i.toString(),
                            displayName: ko.unwrap(unwrapArrayValue["displayName"] || unwrapArrayValue["name"]),
                            specifics: specifics,
                            isList: isList,
                            data: unwrapArrayValue,
                            dragData: {
                                noDragable: !((propertyName === "bands" && (specifics === "groupheaderband" || specifics === "groupfooterband" || specifics === "detailreportband")) ||
                                    propertyName === "controls" ||
                                    propertyName === "rows" ||
                                    propertyName === "cells" ||
                                    propertyName === "subBands" ||
                                    propertyName === "Styles" ||
                                    propertyName === "Formatting Rules")
                            }
                        });
                    }
                };
                ObjectExplorerProvider.prototype.createItem = function (currentTarget, propertyName, propertyValue, result) {
                    var isAvailableListProperty = this.listPropertyNames.length > 0 ? this.listPropertyNames.indexOf(propertyName) > -1 : true;
                    if (isAvailableListProperty && propertyValue && propertyValue.push) {
                        this.createArrayItem(ko.unwrap(propertyValue), result, propertyName);
                    }
                };
                return ObjectExplorerProvider;
            }(ObjectStructureProviderBase));
            Internal.ObjectExplorerProvider = ObjectExplorerProvider;
            var ObjectStructureProvider = (function (_super) {
                __extends(ObjectStructureProvider, _super);
                function ObjectStructureProvider(target, displayName, localizationId) {
                    var _this = _super.call(this) || this;
                    _this.getItems = function (pathRequest) {
                        var result = $.Deferred();
                        if (!pathRequest.fullPath) {
                            result.resolve([{ name: displayName || ko.unwrap(target["name"]), displayName: Analytics.getLocalization(displayName || ko.unwrap(target["name"]), localizationId), isList: true, specifics: target.className && target.className(), dragData: { noDragable: true } }]);
                        }
                        else {
                            result.resolve(_this.getObjectPropertiesForPath(ko.unwrap(target), pathRequest.fullPath));
                        }
                        return result.promise();
                    };
                    _this._disposables.push(_this.selectedPath.subscribe(function (path) {
                        _this.selectedMember(ko.unwrap(_this.getMemberByPath(ko.unwrap(target), path)));
                    }));
                    return _this;
                }
                return ObjectStructureProvider;
            }(ObjectStructureProviderBase));
            Internal.ObjectStructureProvider = ObjectStructureProvider;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            Internal.papperKindMapper = {
                A2: { width: 1654, height: 2339 },
                A3: { width: 1169, height: 1654 },
                A3Extra: { width: 1268, height: 1752 },
                A3ExtraTransverse: { width: 1268, height: 1752 },
                A3Rotated: { width: 1654, height: 1169 },
                A3Transverse: { width: 1169, height: 1654 },
                A4: { width: 827, height: 1169 },
                A4Extra: { width: 929, height: 1268 },
                A4Plus: { width: 827, height: 1299 },
                A4Rotated: { width: 1169, height: 827 },
                A4Small: { width: 827, height: 1169 },
                A4Transverse: { width: 827, height: 1169 },
                A5: { width: 583, height: 827 },
                A5Extra: { width: 685, height: 925 },
                A5Rotated: { width: 827, height: 583 },
                A5Transverse: { width: 583, height: 827 },
                A6: { width: 413, height: 583 },
                A6Rotated: { width: 583, height: 413 },
                APlus: { width: 894, height: 1402 },
                B4: { width: 984, height: 1390 },
                B4Envelope: { width: 984, height: 1390 },
                B4JisRotated: { width: 1433, height: 1012 },
                B5: { width: 693, height: 984 },
                B5Envelope: { width: 693, height: 984 },
                B5Extra: { width: 791, height: 1087 },
                B5JisRotated: { width: 1012, height: 717 },
                B5Transverse: { width: 717, height: 1012 },
                B6Envelope: { width: 693, height: 492 },
                B6Jis: { width: 504, height: 717 },
                B6JisRotated: { width: 717, height: 504 },
                BPlus: { width: 1201, height: 1917 },
                C3Envelope: { width: 1276, height: 1803 },
                C4Envelope: { width: 902, height: 1276 },
                C5Envelope: { width: 638, height: 902 },
                C65Envelope: { width: 449, height: 902 },
                C6Envelope: { width: 449, height: 638 },
                CSheet: { width: 1700, height: 2200 },
                DLEnvelope: { width: 433, height: 866 },
                DSheet: { width: 2200, height: 3400 },
                ESheet: { width: 3400, height: 4400 },
                Executive: { width: 725, height: 1050 },
                Folio: { width: 850, height: 1300 },
                GermanLegalFanfold: { width: 850, height: 1300 },
                GermanStandardFanfold: { width: 850, height: 1200 },
                InviteEnvelope: { width: 866, height: 866 },
                IsoB4: { width: 984, height: 1390 },
                ItalyEnvelope: { width: 433, height: 906 },
                JapaneseDoublePostcard: { width: 787, height: 583 },
                JapaneseDoublePostcardRotated: { width: 583, height: 787 },
                JapanesePostcard: { width: 394, height: 583 },
                Ledger: { width: 1700, height: 1100 },
                Legal: { width: 850, height: 1400 },
                LegalExtra: { width: 927, height: 1500 },
                Letter: { width: 850, height: 1100 },
                LetterExtra: { width: 927, height: 1200 },
                LetterExtraTransverse: { width: 927, height: 1200 },
                LetterPlus: { width: 850, height: 1269 },
                LetterRotated: { width: 1100, height: 850 },
                LetterSmall: { width: 850, height: 1100 },
                LetterTransverse: { width: 827, height: 1100 },
                MonarchEnvelope: { width: 388, height: 750 },
                Note: { width: 850, height: 1100 },
                Number10Envelope: { width: 412, height: 950 },
                Number11Envelope: { width: 450, height: 1038 },
                Number12Envelope: { width: 475, height: 1100 },
                Number14Envelope: { width: 500, height: 1150 },
                Number9Envelope: { width: 388, height: 888 },
                PersonalEnvelope: { width: 362, height: 650 },
                Prc16K: { width: 575, height: 846 },
                Prc16KRotated: { width: 575, height: 846 },
                Prc32K: { width: 382, height: 594 },
                Prc32KBig: { width: 382, height: 594 },
                Prc32KBigRotated: { width: 382, height: 594 },
                Prc32KRotated: { width: 382, height: 594 },
                PrcEnvelopeNumber1: { width: 402, height: 650 },
                PrcEnvelopeNumber10: { width: 1276, height: 1803 },
                PrcEnvelopeNumber10Rotated: { width: 1803, height: 1276 },
                PrcEnvelopeNumber1Rotated: { width: 650, height: 402 },
                PrcEnvelopeNumber2: { width: 402, height: 693 },
                PrcEnvelopeNumber2Rotated: { width: 693, height: 402 },
                PrcEnvelopeNumber3: { width: 492, height: 693 },
                PrcEnvelopeNumber3Rotated: { width: 693, height: 492 },
                PrcEnvelopeNumber4: { width: 433, height: 819 },
                PrcEnvelopeNumber4Rotated: { width: 819, height: 433 },
                PrcEnvelopeNumber5: { width: 433, height: 866 },
                PrcEnvelopeNumber5Rotated: { width: 866, height: 433 },
                PrcEnvelopeNumber6: { width: 472, height: 906 },
                PrcEnvelopeNumber6Rotated: { width: 906, height: 472 },
                PrcEnvelopeNumber7: { width: 630, height: 906 },
                PrcEnvelopeNumber7Rotated: { width: 906, height: 630 },
                PrcEnvelopeNumber8: { width: 472, height: 1217 },
                PrcEnvelopeNumber8Rotated: { width: 1217, height: 472 },
                PrcEnvelopeNumber9: { width: 902, height: 1276 },
                PrcEnvelopeNumber9Rotated: { width: 1276, height: 902 },
                Quarto: { width: 846, height: 1083 },
                Standard10x11: { width: 1000, height: 1100 },
                Standard10x14: { width: 1000, height: 1400 },
                Standard11x17: { width: 1100, height: 1700 },
                Standard12x11: { width: 1200, height: 1100 },
                Standard15x11: { width: 1500, height: 1100 },
                Standard9x11: { width: 900, height: 1100 },
                Statement: { width: 550, height: 850 },
                Tabloid: { width: 1100, height: 1700 },
                TabloidExtra: { width: 1169, height: 1800 },
                USStandardFanfold: { width: 1488, height: 1100 },
            };
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            Internal._addErrorPrefix = true;
            function _processError(errorThrown, deferred, jqXHR, textStatus, processErrorCallback) {
                var message = errorThrown;
                var error = Analytics.Utils.getErrorMessage(jqXHR);
                if (error && error !== message) {
                    if (!Internal._addErrorPrefix)
                        message = error;
                    else
                        message += ": " + error;
                }
                try {
                    processErrorCallback ? processErrorCallback(message, jqXHR, textStatus) : Analytics.Utils.NotifyAboutWarning(message);
                }
                finally {
                    deferred.reject(jqXHR, textStatus, errorThrown);
                }
            }
            Internal._processError = _processError;
            Internal._errorProcessor = {
                handlers: [],
                call: function (e) {
                    for (var i = 0; i < Internal._errorProcessor.handlers.length; i++) {
                        Internal._errorProcessor.handlers[i](e);
                    }
                }
            };
            function processErrorEvent(func) {
                if (func) {
                    Internal._errorProcessor.handlers.push(func);
                }
            }
            Internal.processErrorEvent = processErrorEvent;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            ko.bindingHandlers["resizable"] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    var values = valueAccessor(), $element = $(element), $parent = $element.closest(".dx-designer"), currentDirection = null, $selectedNodes = null, resizableDirections = { "north": "n", "east": "e", "south": "s", "west": "w" }, calculateSizes = [], absolutePosition = null;
                    var options = $.extend({
                        handles: values.handles || "all", ghost: false,
                        stop: function (event, ui) {
                            $selectedNodes.each(function (_, el) {
                                var control = ko.dataFor(el), surface = ko.contextFor(el).$root.surface(), $el = $(el);
                                var rect = control.rect();
                                var newRect = Internal.getControlRect($el, control, surface);
                                newRect = {
                                    top: currentDirection.indexOf(resizableDirections.north) !== -1 ? newRect.top : rect.top,
                                    left: currentDirection.indexOf(resizableDirections.west) !== -1 ? newRect.left : rect.left,
                                    width: currentDirection.indexOf(resizableDirections.east) !== -1 || currentDirection.indexOf(resizableDirections.west) !== -1 ? newRect.width : rect.width,
                                    height: currentDirection.indexOf(resizableDirections.south) !== -1 || currentDirection.indexOf(resizableDirections.north) !== -1 ? newRect.height : rect.height,
                                };
                                calculateSizes.push(function () {
                                    control.rect(newRect);
                                    if (JSON.stringify(rect) === JSON.stringify(newRect)) {
                                        $el.css({
                                            left: rect.left,
                                            top: rect.top,
                                            width: rect.width,
                                            height: rect.height
                                        });
                                    }
                                });
                                $el.removeData("originalPosition");
                                $el.removeData("originalSize");
                            });
                            calculateSizes.forEach(function (c) { return c(); });
                            calculateSizes = [];
                            currentDirection = null;
                            values.stopped();
                            values.started = false;
                            if (values.snapHelper) {
                                values.snapHelper.deactivateSnapLines();
                            }
                        },
                        start: function (event) {
                            var currentClassList = event.originalEvent.target.classList;
                            for (var i = 0; i < currentClassList.length; i++) {
                                if (currentClassList[i] !== "ui-resizable-handle" && currentClassList[i].indexOf("ui-resizable-") === 0)
                                    currentDirection = currentClassList[i].slice("ui-resizable-".length, currentClassList[i].length);
                            }
                            values.started = true;
                            values.starting();
                            $selectedNodes = values.$selectedNodes || $(".dxrd-viewport .dxrd-selected").filter(":visible");
                            $selectedNodes
                                .each(function (_, el) {
                                var $el = $(el);
                                var bounds = el.getBoundingClientRect();
                                $el.data("originalPosition", { top: parseFloat($el.css("top")), left: parseFloat($el.css("left")) });
                                $el.data("originalSize", { width: bounds.width, height: bounds.height });
                            });
                            var elementOffset = $element.offset();
                            var ghostContainerOffset = $parent.find(".dxrd-ghost-container").offset();
                            if (!ghostContainerOffset) {
                                absolutePosition = elementOffset;
                            }
                            else {
                                absolutePosition = {
                                    top: elementOffset.top - ghostContainerOffset.top,
                                    left: elementOffset.left - ghostContainerOffset.left
                                };
                            }
                            if (values.snapHelper) {
                                values.snapHelper.updateSnapLines(viewModel);
                            }
                        },
                        resize: function (event, ui) {
                            var dw = ui.size.width - ui.originalSize.width, dh = ui.size.height - ui.originalSize.height, dx = ui.position.left - ui.originalPosition.left, dy = ui.position.top - ui.originalPosition.top;
                            if (values.forceResize) {
                                values.forceResize({ size: new Analytics.Size(ui.size.width, ui.size.height), delta: { dx: dx, dy: dy, dw: dw, dh: dh } });
                            }
                            if (event.altKey) {
                                values.snapHelper && values.snapHelper.deactivateSnapLines();
                            }
                            else if (values.snapHelper && $selectedNodes.length === 1) {
                                var newAbsolutePosition = Internal.getControlNewAbsolutePositionOnResize(values.snapHelper, absolutePosition, ui, { x: dx, y: dy, width: dw, height: dh });
                                values.snapHelper.activateSnapLines(newAbsolutePosition);
                                $element.css({
                                    left: ui.originalPosition.left + newAbsolutePosition.left - absolutePosition.left,
                                    top: ui.originalPosition.top + newAbsolutePosition.top - absolutePosition.top,
                                    width: newAbsolutePosition.right - newAbsolutePosition.left,
                                    height: newAbsolutePosition.bottom - newAbsolutePosition.top
                                });
                            }
                            $selectedNodes
                                .each(function (key, el) {
                                if (el === event.target)
                                    return;
                                var $el = $(el);
                                var originalPosition = $el.data("originalPosition"), originalSize = $el.data("originalSize");
                                $el.css({
                                    left: originalPosition.left + dx,
                                    top: originalPosition.top + dy,
                                    width: originalSize.width + dw,
                                    height: originalSize.height + dh
                                });
                            });
                        }
                    }, ko.unwrap(values));
                    var subscription = null;
                    if (!values.disabled) {
                        subscription = Internal.DragDropHandler.started.subscribe(function (newVal) {
                            $element.resizable("option", "disabled", newVal);
                            newVal ? $element.children(".ui-resizable-handle").css("display", "none") : $element.children(".ui-resizable-handle").css("display", "block");
                        });
                    }
                    $element.resizable(options);
                    $element.resizable().on("resize", function (event) {
                        event.stopPropagation();
                    });
                    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                        $element = null;
                        subscription && subscription.dispose();
                    });
                },
                update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                    var $element = $(element);
                    var disabled = !!(ko.unwrap(valueAccessor().disabled) || false || ko.unwrap(viewModel.locked));
                    $element.resizable("option", "disabled", disabled);
                    $element.resizable("option", "minHeight", ko.unwrap(valueAccessor().minimumHeight) || 1);
                    $element.resizable("option", "minWidth", ko.unwrap(valueAccessor().minimumWidth) || 1);
                    if (ko.unwrap(valueAccessor().handles) && $element.resizable("option", "handles") !== ko.unwrap(valueAccessor().handles)) {
                        $element.resizable("option", "handles", ko.unwrap(valueAccessor().handles));
                    }
                    var maxWidth = ko.unwrap(valueAccessor().maximumWidth);
                    if (maxWidth) {
                        $element.resizable("option", "maxWidth", maxWidth);
                    }
                    disabled ? $element.children(".ui-resizable-handle").css("display", "none") : $element.children(".ui-resizable-handle").css("display", "block");
                }
            };
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var CustomSortedArrayStore = (function (_super) {
                __extends(CustomSortedArrayStore, _super);
                function CustomSortedArrayStore(items, sortPropertyName) {
                    if (sortPropertyName === void 0) { sortPropertyName = 'name'; }
                    return _super.call(this, CustomSortedArrayStore._createOptions(items, sortPropertyName)) || this;
                }
                CustomSortedArrayStore._sortItems = function (items, sortPropertyName) {
                    return items.sort(function (a, b) {
                        var propA = ko.unwrap(a[sortPropertyName]), propB = ko.unwrap(b[sortPropertyName]);
                        if (propA && propB) {
                            var diff = propA - propB;
                            if (!isNaN(diff))
                                return diff;
                            propA = propA.toLowerCase ? propA.toLowerCase() : propA;
                            propB = propB.toLowerCase ? propB.toLowerCase() : propB;
                            return (propA < propB) ? -1 : (propA > propB) ? 1 : 0;
                        }
                    });
                };
                CustomSortedArrayStore._createOptions = function (items, sortPropertyName) {
                    items = this._sortItems(items, sortPropertyName);
                    return {
                        load: function (options) {
                            var result = [].concat(items);
                            if (options.take)
                                result = result.splice(options.skip, options.take);
                            if (options.filter)
                                result = result.filter(options.filter);
                            return $.Deferred().resolve(result).promise();
                        },
                        byKey: function (key) {
                            if (items.some(function (x) { return x === key; }))
                                return key;
                        }
                    };
                };
                return CustomSortedArrayStore;
            }(DevExpress.data.CustomStore));
            Internal.CustomSortedArrayStore = CustomSortedArrayStore;
            var SortedArrayStore = (function (_super) {
                __extends(SortedArrayStore, _super);
                function SortedArrayStore(options, sortPropertyName) {
                    if (sortPropertyName === void 0) { sortPropertyName = 'name'; }
                    var _this = this;
                    if (options instanceof Array) {
                        CustomSortedArrayStore._sortItems(options, sortPropertyName);
                    }
                    _this = _super.call(this, options) || this;
                    return _this;
                }
                return SortedArrayStore;
            }(DevExpress.data.ArrayStore));
            Internal.SortedArrayStore = SortedArrayStore;
            var ControlsStore = (function (_super) {
                __extends(ControlsStore, _super);
                function ControlsStore(allControls) {
                    var _this = _super.call(this) || this;
                    _this._filter = ko.observable(null);
                    var dataSource = null;
                    _this._disposables.push(_this.dataSource = ko.computed(function () {
                        dataSource && dataSource.dispose();
                        dataSource = new DevExpress.data.DataSource({
                            store: new CustomSortedArrayStore(allControls()),
                            paginate: true,
                            filter: _this._filter(),
                            pageSize: 100
                        });
                        return dataSource;
                    }));
                    _this._disposables.push(_this.visible = ko.computed(function () {
                        return allControls().length > 0;
                    }));
                    return _this;
                }
                ControlsStore.prototype.setFilter = function (filter) {
                    this._filter(filter);
                };
                ControlsStore.prototype.resetFilter = function () {
                    this._filter(null);
                };
                return ControlsStore;
            }(Analytics.Utils.Disposable));
            Internal.ControlsStore = ControlsStore;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function findSurface(viewModel) {
                return !!viewModel ? viewModel["surface"] : null;
            }
            Internal.findSurface = findSurface;
            function getControlNewAbsolutePositionOnResize(snapHelper, absolutePosition, ui, delta) {
                var newAbsolutePosition = {
                    top: absolutePosition.top + delta.y,
                    left: absolutePosition.left + delta.x,
                    bottom: absolutePosition.top + ui.originalSize.height,
                    right: absolutePosition.left + ui.originalSize.width
                };
                if (delta.x !== 0) {
                    newAbsolutePosition.left = snapHelper.snapPosition(newAbsolutePosition.left, false);
                }
                else if (delta.width !== 0) {
                    newAbsolutePosition.right = snapHelper.snapPosition(absolutePosition.left + ui.size.width, false);
                }
                if (delta.y !== 0) {
                    newAbsolutePosition.top = snapHelper.snapPosition(newAbsolutePosition.top, true);
                }
                else if (delta.height !== 0) {
                    newAbsolutePosition.bottom = snapHelper.snapPosition(absolutePosition.top + ui.size.height, true);
                }
                return newAbsolutePosition;
            }
            Internal.getControlNewAbsolutePositionOnResize = getControlNewAbsolutePositionOnResize;
            function num(v) {
                return parseInt(v, 10) || 0;
            }
            function getControlRect(element, control, surface) {
                var curleft = num(element.css("left")), curtop = num(element.css("top"));
                if (surface.rtl()) {
                    var posLeft = surface.pageWidth() - surface.margins.left() - element.width();
                    if (curleft > posLeft) {
                        curleft = posLeft;
                    }
                }
                var bounds = element[0].getBoundingClientRect();
                return { top: curtop, left: curleft, width: bounds.width, height: bounds.height };
            }
            Internal.getControlRect = getControlRect;
            function minHeightWithoutScroll(element) {
                return Math.min(element.scrollHeight, element.offsetHeight, element.clientHeight) + element.offsetTop;
            }
            Internal.minHeightWithoutScroll = minHeightWithoutScroll;
            function chooseBetterPositionOf(html, designer) {
                return designer && (minHeightWithoutScroll(html) < minHeightWithoutScroll(designer) ? window : designer) || window;
            }
            Internal.chooseBetterPositionOf = chooseBetterPositionOf;
            function updateSurfaceContentSize(surfaceSize, root, rtl) {
                if (rtl === void 0) { rtl = false; }
                return function () {
                    var $root = $(root).find(".dxrd-designer").eq(0);
                    var rightAreaWidth = ($root.find(".dxrd-right-panel:visible").outerWidth() || 0) + ($root.find(".dxrd-right-tabs:visible").outerWidth() || 0);
                    var otherWidth = rightAreaWidth + ($root.find(".dxrd-toolbox-wrapper").outerWidth() || 0), surfaceWidth = $root.width() - (otherWidth);
                    $root.find(".dxrd-surface-wrapper").eq(0).css({
                        "left": rtl ? rightAreaWidth : 64,
                        "right": !rtl ? rightAreaWidth : 64,
                        "width": surfaceWidth,
                        "bottom": $root.find(".dxrd-navigation-panel-wrapper").outerHeight() || 0
                    });
                    surfaceSize(surfaceWidth);
                };
            }
            Internal.updateSurfaceContentSize = updateSurfaceContentSize;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function validateName(nameCandidate) {
                if (!nameCandidate)
                    return false;
                var letter = "\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376-\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E-\\u066F\\u0671-\\u06D3\\u06D5\\u06E5-\\u06E6\\u06EE-\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4-\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F-\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC-\\u09DD\\u09DF-\\u09E1\\u09F0-\\u09F1\\u0A05-\\u0A0A\\u0A0F-\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32-\\u0A33\\u0A35-\\u0A36\\u0A38-\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2-\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0-\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F-\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32-\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C-\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99-\\u0B9A\\u0B9C\\u0B9E-\\u0B9F\\u0BA3-\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60-\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0-\\u0CE1\\u0CF1-\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E46\\u0E81-\\u0E82\\u0E84\\u0E87-\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA-\\u0EAB\\u0EAD-\\u0EB0\\u0EB2-\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065-\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE-\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5-\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183-\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3006\\u3031-\\u3035\\u303B-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5-\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40-\\uFB41\\uFB43-\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC";
                var pattern = new RegExp("^[" + letter + "_][" + letter + "_\\d]*$");
                return pattern.test(nameCandidate);
            }
            Internal.validateName = validateName;
            function replaceInvalidSymbols(text) {
                return text.replace(/[\W_]+/g, "_");
            }
            Internal.replaceInvalidSymbols = replaceInvalidSymbols;
            Internal.nameValidationRules = [{ type: "custom", validationCallback: function (options) { return validateName(options.value); }, message: DevExpress.Analytics.getLocalization('Name is required and should be a valid identifier.', 'ASPxReportsStringId.ReportDesigner_NameIsRequired_Error') }];
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var CombinedObject = (function () {
                function CombinedObject() {
                }
                CombinedObject.getInfo = function (controls) {
                    var infos = controls.map(function (item) { return item["getInfo"](); });
                    return function () {
                        var info = [];
                        for (var i = 0; i < infos[0].length; i++) {
                            if (infos.filter(function (info) { return info.filter(function (x) { return x.propertyName === infos[0][i].propertyName; }).length > 0; }).length === infos.length) {
                                info.push(infos[0][i]);
                            }
                        }
                        return info;
                    };
                };
                CombinedObject.isPropertyDisabled = function (controls) {
                    return function (name) {
                        for (var i = 0; i < controls.length; i++) {
                            if (controls[i]["isPropertyDisabled"](name)) {
                                return true;
                            }
                        }
                        return false;
                    };
                };
                CombinedObject.isPropertyVisible = function (controls) {
                    return function (name) {
                        for (var i = 0; i < controls.length; i++) {
                            if (!controls[i]["isPropertyVisible"](name)) {
                                return false;
                            }
                        }
                        return true;
                    };
                };
                CombinedObject.mergeProperty = function (controls, propertyName, undoEngine, customMerge) {
                    var property = controls[0][propertyName];
                    var combinedObj = null;
                    var subscriptions = null;
                    if (controls.filter(function (x) { return !!x[propertyName]; }).length === controls.length) {
                        combinedObj = customMerge && customMerge(propertyName, controls, undoEngine);
                        if (!combinedObj) {
                            if (ko.isObservable(property) && !property["push"]) {
                                if (!controls.every(function (control) { return ko.isObservable(control[propertyName]); }))
                                    return combinedObj;
                                var combinedObservable = ko.observable(controls.every(function (control) { return controls[0][propertyName].peek() === control[propertyName].peek(); }) ? controls[0][propertyName].peek() : null);
                                combinedObj = {
                                    result: combinedObservable,
                                    subscriptions: [combinedObservable.subscribe(function (newVal) {
                                            undoEngine && undoEngine().start();
                                            controls.forEach(function (control) { control[propertyName](newVal); });
                                            undoEngine && undoEngine().end();
                                        })]
                                };
                            }
                            else if (typeof property === "object" && !$.isArray(property)) {
                                combinedObj = this._merge(controls.map(function (x) { return x[propertyName]; }), undoEngine, customMerge);
                            }
                        }
                    }
                    return combinedObj;
                };
                CombinedObject._createProperty = function (result, propertyName, propertyValue) {
                    if (propertyValue) {
                        if (typeof propertyValue === "object" && $.isEmptyObject(propertyValue))
                            return;
                        result[propertyName] = propertyValue;
                    }
                };
                CombinedObject._merge = function (controls, undoEngine, customMerge, ignoreProperties) {
                    var _this = this;
                    var result = {};
                    var subscriptions = [];
                    ["getInfo", "isPropertyVisible", "isPropertyDisabled"].forEach(function (propertyName) {
                        if (controls[0][propertyName])
                            _this._createProperty(result, propertyName, _this[propertyName](controls));
                    });
                    if (ignoreProperties) {
                        var oldPropertyDisabled = result["isPropertyDisabled"];
                        result["isPropertyDisabled"] = function (name) {
                            return (oldPropertyDisabled && oldPropertyDisabled()) || ignoreProperties.indexOf(name) !== -1;
                        };
                    }
                    if (result && result["getInfo"]) {
                        result["getInfo"]().map(function (x) { return x.propertyName; }).forEach(function (propertyName) {
                            var combinedObj = _this.mergeProperty(controls, propertyName, undoEngine, customMerge);
                            if (combinedObj) {
                                subscriptions = [].concat.apply(subscriptions, combinedObj.subscriptions);
                                _this._createProperty(result, propertyName, combinedObj.result);
                            }
                        });
                    }
                    else {
                        for (var propertyName in controls[0]) {
                            var combinedObj = this.mergeProperty(controls, propertyName, undoEngine, customMerge);
                            if (combinedObj) {
                                subscriptions = [].concat.apply(subscriptions, combinedObj.subscriptions);
                                this._createProperty(result, propertyName, combinedObj.result);
                            }
                        }
                    }
                    return { result: result, subscriptions: subscriptions };
                };
                CombinedObject.mergeControls = function (controls, undoEngine, customMerge, ignoreProperties) {
                    var combinedObj = this._merge(controls, undoEngine, customMerge, ignoreProperties);
                    return {
                        result: $.extend(combinedObj.result, { controlType: "multiselect", displayName: ko.observable("") }),
                        subscriptions: combinedObj.subscriptions
                    };
                };
                CombinedObject.getEditableObject = function (selectionProvider, undoEngine, customMerge) {
                    var _this = this;
                    var editableObject = ko.observable(null);
                    var subscriptions = [];
                    var subscription = selectionProvider.focused.subscribe(function (newVal) {
                        editableObject(newVal && newVal.getControlModel());
                    });
                    if (selectionProvider._disposables) {
                        selectionProvider._disposables.push(subscription);
                        selectionProvider._disposables.push({
                            dispose: function () {
                                subscriptions.forEach(function (x) { return x.dispose(); });
                                subscriptions.splice(0);
                            }
                        });
                    }
                    return ko.pureComputed({
                        read: function () {
                            subscriptions.forEach(function (x) { return x.dispose(); });
                            subscriptions = [];
                            if (selectionProvider.selectedItems.length > 1) {
                                var combinedObj = _this.mergeControls(selectionProvider.selectedItems.map(function (item) { return item.getControlModel(); }), undoEngine, customMerge, selectionProvider.ignoreMultiSelectProperties);
                                subscriptions = combinedObj.subscriptions;
                                return combinedObj.result;
                            }
                            else {
                                return editableObject();
                            }
                        },
                        write: function (val) {
                            if (val && val.surface) {
                                selectionProvider.focused(val.surface);
                            }
                            else {
                                selectionProvider.updateSelection(null);
                                editableObject(val);
                            }
                        }
                    });
                };
                return CombinedObject;
            }());
            Internal.CombinedObject = CombinedObject;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var SurfaceSelection = (function (_super) {
                __extends(SurfaceSelection, _super);
                function SurfaceSelection(ignoreMultiSelectProperties) {
                    if (ignoreMultiSelectProperties === void 0) { ignoreMultiSelectProperties = ["name"]; }
                    var _this = _super.call(this) || this;
                    _this.ignoreMultiSelectProperties = ignoreMultiSelectProperties;
                    _this._focused = ko.observable(null);
                    _this._selectedControls = ko.observableArray();
                    _this._selectedControlsInner = [];
                    _this.focused = ko.pureComputed({
                        read: function () {
                            return _this._focused();
                        },
                        write: function (val) {
                            if (val !== _this._focused()) {
                                if (!!val) {
                                    _this._firstSelected = val;
                                }
                                _this.updateSelection(_this._firstSelected);
                            }
                        }
                    });
                    _this.dropTarget = null;
                    _this.expectClick = false;
                    _this.disabled = ko.observable(false);
                    _this._disposables.push(_this.focused);
                    return _this;
                }
                SurfaceSelection.prototype.dispose = function () {
                    this.reset();
                    _super.prototype.dispose.call(this);
                };
                SurfaceSelection.prototype._removeFromSelection = function (control) {
                    control.focused(false);
                    control.selected(false);
                    if (this._selectedControlsInner.indexOf(control) !== -1) {
                        this._selectedControlsInner.splice(this._selectedControlsInner.indexOf(control), 1);
                    }
                };
                SurfaceSelection.prototype._setFocused = function (control) {
                    if (this._focused()) {
                        this._removeFromSelection(this._focused());
                    }
                    this._focused(control);
                    if (control) {
                        control.focused(true);
                        if (this._selectedControlsInner.indexOf(control) === -1) {
                            this._selectedControlsInner.push(control);
                        }
                        control.selected(true);
                    }
                };
                SurfaceSelection.prototype._resetTabPanelFocus = function () {
                    var isTabPanelFocused = document.activeElement && $(document.activeElement).closest(".dxrd-surface").length === 0;
                    if (isTabPanelFocused) {
                        document.activeElement["blur"] && document.activeElement["blur"]();
                    }
                };
                Object.defineProperty(SurfaceSelection.prototype, "selectedItems", {
                    get: function () {
                        return this._selectedControls();
                    },
                    enumerable: true,
                    configurable: true
                });
                SurfaceSelection.prototype.clear = function () {
                    this.focused(null);
                    this._selectedControls([]);
                };
                SurfaceSelection.prototype.reset = function () {
                    this._focused(null);
                    this._selectedControlsInner.splice(0);
                    this._firstSelected = null;
                    this._selectedControls([]);
                };
                SurfaceSelection.prototype.applySelection = function () {
                    this._selectedControls(this._selectedControlsInner);
                };
                SurfaceSelection.prototype.selectItems = function (items) {
                    this._selectedControlsInner = items;
                    this._selectedControlsInner.forEach(function (selectedControl) {
                        if (!selectedControl.focused()) {
                            selectedControl.selected(true);
                        }
                    });
                    this.applySelection();
                };
                SurfaceSelection.prototype.updateSelection = function (control) {
                    this._selectedControlsInner.forEach(function (selectedControl) {
                        selectedControl.focused(false);
                        selectedControl.selected(false);
                    });
                    this._selectedControlsInner = [];
                    this._setFocused(control);
                    this.applySelection();
                };
                SurfaceSelection.prototype.swapFocusedItem = function (control) {
                    if (this._focused() !== control) {
                        this._focused().focused(false);
                        this._focused(control);
                        this._focused().focused(true);
                    }
                };
                SurfaceSelection.prototype.initialize = function (control) {
                    control = control || this.dropTarget;
                    this._firstSelected = !!(control && control["focused"]) ? control : null;
                    this.updateSelection(this._firstSelected);
                };
                SurfaceSelection.prototype.clickHandler = function (control, event) {
                    if (event === void 0) { event = { ctrlKey: false }; }
                    if (this.expectClick) {
                        this.expectClick = false;
                        return;
                    }
                    control = control || this.dropTarget;
                    if (!event.ctrlKey) {
                        if (this._selectedControlsInner.length > 1 && this._selectedControlsInner.indexOf(control) !== -1) {
                            this.swapFocusedItem(control);
                        }
                        else {
                            if (this._focused() !== control) {
                                this.initialize(control);
                            }
                        }
                    }
                    else {
                        this.selectionWithCtrl(control);
                        this.applySelection();
                    }
                    this._resetTabPanelFocus();
                };
                SurfaceSelection.prototype.selecting = function (event) {
                    if (!this._focused()) {
                        this._setFocused(event.control);
                    }
                    else {
                        event.cancel = !event.control.checkParent(this._firstSelected);
                        if (!event.cancel) {
                            if (this._firstSelected && this._firstSelected.focused()) {
                                this._setFocused(event.control);
                            }
                            else if (this._selectedControlsInner.indexOf(event.control) === -1) {
                                event.control.selected(true);
                                this._selectedControlsInner.push(event.control);
                            }
                        }
                    }
                };
                SurfaceSelection.prototype.unselecting = function (control) {
                    if (this._focused() === control) {
                        this._setFocused(null);
                        if (this._selectedControlsInner.length === 0) {
                            this._setFocused(this._firstSelected);
                        }
                        else {
                            this._setFocused(this._selectedControlsInner[0]);
                        }
                    }
                    else {
                        this._removeFromSelection(control);
                    }
                };
                SurfaceSelection.prototype.selectionWithCtrl = function (control) {
                    if (control && control.allowMultiselect) {
                        var selectedControls = this._selectedControlsInner;
                        if (selectedControls.length === 0 || (selectedControls.length === 1 && (!selectedControls[0].allowMultiselect))) {
                            this.initialize(control);
                        }
                        else {
                            if (this._selectedControlsInner.indexOf(control) === -1) {
                                control.selected(true);
                                this._selectedControlsInner.push(control);
                            }
                            else {
                                if (this._selectedControlsInner.length > 1) {
                                    this.unselecting(control);
                                }
                            }
                        }
                    }
                };
                return SurfaceSelection;
            }(Analytics.Utils.Disposable));
            Internal.SurfaceSelection = SurfaceSelection;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            function deleteSelection(selection) {
                var focused = selection.focused();
                selection.selectedItems.forEach(function (item) {
                    var itemModel = item.getControlModel(), parent = itemModel.parentModel();
                    if (!item.getControlModel().getMetaData().isDeleteDeny && parent && item !== focused) {
                        parent.removeChild(itemModel);
                    }
                });
                focused.getControlModel().parentModel().removeChild(focused.getControlModel());
                selection.focused(findNextSelection(focused));
            }
            Internal.deleteSelection = deleteSelection;
            function findNextSelection(removedElement) {
                var parentSurface = removedElement.parent;
                var targetSurface = parentSurface;
                if (parentSurface) {
                    var childrenCollection = parentSurface.getChildrenCollection()();
                    var indexInCollection = childrenCollection.indexOf(removedElement);
                    if (indexInCollection === -1 && childrenCollection.length > 0) {
                        targetSurface = childrenCollection[childrenCollection.length - 1];
                    }
                    else if (childrenCollection.length > 1 && indexInCollection === childrenCollection.length - 1) {
                        targetSurface = childrenCollection[indexInCollection - 1];
                    }
                    else if (childrenCollection.length > 1 && indexInCollection === 0) {
                        targetSurface = childrenCollection[childrenCollection.length - 1];
                    }
                    else if (childrenCollection.length > 1) {
                        targetSurface = childrenCollection[childrenCollection.length - 1];
                    }
                    else if (indexInCollection === -1 && targetSurface.parent && targetSurface.parent.getChildrenCollection()().indexOf(targetSurface) === -1) {
                        targetSurface = findNextSelection(targetSurface);
                    }
                }
                return targetSurface;
            }
            Internal.findNextSelection = findNextSelection;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var SnapLinesCollector = (function () {
                function SnapLinesCollector() {
                    this._verticalSnapLines = [];
                    this._horizontalSnapLines = [];
                    this._snapTargetToIgnore = null;
                }
                SnapLinesCollector.prototype._appendSnapLine = function (position, limitInf, limitSup, snapLines) {
                    var line = {
                        position: position,
                        limitInf: limitInf,
                        limSup: limitSup
                    };
                    var index = Analytics.Utils.binaryIndexOf(snapLines, line, function (a, b) { return a.position - b.position; });
                    if (index > -1) {
                        snapLines[index].limitInf = Math.min(snapLines[index].limitInf, limitInf);
                        snapLines[index].limSup = Math.max(snapLines[index].limSup, limitSup);
                    }
                    else {
                        snapLines.splice(~index, 0, line);
                    }
                };
                SnapLinesCollector.prototype._collectSnaplines = function (parent, parentAbsoluteProsition) {
                    var _this = this;
                    this._enumerateCollection(parent, parentAbsoluteProsition, function (item, itemAbsoluteRect) {
                        if (item !== _this._snapTargetToIgnore) {
                            _this._appendSnapLine(itemAbsoluteRect.left, itemAbsoluteRect.top, itemAbsoluteRect.bottom, _this._verticalSnapLines);
                            _this._appendSnapLine(itemAbsoluteRect.right, itemAbsoluteRect.top, itemAbsoluteRect.bottom, _this._verticalSnapLines);
                            _this._appendSnapLine(itemAbsoluteRect.top, itemAbsoluteRect.left, itemAbsoluteRect.right, _this._horizontalSnapLines);
                            _this._appendSnapLine(itemAbsoluteRect.bottom, itemAbsoluteRect.left, itemAbsoluteRect.right, _this._horizontalSnapLines);
                            _this._collectSnaplines(item, itemAbsoluteRect);
                        }
                    });
                };
                SnapLinesCollector.prototype._getCollection = function (parent) {
                    return parent["controls"] && parent["controls"]();
                };
                SnapLinesCollector.prototype._enumerateCollection = function (parent, parentAbsoluteProsition, callback) {
                    var collection = this._getCollection(parent);
                    if (!collection)
                        return;
                    for (var i = 0; i < collection.length; i++) {
                        var itemRect = collection[i].rect && collection[i].rect();
                        if (itemRect) {
                            callback(collection[i], {
                                top: itemRect.top + parentAbsoluteProsition.top,
                                bottom: itemRect.bottom + parentAbsoluteProsition.top,
                                left: itemRect.left + parentAbsoluteProsition.left,
                                right: itemRect.right + parentAbsoluteProsition.left
                            });
                        }
                    }
                };
                SnapLinesCollector.prototype.collectSnaplines = function (root, snapTargetToIgnore) {
                    this._snapTargetToIgnore = snapTargetToIgnore;
                    this._verticalSnapLines.splice(0);
                    this._horizontalSnapLines.splice(0);
                    this._collectSnaplines(root, { top: 0, left: 0 });
                    return {
                        vertical: this._verticalSnapLines,
                        horizontal: this._horizontalSnapLines
                    };
                };
                return SnapLinesCollector;
            }());
            Internal.SnapLinesCollector = SnapLinesCollector;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var SnapLinesHelper = (function () {
                function SnapLinesHelper(surface, snapTolerance, snapLinesCollector) {
                    if (surface === void 0) { surface = null; }
                    if (snapTolerance === void 0) { snapTolerance = SnapLinesHelper.snapTolerance; }
                    if (snapLinesCollector === void 0) { snapLinesCollector = new Internal.SnapLinesCollector(); }
                    this.snapLineSurfaces = [new Internal.SnapLineSurface(), new Internal.SnapLineSurface(), new Internal.SnapLineSurface(), new Internal.SnapLineSurface()];
                    this.verticalSnapLines = [];
                    this.horizontalSnapLines = [];
                    this._surfaceContext = surface;
                    this._snapTolerance = snapTolerance;
                    this._snapLinesCollector = snapLinesCollector;
                }
                SnapLinesHelper.prototype._findClosestSnapLine = function (position, snapLines) {
                    var line = {
                        position: position,
                        limitInf: 0,
                        limSup: 0
                    };
                    var index = Analytics.Utils.binaryIndexOf(snapLines, line, function (a, b) { return a.position - b.position; });
                    var snapLineCandidate;
                    if (index > -1) {
                        snapLineCandidate = {
                            snapLine: snapLines[index],
                            distance: position - snapLines[index].position
                        };
                    }
                    else {
                        index = ~index;
                        var delta1 = snapLines[index] ? (position - snapLines[index].position) : Number.MAX_VALUE;
                        var delta2 = snapLines[index - 1] ? (position - snapLines[index - 1].position) : Number.MAX_VALUE;
                        snapLineCandidate = Math.abs(delta1) > Math.abs(delta2) ?
                            { snapLine: snapLines[index - 1], distance: delta2 } :
                            { snapLine: snapLines[index], distance: delta1 };
                    }
                    return snapLineCandidate;
                };
                SnapLinesHelper.prototype._getActiveSnapLines = function (position1, position2, snapLines) {
                    var line1 = this._findClosestSnapLine(position1, snapLines);
                    var line2 = this._findClosestSnapLine(position2, snapLines);
                    var result = {
                        lines: [],
                        distance: 0
                    };
                    if (Math.abs(line1.distance - line2.distance) >= 1) {
                        var line = Math.abs(line1.distance) < Math.abs(line2.distance) ? line1 : line2;
                        if (Math.abs(line.distance) <= this._snapTolerance) {
                            result.lines = [line];
                            result.distance = line.distance;
                        }
                    }
                    else if (Math.abs(line1.distance) <= this._snapTolerance) {
                        result.lines = [line1, line2];
                        result.distance = line1.distance;
                    }
                    return result;
                };
                SnapLinesHelper.prototype.updateSnapLines = function (snapTargetToIgnore) {
                    if (snapTargetToIgnore === void 0) { snapTargetToIgnore = null; }
                    this.verticalSnapLines.splice(0);
                    this.horizontalSnapLines.splice(0);
                    var result = this._snapLinesCollector.collectSnaplines(this._surfaceContext(), snapTargetToIgnore);
                    this.verticalSnapLines.push.apply(this.verticalSnapLines, result.vertical);
                    this.horizontalSnapLines.push.apply(this.horizontalSnapLines, result.horizontal);
                };
                SnapLinesHelper.prototype.deactivateSnapLines = function () {
                    this.snapLineSurfaces[0].reset();
                    this.snapLineSurfaces[1].reset();
                    this.snapLineSurfaces[2].reset();
                    this.snapLineSurfaces[3].reset();
                };
                SnapLinesHelper.prototype.activateSnapLines = function (position) {
                    var vertical = this._getActiveSnapLines(position.left, position.right, this.verticalSnapLines);
                    var horizontal = this._getActiveSnapLines(position.top, position.bottom, this.horizontalSnapLines);
                    for (var i = 0; i < 2; i++) {
                        var line = vertical.lines[i];
                        if (!line) {
                            this.snapLineSurfaces[i].reset();
                        }
                        else {
                            var top = Math.min(line.snapLine.limitInf, position.top);
                            var bottom = Math.max(line.snapLine.limSup, position.bottom);
                            if (position.top < line.snapLine.limitInf) {
                                top -= horizontal.distance;
                            }
                            if (position.bottom > line.snapLine.limSup) {
                                bottom -= horizontal.distance;
                            }
                            this.snapLineSurfaces[i].updatePosition({
                                top: top,
                                left: line.snapLine.position,
                                height: bottom - top,
                                width: 1
                            });
                        }
                    }
                    for (var i = 0; i < 2; i++) {
                        var line = horizontal.lines[i];
                        if (!line) {
                            this.snapLineSurfaces[i + 2].reset();
                        }
                        else {
                            var left = Math.min(line.snapLine.limitInf, position.left);
                            var right = Math.max(line.snapLine.limSup, position.right);
                            if (position.left < line.snapLine.limitInf) {
                                left -= vertical.distance;
                            }
                            if (position.right > line.snapLine.limSup) {
                                right -= vertical.distance;
                            }
                            this.snapLineSurfaces[i + 2].updatePosition({
                                top: line.snapLine.position,
                                left: left,
                                width: right - left,
                                height: 1
                            });
                        }
                    }
                    return {
                        left: vertical.distance,
                        top: horizontal.distance
                    };
                };
                SnapLinesHelper.prototype.snapPosition = function (position, horizontal) {
                    var line = this._findClosestSnapLine(position, horizontal ? this.horizontalSnapLines : this.verticalSnapLines);
                    return (line && Math.abs(line.distance) <= this._snapTolerance) ? line.snapLine.position : position;
                };
                SnapLinesHelper.snapTolerance = 10;
                return SnapLinesHelper;
            }());
            Internal.SnapLinesHelper = SnapLinesHelper;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var SnapLineSurface = (function () {
                function SnapLineSurface() {
                    this._position = ko.observable(SnapLineSurface._blankPosition);
                }
                SnapLineSurface.prototype.transform = function () {
                    var position = this._position();
                    return "matrix(" + position.width + ", 0, 0, " + position.height + ", " + position.left + ", " + position.top + ")";
                };
                SnapLineSurface.prototype.updatePosition = function (position) {
                    this._position(position);
                };
                SnapLineSurface.prototype.reset = function () {
                    this.updatePosition(SnapLineSurface._blankPosition);
                };
                SnapLineSurface._blankPosition = { top: 0, left: 0, width: 0, height: 0, };
                return SnapLineSurface;
            }());
            Internal.SnapLineSurface = SnapLineSurface;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        Analytics.ActionId = {
            Cut: "dxd-cut",
            Copy: "dxd-copy",
            Paste: "dxd-paste",
            Delete: "dxd-delete",
            Undo: "dxd-undo",
            Redo: "dxd-redo",
            ZoomOut: "dxd-zoom-out",
            ZoomSelector: "dxd-zoom-selector",
            ZoomIn: "dxd-zoom-in",
        };
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            var ActionListsBase = (function (_super) {
                __extends(ActionListsBase, _super);
                function ActionListsBase(enabled) {
                    var _this = _super.call(this) || this;
                    _this.toolbarItems = [];
                    _this.enabled = enabled || ko.observable(true);
                    return _this;
                }
                ActionListsBase.prototype.processShortcut = function (actions, e) {
                    for (var i = 0; i < actions.length; i++) {
                        if (actions[i].hotKey && (actions[i].disabled && !actions[i].disabled() || !actions[i].disabled) && ($.isFunction(actions[i].visible) ? actions[i].visible() : actions[i].visible)) {
                            if (actions[i].hotKey.ctrlKey === e.ctrlKey && actions[i].hotKey.keyCode === e.keyCode) {
                                actions[i].clickAction();
                                e.preventDefault();
                            }
                        }
                    }
                };
                ActionListsBase.prototype.shouldIgnoreProcessing = function (e) {
                    if (e.altKey || !this.enabled.peek())
                        return true;
                    var activeElement = $(document.activeElement);
                    if (activeElement.is("textarea") || activeElement.is(":input") && (['password', 'text', 'number'].indexOf(activeElement.attr("type")) != -1)) {
                        return true;
                    }
                    return false;
                };
                return ActionListsBase;
            }(Analytics.Utils.Disposable));
            Internal.ActionListsBase = ActionListsBase;
            var ActionLists = (function (_super) {
                __extends(ActionLists, _super);
                function ActionLists(surfaceContext, selection, undoEngine, customizeActions, enabled, copyPasteStrategy, zoomStep) {
                    if (zoomStep === void 0) { zoomStep = ko.observable(0.01); }
                    var _this = _super.call(this, enabled) || this;
                    _this.menuItems = [];
                    var copyPasteHandler = new Internal.CopyPasteHandler(selection, copyPasteStrategy), actions = [];
                    if (selection) {
                        var selectionControlsLocked = ko.computed(function () {
                            return selection.selectedItems.some(function (item) { return item.locked; });
                        });
                        _this._disposables.push(selectionControlsLocked);
                        _this._keyboardHelper = new Internal.KeyboardHelper(selection, undoEngine);
                        actions.push({
                            id: Analytics.ActionId.Cut,
                            text: "Cut",
                            displayText: function () { return Analytics.getLocalization("Cut", "ReportStringId.UD_TTip_EditCut"); },
                            imageClassName: "dxrd-image-cut",
                            imageTemplateName: "dxrd-svg-toolbar-cut",
                            disabled: ko.pureComputed(function () {
                                return !surfaceContext() || !copyPasteHandler.canCopy() || selectionControlsLocked();
                            }),
                            visible: true,
                            clickAction: function () {
                                undoEngine().start();
                                copyPasteHandler.cut();
                                undoEngine().end();
                            },
                            hotKey: { ctrlKey: true, keyCode: "X".charCodeAt(0) }
                        });
                        actions.push({
                            id: Analytics.ActionId.Copy,
                            text: "Copy",
                            displayText: function () { return Analytics.getLocalization("Copy", "ReportStringId.Cmd_Copy"); },
                            imageClassName: "dxrd-image-copy",
                            imageTemplateName: "dxrd-svg-toolbar-copy",
                            disabled: ko.pureComputed(function () {
                                return !surfaceContext() || !copyPasteHandler.canCopy() || selectionControlsLocked();
                            }),
                            visible: true,
                            clickAction: function () {
                                copyPasteHandler.copy();
                            },
                            hotKey: { ctrlKey: true, keyCode: "C".charCodeAt(0) }
                        });
                        actions.push({
                            id: Analytics.ActionId.Paste,
                            text: "Paste",
                            displayText: function () { return Analytics.getLocalization("Paste", "ReportStringId.Cmd_Paste"); },
                            imageClassName: "dxrd-image-paste",
                            imageTemplateName: "dxrd-svg-toolbar-paste",
                            disabled: ko.pureComputed(function () {
                                return !surfaceContext() || !copyPasteHandler.canPaste() || selectionControlsLocked();
                            }),
                            visible: true,
                            clickAction: function () {
                                undoEngine().start();
                                copyPasteHandler.paste();
                                undoEngine().end();
                            },
                            hotKey: { ctrlKey: true, keyCode: "V".charCodeAt(0) }
                        });
                        actions.push({
                            id: Analytics.ActionId.Delete,
                            text: "Delete",
                            displayText: function () { return Analytics.getLocalization("Delete", "ReportStringId.Cmd_Delete"); },
                            imageClassName: "dxrd-image-delete",
                            imageTemplateName: "dxrd-svg-toolbar-delete",
                            disabled: ko.pureComputed(function () {
                                if (selection.focused()) {
                                    return selection.focused().getControlModel().getMetaData().isDeleteDeny || selectionControlsLocked();
                                }
                                else {
                                    return true;
                                }
                            }),
                            visible: true,
                            hotKey: { ctrlKey: false, keyCode: 46 },
                            clickAction: function () {
                                undoEngine().start();
                                Internal.deleteSelection(selection);
                                undoEngine().end();
                            }
                        });
                    }
                    actions.push({
                        id: Analytics.ActionId.Undo,
                        text: "Undo",
                        displayText: function () { return Analytics.getLocalization("Undo", "ReportStringId.UD_Capt_Undo"); },
                        imageClassName: "dxrd-image-undo",
                        imageTemplateName: "dxrd-svg-toolbar-undo",
                        disabled: ko.pureComputed(function () { return !surfaceContext() || !undoEngine() || (undoEngine() && !undoEngine().undoEnabled()) || (selection && selectionControlsLocked()); }),
                        visible: true,
                        clickAction: function () {
                            undoEngine().undo();
                        },
                        hotKey: { ctrlKey: true, keyCode: "Z".charCodeAt(0) },
                        hasSeparator: true
                    });
                    actions.push({
                        id: Analytics.ActionId.Redo,
                        text: "Redo",
                        displayText: function () { return Analytics.getLocalization("Redo", "ReportStringId.UD_Capt_Redo"); },
                        imageClassName: "dxrd-image-redo",
                        imageTemplateName: "dxrd-svg-toolbar-redo",
                        disabled: ko.pureComputed(function () { return !surfaceContext() || !undoEngine() || (undoEngine() && !undoEngine().redoEnabled()) || (selection && selectionControlsLocked()); }),
                        visible: true,
                        clickAction: function () {
                            undoEngine().redo();
                        },
                        hotKey: { ctrlKey: true, keyCode: "Y".charCodeAt(0) }
                    });
                    actions.push({
                        id: Analytics.ActionId.ZoomOut,
                        text: "Zoom Out",
                        displayText: function () { return Analytics.getLocalization("Zoom Out", "ReportStringId.UD_Capt_ZoomOut"); },
                        imageClassName: "dxrd-image-zoomout",
                        imageTemplateName: "dxrd-svg-toolbar-zoomout",
                        disabled: ko.pureComputed(function () {
                            return !surfaceContext();
                        }),
                        visible: true,
                        hotKey: { ctrlKey: true, keyCode: 109 },
                        zoomStep: zoomStep,
                        clickAction: function () {
                            surfaceContext().zoom(Math.max(surfaceContext().zoom() - zoomStep(), 0.01));
                        },
                        hasSeparator: true
                    });
                    actions.push({
                        id: Analytics.ActionId.ZoomSelector,
                        text: "Zoom 100%",
                        displayText: function () { return Analytics.getLocalization("Zoom 100%"); },
                        imageClassName: "dxrd-image-zoom",
                        disabled: ko.pureComputed(function () {
                            return !surfaceContext();
                        }),
                        visible: true,
                        hotKey: { ctrlKey: true, keyCode: 187 },
                        clickAction: function () {
                            surfaceContext().zoom(1);
                        },
                        templateName: "dxrd-zoom-select-template",
                        zoomLevels: ko.observableArray([5, 2, 1.5, 1, 0.75, 0.5, 0.25]),
                        zoom: ko.pureComputed({
                            read: function () { return surfaceContext() && surfaceContext().zoom(); },
                            write: function (val) { surfaceContext().zoom(val); }
                        })
                    });
                    actions.push({
                        id: Analytics.ActionId.ZoomIn,
                        text: "Zoom In",
                        displayText: function () { return Analytics.getLocalization("Zoom In", "ReportStringId.UD_Capt_ZoomIn"); },
                        imageClassName: "dxrd-image-zoomin",
                        imageTemplateName: "dxrd-svg-toolbar-zoomin",
                        disabled: ko.pureComputed(function () {
                            return !surfaceContext();
                        }),
                        visible: true,
                        hotKey: { ctrlKey: true, keyCode: 107 },
                        zoomStep: zoomStep,
                        clickAction: function () {
                            surfaceContext().zoom(surfaceContext().zoom() + zoomStep());
                        }
                    });
                    if (customizeActions) {
                        customizeActions(actions);
                    }
                    actions.forEach(function (action) {
                        for (var name in action) {
                            if (ko.isComputed(action[name])) {
                                _this._disposables.push(action[name]);
                            }
                        }
                        _this._registerAction(action["container"] === "menu" ? _this.menuItems : ko.unwrap(_this.toolbarItems), action);
                    });
                    return _this;
                }
                ActionLists.prototype._registerAction = function (container, action) {
                    if (action["index"]) {
                        container.splice(action["index"], 0, action);
                    }
                    else {
                        container.push(action);
                    }
                };
                ActionLists.prototype.processShortcut = function (actions, e) {
                    if (this.shouldIgnoreProcessing(e)) {
                        return;
                    }
                    if (!this._keyboardHelper.processShortcut(e)) {
                        _super.prototype.processShortcut.call(this, actions, e);
                    }
                    else {
                        e.preventDefault();
                    }
                };
                return ActionLists;
            }(ActionListsBase));
            Internal.ActionLists = ActionLists;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            Internal.copyPasteStrategy = {
                createChild: function (pasteTarget, info) {
                    return pasteTarget.createChild(info);
                },
                calculateDelta: function (selection, pasteTargetSurface, minPoint) {
                    return {
                        x: selection.rect().left - minPoint.x(),
                        y: selection.rect().top - minPoint.y()
                    };
                }
            };
            var CopyPasteHandler = (function () {
                function CopyPasteHandler(selectionProvider, _copyPasteStrategy) {
                    var _this = this;
                    if (_copyPasteStrategy === void 0) { _copyPasteStrategy = Internal.copyPasteStrategy; }
                    this._copyPasteStrategy = _copyPasteStrategy;
                    this._copyInfo = ko.observable(null);
                    this.hasPasteInfo = ko.pureComputed(function () { return _this._copyInfo() !== null; });
                    this._selectionProvider = selectionProvider;
                }
                CopyPasteHandler.prototype.canCopy = function () {
                    return this._selectionProvider.focused() !== null && !this._selectionProvider.focused().getControlModel().getMetaData().isCopyDeny;
                };
                CopyPasteHandler.prototype.canPaste = function () {
                    var pasteTargetSurface = this._selectionProvider.focused();
                    return pasteTargetSurface !== null
                        && this.hasPasteInfo()
                        && pasteTargetSurface.canDrop()
                        && !pasteTargetSurface.getControlModel().getMetaData().isPasteDeny;
                };
                CopyPasteHandler.prototype.copy = function () {
                    if (this.canCopy()) {
                        var serializer = new Analytics.Utils.ModelSerializer(), copyInfo = {
                            focused: this._selectionProvider.focused(),
                            objects: $.map(this._selectionProvider.selectedItems, function (item) {
                                return serializer.serialize(item.getControlModel());
                            })
                        };
                        this._copyInfo(copyInfo);
                    }
                };
                CopyPasteHandler.prototype.cut = function () {
                    var serializer = new Analytics.Utils.ModelSerializer(), cutInfo = {
                        focused: this._selectionProvider.focused(),
                        objects: $.map(this._selectionProvider.selectedItems, function (item) {
                            item.getControlModel().parentModel().removeChild(item.getControlModel());
                            return serializer.serialize(item.getControlModel());
                        })
                    };
                    this._copyInfo(cutInfo);
                };
                CopyPasteHandler.prototype.paste = function () {
                    var _this = this;
                    if (this.canPaste()) {
                        var pasteTargetSurface = this._selectionProvider.focused(), pasteTarget = pasteTargetSurface.getControlModel(), newSelection = [];
                        if (pasteTargetSurface === this._copyInfo().focused) {
                            pasteTargetSurface = pasteTargetSurface.parent;
                            pasteTarget = pasteTargetSurface.getControlModel();
                        }
                        if (!pasteTarget.getMetaData().isContainer) {
                            pasteTargetSurface = pasteTargetSurface.parent;
                            pasteTarget = pasteTargetSurface.getControlModel();
                        }
                        var minPoint = new Analytics.Point(Number.MAX_VALUE, Number.MAX_VALUE), maxPoint = new Analytics.Point(-1, -1);
                        for (var i = 0; i < this._copyInfo().objects.length; i++) {
                            var newControl = this._copyPasteStrategy.createChild(pasteTarget, this._copyInfo().objects[i]);
                            var newControlSurface = Internal.findSurface(newControl);
                            if (!newControlSurface)
                                continue;
                            var posMin = new Analytics.Point(newControlSurface.rect().left, newControlSurface.rect().top);
                            var posMax = new Analytics.Point(newControlSurface.rect().left + newControlSurface.rect().width, newControlSurface.rect().top + newControlSurface.rect().height);
                            if (minPoint.x() >= posMin.x())
                                minPoint.x(posMin.x());
                            if (maxPoint.x() <= posMax.x())
                                maxPoint.x(posMax.x());
                            if (minPoint.y() >= posMin.y())
                                minPoint.y(posMin.y());
                            if (maxPoint.y() <= posMax.y())
                                maxPoint.y(posMax.y());
                            newSelection.push(newControlSurface);
                        }
                        var newOriginPoint = new Analytics.Point(((pasteTargetSurface.rect().width - pasteTargetSurface["_context"].margins.right()) / 2) - ((maxPoint.x() - minPoint.x()) / 2) + (pasteTargetSurface["rtlLayout"]() ? pasteTargetSurface["_context"].margins.right() : 0), (pasteTargetSurface.rect().height / 2) - ((maxPoint.y() - minPoint.y()) / 2));
                        for (var i = 0; i < newSelection.length; i++) {
                            var delta = this._copyPasteStrategy.calculateDelta(newSelection[i], pasteTargetSurface, minPoint);
                            newSelection[i].rect({ left: newOriginPoint.x() + delta.x, top: newOriginPoint.y() + delta.y });
                        }
                        this._selectionProvider.initialize();
                        newSelection.forEach(function (newControlSurface) {
                            _this._selectionProvider.selecting({ control: newControlSurface, cancel: false });
                        });
                    }
                };
                return CopyPasteHandler;
            }());
            Internal.CopyPasteHandler = CopyPasteHandler;
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var TabPanel = (function (_super) {
            __extends(TabPanel, _super);
            function TabPanel(options) {
                var _this = _super.call(this) || this;
                _this.tabs = [];
                _this.collapsed = ko.observable(false);
                _this.position = ko.observable(TabPanel.Position.Right);
                _this.toggleCollapsedText = ko.pureComputed(function () {
                    var actionString = _this.collapsed() ? "Open" : "Collapse";
                    return DevExpress.Analytics.getLocalization(actionString, "ASPxReportsStringId.SidePanel_" + actionString);
                });
                _this.cssClasses = function (extendOptions) {
                    return Analytics.Utils.extend({
                        "dxrd-tab-panel-left": _this.position() === TabPanel.Position.Left,
                        "dxrd-tab-panel-right": _this.position() === TabPanel.Position.Right,
                        "dxrd-tab-panel-empty": _this.isEmpty()
                    }, extendOptions);
                };
                var tabs = options.tabs;
                var autoSelectTab = options.autoSelectTab;
                if (options.rtl)
                    _this.position(TabPanel.Position.Left);
                var _self = _this;
                _this.tabs = tabs;
                if (tabs && tabs.length)
                    _this._disposables.push(_this.isEmpty = ko.computed(function () { return _this.tabs.every(function (tab) { return !tab.visible(); }); }));
                else
                    _this.isEmpty = ko.observable(true);
                _this._disposables.push(ko.computed(function () {
                    var visibleTabs = tabs.filter(function (tab) { return tab.visible(); });
                    if (visibleTabs.length !== 0) {
                        if (visibleTabs.filter(function (tab) { return tab.active.peek(); }).length === 0) {
                            visibleTabs[0].active(true);
                            if (autoSelectTab) {
                                _this.collapsed(true);
                            }
                        }
                    }
                    else {
                        _this.collapsed(true);
                    }
                }));
                _this._disposables.push(ko.computed(function () {
                    var disabledTabs = tabs.filter(function (tab) { return tab.disabled(); });
                    if (disabledTabs.length !== 0) {
                        if (disabledTabs.filter(function (tab) { return tab.active.peek(); }).length !== 0) {
                            disabledTabs.forEach(function (t) { return t.active(false); });
                            var nextSelectedTab = tabs.filter(function (tab) { return !tab.disabled.peek() && tab.visible.peek(); })[0];
                            if (nextSelectedTab) {
                                _this.selectTab({ model: nextSelectedTab });
                            }
                        }
                    }
                }));
                if (autoSelectTab) {
                    _this.tabs.forEach(function (tab) {
                        _this._disposables.push(tab.active.subscribe(function (newVal) {
                            if (newVal) {
                                _this.selectTab({ model: tab });
                            }
                        }));
                    });
                }
                _this.selectTab = function (e) {
                    var selectedTab = e.model;
                    if (!selectedTab.disabled()) {
                        _this.tabs.forEach(function (tab) {
                            tab.active(tab === selectedTab);
                        });
                        _this.collapsed(false);
                    }
                };
                var _width = ko.observable(340);
                _this._disposables.push(_this.width = ko.pureComputed({
                    read: function () { return _this.collapsed() ? 0 : _width(); },
                    write: function (newWidth) { _width(newWidth); }
                }));
                _this._disposables.push(_this.headerWidth = ko.pureComputed(function () { return _this.isEmpty() ? 0 : (50 + (_this.collapsed() ? 0 : _this.width())); }));
                var self = _this;
                _this.getResizableOptions = function ($element, panelOffset, minWidth) {
                    if (!_this._resizableOptions || _this._resizableOptions.$element !== $element) {
                        _this._resizableOptions = {
                            starting: function () {
                                $($element).css(self.position() === TabPanel.Position.Left ? 'right' : 'left', '');
                            },
                            handles: self.position() === TabPanel.Position.Left ? 'e' : 'w',
                            stopped: $.noop,
                            stop: $.noop,
                            resize: function () {
                                $($element).css({ left: self.position() === TabPanel.Position.Left ? panelOffset : '', right: self.position() === TabPanel.Position.Left ? '' : panelOffset });
                                _self.width($($element).width());
                            },
                            disabled: _self.collapsed,
                            zoom: 1,
                            minimumWidth: minWidth,
                            maximumWidth: 1000,
                            $element: $element
                        };
                        self._disposables.push(self.position.subscribe(function (newVal) {
                            $($element).resizable("option", "handles", self.position() === TabPanel.Position.Left ? 'e' : 'w');
                        }));
                    }
                    ;
                    return _this._resizableOptions;
                };
                _this._disposables.push(_this.toggleCollapsedImage = ko.pureComputed(function () {
                    var postfix = _this.collapsed() ? "-expand" : "-collapse";
                    return { class: "dxrd-image-propertygrid" + postfix, template: "dxrd-svg-tabs" + postfix };
                }));
                _this._disposables.push(_this.toggleCollapsedText);
                return _this;
            }
            TabPanel.prototype.dispose = function () {
                _super.prototype.dispose.call(this);
                this.disposeArray(this.tabs);
            };
            TabPanel.Position = {
                Left: "Left",
                Right: "Right"
            };
            return TabPanel;
        }(Analytics.Utils.Disposable));
        Analytics.TabPanel = TabPanel;
        var TabInfo = (function (_super) {
            __extends(TabInfo, _super);
            function TabInfo(options) {
                var _this = _super.call(this) || this;
                _this.active = ko.observable(false);
                _this.visible = ko.observable();
                _this.disabled = ko.observable();
                var imageBaseName = options.imageClassName || options.text.toLowerCase();
                _this._text = options.text;
                _this._localizationId = options.localizationId;
                _this._disposables.push(_this.imageClassName = ko.pureComputed(function () {
                    return "dxrd-image-" + imageBaseName;
                }));
                _this.imageTemplateName = options.imageTemplateName || Analytics.Widgets.Internal.SvgTemplatesEngine.getExistingTemplate("dxrd-svg-tabs-" + options.text.toLowerCase());
                _this.template = options.template;
                _this._disposables.push(options.model);
                var computedVisible = options.visible;
                var computedDisabled = options.disabled;
                _this._disposables.push(_this.visible = ko.pureComputed(function () { return computedVisible !== undefined ? computedVisible() : true; }));
                _this._disposables.push(_this.disabled = ko.pureComputed(function () { return computedDisabled !== undefined ? computedDisabled() : false; }));
                _this._disposables.push(_this.visible.subscribe(function (visibility) {
                    if (!visibility) {
                        _this.active(false);
                    }
                }));
                computedVisible && _this._disposables.push(computedVisible);
                computedDisabled && _this._disposables.push(computedDisabled);
                _this.model = options.model;
                return _this;
            }
            Object.defineProperty(TabInfo.prototype, "text", {
                get: function () {
                    return Analytics.getLocalization(this._text, this._localizationId);
                },
                enumerable: true,
                configurable: true
            });
            return TabInfo;
        }(Analytics.Utils.Disposable));
        Analytics.TabInfo = TabInfo;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var ToolboxItem = (function () {
            function ToolboxItem(info) {
                this.disabled = ko.observable(false);
                this.info = info;
            }
            Object.defineProperty(ToolboxItem.prototype, "type", {
                get: function () {
                    return Analytics.Internal.getTypeNameFromFullName(this.info["@ControlType"]);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ToolboxItem.prototype, "imageClassName", {
                get: function () {
                    return [Analytics.Internal.getImageClassName(this.type), this.disabled() ? "dxrd-disabled-button" : ""].join(' ');
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ToolboxItem.prototype, "imageTemplateName", {
                get: function () {
                    var _templateName = Analytics.Internal.getImageClassName(this.type, true);
                    return Analytics.Widgets.Internal.SvgTemplatesEngine.getExistingTemplate(_templateName);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ToolboxItem.prototype, "index", {
                get: function () {
                    return this.info.index;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ToolboxItem.prototype, "displayName", {
                get: function () {
                    return this.info.displayName || this.type;
                },
                enumerable: true,
                configurable: true
            });
            return ToolboxItem;
        }());
        Analytics.ToolboxItem = ToolboxItem;
        function getToolboxItems(controlsMap) {
            var toolboxItems = [];
            for (var controlType in controlsMap) {
                if (!controlsMap[controlType].nonToolboxItem) {
                    var item = {
                        "@ControlType": controlType,
                        displayName: controlsMap[controlType].displayName,
                        index: controlsMap[controlType].toolboxIndex || 0,
                        canDrop: controlsMap[controlType].canDrop
                    };
                    if (controlsMap[controlType].size) {
                        item["size"] = controlsMap[controlType].size;
                    }
                    if (controlsMap[controlType].defaultVal) {
                        for (var name in controlsMap[controlType].defaultVal) {
                            item[name] = controlsMap[controlType].defaultVal[name];
                        }
                        ;
                    }
                    toolboxItems.push(new ToolboxItem(item));
                }
            }
            return toolboxItems.sort(function (item1, item2) { return item1.index - item2.index; });
        }
        Analytics.getToolboxItems = getToolboxItems;
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function createObservableReverseArrayMapCollection(elementModels, target, createItem) {
                var array = target();
                elementModels.peek().forEach(function (item) {
                    var surface = createItem(item);
                    array.splice(0, 0, surface);
                });
                target.valueHasMutated();
                return elementModels.subscribe(function (args) {
                    var unwrapedTarget = target();
                    var targetLength = unwrapedTarget.length;
                    args.forEach(function (changeSet) {
                        if (changeSet.status === "deleted") {
                            unwrapedTarget.splice(unwrapedTarget.indexOf(changeSet.value.surface), 1);
                        }
                    });
                    args.forEach(function (changeSet) {
                        if (changeSet.status === "added") {
                            unwrapedTarget.splice(targetLength - changeSet.index, 0, createItem(changeSet.value));
                        }
                    });
                    target.valueHasMutated();
                }, null, "arrayChange");
            }
            Utils.createObservableReverseArrayMapCollection = createObservableReverseArrayMapCollection;
            function createObservableArrayMapCollection(elementModels, target, createItem) {
                var array = target();
                elementModels.peek().forEach(function (item) {
                    var surface = createItem(item);
                    array.push(surface);
                });
                target.valueHasMutated();
                return elementModels.subscribe(function (args) {
                    var startIndex = target().length, deleteCount = 0, valuesToAdd = [];
                    args.forEach(function (changeSet) {
                        if (changeSet.status === "deleted") {
                            deleteCount++;
                            if (changeSet.index < startIndex) {
                                startIndex = changeSet.index;
                            }
                        }
                    });
                    args.forEach(function (changeSet) {
                        if (changeSet.status === "added") {
                            if (changeSet.index < startIndex) {
                                startIndex = changeSet.index;
                            }
                            valuesToAdd.push(createItem(changeSet.value));
                        }
                    });
                    target.splice.apply(target, [startIndex, deleteCount].concat(valuesToAdd));
                }, null, "arrayChange");
            }
            Utils.createObservableArrayMapCollection = createObservableArrayMapCollection;
            function deserializeChildArray(model, parent, creator) {
                var result = [];
                Utils.getPropertyValues(model).forEach(function (item) {
                    var createdItem = creator(item);
                    result.push(createdItem);
                });
                return Utils.knockoutArrayWrapper(result, function (array, event) {
                    if (event === "beforeChange") {
                        return;
                    }
                    if (event === "arrayChange") {
                        for (var i = 0; i < array.length; i++) {
                            array[i].value.parentModel(parent);
                        }
                    }
                    else {
                        for (var i = 0; i < array.length; i++) {
                            array[i].parentModel(parent);
                        }
                    }
                });
            }
            Utils.deserializeChildArray = deserializeChildArray;
            function getFirstItemByPropertyValue(array, propertyName, propertyValue, fromIndex) {
                var fromIndex = fromIndex || 0;
                for (var i = fromIndex; i < array.length; i++) {
                    var value = ko.isObservable(array[i][propertyName]) ? array[i][propertyName].peek() : array[i][propertyName];
                    if (value === propertyValue) {
                        return array[i];
                    }
                }
                return null;
            }
            Utils.getFirstItemByPropertyValue = getFirstItemByPropertyValue;
            function findFirstItemMatchesCondition(array, predicate) {
                for (var i = 0; i < array.length; i++) {
                    if (predicate(array[i])) {
                        return array[i];
                    }
                }
                return null;
            }
            Utils.findFirstItemMatchesCondition = findFirstItemMatchesCondition;
            Utils.find = findFirstItemMatchesCondition;
            function binaryIndexOf(ar, el, compare) {
                var m = 0;
                var n = ar.length - 1;
                while (m <= n) {
                    var k = (n + m) >> 1;
                    var cmp = compare(el, ar[k]);
                    if (cmp > 0) {
                        m = k + 1;
                    }
                    else if (cmp < 0) {
                        n = k - 1;
                    }
                    else {
                        return k;
                    }
                }
                return ~m;
            }
            Utils.binaryIndexOf = binaryIndexOf;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var ControlsFactory = (function () {
                function ControlsFactory() {
                    this.controlsMap = {};
                }
                ControlsFactory.prototype.getControlInfo = function (controlType) {
                    var info = this.controlsMap[controlType] || null;
                    return info;
                };
                ControlsFactory.prototype.getControlType = function (model) {
                    var controlType = Analytics.Internal.getTypeNameFromFullName(model["@ControlType"] || "");
                    return this.controlsMap[controlType] ? controlType : "Unknown";
                };
                ControlsFactory.prototype.createControl = function (model, parent, serializer) {
                    var controlType = this.getControlType(model);
                    return new (this.controlsMap[controlType] && this.controlsMap[controlType].type || Analytics.ElementViewModel)(model, parent, serializer);
                };
                ControlsFactory.prototype.registerControl = function (typeName, metadata) {
                    if (metadata.isToolboxItem !== undefined) {
                        metadata.nonToolboxItem = !metadata.isToolboxItem;
                    }
                    Object.defineProperty(metadata, "isToolboxItem", {
                        get: function () {
                            return !metadata.nonToolboxItem;
                        },
                        set: function (newVal) {
                            metadata.nonToolboxItem = !newVal;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    this.controlsMap[typeName] = metadata;
                    this.controlsMap[typeName].info = $.extend(true, [], metadata.info);
                };
                ControlsFactory.prototype._getPropertyInfo = function (info, path, position) {
                    var propertyInfo = info.filter(function (x) { return x.displayName === path[position] || x.propertyName === path[position] || x.modelName === path[position]; })[0];
                    if (position === path.length - 1) {
                        return propertyInfo || null;
                    }
                    else {
                        if (propertyInfo.info) {
                            return this._getPropertyInfo(propertyInfo.info, path, position + 1);
                        }
                        else if (propertyInfo.from) {
                            var object = null;
                            try {
                                object = propertyInfo.from({});
                            }
                            catch (e) {
                                return null;
                            }
                            var newInfo = object.getInfo && object.getInfo();
                            if (newInfo) {
                                return this._getPropertyInfo(newInfo, path, position + 1);
                            }
                        }
                    }
                    return null;
                };
                ControlsFactory.prototype.getPropertyInfo = function (controlType, path) {
                    var properties = path;
                    if (!$.isArray(path)) {
                        properties = path.split('.');
                    }
                    return this._getPropertyInfo(this.controlsMap[controlType].info, properties, 0);
                };
                return ControlsFactory;
            }());
            Utils.ControlsFactory = ControlsFactory;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var FieldListProvider = (function () {
                function FieldListProvider(fieldListCallback, rootItems, extenders) {
                    var _this = this;
                    this._extenders = extenders;
                    this.getItems = function (pathRequest) {
                        var result = $.Deferred();
                        var items = [];
                        if (_this._beforeFieldListCallback(pathRequest, items)) {
                            result.resolve(items);
                        }
                        else if (rootItems && !pathRequest.fullPath) {
                            items.push.apply(items, $.map(rootItems(), function (item) {
                                return { name: item.id || item.ref, displayName: item.name, isList: true, specifics: item.specifics || "ListSource", dragData: { noDragable: false } };
                            }));
                            _this._afterFieldListCallBack(pathRequest, items);
                            result.resolve(items);
                        }
                        else {
                            _this._patchRequest(pathRequest, rootItems);
                            fieldListCallback(pathRequest).done(function (fields) {
                                items.push.apply(items, fields);
                                _this._afterFieldListCallBack(pathRequest, items);
                                result.resolve(items);
                            })
                                .fail(function (error) { return result.reject(error); });
                        }
                        return result.promise();
                    };
                }
                FieldListProvider.prototype._patchRequest = function (request, dataSources) {
                    if (!dataSources) {
                        return;
                    }
                    var dss = dataSources.peek();
                    for (var i = 0; i < dss.length; i++) {
                        if (dss[i].id === request.id && !!request.id) {
                            request.ref = undefined;
                            return;
                        }
                        if (dss[i].ref === request.ref && !!request.ref) {
                            request.id = undefined;
                            return;
                        }
                    }
                };
                FieldListProvider.prototype._beforeFieldListCallback = function (request, items) {
                    return !!this._extenders && this._extenders.some(function (extender) { return extender.beforeItemsFilled(request, items); });
                };
                FieldListProvider.prototype._afterFieldListCallBack = function (request, items) {
                    this._extenders && this._extenders.forEach(function (extender) { extender.afterItemsFilled && extender.afterItemsFilled(request, items); });
                };
                return FieldListProvider;
            }());
            Utils.FieldListProvider = FieldListProvider;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            Utils.NotifyType = {
                info: "info",
                warning: "warning",
                error: "error",
                success: "success"
            };
            var wrappedConsole = (function (console) {
                var getWrappedMethod = function (methodName) { return (function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    if (console && $.isFunction(console[methodName])) {
                        console[methodName].apply(console, arguments);
                    }
                }); };
                return {
                    info: getWrappedMethod("info"),
                    warn: getWrappedMethod("warn"),
                    error: getWrappedMethod("error")
                };
            })(window.console);
            function NotifyAboutWarning(msg, showForUser) {
                if (showForUser === void 0) { showForUser = false; }
                if (showForUser) {
                    ShowMessage(msg);
                }
                if (Utils.DEBUG) {
                    throw new Error(msg);
                }
                else {
                    wrappedConsole.warn(msg);
                }
            }
            Utils.NotifyAboutWarning = NotifyAboutWarning;
            function getErrorMessage(jqXHR) {
                return jqXHR && jqXHR.responseJSON && jqXHR.responseJSON.error ? jqXHR.responseJSON.error : '';
            }
            Utils.getErrorMessage = getErrorMessage;
            function ShowMessage(msg, type, displayTime, debugInfo) {
                if (type === void 0) { type = "error"; }
                DevExpress.ui.notify({
                    message: msg,
                    type: type,
                    position: { of: Analytics.Internal.chooseBetterPositionOf(document.documentElement, $(".dx-designer")[0]), my: "bottom", at: "bottom", offset: "0 -10" },
                    targetContainer: $(".dx-designer")[0],
                    closeOnOutsideClick: true,
                    closeOnSwipe: false,
                    displayTime: displayTime || (type === "error" ? 60000 : 3000)
                });
            }
            Utils.ShowMessage = ShowMessage;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function floatFromModel(val) {
                return ko.observable(val === undefined || val === null ? null : parseFloat(val));
            }
            Utils.floatFromModel = floatFromModel;
            function fromEnum(value) {
                var shotEnumValueKey = Analytics.Internal.getShortTypeName(value);
                var valuesArrayItem = this.valuesArray && this.valuesArray.filter(function (item) { return item.value == shotEnumValueKey; })[0];
                return ko.observable((this.values && this.values[shotEnumValueKey] !== undefined || valuesArrayItem) ? shotEnumValueKey : value);
            }
            Utils.fromEnum = fromEnum;
            function parseBool(val) {
                return ko.observable(val !== void 0 ? String(val).toLowerCase() === "true" : val);
            }
            Utils.parseBool = parseBool;
            function colorFromString(val) {
                var color = (val || "").split(",");
                var result = ko.observable(val);
                if (color.length > 1) {
                    var alpha = (parseFloat(color[0]) / 255).toFixed(2);
                    color.shift();
                    color.push(alpha.toString());
                    result = ko.observable("rgba(" + color.join(", ") + ")");
                }
                return result;
            }
            Utils.colorFromString = colorFromString;
            function saveAsInt(val) {
                return Math.round(val).toString();
            }
            Utils.saveAsInt = saveAsInt;
            function colorToString(val) {
                var color = (val || "").split(", ");
                var result = val;
                if (color.length > 1) {
                    var alpha = Math.round(parseFloat(color[3]) * 255);
                    color.pop();
                    color[0] = color[0].split("(")[1];
                    result = alpha.toString() + "," + color.join(",");
                }
                return result;
            }
            Utils.colorToString = colorToString;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function unitsToPixel(val, measureUnit, zoom) {
                if (zoom === void 0) { zoom = 1; }
                var result;
                if (measureUnit === "Test" || measureUnit === "Pixels") {
                    result = 1 * val;
                }
                else if (measureUnit === "TenthsOfAMillimeter") {
                    result = val * 3.78 / 10;
                }
                else {
                    result = val * 96 / 100;
                }
                result = result * (zoom);
                return Math.floor(result * 100) / 100;
            }
            Utils.unitsToPixel = unitsToPixel;
            function pixelToUnits(val, measureUnit, zoom) {
                var result;
                if (measureUnit === "Test" || measureUnit === "Pixels") {
                    result = 1 * val;
                }
                else if (measureUnit === "TenthsOfAMillimeter") {
                    result = val / 3.78 * 10;
                }
                else {
                    result = val / 96 * 100;
                }
                result = result / (zoom);
                return Math.floor(result * 100) / 100;
            }
            Utils.pixelToUnits = pixelToUnits;
            function createUnitProperty(model, target, propertyName, property, measureUnit, zoom, afterCreation) {
                var lastVal = 0;
                target[propertyName] = ko.pureComputed({
                    read: function () {
                        var val = property(model)(), newVal = unitsToPixel(val, measureUnit.peek(), zoom());
                        if (Math.abs(newVal - lastVal) > 0.2) {
                            lastVal = newVal;
                            return lastVal;
                        }
                        return lastVal;
                    },
                    write: function (val) {
                        if (Math.abs(val - lastVal) <= 0.2)
                            return;
                        lastVal = val;
                        var result = pixelToUnits(val, measureUnit.peek(), zoom());
                        property(model)(result);
                    }
                });
                afterCreation(target[propertyName]);
            }
            Utils.createUnitProperty = createUnitProperty;
            function createUnitProperties(model, target, properties, measureUnit, zoom, afterCreation) {
                if (!properties)
                    return;
                for (var propertyName in properties) {
                    createUnitProperty(model, target, propertyName, properties[propertyName], measureUnit, zoom, afterCreation);
                }
            }
            Utils.createUnitProperties = createUnitProperties;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function copyObservables(from, to) {
                for (var name in (from || {})) {
                    if (ko.isObservable(from[name])) {
                        to[name](from[name]());
                    }
                    else if (!$.isFunction(from[name])) {
                        copyObservables(from[name], to[name]);
                    }
                }
                ;
            }
            Utils.copyObservables = copyObservables;
            function compareObjects(a, b) {
                var result = a && b && !(a instanceof Array) && !(b instanceof Array);
                result = result && (Object.getOwnPropertyNames(a).length === Object.getOwnPropertyNames(b).length);
                if (result) {
                    for (var name in (a || {})) {
                        if (name.indexOf("_") !== 0 && (typeof a[name] !== "function" || ko.isObservable(a[name]))) {
                            if (ko.isObservable(a[name])) {
                                result = ko.unwrap(a[name]) === ko.unwrap(b[name]);
                            }
                            else if (a[name] instanceof Array) {
                                if ((b[name] instanceof Array) && a[name].length === b[name].length) {
                                    for (var i = 0; i < a[name].length; i++) {
                                        result = compareObjects(a[name][i], b[name][i]);
                                        if (result === false)
                                            break;
                                    }
                                }
                                else {
                                    result = false;
                                }
                            }
                            else if (a[name] instanceof Object) {
                                result = compareObjects(a[name], b[name]);
                            }
                            else {
                                result = a[name] === b[name];
                            }
                            if (result === false)
                                break;
                        }
                    }
                }
                return result;
            }
            Utils.compareObjects = compareObjects;
            Utils.cssTransform = ["-webkit-transform", "-moz-transform", "-ms-transform", "-o-transform", "transform"];
            Utils.DEBUG = false;
            function getFullPath(path, dataMember) {
                return path + (dataMember ? "." + dataMember : "");
            }
            Utils.getFullPath = getFullPath;
            function loadTemplates() {
                var promises = $("script[type='text/html']").map(function (_, script) {
                    if (script.src) {
                        var deffered = $.Deferred();
                        $.get(script.src)
                            .done(function (tmpl) {
                            script.text = tmpl;
                            if (tmpl.indexOf('type="text/html"') !== -1 || tmpl.indexOf("type='text/html'") !== -1) {
                                $(document.body).append(tmpl);
                            }
                            deffered.resolve();
                        })
                            .fail(function (jqXHR, textStatus, errorThrown) {
                            deffered.reject();
                        });
                        return deffered.promise();
                    }
                });
                return $.when.apply($.when, promises);
            }
            Utils.loadTemplates = loadTemplates;
            function appendStaticContextToRootViewModel(root, dx) {
                root.dx = dx || DevExpress;
                root.getLocalization = function () {
                    return Analytics.getLocalization.apply(DevExpress.Analytics, arguments);
                };
                root.getPopupContainer = Utils.getParentContainer;
                root.surfaceClass = function (el) { return "dx-designer-viewport" + (!Utils.getParentContainer(el, ".dx-theme-generic").length ? " dx-theme-generic" : ""); };
            }
            Utils.appendStaticContextToRootViewModel = appendStaticContextToRootViewModel;
            Utils.ajaxSetup = new Analytics.Internal.AjaxSetup();
            function _ajax(uri, action, arg, processErrorCallback, ignoreError, customOptions, isError, getErrorMessage) {
                if (isError === void 0) { isError = function (data) { return !data.success; }; }
                if (getErrorMessage === void 0) { getErrorMessage = Utils.getErrorMessage; }
                var deferred = $.Deferred();
                var requestData;
                if (action !== undefined && arg !== undefined) {
                    requestData = {
                        actionKey: action,
                        arg: arg
                    };
                }
                Utils.ajaxSetup.sendRequest($.extend({}, {
                    type: "POST",
                    data: requestData,
                    url: uri
                }, customOptions)).fail(function (jqXHR, textStatus, errorThrown) {
                    if (ignoreError && ignoreError()) {
                        deferred.reject();
                        return;
                    }
                    Analytics.Internal._errorProcessor.call({ jqXHR: jqXHR, textStatus: textStatus, errorThrown: errorThrown, getRequestDetails: function () { return requestData || uri; } });
                    Analytics.Internal._processError(errorThrown, deferred, jqXHR, textStatus, processErrorCallback);
                })
                    .done(function (data, textStatus, jqXHR) {
                    if (!data) {
                        deferred.reject();
                        return;
                    }
                    if (!isError(data)) {
                        deferred.resolve(data.result);
                    }
                    else {
                        if (ignoreError && ignoreError()) {
                            deferred.reject();
                            return;
                        }
                        Analytics.Internal._errorProcessor.call({ jqXHR: jqXHR, textStatus: textStatus, data: data, errorThrown: getErrorMessage(jqXHR), getRequestDetails: function () { return requestData || uri; } });
                        Analytics.Internal._processError("Internal Server Error", deferred, jqXHR, textStatus, processErrorCallback);
                    }
                });
                return deferred.promise();
            }
            Utils._ajax = _ajax;
            function _ajaxWithOptions(options) {
                return _ajax(options.uri, options.action, options.arg, options.processErrorCallback, options.ignoreError, options.customOptions, options.isError, options.getErrorMessage);
            }
            Utils._ajaxWithOptions = _ajaxWithOptions;
            function ajax() {
                var params = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    params[_i] = arguments[_i];
                }
                if (params.length > 1) {
                    return _ajax.apply(this, params);
                }
                else {
                    return _ajaxWithOptions(params[0]);
                }
            }
            Utils.ajax = ajax;
            ;
            function cutRefs(model) {
                Utils.objectsVisitor(model, function (target) {
                    delete target["@Ref"];
                });
                return model;
            }
            Utils.cutRefs = cutRefs;
            Utils.DesignerBaseElements = {
                MenuButton: "dxrd-menubutton-template-base",
                Toolbar: "dxrd-toolbar-template-base",
                Toolbox: "dxrd-toolbox-template-base",
                Surface: "dxrd-surface-template-base",
                RightPanel: "dxrd-right-panel-template-base"
            };
            function generateDefaultParts(model) {
                return [
                    { id: Utils.DesignerBaseElements.MenuButton, templateName: Utils.DesignerBaseElements.MenuButton, model: model },
                    { id: Utils.DesignerBaseElements.Toolbar, templateName: Utils.DesignerBaseElements.Toolbar, model: model },
                    { id: Utils.DesignerBaseElements.Toolbox, templateName: Utils.DesignerBaseElements.Toolbox, model: model },
                    { id: Utils.DesignerBaseElements.Surface, templateName: Utils.DesignerBaseElements.Surface, model: model },
                    { id: Utils.DesignerBaseElements.RightPanel, templateName: Utils.DesignerBaseElements.RightPanel, model: model }
                ];
            }
            Utils.generateDefaultParts = generateDefaultParts;
            function createActionWrappingFunction(wrapperName, func) {
                return function (actions) {
                    actions.forEach(function (action) {
                        if (!action["wrappedWith"] || action["wrappedWith"].indexOf(wrapperName) === -1) {
                            var oldClickHandler = action.clickAction;
                            action.clickAction = function (model) {
                                return func(model, oldClickHandler);
                            };
                            action["wrappedWith"] = action["wrappedWith"] || [];
                            action["wrappedWith"].push(wrapperName);
                        }
                    });
                };
            }
            Utils.createActionWrappingFunction = createActionWrappingFunction;
            function createDesigner(model, surface, controlsFactory, groups, editors, parts, rtl, selection, designControlsHelper, undoEngine, customMerge, snapLinesCollector, groupLocalizationIDs) {
                if (groups === void 0) { groups = {}; }
                if (editors === void 0) { editors = []; }
                var context = new Utils.DesignerContextGenerator(rtl)
                    .addModel(model)
                    .addSurface(surface)
                    .addUndoEngine(undoEngine)
                    .getContext();
                var designerGenerator = new Utils.CommonDesignerGenerator(context, rtl);
                return designerGenerator
                    .mapOnContext()
                    .addSelection(function (settings) {
                    settings.selection = selection || new Analytics.Internal.SurfaceSelection();
                    settings.snapHelper = new Analytics.Internal.SnapLinesHelper(surface, Analytics.Internal.SnapLinesHelper.snapTolerance, snapLinesCollector || new Analytics.Internal.SnapLinesCollector());
                    settings.editableObject = Analytics.Internal.CombinedObject.getEditableObject(settings.selection, context.undoEngine, customMerge).extend({ throttle: 1 });
                    settings.addDragDrop(function (dragDropSettings) {
                        dragDropSettings.dragHelperContent = new Analytics.Internal.DragHelperContent(settings.selection);
                        dragDropSettings.dragDropStarted = Analytics.Internal.DragDropHandler.started;
                        dragDropSettings.addDragDropHandler("dragHandler", new Analytics.Internal.SelectionDragDropHandler(context.surface, settings.selection, context.undoEngine, settings.snapHelper, dragDropSettings.dragHelperContent));
                        dragDropSettings.addDragDropHandler("toolboxDragHandler", new Analytics.Internal.ToolboxDragDropHandler(context.surface, settings.selection, context.undoEngine, settings.snapHelper, dragDropSettings.dragHelperContent, controlsFactory));
                    });
                    settings.addResize(function (resizeSettings) {
                        resizeSettings.handler = {
                            starting: function () {
                                selection.expectClick = true;
                                context.undoEngine().start();
                            },
                            stopped: function () {
                                context.undoEngine().end();
                                setTimeout(function () { selection.expectClick = false; }, 100);
                            },
                            disabled: Analytics.Internal.DragDropHandler.started,
                            snapHelper: settings.snapHelper
                        };
                    });
                })
                    .addToolboxItems(function () { return Analytics.getToolboxItems(controlsFactory.controlsMap); })
                    .addIsLoading()
                    .addControlProperties(editors, groups, groupLocalizationIDs)
                    .addPopularProperties(controlsFactory)
                    .addControlsHelper(function (settings) {
                    settings
                        .addControlsHelper(designControlsHelper)
                        .addControlsStore();
                })
                    .addTabPanel(undefined, function () {
                    return [
                        new Analytics.TabInfo({
                            text: "Properties",
                            template: "dxrd-propertiestab",
                            model: designerGenerator.getModel().propertyGrid,
                            localizationId: 'ReportStringId.Cmd_Properties',
                            visible: ko.pureComputed(function () { return !!model(); }),
                            disabled: ko.pureComputed(function () { return designerGenerator.getModel().propertyGrid.focusedItem() instanceof Array; }).extend({ throttle: 100 })
                        })
                    ];
                })
                    .addContextActions(function (settings) {
                    settings.actionProviders = [];
                    settings.createDefaultActions(designerGenerator.getModel().editableObject, designerGenerator.getModel().undoEngine);
                })
                    .addMenu(function (settings) {
                    settings.appMenuVisible = ko.observable(false);
                    settings.toggleAppMenu = function () {
                        settings.appMenuVisible(!settings.appMenuVisible());
                    };
                    settings.getMenuPopupContainer = function (el) { return $(el).closest(".dxrd-menu-button").prev(".dxrd-menu-container"); };
                    settings.getMenuPopupTarget = function (el) { return $(el).closest(".dxrd-menu-button").find(".dxrd-menu-place"); };
                })
                    .addElement("inlineTextEdit", function () { return new Analytics.Internal.InlineTextEdit(designerGenerator.getModel().selection); })
                    .addElement("actionsGroupTitle", function () { return function () { return Analytics.getLocalization('Actions', 'ASPxReportsStringId.ReportDesigner_Actions'); }; })
                    .addElement("updateFont", function () { return function (values) {
                    DevExpress.Analytics.Widgets.availableFonts($.extend(DevExpress.Analytics.Widgets.availableFonts(), values));
                }; })
                    .addElement("sortFont", function () { return function () {
                    var sortedObj = {};
                    var fonts = DevExpress.Analytics.Widgets.availableFonts.peek();
                    Object.keys(fonts).sort(function (a, b) { return a.localeCompare(b); }).forEach(function (key) { return sortedObj[key] = fonts[key]; });
                    DevExpress.Analytics.Widgets.availableFonts(sortedObj);
                }; })
                    .addElement("surfaceSize", function () { return ko.observable(0); })
                    .addElement("popularVisible", function () { return ko.pureComputed(function () {
                    return designerGenerator.getModel().popularProperties._editors().some(function (x) { return x.visible(); }) ||
                        designerGenerator.getModel().contextActions().length > 0;
                }); })
                    .addActionList()
                    .addParts()
                    .getModel();
            }
            Utils.createDesigner = createDesigner;
            function localizeNoneString(noneValue) {
                var value = ko.unwrap(noneValue);
                if (value === "none") {
                    return Analytics.getLocalization("none", "DataAccessStringId.ParameterListEmpty");
                }
                else if (value === "(none)") {
                    return (Analytics.getLocalization("(none)", "ChartStringId.WizNoBackImage") !== "(none)") ? Analytics.getLocalization("(none)", "ChartStringId.WizNoBackImage") : ("(" + Analytics.getLocalization("none", "DataAccessStringId.ParameterListEmpty") + ")");
                }
                return value;
            }
            Utils.localizeNoneString = localizeNoneString;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            function objectsVisitor(target, visitor, visited, skip) {
                if (visited === void 0) { visited = []; }
                if (skip === void 0) { skip = ["surface", "reportSource"]; }
                if (visited.indexOf(target) !== -1) {
                    return;
                }
                if (target && target !== undefined) {
                    var properties = [];
                    for (var propertyName in target) {
                        if (visited.indexOf(target[propertyName]) === -1 && propertyName.indexOf("_") !== 0 && skip.indexOf(propertyName) === -1) {
                            properties.push(target[propertyName]);
                        }
                    }
                    visitor(target);
                    visited.push(target);
                    for (var i = 0; i < properties.length; i++) {
                        properties[i] = ko.unwrap(properties[i]);
                        if (typeof properties[i] === 'object') {
                            objectsVisitor(properties[i], visitor, visited, skip);
                        }
                    }
                }
            }
            Utils.objectsVisitor = objectsVisitor;
            function collectionsVisitor(target, visitor, collectionsToProcess, visited) {
                if (collectionsToProcess === void 0) { collectionsToProcess = ["controls", "bands", "subBands", "crossBandControls", "rows", "cells", "fields"]; }
                if (visited === void 0) { visited = []; }
                if (target && target !== undefined) {
                    visited.push(target);
                    for (var i = 0, len = collectionsToProcess.length; i < len; i++) {
                        if (target[collectionsToProcess[i]]) {
                            visitor(target[collectionsToProcess[i]], target);
                            (target[collectionsToProcess[i]]() || []).forEach(function (item) { return collectionsVisitor(item, visitor, collectionsToProcess, visited); });
                        }
                    }
                }
            }
            Utils.collectionsVisitor = collectionsVisitor;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var dxFieldListPicker = (function (_super) {
                __extends(dxFieldListPicker, _super);
                function dxFieldListPicker($element, options) {
                    var _this = _super.call(this, $element, $.extend(options, { showClearButton: true })) || this;
                    _this._path = ko.observable("");
                    _this._value = ko.observable("");
                    _this._parentViewport = null;
                    _this._itemsProvider = ko.observable(null);
                    _this._defaultPosition = null;
                    _this.option("path") && _this._path(_this.option("path"));
                    _this.option("value") && _this._value(_this.option("value"));
                    _this.option("itemsProvider") && _this._itemsProvider(_this.option("itemsProvider"));
                    _this.option("valueChangeEvent", "change");
                    _this.option("displayValue", options.displayValue);
                    _this._parentViewport = $($element).parents(".dx-designer-viewport");
                    return _this;
                }
                dxFieldListPicker.prototype._showDropDown = function () {
                    if (this._popup) {
                        var $element = $(this.element());
                        this._popup.option("width", $element.width());
                        var popupPosition = $.extend(true, {}, this._defaultPosition, { boundary: this._parentViewport[0], boundaryOffset: "0 20", collision: "none flip" });
                        this._popup.option("position", popupPosition);
                        this._popup.option("height", "auto");
                        this._popup.option("maxHeight", this._getMaxHeight());
                        this._popup.repaint();
                        $(this._popup.content())[0].style.height = "auto";
                        this._popup._renderPosition();
                    }
                };
                dxFieldListPicker.prototype._getMaxHeight = function () {
                    var $element = $(this.element()), offset = $element.offset(), windowHeight = $(window).height(), maxHeight = Math.max(offset.top, windowHeight - offset.top - $element.outerHeight());
                    return Math.min(.5 * windowHeight, maxHeight);
                };
                dxFieldListPicker.prototype._closeOutsideDropDownHandler = function (e, ignoreContainerClicks) { _super.prototype._closeOutsideDropDownHandler.call(this, e, true); };
                dxFieldListPicker.prototype._hideOnBlur = function () { return false; };
                dxFieldListPicker.prototype._popupConfig = function () {
                    var dxPolymorphWidget = this._options.integrationOptions.templates["dx-polymorph-widget"];
                    var popuConfig = _super.prototype._popupConfig.call(this);
                    this._defaultPosition = popuConfig.position;
                    return $.extend(popuConfig, {
                        container: this._parentViewport,
                        contentTemplate: dxPolymorphWidget && dxPolymorphWidget._template,
                        closeOnOutsideClick: true
                    });
                };
                dxFieldListPicker.prototype._optionChanged = function (obj, value) {
                    var _this = this;
                    var name = obj.name || obj, newValue = value || obj.value;
                    switch (name) {
                        case "value":
                            _super.prototype._optionChanged.apply(this, arguments);
                            setTimeout($.proxy(function () {
                                _this.option("opened", false);
                            }, this), 50);
                            break;
                        case "path":
                            this._path(newValue);
                            break;
                        case "itemsProvider":
                            this._itemsProvider(newValue);
                            break;
                        case "displayValue":
                            $(this["_input"]()).val(newValue);
                            break;
                        default:
                            _super.prototype._optionChanged.apply(this, arguments);
                            if (name === "opened" && newValue) {
                                this._showDropDown();
                            }
                    }
                };
                dxFieldListPicker.prototype._clearValueHandler = function () {
                    $(this["_input"]()).val(null);
                    _super.prototype["_clearValueHandler"].apply(this, arguments);
                };
                dxFieldListPicker.prototype._renderPopupContent = function () {
                    var _this = this;
                    _super.prototype._renderPopupContent.call(this);
                    var selectedPath = ko.pureComputed({
                        read: function () {
                            return _this._path() ? _this._path() + "." + _this._value() : _this._value();
                        },
                        write: function (newVal) {
                            if (_this._path() && _this._path().length > 0) {
                                _this._value(newVal.substr(_this._path().length + 1));
                                _this.option("value", _this._value());
                            }
                            else {
                                _this._value(newVal);
                                _this.option("value", _this._value());
                            }
                        }
                    });
                    var element = $("<div>").addClass("dx-treelist-wrapper").get(0);
                    var scroll = this["_createComponent"](element, "dxScrollView", { scrollByThumb: true });
                    var self = this;
                    var $scrollContent = $(scroll["content"]());
                    var $element = $(this.element());
                    $scrollContent.append($('<div data-bind="treelist: options"></div>')[0]);
                    var context = ko.contextFor($element.get(0));
                    var treeListController = this.option("treeListController");
                    var options = ko.computed(function () {
                        return {
                            itemsProvider: _this._itemsProvider(), onItemsVisibilityChanged: function () {
                                if (self._popup) {
                                    self._popup._renderPosition();
                                }
                            }, selectedPath: selectedPath, treeListController: treeListController, path: _this._path
                        };
                    });
                    var childContext = context.createChildContext({ options: options });
                    ko.applyBindingsToDescendants(childContext, $scrollContent.get(0));
                    $(this._popup.content()).append(element);
                };
                return dxFieldListPicker;
            }(DevExpress.ui.dxDropDownBox));
            Widgets.dxFieldListPicker = dxFieldListPicker;
            DevExpress.registerComponent("dxFieldListPicker", dxFieldListPicker);
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            ko.bindingHandlers['dxBorderEditor'] = {
                init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
                    $(element).children().remove();
                    var templateHtml = DevExpress.Analytics.Widgets.Internal.getTemplate('dxrd-bordereditor'), $element = $(element).append(templateHtml);
                    ko.applyBindings({ value: new Widgets.BordersModel(valueAccessor(), viewModel.disabled) }, $element.children()[0]);
                    return { controlsDescendantBindings: true };
                }
            };
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var BordersModel = (function (_super) {
                __extends(BordersModel, _super);
                function BordersModel(object, disabled) {
                    if (disabled === void 0) { disabled = ko.observable(false); }
                    var _this = _super.call(this) || this;
                    _this.left = ko.observable(false);
                    _this.right = ko.observable(false);
                    _this.top = ko.observable(false);
                    _this.bottom = ko.observable(false);
                    _this.disabled = disabled;
                    _this.value = object.value;
                    _this.updateModel(object.value());
                    _this._disposables.push(object.value.subscribe(function (newVal) {
                        _this.updateModel(newVal);
                    }));
                    return _this;
                }
                BordersModel.prototype._setAllValues = function (value) {
                    this.left(value), this.bottom(value), this.right(value), this.top(value);
                };
                BordersModel.prototype.setValue = function (name) {
                    if (this.disabled())
                        return;
                    this[name](!this[name]());
                    this.updateValue();
                };
                BordersModel.prototype.setAll = function () {
                    if (this.disabled())
                        return;
                    this._setAllValues(true);
                    this.updateValue();
                };
                BordersModel.prototype.setNone = function () {
                    if (this.disabled())
                        return;
                    this._setAllValues(false);
                    this.updateValue();
                };
                BordersModel.prototype.updateModel = function (value) {
                    var val = value || "None";
                    if (val.indexOf("All") !== -1) {
                        this._setAllValues(true);
                    }
                    else if (val.indexOf("None") !== -1) {
                        this._setAllValues(false);
                    }
                    else {
                        this.left(val.indexOf("Left") !== -1);
                        this.top(val.indexOf("Top") !== -1);
                        this.right(val.indexOf("Right") !== -1);
                        this.bottom(val.indexOf("Bottom") !== -1);
                    }
                };
                BordersModel.prototype.updateValue = function () {
                    var result = [];
                    if (this.left() && this.right() && this.top() && this.bottom()) {
                        result.push("All");
                    }
                    else if (!this.left() && !this.right() && !this.top() && !this.bottom()) {
                        result.push("None");
                    }
                    else {
                        this.left() ? result.push("Left") : null;
                        this.right() ? result.push("Right") : null;
                        this.top() ? result.push("Top") : null;
                        this.bottom() ? result.push("Bottom") : null;
                    }
                    this.value(result.join(','));
                };
                return BordersModel;
            }(Analytics.Utils.Disposable));
            Widgets.BordersModel = BordersModel;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var ControlProperties = (function (_super) {
                __extends(ControlProperties, _super);
                function ControlProperties(target, editorsInfo, level, addAddons) {
                    if (level === void 0) { level = 0; }
                    if (addAddons === void 0) { addAddons = true; }
                    var _this = _super.call(this, target, editorsInfo, level, undefined, undefined, ko.observable("")) || this;
                    _this.focusedItem = ko.observable();
                    _this.editorsRendered = ko.observable(false);
                    _this.isSortingByGroups = ko.observable(true);
                    _this.isSearching = ko.observable(false);
                    _this.allEditorsCreated = ko.observable(false);
                    _this.textToSearch = ko.observable("");
                    _this._searchBox = null;
                    _this.searchPlaceholder = function () { return Analytics.getLocalization("Enter text to search...", "ASPxReportsStringId.ReportDesigner_QueryBuilder_SearchBox_EmptyText"); };
                    _this.switchSearchBox = function () {
                        if (_this.isSearching()) {
                            _this.isSearching(false);
                            _this.textToSearch("");
                        }
                        else {
                            _this.isSearching(true);
                            _this._searchBox && _this._searchBox.focus();
                        }
                    };
                    if (addAddons) {
                        _this.createEditorAddOn = function (editor) {
                            var editorAddOn = new Analytics.Internal.EditorAddOn(editor, _this.popupService);
                            editor._disposables.push(editorAddOn);
                            return {
                                templateName: editorAddOn.templateName,
                                data: editorAddOn
                            };
                        };
                    }
                    _this.popupService = new Analytics.Internal.PopupService();
                    _this.createGroups(editorsInfo.groups);
                    _this.update(target());
                    _this._disposables.push(_this.focusedImageClassName = ko.pureComputed(function () {
                        return Analytics.Internal.getImageClassName(target() && target().controlType);
                    }));
                    var subscription = _this.isSortingByGroups.subscribe(function (newVal) {
                        if (!newVal) {
                            _this.editorsRendered(true);
                            subscription.dispose();
                        }
                    });
                    _this._disposables.push(subscription);
                    _this.focusedItem = target;
                    _this.displayExpr = function (value) { return DevExpress.Analytics.Internal.getControlFullName(value); };
                    var timeout = null;
                    _this._disposables.push(_this.textToSearch.subscribe(function (newValue) {
                        timeout && clearTimeout(timeout);
                        timeout = setTimeout(function () {
                            _this._textToSearch(newValue);
                            newValue && _this.groups.forEach(function (group) { return group.collapsed() && group.editors().some(function (editor) { return editor.isSearchedProperty(); }) && group.collapsed(false); });
                        }, 200);
                    }));
                    return _this;
                }
                ControlProperties.prototype.getEditors = function () {
                    var editors = _super.prototype.getEditors.call(this);
                    var editorNames = editors.map(function (editor) { return editor.displayName(); }).sort();
                    editors.sort(function (a, b) {
                        return editorNames.indexOf(a.displayName()) - editorNames.indexOf(b.displayName());
                    });
                    return editors;
                };
                ControlProperties.prototype._update = function (target, editorsInfo, recreateEditors) {
                    this.groups && this.groups.forEach(function (group) {
                        if (group.editors().length === 0)
                            group.recreate();
                    });
                    return _super.prototype._update.call(this, target, editorsInfo, recreateEditors);
                };
                ControlProperties.prototype.cleanEditors = function () {
                    _super.prototype.cleanEditors.call(this);
                    this.groups.forEach(function (x) { return x.resetEditors(); });
                };
                ControlProperties.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.disposeArray(this.groups);
                    this.disposeObservableArray(this._editors);
                    this.resetObservableArray(this._editors);
                    this.cleanSubscriptions();
                    this._searchBox = null;
                    this.focusedItem = null;
                };
                ControlProperties.prototype.createGroups = function (groups) {
                    var _this = this;
                    this.groups = Object.keys(groups).map(function (name) {
                        return new Widgets.Group(name, groups[name].info, function (serializationInfo) {
                            return serializationInfo
                                .filter(function (info) { return !!info.editor; })
                                .map(function (info) {
                                var editor = _this.findEditorByInfo(info);
                                if (editor)
                                    return editor;
                                editor = _this.createEditor(info);
                                _this._editors.push(editor);
                                return editor;
                            });
                        }, true, groups[name].displayName);
                    });
                    this._disposables.push.apply(this._disposables, this.groups);
                };
                ControlProperties.prototype.searchBox = function ($element) {
                    this._searchBox = DevExpress.ui.dxTextBox["getInstance"]($element.get(0));
                };
                return ControlProperties;
            }(Widgets.ObjectProperties));
            Widgets.ControlProperties = ControlProperties;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var Group = (function (_super) {
                __extends(Group, _super);
                function Group(name, serializationsInfo, createEditors, collapsed, displayName) {
                    if (collapsed === void 0) { collapsed = true; }
                    var _this = _super.call(this) || this;
                    _this.editors = ko.observableArray([]);
                    _this.editorsCreated = ko.observable(false);
                    _this.editorsRendered = ko.observable(false);
                    _this._displayName = name;
                    _this.displayName = displayName || (function () { return Analytics.getLocalization(name); });
                    _this._serializationsInfo = serializationsInfo;
                    _this.collapsed = ko.observable(collapsed);
                    if (collapsed) {
                        var subscription = _this.collapsed.subscribe(function (newVal) {
                            subscription.dispose();
                            _this.editorsRendered(true);
                        });
                        _this._disposables.push(subscription);
                    }
                    _this.recreate = function () {
                        _this.editors(createEditors(serializationsInfo));
                    };
                    _this.editors(createEditors(serializationsInfo));
                    _this.visible = ko.computed(function () {
                        return _this.editors().some(function (editor) { return editor.visible(); });
                    });
                    _this._disposables.push(_this.visible);
                    return _this;
                }
                Group.prototype.resetEditors = function () {
                    this.disposeObservableArray(this.editors);
                    this.resetObservableArray(this.editors);
                };
                Group.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this.disposeObservableArray(this.editors);
                    this.resetObservableArray(this.editors);
                };
                Group.prototype.update = function (viewModel) {
                    var _this = this;
                    this._viewModel = viewModel;
                    this.editors().forEach(function (editor) {
                        editor.update(_this._viewModel);
                    });
                };
                return Group;
            }(Analytics.Utils.Disposable));
            Widgets.Group = Group;
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Internal;
        (function (Internal) {
            Internal.sizeFake = [
                { propertyName: "height", displayName: "Height", localizationId: "System.Drawing.SizeF.Height", editor: Analytics.Widgets.editorTemplates.numeric },
                { propertyName: "width", displayName: "Width", localizationId: "System.Drawing.SizeF.Width", editor: Analytics.Widgets.editorTemplates.numeric }
            ];
            Internal.locationFake = [
                { propertyName: "x", displayName: "X", editor: Analytics.Widgets.editorTemplates.numeric },
                { propertyName: "y", displayName: "Y", editor: Analytics.Widgets.editorTemplates.numeric }
            ];
        })(Internal = Analytics.Internal || (Analytics.Internal = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Designer;
    (function (Designer) {
        var DragDropHandler = (function (_super) {
            __extends(DragDropHandler, _super);
            function DragDropHandler() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return DragDropHandler;
        }(DevExpress.Analytics.Internal.DragDropHandler));
        Designer.DragDropHandler = DragDropHandler;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "DragDropHandler");
        var DragHelperContent = (function (_super) {
            __extends(DragHelperContent, _super);
            function DragHelperContent() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return DragHelperContent;
        }(DevExpress.Analytics.Internal.DragHelperContent));
        Designer.DragHelperContent = DragHelperContent;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "DragHelperContent");
        var SelectionDragDropHandler = (function (_super) {
            __extends(SelectionDragDropHandler, _super);
            function SelectionDragDropHandler() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SelectionDragDropHandler;
        }(DevExpress.Analytics.Internal.SelectionDragDropHandler));
        Designer.SelectionDragDropHandler = SelectionDragDropHandler;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "SelectionDragDropHandler");
        var ToolboxDragDropHandler = (function (_super) {
            __extends(ToolboxDragDropHandler, _super);
            function ToolboxDragDropHandler() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ToolboxDragDropHandler;
        }(DevExpress.Analytics.Internal.ToolboxDragDropHandler));
        Designer.ToolboxDragDropHandler = ToolboxDragDropHandler;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ToolboxDragDropHandler");
        var SurfaceElementArea = (function (_super) {
            __extends(SurfaceElementArea, _super);
            function SurfaceElementArea() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SurfaceElementArea;
        }(DevExpress.Analytics.SurfaceElementArea));
        Designer.SurfaceElementArea = SurfaceElementArea;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "SurfaceElementArea");
        var SurfaceElementBase = (function (_super) {
            __extends(SurfaceElementBase, _super);
            function SurfaceElementBase() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SurfaceElementBase;
        }(DevExpress.Analytics.SurfaceElementBase));
        Designer.SurfaceElementBase = SurfaceElementBase;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "SurfaceElementBase");
        var Disposable = (function (_super) {
            __extends(Disposable, _super);
            function Disposable() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return Disposable;
        }(DevExpress.Analytics.Utils.Disposable));
        Designer.Disposable = Disposable;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "Disposable");
        var ElementViewModel = (function (_super) {
            __extends(ElementViewModel, _super);
            function ElementViewModel() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ElementViewModel;
        }(DevExpress.Analytics.ElementViewModel));
        Designer.ElementViewModel = ElementViewModel;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "ElementViewModel");
        var SerializableModel = (function (_super) {
            __extends(SerializableModel, _super);
            function SerializableModel() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SerializableModel;
        }(DevExpress.Analytics.SerializableModel));
        Designer.SerializableModel = SerializableModel;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "SerializableModel");
        var CombinedObject = (function (_super) {
            __extends(CombinedObject, _super);
            function CombinedObject() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return CombinedObject;
        }(DevExpress.Analytics.Internal.CombinedObject));
        Designer.CombinedObject = CombinedObject;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "CombinedObject");
        var SurfaceSelection = (function (_super) {
            __extends(SurfaceSelection, _super);
            function SurfaceSelection() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SurfaceSelection;
        }(DevExpress.Analytics.Internal.SurfaceSelection));
        Designer.SurfaceSelection = SurfaceSelection;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "SurfaceSelection");
        var SnapLinesCollector = (function (_super) {
            __extends(SnapLinesCollector, _super);
            function SnapLinesCollector() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SnapLinesCollector;
        }(DevExpress.Analytics.Internal.SnapLinesCollector));
        Designer.SnapLinesCollector = SnapLinesCollector;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "SnapLinesCollector");
        var SnapLinesHelper = (function (_super) {
            __extends(SnapLinesHelper, _super);
            function SnapLinesHelper() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SnapLinesHelper;
        }(DevExpress.Analytics.Internal.SnapLinesHelper));
        Designer.SnapLinesHelper = SnapLinesHelper;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "SnapLinesHelper");
        var CopyPasteHandler = (function (_super) {
            __extends(CopyPasteHandler, _super);
            function CopyPasteHandler() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return CopyPasteHandler;
        }(DevExpress.Analytics.Internal.CopyPasteHandler));
        Designer.CopyPasteHandler = CopyPasteHandler;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "CopyPasteHandler");
        var SnapLineSurface = (function (_super) {
            __extends(SnapLineSurface, _super);
            function SnapLineSurface() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SnapLineSurface;
        }(DevExpress.Analytics.Internal.SnapLineSurface));
        Designer.SnapLineSurface = SnapLineSurface;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "SnapLineSurface");
        Designer.ActionId = DevExpress.Analytics.ActionId;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "ActionId");
        var ActionListsBase = (function (_super) {
            __extends(ActionListsBase, _super);
            function ActionListsBase() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ActionListsBase;
        }(DevExpress.Analytics.Internal.ActionListsBase));
        Designer.ActionListsBase = ActionListsBase;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ActionListsBase");
        var ActionLists = (function (_super) {
            __extends(ActionLists, _super);
            function ActionLists() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ActionLists;
        }(DevExpress.Analytics.Internal.ActionLists));
        Designer.ActionLists = ActionLists;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ActionLists");
        var KeyboardHelper = (function (_super) {
            __extends(KeyboardHelper, _super);
            function KeyboardHelper() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return KeyboardHelper;
        }(DevExpress.Analytics.Internal.KeyboardHelper));
        Designer.KeyboardHelper = KeyboardHelper;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "KeyboardHelper");
        var KeyDownHandlersManager = (function (_super) {
            __extends(KeyDownHandlersManager, _super);
            function KeyDownHandlersManager() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return KeyDownHandlersManager;
        }(DevExpress.Analytics.Internal.KeyDownHandlersManager));
        Designer.KeyDownHandlersManager = KeyDownHandlersManager;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "KeyDownHandlersManager");
        var TabPanel = (function (_super) {
            __extends(TabPanel, _super);
            function TabPanel() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return TabPanel;
        }(DevExpress.Analytics.TabPanel));
        Designer.TabPanel = TabPanel;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "TabPanel");
        var TabInfo = (function (_super) {
            __extends(TabInfo, _super);
            function TabInfo() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return TabInfo;
        }(DevExpress.Analytics.TabInfo));
        Designer.TabInfo = TabInfo;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "TabInfo");
        var ToolboxItem = (function (_super) {
            __extends(ToolboxItem, _super);
            function ToolboxItem() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ToolboxItem;
        }(DevExpress.Analytics.ToolboxItem));
        Designer.ToolboxItem = ToolboxItem;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "ToolboxItem");
        var ControlsFactory = (function (_super) {
            __extends(ControlsFactory, _super);
            function ControlsFactory() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ControlsFactory;
        }(DevExpress.Analytics.Utils.ControlsFactory));
        Designer.ControlsFactory = ControlsFactory;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "ControlsFactory");
        var DesignControlsHelper = (function (_super) {
            __extends(DesignControlsHelper, _super);
            function DesignControlsHelper() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return DesignControlsHelper;
        }(DevExpress.Analytics.Internal.DesignControlsHelper));
        Designer.DesignControlsHelper = DesignControlsHelper;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "DesignControlsHelper");
        var CssCalculator = (function (_super) {
            __extends(CssCalculator, _super);
            function CssCalculator() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return CssCalculator;
        }(DevExpress.Analytics.Internal.CssCalculator));
        Designer.CssCalculator = CssCalculator;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "CssCalculator");
        var FieldListProvider = (function (_super) {
            __extends(FieldListProvider, _super);
            function FieldListProvider() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return FieldListProvider;
        }(DevExpress.Analytics.Utils.FieldListProvider));
        Designer.FieldListProvider = FieldListProvider;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "FieldListProvider");
        var HoverInfo = (function (_super) {
            __extends(HoverInfo, _super);
            function HoverInfo() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return HoverInfo;
        }(DevExpress.Analytics.Internal.HoverInfo));
        Designer.HoverInfo = HoverInfo;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "HoverInfo");
        var InlineTextEdit = (function (_super) {
            __extends(InlineTextEdit, _super);
            function InlineTextEdit() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return InlineTextEdit;
        }(DevExpress.Analytics.Internal.InlineTextEdit));
        Designer.InlineTextEdit = InlineTextEdit;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "InlineTextEdit");
        var Margins = (function (_super) {
            __extends(Margins, _super);
            function Margins() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return Margins;
        }(DevExpress.Analytics.Margins));
        Designer.Margins = Margins;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "Margins");
        var ObjectStructureTreeListController = (function (_super) {
            __extends(ObjectStructureTreeListController, _super);
            function ObjectStructureTreeListController() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ObjectStructureTreeListController;
        }(DevExpress.Analytics.Internal.ObjectStructureTreeListController));
        Designer.ObjectStructureTreeListController = ObjectStructureTreeListController;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ObjectStructureTreeListController");
        var DataMemberTreeListController = (function (_super) {
            __extends(DataMemberTreeListController, _super);
            function DataMemberTreeListController() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return DataMemberTreeListController;
        }(DevExpress.Analytics.Widgets.DataMemberTreeListController));
        Designer.DataMemberTreeListController = DataMemberTreeListController;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Widgets, "DataMemberTreeListController");
        var ObjectStructureProviderBase = (function (_super) {
            __extends(ObjectStructureProviderBase, _super);
            function ObjectStructureProviderBase() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ObjectStructureProviderBase;
        }(DevExpress.Analytics.Internal.ObjectStructureProviderBase));
        Designer.ObjectStructureProviderBase = ObjectStructureProviderBase;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ObjectStructureProviderBase");
        var ObjectExplorerProvider = (function (_super) {
            __extends(ObjectExplorerProvider, _super);
            function ObjectExplorerProvider() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ObjectExplorerProvider;
        }(DevExpress.Analytics.Internal.ObjectExplorerProvider));
        Designer.ObjectExplorerProvider = ObjectExplorerProvider;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ObjectExplorerProvider");
        var ObjectStructureProvider = (function (_super) {
            __extends(ObjectStructureProvider, _super);
            function ObjectStructureProvider() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ObjectStructureProvider;
        }(DevExpress.Analytics.Internal.ObjectStructureProvider));
        Designer.ObjectStructureProvider = ObjectStructureProvider;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ObjectStructureProvider");
        var Point = (function (_super) {
            __extends(Point, _super);
            function Point() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return Point;
        }(DevExpress.Analytics.Point));
        Designer.Point = Point;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "Point");
        var Rectangle = (function (_super) {
            __extends(Rectangle, _super);
            function Rectangle() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return Rectangle;
        }(DevExpress.Analytics.Rectangle));
        Designer.Rectangle = Rectangle;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "Rectangle");
        var Size = (function (_super) {
            __extends(Size, _super);
            function Size() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return Size;
        }(DevExpress.Analytics.Size));
        Designer.Size = Size;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "Size");
        var SortedArrayStore = (function (_super) {
            __extends(SortedArrayStore, _super);
            function SortedArrayStore() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return SortedArrayStore;
        }(DevExpress.Analytics.Internal.SortedArrayStore));
        Designer.SortedArrayStore = SortedArrayStore;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "SortedArrayStore");
        var ControlsStore = (function (_super) {
            __extends(ControlsStore, _super);
            function ControlsStore() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return ControlsStore;
        }(DevExpress.Analytics.Internal.ControlsStore));
        Designer.ControlsStore = ControlsStore;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "ControlsStore");
        var dxFieldListPicker = (function (_super) {
            __extends(dxFieldListPicker, _super);
            function dxFieldListPicker() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return dxFieldListPicker;
        }(DevExpress.Analytics.Widgets.dxFieldListPicker));
        Designer.dxFieldListPicker = dxFieldListPicker;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Widgets, "dxFieldListPicker");
        var BaseActionsProvider = (function (_super) {
            __extends(BaseActionsProvider, _super);
            function BaseActionsProvider() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return BaseActionsProvider;
        }(DevExpress.Analytics.Internal.BaseActionsProvider));
        Designer.BaseActionsProvider = BaseActionsProvider;
        ;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "BaseActionsProvider");
        Designer.createObservableArrayMapCollection = DevExpress.Analytics.Utils.createObservableArrayMapCollection;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "createObservableArrayMapCollection");
        Designer.deserializeChildArray = DevExpress.Analytics.Utils.deserializeChildArray;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "deserializeChildArray");
        Designer.getFirstItemByPropertyValue = DevExpress.Analytics.Utils.getFirstItemByPropertyValue;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "getFirstItemByPropertyValue");
        Designer.findFirstItemMatchesCondition = DevExpress.Analytics.Utils.findFirstItemMatchesCondition;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "findFirstItemMatchesCondition");
        Designer.binaryIndexOf = DevExpress.Analytics.Utils.binaryIndexOf;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "binaryIndexOf");
        Designer.getEditorType = DevExpress.Analytics.Internal.getEditorType;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getEditorType");
        Designer.getTypeNameFromFullName = DevExpress.Analytics.Internal.getTypeNameFromFullName;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getTypeNameFromFullName");
        Designer.getShortTypeName = DevExpress.Analytics.Internal.getShortTypeName;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getShortTypeName");
        Designer.getControlFullName = DevExpress.Analytics.Internal.getControlFullName;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getControlFullName");
        Designer.getImageClassName = DevExpress.Analytics.Internal.getImageClassName;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getImageClassName");
        Designer.getUniqueNameForNamedObjectsArray = DevExpress.Analytics.Internal.getUniqueNameForNamedObjectsArray;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getUniqueNameForNamedObjectsArray");
        Designer.getUniqueName = DevExpress.Analytics.Internal.getUniqueName;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getUniqueName");
        Designer.initGlobalize = DevExpress.Analytics.Internal.initGlobalize;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "initGlobalize");
        Designer.NotifyAboutWarning = DevExpress.Analytics.Utils.NotifyAboutWarning;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "NotifyAboutWarning");
        Designer.getErrorMessage = DevExpress.Analytics.Utils.getErrorMessage;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "getErrorMessage");
        Designer.ShowMessage = DevExpress.Analytics.Utils.ShowMessage;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "ShowMessage");
        Designer.floatFromModel = DevExpress.Analytics.Utils.floatFromModel;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "floatFromModel");
        Designer.fromEnum = DevExpress.Analytics.Utils.fromEnum;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "fromEnum");
        Designer.parseBool = DevExpress.Analytics.Utils.parseBool;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "parseBool");
        Designer.colorFromString = DevExpress.Analytics.Utils.colorFromString;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "colorFromString");
        Designer.saveAsInt = DevExpress.Analytics.Utils.saveAsInt;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "saveAsInt");
        Designer.colorToString = DevExpress.Analytics.Utils.colorToString;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "colorToString");
        Designer._processError = DevExpress.Analytics.Internal._processError;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "_processError");
        Designer.processErrorEvent = DevExpress.Analytics.Internal.processErrorEvent;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "processErrorEvent");
        Designer.deleteSelection = DevExpress.Analytics.Internal.deleteSelection;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "deleteSelection");
        Designer.findNextSelection = DevExpress.Analytics.Internal.findNextSelection;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "findNextSelection");
        Designer.findSurface = DevExpress.Analytics.Internal.findSurface;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "findSurface");
        Designer.getControlNewAbsolutePositionOnResize = DevExpress.Analytics.Internal.getControlNewAbsolutePositionOnResize;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getControlNewAbsolutePositionOnResize");
        Designer.getControlRect = DevExpress.Analytics.Internal.getControlRect;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "getControlRect");
        Designer.minHeightWithoutScroll = DevExpress.Analytics.Internal.minHeightWithoutScroll;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "minHeightWithoutScroll");
        Designer.chooseBetterPositionOf = DevExpress.Analytics.Internal.chooseBetterPositionOf;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "chooseBetterPositionOf");
        Designer.updateSurfaceContentSize = DevExpress.Analytics.Internal.updateSurfaceContentSize;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "updateSurfaceContentSize");
        Designer.unitsToPixel = DevExpress.Analytics.Utils.unitsToPixel;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "unitsToPixel");
        Designer.pixelToUnits = DevExpress.Analytics.Utils.pixelToUnits;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "pixelToUnits");
        Designer.createUnitProperty = DevExpress.Analytics.Utils.createUnitProperty;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "createUnitProperty");
        Designer.createUnitProperties = DevExpress.Analytics.Utils.createUnitProperties;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "createUnitProperties");
        Designer.validateName = DevExpress.Analytics.Internal.validateName;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "validateName");
        Designer.replaceInvalidSymbols = DevExpress.Analytics.Internal.replaceInvalidSymbols;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "replaceInvalidSymbols");
        Designer.propertiesVisitor = DevExpress.Analytics.Utils.propertiesVisitor;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "propertiesVisitor");
        Designer.objectsVisitor = DevExpress.Analytics.Utils.objectsVisitor;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "objectsVisitor");
        Designer.collectionsVisitor = DevExpress.Analytics.Utils.collectionsVisitor;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "collectionsVisitor");
        Designer.copyObservables = DevExpress.Analytics.Utils.copyObservables;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "copyObservables");
        Designer.compareObjects = DevExpress.Analytics.Utils.compareObjects;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "compareObjects");
        Designer.getFullPath = DevExpress.Analytics.Utils.getFullPath;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "getFullPath");
        Designer.loadTemplates = DevExpress.Analytics.Utils.loadTemplates;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "loadTemplates");
        Designer.appendStaticContextToRootViewModel = DevExpress.Analytics.Utils.appendStaticContextToRootViewModel;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "appendStaticContextToRootViewModel");
        Designer.ajax = DevExpress.Analytics.Utils.ajax;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "ajax");
        Designer.checkModelReady = DevExpress.Analytics.Utils.checkModelReady;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "checkModelReady");
        Designer.cutRefs = DevExpress.Analytics.Utils.cutRefs;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "cutRefs");
        Designer.patchPositionByRTL = DevExpress.Analytics.Internal.patchPositionByRTL;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "patchPositionByRTL");
        Designer.generateDefaultParts = DevExpress.Analytics.Utils.generateDefaultParts;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "generateDefaultParts");
        Designer.createActionWrappingFunction = DevExpress.Analytics.Utils.createActionWrappingFunction;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "createActionWrappingFunction");
        Designer.createDesigner = DevExpress.Analytics.Utils.createDesigner;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "createDesigner");
        Designer.localizeNoneString = DevExpress.Analytics.Utils.localizeNoneString;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "localizeNoneString");
        Designer.find = DevExpress.Analytics.Utils.find;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "find");
        Designer.copyPasteStrategy = DevExpress.Analytics.Internal.copyPasteStrategy;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "copyPasteStrategy");
        Designer.getToolboxItems = DevExpress.Analytics.getToolboxItems;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics, "getToolboxItems");
        Designer.createObservableReverseArrayMapCollection = DevExpress.Analytics.Utils.createObservableReverseArrayMapCollection;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "createObservableReverseArrayMapCollection");
        Designer.editorTypeMapper = DevExpress.Analytics.Internal.editorTypeMapper;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "editorTypeMapper");
        Designer.NotifyType = DevExpress.Analytics.Utils.NotifyType;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "NotifyType");
        Designer.papperKindMapper = DevExpress.Analytics.Internal.papperKindMapper;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "papperKindMapper");
        Designer._errorProcessor = DevExpress.Analytics.Internal._errorProcessor;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "_errorProcessor");
        Designer.nameValidationRules = DevExpress.Analytics.Internal.nameValidationRules;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "nameValidationRules");
        Designer.sizeFake = DevExpress.Analytics.Internal.sizeFake;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "sizeFake");
        Designer.locationFake = DevExpress.Analytics.Internal.locationFake;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Internal, "locationFake");
        Designer.cssTransform = DevExpress.Analytics.Utils.cssTransform;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "cssTransform");
        Designer.DEBUG = DevExpress.Analytics.Utils.DEBUG;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "DEBUG");
        Designer.DesignerBaseElements = DevExpress.Analytics.Utils.DesignerBaseElements;
        DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer, DevExpress.Analytics.Utils, "DesignerBaseElements");
    })(Designer = DevExpress.Designer || (DevExpress.Designer = {}));
})(DevExpress || (DevExpress = {}));
(function (DevExpress) {
    var Designer;
    (function (Designer) {
        var Widgets;
        (function (Widgets) {
            Widgets.left = DevExpress.Analytics.left;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics, "left");
            Widgets.right = DevExpress.Analytics.right;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics, "right");
            Widgets.top = DevExpress.Analytics.top;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics, "top");
            Widgets.bottom = DevExpress.Analytics.bottom;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics, "bottom");
            Widgets.paddingSerializationsInfo = DevExpress.Analytics.paddingSerializationsInfo;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics, "paddingSerializationsInfo");
            Widgets.editorTemplates = DevExpress.Analytics.Widgets.coreEditorTemplates;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "coreEditorTemplates");
            Widgets.createNumericEditor = DevExpress.Analytics.Widgets.createNumericEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "createNumericEditor");
            var PaddingModel = (function (_super) {
                __extends(PaddingModel, _super);
                function PaddingModel() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return PaddingModel;
            }(DevExpress.Analytics.PaddingModel));
            Widgets.PaddingModel = PaddingModel;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics, "PaddingModel");
            var BordersModel = (function (_super) {
                __extends(BordersModel, _super);
                function BordersModel() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return BordersModel;
            }(DevExpress.Analytics.Widgets.BordersModel));
            Widgets.BordersModel = BordersModel;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "BordersModel");
            var ControlProperties = (function (_super) {
                __extends(ControlProperties, _super);
                function ControlProperties() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ControlProperties;
            }(DevExpress.Analytics.Widgets.ControlProperties));
            Widgets.ControlProperties = ControlProperties;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "ControlProperties");
            var Group = (function (_super) {
                __extends(Group, _super);
                function Group() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return Group;
            }(DevExpress.Analytics.Widgets.Group));
            Widgets.Group = Group;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "Group");
            var ColorPickerEditor = (function (_super) {
                __extends(ColorPickerEditor, _super);
                function ColorPickerEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return ColorPickerEditor;
            }(DevExpress.Analytics.Widgets.ColorPickerEditor));
            Widgets.ColorPickerEditor = ColorPickerEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "ColorPickerEditor");
            var DataMemberEditor = (function (_super) {
                __extends(DataMemberEditor, _super);
                function DataMemberEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return DataMemberEditor;
            }(DevExpress.Analytics.Widgets.DataMemberEditor));
            Widgets.DataMemberEditor = DataMemberEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "DataMemberEditor");
            var FieldListEditor = (function (_super) {
                __extends(FieldListEditor, _super);
                function FieldListEditor() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                return FieldListEditor;
            }(DevExpress.Analytics.Widgets.FieldListEditor));
            Widgets.FieldListEditor = FieldListEditor;
            DevExpress.Analytics.Internal._defineProperty(DevExpress.Designer.Widgets, DevExpress.Analytics.Widgets, "FieldListEditor");
        })(Widgets = Designer.Widgets || (Designer.Widgets = {}));
    })(Designer = DevExpress.Designer || (DevExpress.Designer = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Utils;
        (function (Utils) {
            var DesignerContextGeneratorInternal = (function () {
                function DesignerContextGeneratorInternal(_context, _rtl) {
                    this._context = _context;
                    this._rtl = _rtl;
                }
                DesignerContextGeneratorInternal.prototype.addElement = function (propertyName, model) {
                    this._context[propertyName] = model;
                    return this;
                };
                DesignerContextGeneratorInternal.prototype.addUndoEngine = function (undoEngine) {
                    if (undoEngine === void 0) { undoEngine = ko.observable(new Utils.UndoEngine(this._context.model)); }
                    this._context.undoEngine = undoEngine;
                    return this;
                };
                DesignerContextGeneratorInternal.prototype.addSurface = function (surface) {
                    this._context.surface = surface;
                    return this;
                };
                DesignerContextGeneratorInternal.prototype.getContext = function () {
                    return this._context;
                };
                return DesignerContextGeneratorInternal;
            }());
            Utils.DesignerContextGeneratorInternal = DesignerContextGeneratorInternal;
            var DesignerContextGenerator = (function () {
                function DesignerContextGenerator(_rtl) {
                    this._rtl = _rtl;
                }
                DesignerContextGenerator.prototype.addModel = function (model) {
                    return new DesignerContextGeneratorInternal({ model: model }, this._rtl);
                };
                return DesignerContextGenerator;
            }());
            Utils.DesignerContextGenerator = DesignerContextGenerator;
            var ResizeSettings = (function (_super) {
                __extends(ResizeSettings, _super);
                function ResizeSettings() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                Object.defineProperty(ResizeSettings.prototype, "handler", {
                    get: function () { return this._handler; },
                    set: function (newVal) {
                        this._disposables.push(newVal);
                        this._handler = newVal;
                    },
                    enumerable: true,
                    configurable: true
                });
                ;
                ResizeSettings.prototype.generate = function () {
                    var result = {};
                    if (this.handler)
                        result["resizeHandler"] = this.handler;
                    return result;
                };
                return ResizeSettings;
            }(Utils.Disposable));
            Utils.ResizeSettings = ResizeSettings;
            var ContextActionsSettings = (function (_super) {
                __extends(ContextActionsSettings, _super);
                function ContextActionsSettings() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                ContextActionsSettings.prototype._actionUndoEngineWrappingFunction = function (contextActions, undoEngine) {
                    return Utils.createActionWrappingFunction("WrapWithUndoEngine", function (model, handler) {
                        undoEngine().start();
                        handler(model);
                        undoEngine().end();
                    })(contextActions);
                };
                Object.defineProperty(ContextActionsSettings.prototype, "actionProviders", {
                    get: function () {
                        return this._actionProviders;
                    },
                    set: function (val) {
                        this._disposables.push.apply(this._disposables, val);
                        this._actionProviders = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(ContextActionsSettings.prototype, "actions", {
                    get: function () {
                        return this._actions;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._actions = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                ContextActionsSettings.prototype.createDefaultActions = function (editableObj, undoEngine) {
                    var _this = this;
                    this.actions = ko.computed(function () {
                        var editable = editableObj(), contextActions = [];
                        _this.actionProviders.forEach(function (actionProvider) {
                            contextActions.push.apply(contextActions, actionProvider.getActions(editable));
                        });
                        _this._actionUndoEngineWrappingFunction(contextActions, undoEngine);
                        return contextActions;
                    });
                };
                ContextActionsSettings.prototype.generate = function () {
                    var result = {};
                    if (this.actionProviders)
                        result["contextActionProviders"] = this.actionProviders;
                    if (this.actions)
                        result["contextActions"] = this.actions;
                    return result;
                };
                return ContextActionsSettings;
            }(Utils.Disposable));
            Utils.ContextActionsSettings = ContextActionsSettings;
            var DragDropSettings = (function (_super) {
                __extends(DragDropSettings, _super);
                function DragDropSettings() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this._model = {};
                    return _this;
                }
                Object.defineProperty(DragDropSettings.prototype, "dragHelperContent", {
                    get: function () {
                        return this._dragHelperContent;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._dragHelperContent = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(DragDropSettings.prototype, "dragDropStarted", {
                    get: function () {
                        return this._dragDropStarted;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._dragDropStarted = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                DragDropSettings.prototype.addDragDropHandler = function (propertyName, handler) {
                    this._disposables.push(handler);
                    this._model[propertyName] = handler;
                };
                DragDropSettings.prototype.generate = function () {
                    var result = this._model;
                    if (this.dragHelperContent)
                        result["dragHelperContent"] = this.dragHelperContent;
                    if (this.dragDropStarted)
                        result["dragDropStarted"] = this.dragDropStarted;
                    return result;
                };
                return DragDropSettings;
            }(Utils.Disposable));
            Utils.DragDropSettings = DragDropSettings;
            var ControlsHelperSettings = (function (_super) {
                __extends(ControlsHelperSettings, _super);
                function ControlsHelperSettings(_selection, _context) {
                    var _this = _super.call(this) || this;
                    _this._selection = _selection;
                    _this._context = _context;
                    _this._model = {};
                    return _this;
                }
                ControlsHelperSettings.prototype.generate = function () {
                    var result = this._model;
                    if (this.controlsHelper)
                        result["controlsHelper"] = this.controlsHelper;
                    return result;
                };
                ControlsHelperSettings.prototype.addControlsHelper = function (helper) {
                    var _this = this;
                    this.controlsHelper = helper || new Analytics.Internal.DesignControlsHelper(this._context.model, [{
                            added: function (control) { },
                            deleted: function (control) { control.surface === _this._selection.focused() && _this._selection.focused(Analytics.Internal.findNextSelection(control.surface)); }
                        }]);
                    this._disposables.push(this.controlsHelper);
                    return this;
                };
                ControlsHelperSettings.prototype.addControlsStore = function (store) {
                    store = store || new Analytics.Internal.ControlsStore(this.controlsHelper.allControls);
                    this._disposables.push(store);
                    this._model["controlsStore"] = store;
                    return this;
                };
                return ControlsHelperSettings;
            }(Utils.Disposable));
            Utils.ControlsHelperSettings = ControlsHelperSettings;
            var MenuSettings = (function (_super) {
                __extends(MenuSettings, _super);
                function MenuSettings() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this.stopPropagation = false;
                    return _this;
                }
                MenuSettings.prototype.generate = function () {
                    var result = {};
                    if (this.appMenuVisible)
                        result["appMenuVisible"] = this.appMenuVisible;
                    if (this.toggleAppMenu)
                        result["toggleAppMenu"] = this.toggleAppMenu;
                    if (this.getMenuPopupContainer)
                        result["getMenuPopupContainer"] = this.getMenuPopupContainer;
                    if (this.getMenuPopupTarget)
                        result["getMenuPopupTarget"] = this.getMenuPopupTarget;
                    result["stopPropagation"] = this.stopPropagation;
                    return result;
                };
                Object.defineProperty(MenuSettings.prototype, "appMenuVisible", {
                    get: function () {
                        return this._appMenuVisible;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._appMenuVisible = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                return MenuSettings;
            }(Utils.Disposable));
            Utils.MenuSettings = MenuSettings;
            var SelectionSettings = (function (_super) {
                __extends(SelectionSettings, _super);
                function SelectionSettings() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this._dragDropSettings = new DragDropSettings();
                    _this._resizeSettings = new ResizeSettings();
                    return _this;
                }
                SelectionSettings.prototype.dispose = function () {
                    this._editableObject(null);
                    _super.prototype.dispose.call(this);
                    this.removeProperties();
                };
                Object.defineProperty(SelectionSettings.prototype, "selection", {
                    get: function () {
                        return this._selection;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._selection = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(SelectionSettings.prototype, "snapHelper", {
                    get: function () {
                        return this._snapHelper;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._snapHelper = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(SelectionSettings.prototype, "editableObject", {
                    get: function () {
                        return this._editableObject;
                    },
                    set: function (val) {
                        this._disposables.push(val);
                        this._editableObject = val;
                    },
                    enumerable: true,
                    configurable: true
                });
                SelectionSettings.prototype.addDragDrop = function (func) {
                    func(this._dragDropSettings);
                    this._disposables.push(this._dragDropSettings);
                };
                SelectionSettings.prototype.addResize = function (func) {
                    func(this._resizeSettings);
                    this._disposables.push(this._resizeSettings);
                };
                SelectionSettings.prototype.generate = function () {
                    var result = {};
                    if (this.selection)
                        result["selection"] = this.selection;
                    if (this.snapHelper)
                        result["snapHelper"] = this.snapHelper;
                    if (this.editableObject)
                        result["editableObject"] = this.editableObject;
                    return Utils.extend(result, this._dragDropSettings.generate(), this._resizeSettings.generate());
                };
                return SelectionSettings;
            }(Utils.Disposable));
            Utils.SelectionSettings = SelectionSettings;
            var CommonDesignerGenerator = (function (_super) {
                __extends(CommonDesignerGenerator, _super);
                function CommonDesignerGenerator(_context, _rtl) {
                    var _this = _super.call(this) || this;
                    _this._context = _context;
                    _this._rtl = _rtl;
                    _this._model = {};
                    _this._selectionSettings = new SelectionSettings();
                    _this._model.rtl = _this._rtl;
                    _this._model.dispose = function () {
                        _this.dispose();
                    };
                    return _this;
                }
                CommonDesignerGenerator.prototype._createPopularProperties = function (info, popularProperties) {
                    var properties = [];
                    popularProperties.forEach(function (name) {
                        var property = info.filter(function (propertyInfo) { return propertyInfo.propertyName === name; })[0];
                        if (property) {
                            properties.push(property);
                        }
                    });
                    return properties;
                };
                CommonDesignerGenerator.prototype._resetModel = function () {
                    var _this = this;
                    Object.keys(this._model).forEach(function (propertyName) {
                        if (propertyName !== "dispose")
                            delete _this._model[propertyName];
                    });
                };
                Object.defineProperty(CommonDesignerGenerator.prototype, "rtl", {
                    get: function () {
                        return this._rtl;
                    },
                    set: function (newVal) {
                        this._rtl = newVal;
                        this._model.rtl = newVal;
                    },
                    enumerable: true,
                    configurable: true
                });
                CommonDesignerGenerator.prototype.dispose = function () {
                    _super.prototype.dispose.call(this);
                    this._resetModel();
                };
                CommonDesignerGenerator.prototype.initializeContext = function (context) {
                    this._context = context;
                    return this;
                };
                CommonDesignerGenerator.prototype.getPropertyByName = function (propertyName) {
                    return this._model[propertyName];
                };
                CommonDesignerGenerator.prototype.addElement = function (propertyName, elementFunc) {
                    this._model[propertyName] = elementFunc();
                    this._disposables.push(this._model[propertyName]);
                    return this;
                };
                CommonDesignerGenerator.prototype.mapOnContext = function () {
                    this._model.model = this._context.model;
                    this._model.surface = this._context.surface;
                    this._model.undoEngine = this._context.undoEngine;
                    return this;
                };
                CommonDesignerGenerator.prototype.addSelection = function (func) {
                    func(this._selectionSettings);
                    this._disposables.push(this._selectionSettings);
                    Utils.extend(this._model, this._selectionSettings.generate());
                    return this;
                };
                CommonDesignerGenerator.prototype.addPropertyGrid = function (propertyGrid, propertyName) {
                    if (propertyName === void 0) { propertyName = "propertyGrid"; }
                    this._model[propertyName] = propertyGrid && propertyGrid();
                    this._disposables.push(this._model[propertyName]);
                    return this;
                };
                CommonDesignerGenerator.prototype.addControlProperties = function (editors, groups, groupLocalizationIDs) {
                    var _this = this;
                    return this.addPropertyGrid(function () { return new Analytics.Widgets.ControlProperties(_this._model.editableObject, { groups: groups, editors: editors }, null); });
                };
                CommonDesignerGenerator.prototype.addPopularProperties = function (controlsFactory) {
                    var _this = this;
                    return this.addPropertyGrid(function () { return new Analytics.Widgets.ObjectProperties(ko.pureComputed(function () {
                        var popularPropertiesObject = { getInfo: function () { return []; } }, editable = _this._model.editableObject();
                        if (editable) {
                            var controlInfo = controlsFactory.controlsMap[editable.controlType], propertiesInfo = _this._createPopularProperties(controlInfo && controlInfo.info || [], controlInfo && controlInfo.popularProperties || []);
                            (propertiesInfo).forEach(function (item) {
                                if (item.propertyName in editable)
                                    popularPropertiesObject[item.propertyName] = editable[item.propertyName];
                            });
                            popularPropertiesObject.getInfo = function () {
                                return propertiesInfo;
                            };
                            popularPropertiesObject["root"] = editable.root;
                            popularPropertiesObject["actions"] = editable.actions;
                            popularPropertiesObject["getPath"] = function (propertyName) { return editable.getPath && editable.getPath(propertyName) || ""; };
                            popularPropertiesObject["isPropertyModified"] = function (name) {
                                return editable.isPropertyModified ? editable.isPropertyModified(name) : false;
                            };
                            popularPropertiesObject["getActionClassName"] = function (name) {
                                return editable["getActionClassName"] ? editable["getActionClassName"](name) : "";
                            };
                            popularPropertiesObject["isPropertyVisible"] = function (propertyName) {
                                return editable["isPropertyVisible"](propertyName);
                            };
                            popularPropertiesObject["isPropertyDisabled"] = function (name) {
                                return editable.isPropertyDisabled ? editable.isPropertyDisabled(name) : false;
                            };
                            popularPropertiesObject["isSame"] = function (x) { return x === editable; };
                        }
                        return popularPropertiesObject;
                    }), undefined, undefined, undefined); }, "popularProperties");
                };
                CommonDesignerGenerator.prototype.addToolboxItems = function (items) {
                    this._model.toolboxItems = items && items();
                    return this;
                };
                CommonDesignerGenerator.prototype.addTabPanel = function (panel, addTabInfo) {
                    if (addTabInfo === void 0) { addTabInfo = function () { return []; }; }
                    var panelModel = panel && panel() || new Analytics.TabPanel({ tabs: addTabInfo(), rtl: this._rtl });
                    this._model.tabPanel = panelModel;
                    this._disposables.push(panelModel);
                    return this;
                };
                CommonDesignerGenerator.prototype.addIsLoading = function (isLoadingFunc) {
                    if (isLoadingFunc === void 0) { isLoadingFunc = function () { return ko.observable(true); }; }
                    this._model.isLoading = isLoadingFunc();
                    this._disposables.push(this._model.isLoading);
                    return this;
                };
                CommonDesignerGenerator.prototype.addControlsHelper = function (func) {
                    var settings = new ControlsHelperSettings(this._selectionSettings.selection, this._context);
                    func(settings);
                    this._disposables.push(settings);
                    Utils.extend(this._model, settings.generate());
                    return this;
                };
                CommonDesignerGenerator.prototype.addMenu = function (func) {
                    var settings = new MenuSettings();
                    func(settings);
                    this._disposables.push(settings);
                    Utils.extend(this._model, settings.generate());
                    return this;
                };
                CommonDesignerGenerator.prototype.addContextActions = function (func) {
                    var settings = new ContextActionsSettings();
                    func(settings);
                    this._disposables.push(settings);
                    Utils.extend(this._model, settings.generate());
                    return this;
                };
                CommonDesignerGenerator.prototype.addParts = function (func, useDefaults) {
                    if (func === void 0) { func = function (parts) { return parts; }; }
                    if (useDefaults === void 0) { useDefaults = true; }
                    var parts = [];
                    if (useDefaults)
                        parts = Utils.generateDefaultParts(this._model);
                    this._model.parts = func(parts);
                    return this;
                };
                CommonDesignerGenerator.prototype.getModel = function () {
                    return this._model;
                };
                CommonDesignerGenerator.prototype.addActionList = function (actionListsFunc) {
                    var actionLists = actionListsFunc && actionListsFunc() || new Analytics.Internal.ActionLists(this._context.surface, this._selectionSettings.selection, this._context.undoEngine, function () { });
                    this._disposables.push(actionLists);
                    this._model.actionLists = actionLists;
                    return this;
                };
                return CommonDesignerGenerator;
            }(Utils.Disposable));
            Utils.CommonDesignerGenerator = CommonDesignerGenerator;
        })(Utils = Analytics.Utils || (Analytics.Utils = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Widgets;
        (function (Widgets) {
            var editor_template = {
                render: function (options) {
                    var $icon = $("<i />").addClass('dx-icon');
                    if (!!options.model.iconClass) {
                        $icon.addClass('dx-icon-' + options.model.iconClass);
                    }
                    else if (!!options.model.icon) {
                        $icon.addClass(options.model.icon);
                    }
                    if (options.model.icon) {
                        $icon.attr("data-bind", "template: '" + options.model.icon + "'");
                    }
                    var icon = $icon.get(0);
                    $(options.container).append(icon);
                    ko.applyBindings(options.model, icon);
                }
            };
            var dxButtonWithTemplate = (function (_super) {
                __extends(dxButtonWithTemplate, _super);
                function dxButtonWithTemplate(element, options) {
                    var _this = this;
                    options["template"] = editor_template;
                    _this = _super.call(this, element, options) || this;
                    return _this;
                }
                dxButtonWithTemplate.prototype._getContentData = function () {
                    var data = _super.prototype._getContentData.call(this);
                    return ko.utils.extend(data, { iconClass: this.option("iconClass") });
                };
                dxButtonWithTemplate.prototype._optionChanged = function (args) {
                    switch (args.name) {
                        case "iconClass":
                            this._updateContent();
                            this._updateAriaLabel();
                            break;
                        default:
                            _super.prototype._optionChanged.call(this, args);
                    }
                };
                return dxButtonWithTemplate;
            }(DevExpress.ui.dxButton));
            Widgets.dxButtonWithTemplate = dxButtonWithTemplate;
            DevExpress.registerComponent("dxButtonWithTemplate", dxButtonWithTemplate);
        })(Widgets = Analytics.Widgets || (Analytics.Widgets = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));
var DevExpress;
(function (DevExpress) {
    var Analytics;
    (function (Analytics) {
        var Templates;
        (function (Templates) {
            DevExpress.Analytics.Widgets.Internal.SvgTemplatesEngine.addTemplates({
                'dx-editor-addons': '<!-- ko if: visible -->    <div class="dxrd-editormenu-box dxd-property-grid-menu-box-color dxd-back-contrast" data-bind="dxAction: showPopup, css: editorMenuButtonCss">        <div class="dxrd-editormenu-box-inside dxd-back-secondary"></div>    </div>    <!-- /ko -->',
                'dx-boolean': '<div class="propertygrid-editor-checkbox" data-bind="dxCheckBox: getOptions({ value: value, disabled: disabled }), dxValidator: { validationRules: validationRules || [] }"></div>',
                'dx-boolean-select': '<div data-bind="dxLocalizedSelectBox: { dataSource: [ { val: true, text: $root.getLocalization(\'Yes\', \'ASPxReportsStringId.ParametersPanel_True\') }, { val: false, text: $root.getLocalization(\'No\', \'ASPxReportsStringId.ParametersPanel_False\') }], valueExpr: \'val\', displayExpr: \'text\', value: value, disabled: disabled }, dxValidator: { validationRules: validationRules || [] }"></div>',
                'dx-commonCollection': '<div class="dx-editor" data-bind="visible: visible">        <div data-bind="dxCollectionEditor: { values: value, displayName: displayName, level: level, info: info }">        </div>    </div>',
                'dx-commonCollectionItem': '<div data-bind="dxPropertyGrid: { target: value, level: editor.level + 1, parentDisabled: editor.disabled }"></div>',
                'dx-color': '<div data-bind="dxColorBox: { value: value, editAlphaChannel: true, popupPosition: { collision: \'flipfit flipfit\' }, disabled: disabled }"></div>',
                'dx-combobox': '<div data-bind="dxLocalizedSelectBox: { dataSource: values, value: value, valueExpr: \'value\', displayExpr: \'displayValue\', displayCustomValue: true, disabled: disabled }, dxValidator: { validationRules: $data.validationRules || [] }"></div>',
                'dx-combobox-editable': '<div data-bind="dxSelectBox: getOptions({ items: values, value: value, valueExpr: \'value\', displayExpr: \'displayValue\', disabled: disabled, placeholder: $root.dx.Analytics.Localization.selectPlaceholder(), acceptCustomValue: true, onCustomItemCreating: function(arg) { return { value: arg.text, displayValue: arg.text }; } })"></div>',
                'dx-combobox-undo': '<div data-bind="dxLocalizedSelectBox: { dataSource: values, value: generateValue($root.undoEngine), valueExpr: \'value\', displayExpr: \'displayValue\', displayCustomValue: true, disabled: disabled }, dxValidator: { validationRules: $data.validationRules || [] }"></div>',
                'dx-property-editor': '<div class="dx-editor" data-bind="visible: visible">        <div class="dx-group" data-bind="dxdAccordion: { collapsed: collapsed }">            <div class="dx-editor-header">                <div class="dx-field">                    <div class="dx-field-label dx-accordion-header dxd-text-primary" data-bind="styleunit: padding, css: { \'dx-accordion-empty\': templateName === \'dx-emptyHeader\' }">                        <!-- ko if: isComplexEditor -->                        <div class="propertygrid-editor-collapsed dx-collapsing-image" data-bind="template: \'dxrd-svg-collapsed\', css: { \'dx-image-expanded\': !collapsed() }"></div>                        <!-- ko if: !!$data.textToSearch -->                        <div class="dx-group-header-font" data-bind="searchHighlighting: { text: displayName, textToSearch: textToSearch }, attr: { \'title\': displayName }"></div>                        <!-- /ko -->                        <!-- ko ifnot: !!$data.textToSearch -->                        <div class="dx-group-header-font" data-bind="text: displayName, attr: { \'title\': displayName }"></div>                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko if: !isComplexEditor -->                        <!-- ko if: !!$data.textToSearch -->                        <div class="propertygrid-editor-displayName" data-bind="searchHighlighting: { text: displayName, textToSearch: textToSearch }, attr: { \'title\': displayName }, style: { fontWeight: isPropertyModified() ? \'Bold\' : \'\'}"></div>                        <!-- /ko -->                        <!-- ko ifnot: !!$data.textToSearch -->                        <div class="propertygrid-editor-displayName" data-bind="text: displayName, attr: { \'title\': displayName }, style: { fontWeight: isPropertyModified() ? \'Bold\' : \'\'}"></div>                        <!-- /ko -->                        <!-- /ko -->                    </div>                    <div class="dx-field-value">                        <div data-bind="service: { name: \'createEditorAddOn\' }"></div>                        <!-- ko if: templateName !== \'dx-emptyHeader\' -->                        <!-- ko lazy: { template: templateName } -->                        <!-- /ko -->                        <!-- /ko -->                    </div>                </div>            </div>            <!-- ko if: isComplexEditor -->            <div class="dx-editor-content dx-accordion-content">                <!-- ko if: (!$data.editorCreated || editorCreated) -->                <!-- ko template: contentTemplateName -->                <!-- /ko -->                <!-- /ko -->            </div>            <!-- /ko -->        </div>    </div>',
                'dx-emptyHeader': ' ',
                'dx-date': '<div class="dx-datebox-container">        <div data-bind="dxDateBox: getOptions({ value: value, closeOnValueChange: true, type: \'datetime\', disabled: disabled }), dxValidator: { validationRules: validationRules || [] }"></div>    </div>',
                'dx-file': '<div data-bind="dxFileImagePicker: { value: value, placeHolder: \'File\', disabled: disabled }"></div>',
                'dx-modificators': '<div class="dx-font-content">        <div class="dx-field">            <div class="dx-field-label dxd-text-primary" data-bind="styleunit: { \'paddingLeft\': padding }"></div>            <!-- ko with: value -->            <div class="dx-field-value">                <div class="dx-font-styles-content">                    <div class="dx-font-style-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dx-image-fontstyle-bold" data-bind="css: { \'dxd-state-active\': bold(), \'dx-disabled-button\': $parent.disabled }, click: function() { if(!$parent.disabled()) { bold(!bold()); } }"><!-- ko template: \'dxrd-svg-fontstyle-bold\'--><!-- /ko --></div>                    <div class="dx-font-style-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dx-image-fontstyle-italic" data-bind="css: { \'dxd-state-active\': italic(), \'dx-disabled-button\': $parent.disabled }, click: function() { if(!$parent.disabled()) { italic(!italic()); } }"><!-- ko template: \'dxrd-svg-fontstyle-italic\'--><!-- /ko --></div>                    <div class="dx-font-style-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dx-image-fontstyle-underline" data-bind="css: { \'dxd-state-active\': underline(), \'dx-disabled-button\': $parent.disabled }, click: function() { if(!$parent.disabled()) { underline(!underline()); } }"><!-- ko template: \'dxrd-svg-fontstyle-underline\'--><!-- /ko --></div>                    <div class="dx-font-style-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dx-image-fontstyle-strikeout" data-bind="css: { \'dxd-state-active\': strikeout(), \'dx-disabled-button\': $parent.disabled }, click: function() { if(!$parent.disabled()) { strikeout(!strikeout()); } }"><!-- ko template: \'dxrd-svg-fontstyle-strikeout\'--><!-- /ko --></div>                </div>            </div>            <!-- /ko -->        </div>    </div>',
                'dx-image': '<div data-bind="dxFileImagePicker: { value: value, placeHolder: \'Image\', accept: \'image/*\', type: \'img\', disabled: disabled }"></div>',
                'dx-numeric': '<div data-bind="dxNumberBox: getOptions({ value:value, showSpinButtons:true, disabled:disabled }), dxValidator: { validationRules: validationRules || [] }"></div>',
                'dx-number-editor': '<div data-bind="dxTextBox: getOptions({ value: value, disabled: disabled }), dxValidator: { validationRules: validationRules || [] }"></div>',
                'dx-text': '<div data-bind="dxTextBox: getOptions({ value: value, disabled: disabled }), dxValidator: { validationRules: validationRules || [] }"></div>',
                'dx-string-array': '<div class="dx-field">        <div class="dx-string-array-container dx-texteditor dx-multiline">            <textarea class="dx-string-array-textarea dx-texteditor-input" data-bind="value: value, disable: disabled"></textarea>        </div>    </div>',
                'dx-propertieseditor': '<div data-bind="css: { \'dx-rtl\' : rtl }">        <div class="dx-editors">            <div class="dx-fieldset">                <!-- ko foreach: getEditors() -->                <!-- ko template: editorTemplate -->                <!-- /ko -->                <!-- /ko -->            </div>        </div>    </div>',
                'dx-objectEditorContent': '<!-- ko if: visible -->    <div data-bind="template: { name: \'dx-propertieseditor\', data: viewmodel }"></div>    <!-- /ko -->',
                'dx-collectioneditor': '<div class="dx-collectioneditor">        <div data-bind="dxdAccordion: { collapsed: collapsed, alwaysShow: alwaysShow }">            <div class="dx-collectioneditor-header dx-accordion-header">                <div class="dx-editor-header">                    <div class="dx-field">                        <!-- ko if: showButtons-->                        <div class="dx-collectioneditor-actions-wrapper">                            <!-- ko if: isVisibleButton(\'delete\') -->                            <div class="dx-collectioneditor-action" data-bind="dxButtonWithTemplate: { onClick: remove, disabled: isDisabledButton(\'delete\'), icon: \'dxrd-svg-operations-remove\', iconClass: \'dx-image-remove\' }, attr: { title: getDisplayTextButton(\'delete\') }"></div>                            <!-- /ko -->                            <!-- ko if: isVisibleButton(\'add\') -->                            <div class="dx-collectioneditor-action" data-bind="dxButtonWithTemplate: { onClick: add, disabled: isDisabledButton(\'add\'), icon: \'dxrd-svg-operations-add\', iconClass: \'dx-image-add\' }, attr: { title: getDisplayTextButton(\'add\') }"></div>                            <!-- /ko -->                            <div class="dx-collectioneditor-action-separator"></div>                            <!-- ko if: isVisibleButton(\'down\') -->                            <div class="dx-collectioneditor-action" data-bind="dxButtonWithTemplate: { onClick: down, disabled: isDisabledButton(\'down\'), icon: \'dxrd-svg-operations-movedown\', iconClass: \'dx-image-movedown\' }, attr: { title: getDisplayTextButton(\'down\') }"></div>                            <!-- /ko -->                            <!-- ko if: isVisibleButton(\'up\') -->                            <div class="dx-collectioneditor-action" data-bind="dxButtonWithTemplate: { onClick: up, disabled: isDisabledButton(\'up\'), icon: \'dxrd-svg-operations-moveup\', iconClass: \'dx-image-moveup\' }, attr: { title: getDisplayTextButton(\'up\') }"></div>                            <!-- /ko -->                        </div>                        <!-- /ko -->                        <!-- ko if: displayName -->                        <div class="dx-collectioneditor-header-text dxd-text-primary" data-bind="styleunit: { \'paddingLeft\': padding }">                            <div class="propertygrid-editor-collapsed dx-collapsing-image" data-bind="template: \'dxrd-svg-collapsed\', css: { \'dx-image-expanded\': !collapsed() }"></div>                            <div class="dx-group-header-font dxd-text-primary" data-bind="text: displayName, attr: { title: displayName }"></div>                        </div>                        <!-- /ko -->                    </div>                </div>            </div>            <div class="dx-accordion-content">                <!-- ko if: values().length === 0 && showButtons -->                <div class="dx-collectioneditor-empty dxd-empty-area-placeholder-text-color dxd-text-info">                    <span class="dx-collectioneditor-empty-text" data-bind="text: getDisplayTextEmptyArray()"></span>                </div>                <!-- /ko -->                <!-- ko if: values().length !== 0 -->                <div class="dx-collectioneditor-items" data-bind="foreach: values">                    <div data-bind="with: $parent.createCollectionItemWrapper($parents[1], $index)">                        <div class="dx-collectioneditor-item-container dxd-button-back-color dxd-state-normal dxd-back-highlighted" data-bind="dxAction: $parents[1].select, css: { \'dxd-state-selected\' : $parents[1].selectedIndex() === $index() }">                            <div class="dx-collection-item"></div>                        </div>                    </div>                </div>                <!-- /ko -->            </div>        </div>    </div>',
                'dx-expressioneditor-main': '<div class="dx-expression-tree">        <!-- ko if: !aceAvailable -->        <div class="dx-expressioneditor-textarea dxd-border-secondary dxd-back-primary2" data-bind="dxTextArea: { value: textAreaValue, isValid: isValid, spellcheck: false, onKeyUp: function() { isValid(true); } }"></div>        <!-- /ko -->        <!-- ko if: aceAvailable -->        <div class="dx-expressioneditor-textarea dxd-border-secondary dxd-back-primary2" data-bind="dxAceEditor: { value: textAreaValue, editorContainer: editorContainer, theme: theme, options: aceOptions, additionalOptions: additionalOptions, callbacks: callbacks }"></div>        <!-- /ko -->        <div class="dx-expressioneditor-tools">            <!-- ko with: tools-->            <div class="dx-expressioneditor-tools-tabs">                <!-- ko foreach: toolBox-->                <div class="dx-expressioneditor-tools-tab dxd-back-primary2" data-bind="style: { width: width }, visible: visible">                    <!-- ko if: $data.templateName -->                    <!-- ko template: { name: $data.templateName }-->                    <!-- /ko -->                    <!-- /ko -->                </div>                <!-- /ko-->            </div>            <!-- /ko-->        </div>    </div>',
                'dx-expressioneditor': '<div>        <div class="no-margin-right" data-bind="dxEllipsisEditor: { value: displayValue, buttonAction: function() { popupVisible(true); }, disabled: disabled, isValid: modelValueValid }"></div>        <div class="dx-expressioneditor dx-popup-general" data-bind="dxPopup: {            showTitle: true,            title: title(),            visible: popupVisible,            toolbarItems: buttonItems,            showCloseButton: true,            fullScreen: false,            height: \'600px\',            width: \'645px\',            container: getPopupContainer($element),            position: { of: getPopupContainer($element)},            onShown: onShown        }">            <!-- ko if: popupVisible -->            <!-- ko template: "dx-expressioneditor-main" -->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-expressioneditor-categories': '<div class="dx-expressioneditor-tools-tab-content-wrapper dxd-border-secondary " data-bind="dxScrollView: { showScrollbar: \'onHover\' }">        <!-- ko foreach: content -->        <!-- ko if: $data.templateName -->        <!-- ko template: $data.templateName-->        <!-- /ko -->        <!-- /ko -->        <!-- ko ifnot: $data.templateName -->        <div class="dx-expressioneditor-tools-tab-category dxd-list-item-back-color dxd-back-highlighted" data-bind="css: {\'dxd-state-selected\': content.isSelected }, text: displayName, dxAction: function() { $parent.click($data.content) }">        </div>        <!-- /ko -->        <!-- /ko -->    </div>',
                'dx-expressioneditor-category-accordion': '<div class="dx-fieldset" style="margin: 0;">        <div data-bind="dxdAccordion: { collapsed: collapsed }">            <div class="dx-accordion-header dx-expressioneditor-tools-tab-accordion-header dxd-list-item-back-color dxd-back-highlighted" data-bind="css: {\'dxd-state-selected\': $data.isSelected }, dxAction: function() { $data.updateContent($data.allItems(), $data.isSelected); $parent.click($data.content) }">                <div class=" dx-collapsing-image" data-bind="template: \'dxrd-svg-collapsed\', css: { \'dx-image-expanded\': !collapsed() }" style="display:inline-block;"></div>                <span class="dx-expressioneditor-tools-tab-header" data-bind="text: displayName"></span>            </div>            <div class="dx-accordion-content">                <!-- ko foreach: items-->                <div class="dx-expressioneditor-tools-tab-item dxd-text-primary dxd-list-item-back-color dxd-back-highlighted" data-bind="css: {\'dxd-state-selected\': isSelected }, text: $data.display, dxAction: function() { $parent.updateContent($data.data, $data.isSelected); $parents[1].click($parent.content); }"></div>                <!-- /ko -->            </div>        </div>    </div>',
                'dx-expressioneditor-description': '<div class="dx-expressioneditor-tools-tab-content-wrapper dxd-border-secondary " data-bind="dxScrollView: { showScrollbar: \'onHover\' }">        <div class="dx-expressioneditor-description dxd-text-primary" data-bind="text: content"></div>    </div>',
                'dx-expressioneditor-fields': '<div class="dx-expressioneditor-tools-tab-content-wrapper dxd-border-secondary " data-bind="dxScrollView: { showScrollbar: \'onHover\' }">        <!-- ko if: fields -->        <div class="dx-treelist-wrapper" data-bind="treelist: fields"></div>        <!-- /ko -->        <!-- ko if: $data.parameters -->        <div class="dx-treelist-wrapper" data-bind="treelist: parameters"></div>        <!-- /ko -->    </div>',
                'dx-ee-treelist-item': '<div class="dx-treelist-item dxd-list-item-back-color dxd-back-highlighted" data-bind="visible: visible, event: { dblclick: function() { actions[0].clickAction($element); }}, styleunit: padding, css: { \'dx-treelist-item-selected dxd-state-selected\': isSelected }">        <div class="dx-treelist-item-images">            <!-- ko if: hasItems -->            <div class="dx-treelist-collapsedbutton" data-bind="css: nodeImageClass, template: \'dxrd-svg-collapsed\', click: toggleCollapsed"></div>            <!-- /ko -->            <!-- ko ifnot: hasItems -->            <div class="dx-treelist-collapsedbutton"></div>            <!-- /ko -->            <div class="dx-treelist-image" data-bind="css: $data.imageClassName, template: {name: $data.imageTemplateName, if: !!ko.unwrap($data.imageTemplateName)}, attr: { title: text }"> </div>        </div>        <div class="dx-treelist-caption">            <div class="dx-treelist-selectedcontent" data-bind="click: toggleSelected">                <div class="dx-treelist-text-wrapper">                    <div class="dx-treelist-text" data-bind="text: text, attr: { title: text }"></div>                </div>            </div>        </div>    </div>',
                'dx-expressioneditor-selectedcontent': '<!-- ko with: content -->    <!-- ko template: $data-->    <!-- /ko -->    <!-- /ko -->',
                'dx-expressioneditor-collection': '<div class="dx-expressioneditor-tools-tab-content-wrapper dxd-border-secondary" data-bind="dxScrollView: { showScrollbar: \'onHover\' }">        <!-- ko foreach: items -->        <div class="dx-expressioneditor-tools-tab-item dxd-list-item-back-color dxd-text-primary dxd-back-highlighted" data-bind="text: $data.displayName || $data.text, css: { \'dx-expressioneditor-state-selected dxd-state-selected\': $parent.selectedItem() === $data }, dxAction: function() { $parent.selectedItem($data); $parents[2].click($data); }, event: { dblclick: function() { $parents[2].dblclick($data, $element); } }"></div>        <!-- /ko -->    </div>',
                'dx-expressioneditor-collection-function': '<div class="dx-expressioneditor-collection-function">        <div class="dx-expressioneditor-collection-function-search">            <div data-bind="dxTextBox: { value: textToSearch, showClearButton: true, valueChangeEvent: \'keyup\', placeholder: $parents[2].searchPlaceholder() }"></div>        </div>        <div class="dx-expressioneditor-collection-function-items dxd-border-secondary" data-bind="dxScrollView: { showScrollbar: \'onHover\' }">            <!-- ko foreach: availableItems -->            <div class="dx-expressioneditor-tools-tab-item dxd-list-item-back-color dxd-text-primary dxd-back-highlighted" data-bind="css: { \'dx-expressioneditor-state-selected dxd-state-selected\': $parent.selectedItem() === $data }, dxAction: function() { $parent.selectedItem($data); $parents[2].click($data); }, event: { dblclick: function() { $parents[2].dblclick($data, $element); } }, searchHighlighting: { text: $data.displayName || $data.text, textToSearch: $parent.textToSearch }"></div>            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-content': '<div class="dx-filtereditor-tree-container" data-bind="css: { \'advanced\': advancedMode }">        <!-- ko template: \'dx-filtereditor-content-tree\' -->        <!-- /ko -->    </div>    <div class="dx-filtereditor-text-container" data-bind="css: { \'advanced\': advancedMode }, visible: textVisible">        <!-- ko template: \'dx-filtereditor-content-text\'-->        <!-- /ko -->    </div>',
                'dx-filtereditor-content-plain': '<div class="dx-filtereditor-plain-advanced" data-bind="dxCheckBox: { value: advancedMode, text: advancedModeText }"></div>    <div class="dx-filtereditor-plain-content" data-bind="style: { height: plainContentHeightPerc }">        <div class="dx-filtereditor-text-container" data-bind="css: { \'advanced\': advancedMode }, style: { height: textContentHeightPerc }">            <!-- ko template: \'dx-filtereditor-content-text\'-->            <!-- /ko -->        </div>        <div class="dx-filtereditor-tree-container" data-bind="css: { \'advanced\': advancedMode }, style: { height: treeContentHeightPerc }">            <!-- ko template: \'dx-filtereditor-content-tree\' -->            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-content-text': '<!-- ko if: !aceAvailable -->    <div class="dx-filtereditor-text" data-bind="dxTextArea: { value: displayValue, isValid: isValid, onInput: onInput, spellcheck: false }, cacheElement: { action: function(element) { cacheElement(element) } }"></div>    <!-- /ko -->    <!-- ko if: aceAvailable -->    <div class="dx-filtereditor-text dx-texteditor dx-textarea dx-editor-outlined" data-bind="css: {\'dx-invalid\': !$data.isValid(), \'dx-state-focused\': textFocused }">        <div class="dx-texteditor-container">            <div class="dx-filtereditor-ace dxd-back-primary2" data-bind="dxAceEditor: { value: $data.displayValue, theme: helper.aceTheme, editorContainer: editorContainer, options: aceOptions, additionalOptions: additionalOptions }"></div>            <div class="dx-texteditor-buttons-container"></div>        </div>    </div>    <!-- /ko -->',
                'dx-filtereditor-content-tree': '<div class="dx-filtereditor-tree dxd-border-secondary" data-bind="dxScrollView: { showScrollbar: \'onHover\', direction: \'both\' }">        <!-- ko with: operandSurface -->        <!-- ko template: { name: $data.templateName, data: $data}-->        <!-- /ko -->        <!-- /ko -->    </div>    <!-- ko ifnot: isSurfaceValid -->    <div class="dx-filtereditor-tree-lockscreen" data-bind="dxAction: function() { $data.advancedMode(true); }">        <div class="dx-filtereditor-tree-lockscreen-content">            <div class="dx-filtereditor-tree-lockscreen-content-text" data-bind="text: invalidMessage()">            </div>        </div>    </div>    <!-- /ko -->',
                'dx-filtereditor': '<div>        <div class="no-margin-right" data-bind="dxEllipsisEditor: { value: modelDisplayValue, isValid: modelValueIsValid, disabled: disabled, buttonAction: function() { popupVisible(true); } }"></div>        <!-- ko template: \'dx-filtereditor-popup\' -->        <!-- /ko -->    </div>',
                'dx-filtereditor-advanced': '<div class="dx-filtereditor" style="width: 100%; height: 100%;" data-bind="style: { pointerEvents: $data.options().disabled() ? \'none\' : \'\' }">        <!-- ko template: \'dx-filtereditor-content\' -->        <!-- /ko -->        <!-- ko template: \'dx-filtereditor-content-popups\' -->        <!-- /ko -->    </div>',
                'dx-filtereditor-plain': '<div class="dx-filtereditor" style="width: 100%; height: 100%;" data-bind="style: { pointerEvents: $data.options().disabled() ? \'none\' : \'\' }">        <!-- ko template: \'dx-filtereditor-content-plain\' -->        <!-- /ko -->        <!-- ko template: \'dx-filtereditor-content-popups\' -->        <!-- /ko -->    </div>',
                'dx-filtereditor-aggregate-common': '<!-- ko with: property-->    <!-- ko template: { name: templateName, data: $data }-->    <!-- /ko -->    <!-- /ko -->    <div data-bind="service: { name: \'createChangeType\' }"></div>    <!-- ko if: $data.aggregatedExpression() -->    <div class="criteria-operator-text dxd-filter-editor-text-color">(</div>    <!-- ko with: aggregatedExpression-->    <!-- ko template: { name: templateName, data: $data }-->    <!-- /ko -->    <!-- /ko -->    <div class="criteria-operator-text dxd-filter-editor-text-color">)</div>    <!-- /ko -->',
                'dx-filtereditor-aggregate': '<div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <!-- ko template: { name: \'dx-filtereditor-aggregate-common\' }-->            <!-- /ko -->        </div>        <div class="criteria-operator-content">            <!-- ko with: condition-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-between': '<div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <!-- ko with: property-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->            <div data-bind="service: { name: \'createChangeType\' }"></div>            <!-- ko with: begin-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->            <div class="criteria-operator-text dxd-filter-editor-text-color">and</div>            <!-- ko with: end-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-binary': '<div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <!-- ko with: leftOperand-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->            <div data-bind="service: { name: \'createChangeType\' }"></div>            <!-- ko with: rightOperand-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-common': '<!-- ko template: contentTemplateName -->    <!-- /ko -->    <!-- ko if: $data.leftPart && $data.leftPart.condition -->    <div class="criteria-operator-content">        <!-- ko with: leftPart-->        <!-- ko with: condition-->        <!-- ko template: { name: templateName, data: $data }-->        <!-- /ko -->        <!-- /ko -->        <!-- /ko -->    </div>    <!-- /ko -->',
                'dx-filtereditor-function-lightweight': '<div class="criteria-operator-text dxd-filter-editor-text-color" data-bind="css: css">        <div class="criteria-operator-text dxd-filter-editor-text-color" data-bind="text: displayType"></div>        <div data-bind="service: { name: \'createChangeValueType\' }"></div>    </div>',
                'dx-filtereditor-function': '<div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <!-- ko template: { name: $data.leftPart.templateName, data: $data.leftPart }-->            <!-- /ko -->            <div data-bind="service: { name: \'createChangeType\' }"></div>            <!-- ko foreach: rightPart -->            <!-- ko template: { name: $data.templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-group': '<div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <div class="criteria-operator-item">                <div data-bind="service: { name: \'createChangeType\' }"></div>            </div>            <div data-bind="service: { name: \'createAddButton\' }"></div>        </div>        <div class="criteria-operator-content">            <!-- ko foreach: operands -->            <!-- ko template: { name: templateName, data: $data } -->            <!-- /ko-->            <!-- /ko -->        </div>    </div>',
                'dx-filtereditor-in': '<div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <!-- ko with: criteriaOperator-->            <!-- ko template: { name: templateName, data: $data }-->            <!-- /ko -->            <!-- /ko -->            <div data-bind="service: { name: \'createChangeType\' }"></div>            <!-- ko if: $data.operands().length > 1-->            <div class="criteria-operator-item criteria-operator-text dxd-filter-editor-text-color">(</div>            <div class="criteria-operator-item">                <!-- ko foreach: $data.operands() -->                <!-- ko template: { name: $data.templateName, data: $data }-->                <!-- /ko -->                <div class="criteria-operator-item criteria-operator-text dxd-filter-editor-text-color">,</div>                <!-- /ko -->            </div>            <div class="criteria-operator-item criteria-operator-text dxd-filter-editor-text-color">)</div>            <!-- /ko -->            <!-- ko if: $data.operands().length == 1-->            <!-- ko template: { name: $data.operands()[0].templateName, data: $data.operands()[0] }-->            <!-- /ko -->            <!-- /ko -->            <div class="criteria-operator-action" data-bind="dxAction: addValue">                <div class="criteria-operator-action-image dx-image-filtereditor-add"><!-- ko template: \'dxrd-svg-filtereditor-add\' --><!-- /ko --></div>            </div>        </div>    </div>',
                'dx-filtereditor-parameter': '<div class="criteria-operator-text dxd-filter-editor-text-color" data-bind="css: css">        <div data-bind="service: { name: \'createChangeParameter\' }"></div>        <!-- ko if: $data.canChange -->        <div data-bind="service: { name: \'createChangeValueType\' }"></div>        <!-- /ko -->    </div>',
                'dx-filtereditor-property': '<div class="criteria-operator-text dxd-filter-editor-text-color" data-bind="css: css">        <div data-bind="service: { name: \'createChangeProperty\' }"></div>        <!-- ko if: $data.canChange -->        <div data-bind="service: { name: \'createChangeValueType\' }"></div>        <!-- /ko -->    </div>',
                'dx-filtereditor-unary': '<!-- ko if: $data.operand().reverse -->    <!-- ko template: {name: $data.operand().templateName, data: $data.operand() }-->    <!-- /ko -->    <!-- /ko -->    <!-- ko ifnot: $data.operand().reverse -->    <div class="criteria-operator-group">        <div class="criteria-operator-group-item">            <div class="criteria-operator-action" data-bind="dxAction: function() {  $data.remove && $data.remove(); }">                <div class="criteria-operator-action-image dx-image-filtereditor-remove" data-bind="visible: !!$data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>            </div>            <!-- ko with: operand-->            <div class="criteria-operator-item">                <!-- ko template: { name: templateName, data: $data }-->                <!-- /ko -->            </div>            <!-- /ko -->            <div data-bind="service: { name: \'createChangeType\' }"></div>        </div>    </div>    <!-- /ko -->',
                'dx-filtereditor-not': '<!-- ko with: operand-->    <!-- ko template: { name: templateName, data: $data }-->    <!-- /ko -->    <!-- /ko -->',
                'dx-filtereditor-value': '<div class="criteria-operator-item" data-bind="visible: isEditable">        <!-- ko if: $data.items.length === 0 -->        <!-- ko if: $data.specifics() === "string" || $data.specifics() === "guid" -->        <div class="criteria-operator-item-editor" data-bind="dxTextBox: { value: _value, onFocusOut: function() { isEditable(false); } }, focus: { on: isEditable }"></div>        <!-- /ko -->        <!-- ko if: $data.specifics() === "bool" -->        <div class="criteria-operator-item-editor" data-bind="focus: isEditable, dxLocalizedSelectBox: { dataSource: [ { val: \'True\', text: \'Yes\', localizationId: \'ASPxReportsStringId.ParametersPanel_True\' }, { val: \'False\', text: \'No\', localizationId: \'ASPxReportsStringId.ParametersPanel_False\' }], valueExpr: \'val\', displayExpr: \'text\', value: _value, onFocusOut: function() { isEditable(false); } }"></div>        <!-- /ko -->        <!-- ko if: $data.specifics() === "date" -->        <div class="criteria-operator-item-editor" data-bind="focus: isEditable, dxDateBox: { value: _value, closeOnValueChange: true, type: \'date\', onFocusOut: function() { isEditable(false); } }"></div>        <!-- /ko -->        <!-- ko if: $data.specifics() !== "string" && $data.specifics() !== "bool" && $data.specifics() !== "date" && $data.specifics() !== "guid" -->        <div class="criteria-operator-item-editor" data-bind="dxTextBox: getNumberEditorOptions(), focus: { on: isEditable }"></div>        <!-- /ko -->        <!-- /ko -->        <!-- ko if: $data.items.length > 0 && typeof $data.items[0] === "object" -->        <div class="criteria-operator-item-editor" data-bind="focus: isEditable, dxSelectBox: { value: _value, dataSource: dataSource, valueExpr: \'value\', displayExpr: \'display\', searchEnabled: true, onFocusOut: function() { isEditable(false); }}"></div>        <!-- /ko -->        <!-- ko if: $data.items.length > 0 && typeof $data.items[0] !== "object" -->        <div class="criteria-operator-item-editor" data-bind="focus: isEditable, dxSelectBox: { value: _value, dataSource: dataSource, acceptCustomValue: true, searchEnabled: true, onFocusOut: function() { isEditable(false); }}"></div>        <!-- /ko -->    </div>    <div class="criteria-operator-text dxd-filter-editor-text-color criteria-operator-item-value dxd-filter-editor-value-back-color" data-bind="visible: !isEditable()">        <div class="criteria-operator-text dxd-filter-editor-text-color clickable" data-bind="text: value, click: function() { isEditable(true); }, css: { \'default\': $data.isDefaultDisplay() } "></div>        <div data-bind="service: { name: \'createChangeValueType\' }"></div>    </div>',
                'dx-filtereditor-popup': '<div class="dx-filtereditor dx-popup-general" data-bind="dxPopup: {        showTitle: true,        width: \'95%\',        height: \'95%\',        title: options() && options().title(),        visible: popupVisible,        onShown: function() { $data.focusText() },        toolbarItems: buttonItems,        showCloseButton: true,        container: getPopupContainer($element),        position: { of: getPopupContainer($element) }    }">        <!-- ko template: \'dx-filtereditor-content\' -->        <!-- /ko -->    </div>    <!-- ko template: \'dx-filtereditor-content-popups\' -->    <!-- /ko -->',
                'dx-filtereditor-create': '<div class="criteria-operator-action" data-bind="dxAction: showPopup">        <div class="criteria-operator-action-image dx-image-filtereditor-add"><!-- ko template: \'dxrd-svg-filtereditor-add\' --><!-- /ko --></div>    </div>',
                'dx-filtereditor-change': '<div class="criteria-operator-text dxd-filter-editor-text-color clickable" data-bind="text: target.displayType, dxAction: showPopup, css: target.css"></div>',
                'dx-filtereditor-changeParameter': '<div class="criteria-operator-text dxd-filter-editor-text-color clickable " data-bind="text: target.parameterName(), dxAction: showPopup, css: { \'dxd-state-selected\': target.isSelected }"></div>',
                'dx-filtereditor-changeProperty': '<div class="criteria-operator-text dxd-filter-editor-text-color clickable" data-bind="text: target.displayName, dxAction: showPopup, css: { \'dxd-state-selected\': target.isSelected }"></div>',
                'dx-filtereditor-changeValueType': '<div class="criteria-operator-action" data-bind="dxAction: showPopup">        <div class="criteria-operator-action-image-edit dx-image-filtereditor-edit"><!-- ko template: \'dxrd-svg-filtereditor-edit\' --><!-- /ko --></div>    </div>',
                'dx-filtereditor-content-popups': '<div class="dx-selectbox-popup-wrapper dx-dropdownlist-popup-wrapper dx-filtereditor-criteriaoperator-popup dx-dropdowneditor-overlay" data-bind="dxPopupWithAutoHeight: { width: \'170px\', height: \'300px\', focusStateEnabled: false,    position: $data.rtl ? { my: \'right top\', at: \'right bottom\', of: popupService.target} : { my: \'left top\', at: \'left bottom\', of: popupService.target },    container: options().popupContainer,    target: popupService.target,    showTitle: false,    showCloseButton: false,    animation: {},    closeOnOutsideClick: true,    shading: false,    visible: popupService.visible }">        <!-- ko with: popupService-->        <!-- ko with: data -->        <!-- ko template: template-->        <!-- /ko -->        <!-- /ko -->        <!-- /ko -->    </div>',
                'dx-filtereditor-popup-common': '<div class="dx-widget" data-bind="dxScrollView: { showScrollbar: \'onHover\' }">        <!-- ko foreach: data -->        <!-- ko if: !$data.hidden -->        <div class="dx-filtereditor-popup-item dx-item dx-list-item dxd-list-item-back-color dxd-back-highlighted">            <span class="dx-item-content dx-list-item-content" data-bind="text: $data.displayText || $data.name, click: function() { $parent.click($data); } "></span>        </div>        <!-- /ko -->        <!-- /ko -->    </div>',
                'dx-filtereditor-popup-treelist': '<div class="dx-widget" data-bind="dxScrollView: { showScrollbar: \'onHover\' }">        <div class="dx-treelist-wrapper" data-bind="treelist: data"></div>    </div>',
                'dx-format-string-list': '<div class="dx-format-string-list dxd-format-string-editor-border-color dxd-border-secondary">        <div data-bind="dxList: { items: $data.items, selectedItems: $data.selectedItems, onItemClick: $data.action, selectionMode: \'single\', activeStateEnabled: false }">            <div data-options="dxTemplate: { name: \'item\' }" class="dx-theme-border-color">                <div class="dx-image-filtereditor-remove" data-bind="click: $parent.removeItem, visible: $data.canRemove"><!-- ko template: \'dxrd-svg-filtereditor-remove\' --><!-- /ko --></div>                <div class="dx-format-string-list-item" data-bind="text: $data.displayName"></div>            </div>        </div>    </div>',
                'dx-format-string-edit-area': '<div class="dx-format-string-content-area-title dxd-text-primary" data-bind="text: getDisplayText(\'types\')"></div>    <div class="dx-format-string-formats">        <!-- ko template: { name: \'dx-format-string-list\', data: { items: patternList, action: setFormat, removeItem: removeCustomFormat, selectedItems: selectedFormats } } -->        <!-- /ko -->        <div class="dx-format-string-customization">            <div class="dx-format-string-customization-add" data-bind="dxButton:{ onClick: addCustomFormat, text: getDisplayText(\'add\'), disabled: !canAddCustomFormat() }"></div>            <div class="dx-format-string-customization-value dx-format-string-value dxd-back-primary" data-bind="dxTextBox: { value: formatResult, onInput: function(e) { updateInputText(\'formatResult\', e.component); }  }"></div>        </div>    </div>',
                'dx-format-string-edit-area-general': '<div class="dx-format-string-content-area-title dxd-text-primary" data-bind="text: getDisplayText(\'prefix\')"></div>    <div class="dx-format-string-customization-general-value dx-format-string-value" data-bind="dxTextBox: { value: formatPrefix, onInput: function(e) { updateInputText(\'formatPrefix\', e.component); } }"></div>    <div class="dx-format-string-content-area-title dxd-text-primary" data-bind="text: getDisplayText(\'suffix\')"></div>    <div class="dx-format-string-customization-general-value dx-format-string-value" data-bind="dxTextBox: { value: formatSuffix, onInput: function(e) { updateInputText(\'formatSuffix\', e.component); } }"></div>',
                'dx-format-string': '<div>        <div class="no-margin-right" data-bind="dxEllipsisEditor: { value: value, disabled: disabled, buttonAction: function() { popupVisible(true); } }"></div>        <div class="dx-format-string dx-popup-general" data-bind="dxPopup: {            showTitle: true,            width: \'95%\',            height: \'95%\',            minWidth: 650,            title: getDisplayText(\'title\'),            visible: popupVisible,            toolbarItems: buttonItems,            showCloseButton: true,            container: getPopupContainer($element),            position: { of: getPopupContainer($element) }        }">            <div class="dx-format-string-content">                <div class="dx-format-string-content-area-left">                    <div class="dx-format-string-content-area-title dxd-text-primary" data-bind="text: getDisplayText(\'category\')"></div>                    <!-- ko template: { name: \'dx-format-string-list\', data: { items: types, action: setType, selectedItems: selectedTypes } } -->                    <!-- /ko -->                </div>                <div class="dx-format-string-content-area-right">                    <!-- ko if: !isGeneralType -->                    <!-- ko template: \'dx-format-string-edit-area\' -->                    <!-- /ko -->                    <!-- /ko -->                    <!-- ko if: isGeneralType -->                    <!-- ko template: \'dx-format-string-edit-area-general\' -->                    <!-- /ko -->                    <!-- /ko -->                    <div class="dx-format-string-preview-area" data-bind="css: { \'dx-format-general\': isGeneralType }">                        <div class="dx-format-string-preview-area-caption dxd-text-primary" data-bind="text: getDisplayText(\'preview\')"></div>                        <div class="dx-format-string-preview-value dxd-format-string-editor-border-color dxd-text-primary dxd-back-primary dxd-border-secondary">                            <span class="dx-format-string-preview-value-inner" data-bind="text: previewString"></span>                        </div>                    </div>                </div>            </div>        </div>    </div>',
                'dx-treelist-item-actions': '<!-- ko foreach: actions -->    <!-- ko if: $data.templateName -->    <!-- ko template: templateName  -->    <!-- /ko -->    <!-- /ko -->    <!-- ko if: !$data.templateName -->    <div class="dx-treelist-action" data-bind="dxButtonWithTemplate: { onClick: function() { clickAction($parent); }, icon: ko.unwrap($data.imageTemplateName), iconClass: $data.imageClassName, visible: (ko.unwrap($data.visible) == undefined) || ko.unwrap($data.visible), disabled: $data.disabled && $data.disabled() }, attr: { title: $data.displayText && $data.displayText() || text }"></div>    <!-- /ko -->    <!-- /ko -->',
                'dx-treelist-edit-action': '<div class="dx-treelist-action-edit dx-accordion-button" data-bind="dxButtonWithTemplate: { icon: \'dxrd-svg-operations-edit\', iconClass: \'dx-image-edit\',  onClick: function() { $parent.collapsed(!$parent.collapsed()); } }, visible: $parent.hasContent, attr: { title: $data.displayText() }"></div>',
                'dx-treelist-item-actions-with-edit': '<!-- ko template: { name: \'dx-treelist-edit-action\', data: treeListEditAction() }  -->    <!-- /ko -->    <!-- ko template: \'dx-treelist-item-actions\'  -->    <!-- /ko -->',
                'dx-treelist-item-ellipsis': '<div class="dx-treelist-item dxd-list-item-back-color dxd-back-highlighted" data-bind="styleunit: padding, click: renderNext">        <div class="dx-treelist-collapsedbutton"></div>        <div class="dx-treelist-caption">            <div class="dx-treelist-selectedcontent">                <div class="dx-treelist-text-wrapper">                    <div class="dx-treelist-ellipsis-text dxd-text-accented dxd-hyperlink-color" data-bind="text: $data.text()"></div>                </div>            </div>        </div>    </div>',
                'dx-treelist-item': '<div data-bind="visible: visible">        <!-- ko if: hasContent -->        <!-- ko template: "dx-treelist-accordion-item" -->        <!-- /ko -->        <!-- /ko -->        <!-- ko ifnot: hasContent -->        <!-- ko template: "dx-treelist-header-item" -->        <!-- /ko -->        <!-- /ko -->    </div>',
                'dx-treelist-accordion-item': '<div data-bind="dxdAccordionExt: { collapsed: collapsed, lazyContentRendering: true }">        <!-- ko template: "dx-treelist-header-item" -->        <!-- /ko -->        <div class="dx-fieldset dx-accordion-content dxd-back-primary">            <!-- ko with: data -->            <!-- ko template: { name: contenttemplate } -->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-treelist-header-item': '<div class="dx-treelist-item dxd-list-item-back-color dxd-back-highlighted" data-bind="event: { dblclick: function() { $data.dblClickHandler ? $data.dblClickHandler($data) : $data.toggleCollapsed() } }, styleunit: padding, css: { \'dx-treelist-item-selected dxd-state-selected\': isSelected() || isMultiSelected() }">        <!-- ko if: $data.hasItems-->        <div class="dx-treelist-collapsedbutton" data-bind="css: nodeImageClass, template: \'dxrd-svg-collapsed\', click: toggleCollapsed"></div>        <!-- /ko -->        <!-- ko ifnot: $data.hasItems-->        <div class="dx-treelist-collapsedbutton"></div>        <!-- /ko -->        <div class="dx-treelist-caption">            <!-- ko if: actions && actions.length > 0 -->            <div class="dx-treelist-action-container" data-bind="visible: isSelected">                <!-- ko template: actionsTemplate() -->                <!-- /ko -->            </div>            <!-- /ko  -->            <div class="dx-treelist-selectedcontent" data-bind="click: toggleSelected,  draggable: isDraggable ? dragDropHandler : null">                <div class="dx-treelist-image" data-bind="css: $data.imageClassName, template: {name: $data.imageTemplateName, if: !!ko.unwrap($data.imageTemplateName)}, attr: { title: text }"> </div>                <div class="dx-treelist-text-wrapper">                    <div class="dx-treelist-text" data-bind="text: text, attr: { title: text }"></div>                </div>            </div>        </div>    </div>',
                'dx-treelist-item-with-hover': '<div data-bind="visible: visible">        <!-- ko if: hasContent -->        <!-- ko template: "dx-treelist-accordion-item-with-hover" -->        <!-- /ko -->        <!-- /ko -->        <!-- ko ifnot: hasContent -->        <!-- ko template: "dx-treelist-header-item-with-hover" -->        <!-- /ko -->        <!-- /ko -->    </div>',
                'dx-treelist-accordion-item-with-hover': '<div data-bind="dxdAccordionExt: { collapsed: collapsed, lazyContentRendering: true }">        <!-- ko template: "dx-treelist-header-item-with-hover" -->        <!-- /ko -->        <div class="dx-fieldset dx-accordion-content dxd-back-primary">            <!-- ko with: data -->            <!-- ko template: { name: contenttemplate } -->            <!-- /ko -->            <!-- /ko -->        </div>    </div>',
                'dx-treelist-header-item-with-hover': '<div class="dx-background-inheritor dxd-back-highlighted dxd-state-selected">        <div class="dx-treelist-item dx-fontsize-reestablished dxd-list-item-back-color" data-bind="event: {         dblclick: function() { $data.dblClickHandler ? $data.dblClickHandler($data) : $data.toggleCollapsed() },         mouseenter: mouseenter,         mouseleave: mouseleave    }, styleunit: padding, css: { \'dx-treelist-item-selected dxd-state-selected dxd-back-secondary\': isSelected() || isMultiSelected() }">            <div class="dx-treelist-collapsedbutton" data-bind="css: nodeImageClass, template: \'dxrd-svg-collapsed\', click: toggleCollapsed, style: { \'visibility\': hasItems ? \'visible\' : \'hidden\' }"></div>            <div class="dx-treelist-caption">                <!-- ko if: actions && actions.length > 0 -->                <div class="dx-treelist-action-container" data-bind="visible: $data.isSelected() || $data.isHovered()">                    <!-- ko template: actionsTemplate() -->                    <!-- /ko -->                </div>                <!-- /ko  -->                <div class="dx-treelist-selectedcontent" data-bind="click: toggleSelected,  draggable: isDraggable ? dragDropHandler : null">                    <div class="dx-treelist-image" data-bind="css: $data.imageClassName, template: {name: $data.imageTemplateName, if: !!ko.unwrap($data.imageTemplateName)}, attr: { title: text }"> </div>                    <div class="dx-treelist-text-wrapper">                        <div class="dx-treelist-text" data-bind="text: text, attr: { title: text }"></div>                    </div>                </div>            </div>        </div>    </div>',
                'dx-treelist': '<div class="dx-treelist dxd-text-primary">        <!-- ko template: $data.visibleItems !== undefined ? \'dx-treelist-paginate\' : \'dx-treelist-common\' -->        <!-- /ko -->    </div>',
                'dx-treelist-common': '<!-- ko foreach: items -->    <!-- ko lazy: { resolver: resolver, innerBindings: { template: templateName } } -->    <!-- /ko -->    <div data-bind="visible: !collapsed()">        <!-- ko template: { name: \'dx-treelist\', data: $data } -->        <!-- /ko -->    </div>    <!-- /ko -->',
                'dx-treelist-paginate': '<!-- ko foreach: visibleItems -->    <!-- ko template: templateName -->    <!-- /ko -->    <div data-bind="visible: !collapsed()">        <!-- ko template: { name: \'dx-treelist\', data: $data } -->        <!-- /ko -->    </div>    <!-- /ko -->',
                'dxrd-borders': '<div class="dxrd-bordereditor" data-bind="dxBorderEditor: { value: value }"></div>',
                'dxrd-colorpicker': '<div data-bind="dxColorBox: { value: displayValue, editAlphaChannel: true, popupPosition: { collision: \'flipfit flipfit\' }, disabled: disabled }"></div>',
                'dxrd-expressionstring': '<!-- ko if: $data.value() -->    <div data-bind="dxExpressionEditor: getOptions({ options: value, fieldListProvider: $root.dataBindingsProvider, displayNameProvider: $root.displayNameProvider && $root.displayNameProvider() })"></div>    <!-- /ko -->',
                'dxrd-field': '<!-- ko displayNameExtender: { path: path, dataMember: value } -->    <div data-bind="dxFieldListPicker: { path: path, acceptCustomValue: true, value: value, displayValue: $displayName, itemsProvider: $root.dataBindingsProvider, treeListController: treeListController, disabled: disabled }"></div>    <!-- /ko -->',
                'dxrd-filterstring': '<!-- ko if: $data.value() -->    <div data-bind="dxFilterEditor: { options: value, fieldListProvider: $root.dataBindingsProvider, getDisplayNameByPath: $root.getDisplayNameByPath, displayNameProvider: $root.displayNameProvider && $root.displayNameProvider() }"></div>    <!-- /ko -->',
                'dxrd-filterstringgroup': '<!-- ko if: $data.value() -->    <div data-bind="dxFilterEditor: { options: value, fieldListProvider: $root.dataBindingsGroupProvider, getDisplayNameByPath: $root.getDisplayNameByPath, displayNameProvider: $root.displayNameProvider && $root.displayNameProvider() }"></div>    <!-- /ko -->',
                'dxrd-formatstring': '<div data-bind="dxFormatEditor: { value: value, disabled: disabled }"></div>',
                'dxrd-guid': '<div data-bind="dxTextBox: getOptions({ value: value, disabled: disabled }), dxValidator: { validationRules: (validationRules || []) }"></div>',
                'dxrd-emptyHeader': ' ',
                'dxrd-objectEditorContent': '<!-- ko if: $data.visible() && $data.editorCreated() -->    <div data-bind="template: { name: \'dx-propertieseditor\', data: viewmodel }"></div>    <!-- /ko -->',
                'dxrd-objectEditor': '<div data-bind="dxPropertyGrid: { target: ko.observable($data), level: $parent.level, textToSearch: $parent.textToSearch }"></div>',
                'dxrd-commonCollectionItem': '<div data-bind="dxPropertyGrid: { target: value, level: editor.level + 1, parentDisabled: editor.disabled }"></div>',
                'dxrd-controls': '<div data-bind="dxLocalizedSelectBox: { items: $root.controls, value: value, displayExpr: \'displayName\', valueExpr: \'value\', disabled: disabled }"></div>',
                'dxrd-treelistContent': '<!-- ko if: visible -->    <!-- ko if: value -->    <!-- ko with: value -->    <div data-bind="treelist: { itemsProvider: itemsProvider, selectedPath: selectedPath, treeListController: treeListController }"></div>    <!-- /ko -->    <!-- /ko -->    <!-- /ko -->',
                'dxrd-objectVisitor': '<!-- ko if: options -->    <div data-bind="treelist: options"></div>    <!-- /ko -->',
                'dxd-snap-lines-holder': '<div class="dxd-snap-lines-holder">        <div class="dxd-snap-line dxd-snap-line-horizontal" data-bind="style: { transform: snapLineSurfaces[0].transform() }"></div>        <div class="dxd-snap-line dxd-snap-line-horizontal" data-bind="style: { transform: snapLineSurfaces[1].transform() }"></div>        <div class="dxd-snap-line dxd-snap-line-vertical" data-bind="style: { transform: snapLineSurfaces[2].transform() }"></div>        <div class="dxd-snap-line dxd-snap-line-vertical" data-bind="style: { transform: snapLineSurfaces[3].transform() }"></div>    </div>',
                'dxrd-surface-template-base': '<!-- ko ifnot: isLoading -->    <!-- ko with: surface -->    <div class="dxrd-surface-wrapper" data-bind="template: templateName, click: function(_, e) { $root.selection.clickHandler($data, e); e.stopPropagation(); }">    </div>    <!-- /ko -->    <!-- /ko -->    <!-- ko if: isLoading -->    <div class="dxrd-surface-wrapper">        <div style="text-align: center; padding-top: 25%;">            <div data-bind="dxLoadIndicator: { visible: isLoading() }"></div>        </div>    </div>    <!-- /ko -->',
                'dxrd-designer': '<div data-bind="css: surfaceClass($element)">        <div class="dxrd-designer-wrapper dx-editors dxd-surface-back-color dxd-scrollbar-color" data-bind="visible: (!$data.designMode || designMode()), cssArray: [ $data.rootStyle , { \'dx-rtl\' : $data.rtl, \'dx-ltr\': !$data.rtl } ]">            <!-- ko foreach: parts -->            <!-- ko template: { name: templateName, data: model }-->            <!-- /ko -->            <!-- /ko -->        </div>        <!-- ko if: ($data.addOns) -->        <!-- ko foreach: addOns -->        <!-- ko template: { name: templateName, data: model } -->        <!-- /ko -->        <!-- /ko -->        <!-- /ko -->    </div>',
                'dxrd-collectionactions-template': '<div class="dxrd-action-items-container"></div>    <div class="dx-treelist-action" data-bind="dxButtonWithTemplate: { onClick: togglePopoverVisible, disabled: disabled, icon: ko.unwrap($data.imageTemplateName), iconClass: ko.unwrap($data.imageClassName) }, attr: { id: id, title: text }"></div>    <div data-bind="dxPopup: { width: 235, height: \'auto\',            position: { my: $root.rtl ? \'left top\': \'right top\', at: \'bottom\', of: (\'#\' + id) },            showTitle: false,            showCloseButton: false,            animation: {},            closeOnOutsideClick: true,            container: ($data.getContainer || function(_e, selector) { return selector; })($element, \'.dxrd-action-items-container\'),            shading: false,            visible: popoverVisible }">        <!-- ko foreach: actions -->        <div class="dxrd-action-item dxd-button-back-color dxd-state-normal dxd-back-highlighted" data-bind="dxAction: clickAction, css: { \'dxrd-disabled-button\': disabled }">            <div class="dxrd-action-item-image" data-bind="css: ko.unwrap($data.imageClassName), template: {name: ko.unwrap($data.imageTemplateName), if: !!ko.unwrap($data.imageTemplateName)}, attr: { title: $data.displayText && $data.displayText() || text }"> </div>        </div>        <!-- /ko -->    </div>',
                'dxrd-menubutton-template-base': '<div class="dxrd-menu-container" style="position:relative; width:0; height:100%"></div>    <div class="dxrd-menu-button dxd-toolbox-back-color dxd-border-primary dxd-back-primary2">        <div class="dxrd-menu-place" style="width:54px;"></div>        <div class="dxrd-menu-button-image dxd-button-back-color dxd-state-normal dxd-back-highlighted" data-bind="dxAction: function(e) { if(stopPropagation) { stopPropagation = false; } else { toggleAppMenu() } }, template: \'dxrd-svg-menu-menu\', css: {\'dxd-state-active\': appMenuVisible }"></div>        <div class="dxd-menu-back-color dxd-back-primary2" data-bind="dxPopup: {                             width: 250,                             height: \'100%\' ,                             position: $data.rtl ? { my: \'right top\' , at: \'left top\' , offset: \'-10 0\' } : { my: \'left top\' , at: \'right top\' , offset: \'10 0\' },                             showTitle: false,                             showCloseButton: false,                             container: getMenuPopupContainer($element),                             target: getMenuPopupTarget($element),                             animation: {},                             closeOnOutsideClick: function(e) {                                var buttonClassName = \'dxrd-menu-button-image\';                                var parentClassList = e.target.parentNode && e.target.parentNode.parentNode && e.target.parentNode.parentNode.classList;                                stopPropagation = (e.target.classList && e.target.classList.contains(buttonClassName)) || (parentClassList && parentClassList.contains(buttonClassName));                                return true;                             },                             shading: false,                             focusStateEnabled: false,                             visible: appMenuVisible }">            <div class="dxrd-menu-break dxd-popup-back-color dxd-back-primary2"></div>            <!-- ko foreach: actionLists.menuItems -->            <div class="dxrd-menu-item dxd-text-primary dxd-list-item-back-color dxd-back-highlighted" data-bind="dxAction: function(e) { if(disabled && !disabled() || !disabled) { $root.toggleAppMenu(); clickAction($root.model(), e); }}, css: { \'dxrd-disabled-button\': disabled }, visible: visible">                <div class="dxrd-menu-item-image" data-bind="css: ko.unwrap($data.imageClassName), template: {name: ko.unwrap($data.imageTemplateName), if: !!ko.unwrap($data.imageTemplateName)}, attr: { title: $data.displayText && $data.displayText() || text }"> </div>                <div class="dxrd-menu-item-text" data-bind="text: $data.displayText && $data.displayText() || text"></div>                <div class="dxrd-menu-item-separator" data-bind="visible: $data.hasSeparator"></div>            </div>            <!-- /ko -->        </div>    </div>',
                'dxrd-top-grid': '<!-- ko if: popularVisible -->    <div class="dx-fieldset">        <div data-bind="dxdAccordion: { collapsed: collapsed }">            <div class="dxrd-group-header dx-accordion-header" data-bind="css: { \'dxrd-group-header-collapsed dxd-border-primary\': collapsed() }">                <div class="dx-collapsing-image" data-bind="template: \'dxrd-svg-collapsed\', css: { \'dx-image-expanded\': !collapsed() }" style="display:inline-block;"></div>                <span class="dxrd-group-header-text" data-bind="text: $root.actionsGroupTitle()"></span>            </div>            <div class="dx-accordion-content dxd-back-primary">                <!-- ko foreach: (contextActions || []) -->                <!-- ko if: $data.templateName -->                <!-- ko template: templateName  -->                <!-- /ko -->                <!-- /ko -->                <!-- ko if: !$data.templateName -->                <div class="dxrd-properties-grid-action" data-bind="dxAction: function() { if($data.disabled && !$data.disabled() || !$data.disabled) { clickAction($root.editableObject()); } }, css: { \'dxrd-disabled-button\': $data.disabled && $data.disabled() }, visible: (ko.unwrap($data.visible) == undefined) || ko.unwrap($data.visible)">                    <div class="dxrd-properties-grid-action-image dxd-button-back-color dxd-state-normal dxd-back-highlighted" data-bind="css: $data.imageClassName, template: { name: $data.imageTemplateName, if: !!ko.unwrap($data.imageTemplateName)}, attr: { title: $data.displayText && $data.displayText() || text }"> </div>                </div>                <!-- /ko -->                <!-- /ko -->                <!-- ko with: popularProperties -->                <div style="position: relative" data-bind="template: { name: \'dx-propertieseditor\', data: $data }"></div>                <!-- /ko -->            </div>        </div>    </div>    <!-- /ko -->',
                'dxrd-propertiestab': '<div class="dxrd-properties-wrapper" data-bind="visible: active() && visible()">    <div style="height:100%" class="dxd-text-primary">        <div class="dxrd-right-panel-header">            <span data-bind="text: text"></span>        </div>        <!-- ko with: model -->        <!-- ko if: $root.controlsStore.visible() -->        <div class="dx-property-grid-header">            <div class="dx-property-grid-header-content">                <div class="dx-property-grid-sorting-actions-group" data-bind="css: { \'dx-property-gread-search-collapsed\': isSearching }">                    <div class="dxrd-properties-focused-item" data-bind="dxSelectBox: { dataSource: $root.controlsStore.dataSource, value: focusedItem, displayExpr: displayExpr }"></div>                    <div class="dx-property-grid-sorting-actions-container">                        <div class="dx-property-grid-sorting-action dxd-button-back-color dxd-state-normal dxd-back-highlighted dxd-back-primary2" data-bind="css: { \'dxd-state-active dxd-state-no-hover\': !isSortingByGroups() }, dxButtonWithTemplate: { onClick: function() { $data.isSortingByGroups(false); }, icon: \'dxrd-svg-properties-sortingbyalphabet\', iconClass: \'image-sortingbyalphabet\' }"></div>                        <div class="dx-property-grid-sorting-action dxd-button-back-color dxd-state-normal dxd-back-highlighted dxd-back-primary2" data-bind="css: { \'dxd-state-active dxd-state-no-hover\': isSortingByGroups }, dxButtonWithTemplate: { onClick: function() { $data.isSortingByGroups(true); }, icon: \'dxrd-svg-properties-sortingbygroups\', iconClass: \'image-sortingbygroups\' }"></div>                    </div>                </div>                <div class="dx-property-grid-search-group dx-property-gread-search-collapsed" data-bind="css: { \'dx-property-gread-search-collapsed\': !isSearching() }">                    <div class="dx-property-grid-sorting-action dxd-button-back-color dxd-state-normal dxd-back-highlighted dxd-back-primary2" data-bind="css: { \'dxd-state-active\': isSearching }, dxButtonWithTemplate: { onClick: switchSearchBox, icon: \'dxrd-svg-properties-search\', iconClass: \'image-search\' }"></div>                    <div class="dx-property-grid-search-box" data-bind="dxTextBox: { value: textToSearch, valueChangeEvent: \'keyup\', placeholder: searchPlaceholder(), showClearButton: true }, cacheElement: { action: function(element) { searchBox(element); } }"></div>                </div>            </div>        </div>        <!-- /ko -->        <div class="dxrd-properties-grid dxd-border-primary" data-bind="dxScrollView: { showScrollbar: \'onHover\', useNative: false, scrollByThumb: true }, styleunit: { top: $root.controlsStore.visible() ? 80 : 40 }">            <!-- ko template: { name: \'dxrd-top-grid\', data: { contextActions: $root.contextActions, popularProperties: $root.popularProperties, collapsed: ko.observable(false), popularVisible: $root.popularVisible() && isSortingByGroups(), actionsGroupTitle: $root.actionsGroupTitle } } -->            <!-- /ko -->            <div data-bind="visible: isSortingByGroups">                <!-- ko foreach: groups -->                <div class="dx-fieldset" data-bind="visible: visible">                    <div data-bind="dxdAccordion: { collapsed: collapsed }">                        <div class="dxrd-group-header dx-accordion-header" data-bind="css: { \'dxrd-group-header-collapsed dxd-border-primary\': collapsed() }">                            <div class="dx-collapsing-image" data-bind="template: \'dxrd-svg-collapsed\', css: { \'dx-image-expanded\': !collapsed() }" style="display:inline-block;"></div>                            <span class="dxrd-group-header-text" data-bind="text: displayName()"></span>                        </div>                        <div class="dx-accordion-content dxd-back-primary">                            <!-- ko ifnot: editorsCreated -->                            <div class="dx-accordion-content-loading-panel">                                <div data-bind="dxLoadIndicator: { visible: !editorsCreated() }"></div>                            </div>                            <!-- /ko -->                            <!-- ko if: $data.editorsRendered() -->                            <div data-bind="visible: editorsCreated">                                <div class="dx-editors">                                    <!-- ko foreach: editors -->                                    <!-- ko template: editorTemplate -->                                    <!-- /ko -->                                    <!-- ko if: ($index() === $parent.editors().length - 1 && $parent.editorsCreated(true)) -->                                    <!-- /ko -->                                    <!-- /ko -->                                </div>                            </div>                            <!-- /ko -->                        </div>                    </div>                </div>                <!-- /ko -->            </div>            <div class="dx-fieldset dxd-back-primary" data-bind="visible: !isSortingByGroups()">                <div data-bind="dxLoadIndicator: { visible: !allEditorsCreated() }"></div>                <!-- ko if: $data.editorsRendered() -->                <div data-bind="visible: allEditorsCreated">                    <div class="dx-editors">                        <!-- ko foreach: $data.getEditors() -->                        <!-- ko template: editorTemplate -->                        <!-- /ko -->                        <!-- ko if: ($index() === $parent._editors().length - 1 && $parent.allEditorsCreated(true)) -->                        <!-- /ko -->                        <!-- /ko -->                    </div>                </div>                <!-- /ko -->            </div>            <div data-bind="dxPopup: { width: 148, height: \'auto\',        position: $data.rtl ? { my: \'left top\', at: \'right top\', of: popupService.target } : { my: \'right top\', at: \'left top\', of: popupService.target },        container: \'.dx-designer-viewport\',        target: popupService.target,        showTitle: false,        showCloseButton: false,        animation: {},        closeOnOutsideClick: true,        shading: false,        visible: popupService.visible }">                <div data-options="dxTemplate: { name: \'content\' }">                    <!-- ko if: popupService.title -->                    <div class="dxrd-editor-menu-caption dxd-text-primary" data-bind="text: popupService.title"></div>                    <!-- /ko -->                    <!-- ko foreach: popupService.actions -->                    <!-- ko if: (!visible || visible && visible()) -->                    <div class="dxrd-editor-menu-item dxd-list-item-back-color dxd-back-highlighted dxd-state-normal" data-bind="dxAction: action">                        <div class="dxrd-menuitem-box dxd-property-grid-menu-box-color dxd-back-contrast">                            <div class="dxrd-menuitem-box-inside dxd-back-secondary"></div>                        </div>                        <span class="dxrd-editor-menu-title dxd-text-primary" data-bind="text: title"></span>                    </div>                    <!-- /ko -->                    <!-- /ko -->                </div>            </div>        </div>        <!-- /ko -->    </div></div>',
                'dx-right-panel-lightweight': '<div class="dxrd-right-panel dx-shadow dxd-border-secondary dxd-property-grid-group-header-back-color dxd-back-primary2" data-bind="styleunit: { width: tabPanel.width }, css: tabPanel.cssClasses(), resizable: tabPanel.getResizableOptions($element, \'1px\', 325)">        <!-- ko foreach: tabPanel.tabs -->        <!-- ko lazy: { template: $data.template } -->        <!-- /ko -->        <!-- /ko -->    </div>',
                'dxrd-right-panel-template-base': '<div class="dx-shadow dxd-border-secondary" data-bind="styleunit: { width: tabPanel.headerWidth }, css: tabPanel.cssClasses({\'border\': !tabPanel.collapsed()})">        <div class="dxrd-right-panel-collapse dxd-back-primary dxd-button-back-color dxd-state-normal dxd-back-highlighted" data-bind="styleunit: { width: tabPanel.headerWidth }, css: tabPanel.cssClasses(), dxAction: function() { tabPanel.collapsed(!tabPanel.collapsed()); }, attr: { title: tabPanel.toggleCollapsedText }">            <div class="dxrd-right-panel-collapse-image" data-bind="css: tabPanel.toggleCollapsedImage().class, template: tabPanel.toggleCollapsedImage().template"></div>        </div>        <div class="dxrd-right-panel dxd-property-grid-group-header-back-color dxd-back-primary2" data-bind="styleunit: { width: tabPanel.width }, css: tabPanel.cssClasses(), resizable: tabPanel.getResizableOptions($element, \'50px\', 340)">            <!-- ko foreach: tabPanel.tabs -->            <!-- ko lazy: { template: $data.template } -->            <!-- /ko -->            <!-- /ko -->        </div>        <div class="dxrd-right-tabs dxd-side-panel-tabs-back-color dxd-back-contrast" data-bind="css: tabPanel.cssClasses()">            <!-- ko foreach: tabPanel.tabs -->            <div class="dxrd-tab-item dxd-side-panel-tab-back-color dxd-back-highlighted" data-bind="dxAction: $parent.tabPanel.selectTab, css: { \'dxd-state-active dxd-state-no-hover\': active, \'dxrd-tab-item-disabled\': disabled }, attr: { title: text }, visible: visible">                <div class="dxrd-image-padding" data-bind="css: $data.imageClassName, template: {name: $data.imageTemplateName, if: !!ko.unwrap($data.imageTemplateName)}"> </div>            </div>            <!-- /ko -->        </div>    </div>',
                'dxrd-toolbar-template-base': '<div class="dxrd-toolbar-wrapper">        <div class="dxrd-toolbar" data-bind="template: {name: \'dxrd-toolbar-tmplt\', data: actionLists.toolbarItems }"></div>    </div>',
                'dxrd-toolbar-tmplt': '<!-- ko foreach: $data -->    <!-- ko if: $data.templateName -->    <!-- ko template: templateName  -->    <!-- /ko -->    <!-- /ko -->    <!-- ko if: !$data.templateName -->    <div class="dxrd-toolbar-item" data-bind="visible: visible">        <div data-bind="template: {name: ko.unwrap($data.imageTemplateName), if: !!ko.unwrap($data.imageTemplateName)}, attr: { class: \'dxrd-toolbar-item-image dxd-button-back-color dxd-state-normal dxd-back-highlighted \' + (ko.unwrap($data.imageClassName) || \'\'), title: $data.displayText && $data.displayText() || text }, dxAction: function() { if((typeof $data.disabled === \'function\') && !disabled() || !disabled) { clickAction($root.model && $root.model()); } }, css: {\'dxrd-disabled-button\': disabled, \'dxd-state-active\': $data.selected }"> </div>        <div class="dxrd-toolbar-item-separator dxd-toolbar-separator-color dxd-border-secondary" data-bind="visible: $data.hasSeparator"></div>    </div>    <!-- /ko -->    <!-- /ko -->',
                'dxrd-toolbox-template-base': '<div class="dxrd-toolbox-wrapper dxd-toolbox-back-color dxd-back-primary2" data-bind="dxScrollView: { showScrollbar: \'onHover\', scrollByContent: false, bounceEnabled: false, useNative: false, scrollByThumb: true }">        <!-- ko foreach: toolboxItems -->        <div class="dxrd-toolbox-item" data-bind="attr: { title: displayName }">            <div class="dx-background-inheritor dxd-toolbox-item-back-color dxd-back-secondary">                <div class="dxrd-image-padding dx-fontsize-reestablished" data-bind="template: {name: $data.imageTemplateName, if: !!ko.unwrap($data.imageTemplateName)}, css: $data.imageClassName, draggable: $root.toolboxDragHandler"> </div>            </div>        </div>        <!-- /ko -->    </div>',
                'dxrd-zoom-select-template': '<div class="dxrd-toolbar-item-zoom" data-bind="visible: visible">        <div class="dxrd-toolbar-item-zoom-editor" data-bind="dxSelectBox: { items: zoomLevels, value: $data.zoom, displayExpr: function(val) { return Math.round((val || this.option(\'value\')) * 100) + \'%\'; }, displayCustomValue: true, disabled: disabled }"></div>    </div>',
                'dxrd-bordereditor': '<div class="bordereditor-content">    <!-- ko with: value-->    <div class="bordereditor-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dxrd-image-borders-none" data-bind="template: \'dxrd-svg-properties-borders-none\', css: { \'dxd-state-active\': (!bottom() && !left() && !top() && !right()), \'dxrd-disabled-button\': disabled }, click: function() { setNone() }"></div>    <div class="bordereditor-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dxrd-image-borders-all right-margin" data-bind="template: \'dxrd-svg-properties-borders-all\', css: { \'dxd-state-active\': (bottom() && left() && top() && right()), \'dxrd-disabled-button\': disabled  }, click: function() { setAll() }"></div>    <div class="bordereditor-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dxrd-image-borders-left" data-bind="template: \'dxrd-svg-properties-borders-left\', css: { \'dxd-state-active\': left(), \'dxrd-disabled-button\': disabled }, click: function() { setValue(\'left\') }"></div>    <div class="bordereditor-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dxrd-image-borders-top" data-bind="template: \'dxrd-svg-properties-borders-top\', css: { \'dxd-state-active\': top(), \'dxrd-disabled-button\': disabled }, click: function() { setValue(\'top\') }"></div>    <div class="bordereditor-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dxrd-image-borders-right" data-bind="template: \'dxrd-svg-properties-borders-right\', css: { \'dxd-state-active\': right(), \'dxrd-disabled-button\': disabled }, click: function() { setValue(\'right\') }"></div>    <div class="bordereditor-button dxd-button-back-color dxd-state-normal dxd-back-highlighted dxrd-image-borders-bottom" data-bind="template: \'dxrd-svg-properties-borders-bottom\', css: { \'dxd-state-active\': bottom(), \'dxrd-disabled-button\': disabled }, click: function() { setValue(\'bottom\') }"></div>    <!-- /ko --></div>',
            });
        })(Templates = Analytics.Templates || (Analytics.Templates = {}));
    })(Analytics = DevExpress.Analytics || (DevExpress.Analytics = {}));
})(DevExpress || (DevExpress = {}));